const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/TransportWebHID-CFtm41yv.js","assets/index-BAMY2Nnw.js","assets/index-BRHuTiBx.js","assets/v4-CtRu48qb.js","assets/index-Coj7gpoU.js","assets/solanaEmbed.esm-DajA3GtM.js"])))=>i.map(i=>d[i]);
var DD=Object.defineProperty;var BD=(t,e,n)=>e in t?DD(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Oe=(t,e,n)=>BD(t,typeof e!="symbol"?e+"":e,n);function UD(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var xs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof globalThis<"u"?globalThis:typeof self<"u"?self:{};function $a(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function nb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(i){var r=Object.getOwnPropertyDescriptor(t,i);Object.defineProperty(n,i,r.get?r:{enumerable:!0,get:function(){return t[i]}})}),n}var tN={exports:{}},Pg={},nN={exports:{}},Tt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pf=Symbol.for("react.element"),OD=Symbol.for("react.portal"),jD=Symbol.for("react.fragment"),FD=Symbol.for("react.strict_mode"),zD=Symbol.for("react.profiler"),VD=Symbol.for("react.provider"),WD=Symbol.for("react.context"),HD=Symbol.for("react.forward_ref"),GD=Symbol.for("react.suspense"),$D=Symbol.for("react.memo"),YD=Symbol.for("react.lazy"),qM=Symbol.iterator;function XD(t){return t===null||typeof t!="object"?null:(t=qM&&t[qM]||t["@@iterator"],typeof t=="function"?t:null)}var iN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},rN=Object.assign,sN={};function dd(t,e,n){this.props=t,this.context=e,this.refs=sN,this.updater=n||iN}dd.prototype.isReactComponent={};dd.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};dd.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function oN(){}oN.prototype=dd.prototype;function ib(t,e,n){this.props=t,this.context=e,this.refs=sN,this.updater=n||iN}var rb=ib.prototype=new oN;rb.constructor=ib;rN(rb,dd.prototype);rb.isPureReactComponent=!0;var KM=Array.isArray,aN=Object.prototype.hasOwnProperty,sb={current:null},lN={key:!0,ref:!0,__self:!0,__source:!0};function cN(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)aN.call(e,i)&&!lN.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Pf,type:t,key:s,ref:o,props:r,_owner:sb.current}}function qD(t,e){return{$$typeof:Pf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ob(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pf}function KD(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ZM=/\/+/g;function Bx(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KD(""+t.key):e.toString(36)}function Rm(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pf:case OD:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Bx(o,0):i,KM(r)?(n="",t!=null&&(n=t.replace(ZM,"$&/")+"/"),Rm(r,e,n,"",function(c){return c})):r!=null&&(ob(r)&&(r=qD(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(ZM,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",KM(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Bx(s,a);o+=Rm(s,e,n,l,r)}else if(l=XD(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Bx(s,a++),o+=Rm(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function dp(t,e,n){if(t==null)return t;var i=[],r=0;return Rm(t,i,"","",function(s){return e.call(n,s,r++)}),i}function ZD(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $i={current:null},Lm={transition:null},QD={ReactCurrentDispatcher:$i,ReactCurrentBatchConfig:Lm,ReactCurrentOwner:sb};function uN(){throw Error("act(...) is not supported in production builds of React.")}Tt.Children={map:dp,forEach:function(t,e,n){dp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return dp(t,function(){e++}),e},toArray:function(t){return dp(t,function(e){return e})||[]},only:function(t){if(!ob(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Tt.Component=dd;Tt.Fragment=jD;Tt.Profiler=zD;Tt.PureComponent=ib;Tt.StrictMode=FD;Tt.Suspense=GD;Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QD;Tt.act=uN;Tt.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=rN({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=sb.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)aN.call(e,l)&&!lN.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Pf,type:t.type,key:r,ref:s,props:i,_owner:o}};Tt.createContext=function(t){return t={$$typeof:WD,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VD,_context:t},t.Consumer=t};Tt.createElement=cN;Tt.createFactory=function(t){var e=cN.bind(null,t);return e.type=t,e};Tt.createRef=function(){return{current:null}};Tt.forwardRef=function(t){return{$$typeof:HD,render:t}};Tt.isValidElement=ob;Tt.lazy=function(t){return{$$typeof:YD,_payload:{_status:-1,_result:t},_init:ZD}};Tt.memo=function(t,e){return{$$typeof:$D,type:t,compare:e===void 0?null:e}};Tt.startTransition=function(t){var e=Lm.transition;Lm.transition={};try{t()}finally{Lm.transition=e}};Tt.unstable_act=uN;Tt.useCallback=function(t,e){return $i.current.useCallback(t,e)};Tt.useContext=function(t){return $i.current.useContext(t)};Tt.useDebugValue=function(){};Tt.useDeferredValue=function(t){return $i.current.useDeferredValue(t)};Tt.useEffect=function(t,e){return $i.current.useEffect(t,e)};Tt.useId=function(){return $i.current.useId()};Tt.useImperativeHandle=function(t,e,n){return $i.current.useImperativeHandle(t,e,n)};Tt.useInsertionEffect=function(t,e){return $i.current.useInsertionEffect(t,e)};Tt.useLayoutEffect=function(t,e){return $i.current.useLayoutEffect(t,e)};Tt.useMemo=function(t,e){return $i.current.useMemo(t,e)};Tt.useReducer=function(t,e,n){return $i.current.useReducer(t,e,n)};Tt.useRef=function(t){return $i.current.useRef(t)};Tt.useState=function(t){return $i.current.useState(t)};Tt.useSyncExternalStore=function(t,e,n){return $i.current.useSyncExternalStore(t,e,n)};Tt.useTransition=function(){return $i.current.useTransition()};Tt.version="18.3.1";nN.exports=Tt;var F=nN.exports;const Le=$a(F),dN=UD({__proto__:null,default:Le},[F]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JD=F,e6=Symbol.for("react.element"),t6=Symbol.for("react.fragment"),n6=Object.prototype.hasOwnProperty,i6=JD.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r6={key:!0,ref:!0,__self:!0,__source:!0};function hN(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)n6.call(e,i)&&!r6.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:e6,type:t,key:s,ref:o,props:r,_owner:i6.current}}Pg.Fragment=t6;Pg.jsx=hN;Pg.jsxs=hN;tN.exports=Pg;var d=tN.exports,Xv={},fN={exports:{}},Tr={},pN={exports:{}},mN={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(C,z){var V=C.length;C.push(z);e:for(;0<V;){var U=V-1>>>1,T=C[U];if(0<r(T,z))C[U]=z,C[V]=T,V=U;else break e}}function n(C){return C.length===0?null:C[0]}function i(C){if(C.length===0)return null;var z=C[0],V=C.pop();if(V!==z){C[0]=V;e:for(var U=0,T=C.length,G=T>>>1;U<G;){var K=2*(U+1)-1,ne=C[K],Z=K+1,ee=C[Z];if(0>r(ne,V))Z<T&&0>r(ee,ne)?(C[U]=ee,C[Z]=V,U=Z):(C[U]=ne,C[K]=V,U=K);else if(Z<T&&0>r(ee,V))C[U]=ee,C[Z]=V,U=Z;else break e}}return z}function r(C,z){var V=C.sortIndex-z.sortIndex;return V!==0?V:C.id-z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,h=null,f=3,p=!1,x=!1,y=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(C){for(var z=n(c);z!==null;){if(z.callback===null)i(c);else if(z.startTime<=C)i(c),z.sortIndex=z.expirationTime,e(l,z);else break;z=n(c)}}function S(C){if(y=!1,w(C),!x)if(n(l)!==null)x=!0,E(N);else{var z=n(c);z!==null&&P(S,z.startTime-C)}}function N(C,z){x=!1,y&&(y=!1,m(B),B=-1),p=!0;var V=f;try{for(w(z),h=n(l);h!==null&&(!(h.expirationTime>z)||C&&!j());){var U=h.callback;if(typeof U=="function"){h.callback=null,f=h.priorityLevel;var T=U(h.expirationTime<=z);z=t.unstable_now(),typeof T=="function"?h.callback=T:h===n(l)&&i(l),w(z)}else i(l);h=n(l)}if(h!==null)var G=!0;else{var K=n(c);K!==null&&P(S,K.startTime-z),G=!1}return G}finally{h=null,f=V,p=!1}}var k=!1,R=null,B=-1,L=5,D=-1;function j(){return!(t.unstable_now()-D<L)}function Y(){if(R!==null){var C=t.unstable_now();D=C;var z=!0;try{z=R(!0,C)}finally{z?I():(k=!1,R=null)}}else k=!1}var I;if(typeof _=="function")I=function(){_(Y)};else if(typeof MessageChannel<"u"){var v=new MessageChannel,b=v.port2;v.port1.onmessage=Y,I=function(){b.postMessage(null)}}else I=function(){g(Y,0)};function E(C){R=C,k||(k=!0,I())}function P(C,z){B=g(function(){C(t.unstable_now())},z)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(C){C.callback=null},t.unstable_continueExecution=function(){x||p||(x=!0,E(N))},t.unstable_forceFrameRate=function(C){0>C||125<C?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<C?Math.floor(1e3/C):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(C){switch(f){case 1:case 2:case 3:var z=3;break;default:z=f}var V=f;f=z;try{return C()}finally{f=V}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(C,z){switch(C){case 1:case 2:case 3:case 4:case 5:break;default:C=3}var V=f;f=C;try{return z()}finally{f=V}},t.unstable_scheduleCallback=function(C,z,V){var U=t.unstable_now();switch(typeof V=="object"&&V!==null?(V=V.delay,V=typeof V=="number"&&0<V?U+V:U):V=U,C){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=V+T,C={id:u++,callback:z,priorityLevel:C,startTime:V,expirationTime:T,sortIndex:-1},V>U?(C.sortIndex=V,e(c,C),n(l)===null&&C===n(c)&&(y?(m(B),B=-1):y=!0,P(S,V-U))):(C.sortIndex=T,e(l,C),x||p||(x=!0,E(N))),C},t.unstable_shouldYield=j,t.unstable_wrapCallback=function(C){var z=f;return function(){var V=f;f=z;try{return C.apply(this,arguments)}finally{f=V}}}})(mN);pN.exports=mN;var s6=pN.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o6=F,Er=s6;function Ce(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gN=new Set,zh={};function hc(t,e){ju(t,e),ju(t+"Capture",e)}function ju(t,e){for(zh[t]=e,t=0;t<e.length;t++)gN.add(e[t])}var To=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),qv=Object.prototype.hasOwnProperty,a6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,QM={},JM={};function l6(t){return qv.call(JM,t)?!0:qv.call(QM,t)?!1:a6.test(t)?JM[t]=!0:(QM[t]=!0,!1)}function c6(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function u6(t,e,n,i){if(e===null||typeof e>"u"||c6(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Yi(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var vi={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){vi[t]=new Yi(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];vi[e]=new Yi(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){vi[t]=new Yi(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){vi[t]=new Yi(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){vi[t]=new Yi(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){vi[t]=new Yi(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){vi[t]=new Yi(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){vi[t]=new Yi(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){vi[t]=new Yi(t,5,!1,t.toLowerCase(),null,!1,!1)});var ab=/[\-:]([a-z])/g;function lb(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(ab,lb);vi[e]=new Yi(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(ab,lb);vi[e]=new Yi(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(ab,lb);vi[e]=new Yi(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){vi[t]=new Yi(t,1,!1,t.toLowerCase(),null,!1,!1)});vi.xlinkHref=new Yi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){vi[t]=new Yi(t,1,!1,t.toLowerCase(),null,!0,!0)});function cb(t,e,n,i){var r=vi.hasOwnProperty(e)?vi[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(u6(e,n,r,i)&&(n=null),i||r===null?l6(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var Fo=o6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,hp=Symbol.for("react.element"),tu=Symbol.for("react.portal"),nu=Symbol.for("react.fragment"),ub=Symbol.for("react.strict_mode"),Kv=Symbol.for("react.profiler"),xN=Symbol.for("react.provider"),yN=Symbol.for("react.context"),db=Symbol.for("react.forward_ref"),Zv=Symbol.for("react.suspense"),Qv=Symbol.for("react.suspense_list"),hb=Symbol.for("react.memo"),oa=Symbol.for("react.lazy"),vN=Symbol.for("react.offscreen"),e2=Symbol.iterator;function kd(t){return t===null||typeof t!="object"?null:(t=e2&&t[e2]||t["@@iterator"],typeof t=="function"?t:null)}var Tn=Object.assign,Ux;function nh(t){if(Ux===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Ux=e&&e[1]||""}return`
`+Ux+t}var Ox=!1;function jx(t,e){if(!t||Ox)return"";Ox=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){i=c}t.call(e.prototype)}else{try{throw Error()}catch(c){i=c}t()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ox=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?nh(t):""}function d6(t){switch(t.tag){case 5:return nh(t.type);case 16:return nh("Lazy");case 13:return nh("Suspense");case 19:return nh("SuspenseList");case 0:case 2:case 15:return t=jx(t.type,!1),t;case 11:return t=jx(t.type.render,!1),t;case 1:return t=jx(t.type,!0),t;default:return""}}function Jv(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case nu:return"Fragment";case tu:return"Portal";case Kv:return"Profiler";case ub:return"StrictMode";case Zv:return"Suspense";case Qv:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case yN:return(t.displayName||"Context")+".Consumer";case xN:return(t._context.displayName||"Context")+".Provider";case db:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case hb:return e=t.displayName||null,e!==null?e:Jv(t.type)||"Memo";case oa:e=t._payload,t=t._init;try{return Jv(t(e))}catch{}}return null}function h6(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Jv(e);case 8:return e===ub?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ja(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function wN(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function f6(t){var e=wN(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function fp(t){t._valueTracker||(t._valueTracker=f6(t))}function _N(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=wN(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function M0(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function e1(t,e){var n=e.checked;return Tn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function t2(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=ja(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function bN(t,e){e=e.checked,e!=null&&cb(t,"checked",e,!1)}function t1(t,e){bN(t,e);var n=ja(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?n1(t,e.type,n):e.hasOwnProperty("defaultValue")&&n1(t,e.type,ja(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function n2(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function n1(t,e,n){(e!=="number"||M0(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ih=Array.isArray;function bu(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+ja(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function i1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ce(91));return Tn({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function i2(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Ce(92));if(ih(n)){if(1<n.length)throw Error(Ce(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:ja(n)}}function SN(t,e){var n=ja(e.value),i=ja(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function r2(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function MN(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function r1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?MN(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var pp,EN=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(pp=pp||document.createElement("div"),pp.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=pp.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Vh(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var vh={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},p6=["Webkit","ms","Moz","O"];Object.keys(vh).forEach(function(t){p6.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vh[e]=vh[t]})});function TN(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||vh.hasOwnProperty(t)&&vh[t]?(""+e).trim():e+"px"}function AN(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=TN(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var m6=Tn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function s1(t,e){if(e){if(m6[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ce(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ce(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ce(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ce(62))}}function o1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var a1=null;function fb(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var l1=null,Su=null,Mu=null;function s2(t){if(t=Uf(t)){if(typeof l1!="function")throw Error(Ce(280));var e=t.stateNode;e&&(e=jg(e),l1(t.stateNode,t.type,e))}}function CN(t){Su?Mu?Mu.push(t):Mu=[t]:Su=t}function NN(){if(Su){var t=Su,e=Mu;if(Mu=Su=null,s2(t),e)for(t=0;t<e.length;t++)s2(e[t])}}function RN(t,e){return t(e)}function LN(){}var Fx=!1;function IN(t,e,n){if(Fx)return t(e,n);Fx=!0;try{return RN(t,e,n)}finally{Fx=!1,(Su!==null||Mu!==null)&&(LN(),NN())}}function Wh(t,e){var n=t.stateNode;if(n===null)return null;var i=jg(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Ce(231,e,typeof n));return n}var c1=!1;if(To)try{var Pd={};Object.defineProperty(Pd,"passive",{get:function(){c1=!0}}),window.addEventListener("test",Pd,Pd),window.removeEventListener("test",Pd,Pd)}catch{c1=!1}function g6(t,e,n,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var wh=!1,E0=null,T0=!1,u1=null,x6={onError:function(t){wh=!0,E0=t}};function y6(t,e,n,i,r,s,o,a,l){wh=!1,E0=null,g6.apply(x6,arguments)}function v6(t,e,n,i,r,s,o,a,l){if(y6.apply(this,arguments),wh){if(wh){var c=E0;wh=!1,E0=null}else throw Error(Ce(198));T0||(T0=!0,u1=c)}}function fc(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function kN(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function o2(t){if(fc(t)!==t)throw Error(Ce(188))}function w6(t){var e=t.alternate;if(!e){if(e=fc(t),e===null)throw Error(Ce(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return o2(r),t;if(s===i)return o2(r),e;s=s.sibling}throw Error(Ce(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(Ce(189))}}if(n.alternate!==i)throw Error(Ce(190))}if(n.tag!==3)throw Error(Ce(188));return n.stateNode.current===n?t:e}function PN(t){return t=w6(t),t!==null?DN(t):null}function DN(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=DN(t);if(e!==null)return e;t=t.sibling}return null}var BN=Er.unstable_scheduleCallback,a2=Er.unstable_cancelCallback,_6=Er.unstable_shouldYield,b6=Er.unstable_requestPaint,Un=Er.unstable_now,S6=Er.unstable_getCurrentPriorityLevel,pb=Er.unstable_ImmediatePriority,UN=Er.unstable_UserBlockingPriority,A0=Er.unstable_NormalPriority,M6=Er.unstable_LowPriority,ON=Er.unstable_IdlePriority,Dg=null,Us=null;function E6(t){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(Dg,t,void 0,(t.current.flags&128)===128)}catch{}}var fs=Math.clz32?Math.clz32:C6,T6=Math.log,A6=Math.LN2;function C6(t){return t>>>=0,t===0?32:31-(T6(t)/A6|0)|0}var mp=64,gp=4194304;function rh(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function C0(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=rh(a):(s&=o,s!==0&&(i=rh(s)))}else o=n&~r,o!==0?i=rh(o):s!==0&&(i=rh(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-fs(e),r=1<<n,i|=t[n],e&=~r;return i}function N6(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function R6(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-fs(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=N6(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function d1(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function jN(){var t=mp;return mp<<=1,!(mp&4194240)&&(mp=64),t}function zx(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Df(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-fs(e),t[e]=n}function L6(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-fs(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function mb(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-fs(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var zt=0;function FN(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var zN,gb,VN,WN,HN,h1=!1,xp=[],Ma=null,Ea=null,Ta=null,Hh=new Map,Gh=new Map,ua=[],I6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function l2(t,e){switch(t){case"focusin":case"focusout":Ma=null;break;case"dragenter":case"dragleave":Ea=null;break;case"mouseover":case"mouseout":Ta=null;break;case"pointerover":case"pointerout":Hh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Gh.delete(e.pointerId)}}function Dd(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Uf(e),e!==null&&gb(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function k6(t,e,n,i,r){switch(e){case"focusin":return Ma=Dd(Ma,t,e,n,i,r),!0;case"dragenter":return Ea=Dd(Ea,t,e,n,i,r),!0;case"mouseover":return Ta=Dd(Ta,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return Hh.set(s,Dd(Hh.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Gh.set(s,Dd(Gh.get(s)||null,t,e,n,i,r)),!0}return!1}function GN(t){var e=Nl(t.target);if(e!==null){var n=fc(e);if(n!==null){if(e=n.tag,e===13){if(e=kN(n),e!==null){t.blockedOn=e,HN(t.priority,function(){VN(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Im(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=f1(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);a1=i,n.target.dispatchEvent(i),a1=null}else return e=Uf(n),e!==null&&gb(e),t.blockedOn=n,!1;e.shift()}return!0}function c2(t,e,n){Im(t)&&n.delete(e)}function P6(){h1=!1,Ma!==null&&Im(Ma)&&(Ma=null),Ea!==null&&Im(Ea)&&(Ea=null),Ta!==null&&Im(Ta)&&(Ta=null),Hh.forEach(c2),Gh.forEach(c2)}function Bd(t,e){t.blockedOn===e&&(t.blockedOn=null,h1||(h1=!0,Er.unstable_scheduleCallback(Er.unstable_NormalPriority,P6)))}function $h(t){function e(r){return Bd(r,t)}if(0<xp.length){Bd(xp[0],t);for(var n=1;n<xp.length;n++){var i=xp[n];i.blockedOn===t&&(i.blockedOn=null)}}for(Ma!==null&&Bd(Ma,t),Ea!==null&&Bd(Ea,t),Ta!==null&&Bd(Ta,t),Hh.forEach(e),Gh.forEach(e),n=0;n<ua.length;n++)i=ua[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<ua.length&&(n=ua[0],n.blockedOn===null);)GN(n),n.blockedOn===null&&ua.shift()}var Eu=Fo.ReactCurrentBatchConfig,N0=!0;function D6(t,e,n,i){var r=zt,s=Eu.transition;Eu.transition=null;try{zt=1,xb(t,e,n,i)}finally{zt=r,Eu.transition=s}}function B6(t,e,n,i){var r=zt,s=Eu.transition;Eu.transition=null;try{zt=4,xb(t,e,n,i)}finally{zt=r,Eu.transition=s}}function xb(t,e,n,i){if(N0){var r=f1(t,e,n,i);if(r===null)Zx(t,e,i,R0,n),l2(t,i);else if(k6(r,t,e,n,i))i.stopPropagation();else if(l2(t,i),e&4&&-1<I6.indexOf(t)){for(;r!==null;){var s=Uf(r);if(s!==null&&zN(s),s=f1(t,e,n,i),s===null&&Zx(t,e,i,R0,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Zx(t,e,i,null,n)}}var R0=null;function f1(t,e,n,i){if(R0=null,t=fb(i),t=Nl(t),t!==null)if(e=fc(t),e===null)t=null;else if(n=e.tag,n===13){if(t=kN(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return R0=t,null}function $N(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(S6()){case pb:return 1;case UN:return 4;case A0:case M6:return 16;case ON:return 536870912;default:return 16}default:return 16}}var pa=null,yb=null,km=null;function YN(){if(km)return km;var t,e=yb,n=e.length,i,r="value"in pa?pa.value:pa.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return km=r.slice(t,1<i?1-i:void 0)}function Pm(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function yp(){return!0}function u2(){return!1}function Ar(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?yp:u2,this.isPropagationStopped=u2,this}return Tn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=yp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=yp)},persist:function(){},isPersistent:yp}),e}var hd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vb=Ar(hd),Bf=Tn({},hd,{view:0,detail:0}),U6=Ar(Bf),Vx,Wx,Ud,Bg=Tn({},Bf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:wb,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ud&&(Ud&&t.type==="mousemove"?(Vx=t.screenX-Ud.screenX,Wx=t.screenY-Ud.screenY):Wx=Vx=0,Ud=t),Vx)},movementY:function(t){return"movementY"in t?t.movementY:Wx}}),d2=Ar(Bg),O6=Tn({},Bg,{dataTransfer:0}),j6=Ar(O6),F6=Tn({},Bf,{relatedTarget:0}),Hx=Ar(F6),z6=Tn({},hd,{animationName:0,elapsedTime:0,pseudoElement:0}),V6=Ar(z6),W6=Tn({},hd,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H6=Ar(W6),G6=Tn({},hd,{data:0}),h2=Ar(G6),$6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function q6(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=X6[t])?!!e[t]:!1}function wb(){return q6}var K6=Tn({},Bf,{key:function(t){if(t.key){var e=$6[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pm(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y6[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:wb,charCode:function(t){return t.type==="keypress"?Pm(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pm(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Z6=Ar(K6),Q6=Tn({},Bg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),f2=Ar(Q6),J6=Tn({},Bf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:wb}),eB=Ar(J6),tB=Tn({},hd,{propertyName:0,elapsedTime:0,pseudoElement:0}),nB=Ar(tB),iB=Tn({},Bg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rB=Ar(iB),sB=[9,13,27,32],_b=To&&"CompositionEvent"in window,_h=null;To&&"documentMode"in document&&(_h=document.documentMode);var oB=To&&"TextEvent"in window&&!_h,XN=To&&(!_b||_h&&8<_h&&11>=_h),p2=" ",m2=!1;function qN(t,e){switch(t){case"keyup":return sB.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function KN(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var iu=!1;function aB(t,e){switch(t){case"compositionend":return KN(e);case"keypress":return e.which!==32?null:(m2=!0,p2);case"textInput":return t=e.data,t===p2&&m2?null:t;default:return null}}function lB(t,e){if(iu)return t==="compositionend"||!_b&&qN(t,e)?(t=YN(),km=yb=pa=null,iu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return XN&&e.locale!=="ko"?null:e.data;default:return null}}var cB={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function g2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cB[t.type]:e==="textarea"}function ZN(t,e,n,i){CN(i),e=L0(e,"onChange"),0<e.length&&(n=new vb("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var bh=null,Yh=null;function uB(t){lR(t,0)}function Ug(t){var e=ou(t);if(_N(e))return t}function dB(t,e){if(t==="change")return e}var QN=!1;if(To){var Gx;if(To){var $x="oninput"in document;if(!$x){var x2=document.createElement("div");x2.setAttribute("oninput","return;"),$x=typeof x2.oninput=="function"}Gx=$x}else Gx=!1;QN=Gx&&(!document.documentMode||9<document.documentMode)}function y2(){bh&&(bh.detachEvent("onpropertychange",JN),Yh=bh=null)}function JN(t){if(t.propertyName==="value"&&Ug(Yh)){var e=[];ZN(e,Yh,t,fb(t)),IN(uB,e)}}function hB(t,e,n){t==="focusin"?(y2(),bh=e,Yh=n,bh.attachEvent("onpropertychange",JN)):t==="focusout"&&y2()}function fB(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Ug(Yh)}function pB(t,e){if(t==="click")return Ug(e)}function mB(t,e){if(t==="input"||t==="change")return Ug(e)}function gB(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ys=typeof Object.is=="function"?Object.is:gB;function Xh(t,e){if(ys(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!qv.call(e,r)||!ys(t[r],e[r]))return!1}return!0}function v2(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function w2(t,e){var n=v2(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=v2(n)}}function eR(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?eR(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function tR(){for(var t=window,e=M0();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=M0(t.document)}return e}function bb(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function xB(t){var e=tR(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&eR(n.ownerDocument.documentElement,n)){if(i!==null&&bb(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=w2(n,s);var o=w2(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yB=To&&"documentMode"in document&&11>=document.documentMode,ru=null,p1=null,Sh=null,m1=!1;function _2(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;m1||ru==null||ru!==M0(i)||(i=ru,"selectionStart"in i&&bb(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Sh&&Xh(Sh,i)||(Sh=i,i=L0(p1,"onSelect"),0<i.length&&(e=new vb("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=ru)))}function vp(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var su={animationend:vp("Animation","AnimationEnd"),animationiteration:vp("Animation","AnimationIteration"),animationstart:vp("Animation","AnimationStart"),transitionend:vp("Transition","TransitionEnd")},Yx={},nR={};To&&(nR=document.createElement("div").style,"AnimationEvent"in window||(delete su.animationend.animation,delete su.animationiteration.animation,delete su.animationstart.animation),"TransitionEvent"in window||delete su.transitionend.transition);function Og(t){if(Yx[t])return Yx[t];if(!su[t])return t;var e=su[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in nR)return Yx[t]=e[n];return t}var iR=Og("animationend"),rR=Og("animationiteration"),sR=Og("animationstart"),oR=Og("transitionend"),aR=new Map,b2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ya(t,e){aR.set(t,e),hc(e,[t])}for(var Xx=0;Xx<b2.length;Xx++){var qx=b2[Xx],vB=qx.toLowerCase(),wB=qx[0].toUpperCase()+qx.slice(1);Ya(vB,"on"+wB)}Ya(iR,"onAnimationEnd");Ya(rR,"onAnimationIteration");Ya(sR,"onAnimationStart");Ya("dblclick","onDoubleClick");Ya("focusin","onFocus");Ya("focusout","onBlur");Ya(oR,"onTransitionEnd");ju("onMouseEnter",["mouseout","mouseover"]);ju("onMouseLeave",["mouseout","mouseover"]);ju("onPointerEnter",["pointerout","pointerover"]);ju("onPointerLeave",["pointerout","pointerover"]);hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var sh="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_B=new Set("cancel close invalid load scroll toggle".split(" ").concat(sh));function S2(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,v6(i,e,void 0,t),t.currentTarget=null}function lR(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;S2(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;S2(r,a,c),s=l}}}if(T0)throw t=u1,T0=!1,u1=null,t}function nn(t,e){var n=e[w1];n===void 0&&(n=e[w1]=new Set);var i=t+"__bubble";n.has(i)||(cR(e,t,2,!1),n.add(i))}function Kx(t,e,n){var i=0;e&&(i|=4),cR(n,t,i,e)}var wp="_reactListening"+Math.random().toString(36).slice(2);function qh(t){if(!t[wp]){t[wp]=!0,gN.forEach(function(n){n!=="selectionchange"&&(_B.has(n)||Kx(n,!1,t),Kx(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[wp]||(e[wp]=!0,Kx("selectionchange",!1,e))}}function cR(t,e,n,i){switch($N(e)){case 1:var r=D6;break;case 4:r=B6;break;default:r=xb}n=r.bind(null,e,n,t),r=void 0,!c1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Zx(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Nl(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}IN(function(){var c=s,u=fb(n),h=[];e:{var f=aR.get(t);if(f!==void 0){var p=vb,x=t;switch(t){case"keypress":if(Pm(n)===0)break e;case"keydown":case"keyup":p=Z6;break;case"focusin":x="focus",p=Hx;break;case"focusout":x="blur",p=Hx;break;case"beforeblur":case"afterblur":p=Hx;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=d2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=j6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=eB;break;case iR:case rR:case sR:p=V6;break;case oR:p=nB;break;case"scroll":p=U6;break;case"wheel":p=rB;break;case"copy":case"cut":case"paste":p=H6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=f2}var y=(e&4)!==0,g=!y&&t==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var _=c,w;_!==null;){w=_;var S=w.stateNode;if(w.tag===5&&S!==null&&(w=S,m!==null&&(S=Wh(_,m),S!=null&&y.push(Kh(_,S,w)))),g)break;_=_.return}0<y.length&&(f=new p(f,x,null,n,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==a1&&(x=n.relatedTarget||n.fromElement)&&(Nl(x)||x[Ao]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(x=n.relatedTarget||n.toElement,p=c,x=x?Nl(x):null,x!==null&&(g=fc(x),x!==g||x.tag!==5&&x.tag!==6)&&(x=null)):(p=null,x=c),p!==x)){if(y=d2,S="onMouseLeave",m="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(y=f2,S="onPointerLeave",m="onPointerEnter",_="pointer"),g=p==null?f:ou(p),w=x==null?f:ou(x),f=new y(S,_+"leave",p,n,u),f.target=g,f.relatedTarget=w,S=null,Nl(u)===c&&(y=new y(m,_+"enter",x,n,u),y.target=w,y.relatedTarget=g,S=y),g=S,p&&x)t:{for(y=p,m=x,_=0,w=y;w;w=Ec(w))_++;for(w=0,S=m;S;S=Ec(S))w++;for(;0<_-w;)y=Ec(y),_--;for(;0<w-_;)m=Ec(m),w--;for(;_--;){if(y===m||m!==null&&y===m.alternate)break t;y=Ec(y),m=Ec(m)}y=null}else y=null;p!==null&&M2(h,f,p,y,!1),x!==null&&g!==null&&M2(h,g,x,y,!0)}}e:{if(f=c?ou(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var N=dB;else if(g2(f))if(QN)N=mB;else{N=fB;var k=hB}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(N=pB);if(N&&(N=N(t,c))){ZN(h,N,n,u);break e}k&&k(t,f,c),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&n1(f,"number",f.value)}switch(k=c?ou(c):window,t){case"focusin":(g2(k)||k.contentEditable==="true")&&(ru=k,p1=c,Sh=null);break;case"focusout":Sh=p1=ru=null;break;case"mousedown":m1=!0;break;case"contextmenu":case"mouseup":case"dragend":m1=!1,_2(h,n,u);break;case"selectionchange":if(yB)break;case"keydown":case"keyup":_2(h,n,u)}var R;if(_b)e:{switch(t){case"compositionstart":var B="onCompositionStart";break e;case"compositionend":B="onCompositionEnd";break e;case"compositionupdate":B="onCompositionUpdate";break e}B=void 0}else iu?qN(t,n)&&(B="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(B="onCompositionStart");B&&(XN&&n.locale!=="ko"&&(iu||B!=="onCompositionStart"?B==="onCompositionEnd"&&iu&&(R=YN()):(pa=u,yb="value"in pa?pa.value:pa.textContent,iu=!0)),k=L0(c,B),0<k.length&&(B=new h2(B,t,null,n,u),h.push({event:B,listeners:k}),R?B.data=R:(R=KN(n),R!==null&&(B.data=R)))),(R=oB?aB(t,n):lB(t,n))&&(c=L0(c,"onBeforeInput"),0<c.length&&(u=new h2("onBeforeInput","beforeinput",null,n,u),h.push({event:u,listeners:c}),u.data=R))}lR(h,e)})}function Kh(t,e,n){return{instance:t,listener:e,currentTarget:n}}function L0(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Wh(t,n),s!=null&&i.unshift(Kh(t,s,r)),s=Wh(t,e),s!=null&&i.push(Kh(t,s,r))),t=t.return}return i}function Ec(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function M2(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Wh(n,s),l!=null&&o.unshift(Kh(n,l,a))):r||(l=Wh(n,s),l!=null&&o.push(Kh(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var bB=/\r\n?/g,SB=/\u0000|\uFFFD/g;function E2(t){return(typeof t=="string"?t:""+t).replace(bB,`
`).replace(SB,"")}function _p(t,e,n){if(e=E2(e),E2(t)!==e&&n)throw Error(Ce(425))}function I0(){}var g1=null,x1=null;function y1(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var v1=typeof setTimeout=="function"?setTimeout:void 0,MB=typeof clearTimeout=="function"?clearTimeout:void 0,T2=typeof Promise=="function"?Promise:void 0,EB=typeof queueMicrotask=="function"?queueMicrotask:typeof T2<"u"?function(t){return T2.resolve(null).then(t).catch(TB)}:v1;function TB(t){setTimeout(function(){throw t})}function Qx(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),$h(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);$h(e)}function Aa(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function A2(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var fd=Math.random().toString(36).slice(2),Ns="__reactFiber$"+fd,Zh="__reactProps$"+fd,Ao="__reactContainer$"+fd,w1="__reactEvents$"+fd,AB="__reactListeners$"+fd,CB="__reactHandles$"+fd;function Nl(t){var e=t[Ns];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Ao]||n[Ns]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=A2(t);t!==null;){if(n=t[Ns])return n;t=A2(t)}return e}t=n,n=t.parentNode}return null}function Uf(t){return t=t[Ns]||t[Ao],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ou(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Ce(33))}function jg(t){return t[Zh]||null}var _1=[],au=-1;function Xa(t){return{current:t}}function sn(t){0>au||(t.current=_1[au],_1[au]=null,au--)}function Jt(t,e){au++,_1[au]=t.current,t.current=e}var Fa={},Bi=Xa(Fa),sr=Xa(!1),ic=Fa;function Fu(t,e){var n=t.type.contextTypes;if(!n)return Fa;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function or(t){return t=t.childContextTypes,t!=null}function k0(){sn(sr),sn(Bi)}function C2(t,e,n){if(Bi.current!==Fa)throw Error(Ce(168));Jt(Bi,e),Jt(sr,n)}function uR(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Ce(108,h6(t)||"Unknown",r));return Tn({},n,i)}function P0(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fa,ic=Bi.current,Jt(Bi,t),Jt(sr,sr.current),!0}function N2(t,e,n){var i=t.stateNode;if(!i)throw Error(Ce(169));n?(t=uR(t,e,ic),i.__reactInternalMemoizedMergedChildContext=t,sn(sr),sn(Bi),Jt(Bi,t)):sn(sr),Jt(sr,n)}var co=null,Fg=!1,Jx=!1;function dR(t){co===null?co=[t]:co.push(t)}function NB(t){Fg=!0,dR(t)}function qa(){if(!Jx&&co!==null){Jx=!0;var t=0,e=zt;try{var n=co;for(zt=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}co=null,Fg=!1}catch(r){throw co!==null&&(co=co.slice(t+1)),BN(pb,qa),r}finally{zt=e,Jx=!1}}return null}var lu=[],cu=0,D0=null,B0=0,Fr=[],zr=0,rc=null,wo=1,_o="";function pl(t,e){lu[cu++]=B0,lu[cu++]=D0,D0=t,B0=e}function hR(t,e,n){Fr[zr++]=wo,Fr[zr++]=_o,Fr[zr++]=rc,rc=t;var i=wo;t=_o;var r=32-fs(i)-1;i&=~(1<<r),n+=1;var s=32-fs(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,wo=1<<32-fs(e)+r|n<<r|i,_o=s+t}else wo=1<<s|n<<r|i,_o=t}function Sb(t){t.return!==null&&(pl(t,1),hR(t,1,0))}function Mb(t){for(;t===D0;)D0=lu[--cu],lu[cu]=null,B0=lu[--cu],lu[cu]=null;for(;t===rc;)rc=Fr[--zr],Fr[zr]=null,_o=Fr[--zr],Fr[zr]=null,wo=Fr[--zr],Fr[zr]=null}var Sr=null,_r=null,hn=!1,as=null;function fR(t,e){var n=Wr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function R2(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Sr=t,_r=Aa(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Sr=t,_r=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=rc!==null?{id:wo,overflow:_o}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Sr=t,_r=null,!0):!1;default:return!1}}function b1(t){return(t.mode&1)!==0&&(t.flags&128)===0}function S1(t){if(hn){var e=_r;if(e){var n=e;if(!R2(t,e)){if(b1(t))throw Error(Ce(418));e=Aa(n.nextSibling);var i=Sr;e&&R2(t,e)?fR(i,n):(t.flags=t.flags&-4097|2,hn=!1,Sr=t)}}else{if(b1(t))throw Error(Ce(418));t.flags=t.flags&-4097|2,hn=!1,Sr=t}}}function L2(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Sr=t}function bp(t){if(t!==Sr)return!1;if(!hn)return L2(t),hn=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!y1(t.type,t.memoizedProps)),e&&(e=_r)){if(b1(t))throw pR(),Error(Ce(418));for(;e;)fR(t,e),e=Aa(e.nextSibling)}if(L2(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Ce(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){_r=Aa(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}_r=null}}else _r=Sr?Aa(t.stateNode.nextSibling):null;return!0}function pR(){for(var t=_r;t;)t=Aa(t.nextSibling)}function zu(){_r=Sr=null,hn=!1}function Eb(t){as===null?as=[t]:as.push(t)}var RB=Fo.ReactCurrentBatchConfig;function Od(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Ce(309));var i=n.stateNode}if(!i)throw Error(Ce(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(Ce(284));if(!n._owner)throw Error(Ce(290,t))}return t}function Sp(t,e){throw t=Object.prototype.toString.call(e),Error(Ce(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function I2(t){var e=t._init;return e(t._payload)}function mR(t){function e(m,_){if(t){var w=m.deletions;w===null?(m.deletions=[_],m.flags|=16):w.push(_)}}function n(m,_){if(!t)return null;for(;_!==null;)e(m,_),_=_.sibling;return null}function i(m,_){for(m=new Map;_!==null;)_.key!==null?m.set(_.key,_):m.set(_.index,_),_=_.sibling;return m}function r(m,_){return m=La(m,_),m.index=0,m.sibling=null,m}function s(m,_,w){return m.index=w,t?(w=m.alternate,w!==null?(w=w.index,w<_?(m.flags|=2,_):w):(m.flags|=2,_)):(m.flags|=1048576,_)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,_,w,S){return _===null||_.tag!==6?(_=oy(w,m.mode,S),_.return=m,_):(_=r(_,w),_.return=m,_)}function l(m,_,w,S){var N=w.type;return N===nu?u(m,_,w.props.children,S,w.key):_!==null&&(_.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===oa&&I2(N)===_.type)?(S=r(_,w.props),S.ref=Od(m,_,w),S.return=m,S):(S=zm(w.type,w.key,w.props,null,m.mode,S),S.ref=Od(m,_,w),S.return=m,S)}function c(m,_,w,S){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=ay(w,m.mode,S),_.return=m,_):(_=r(_,w.children||[]),_.return=m,_)}function u(m,_,w,S,N){return _===null||_.tag!==7?(_=ql(w,m.mode,S,N),_.return=m,_):(_=r(_,w),_.return=m,_)}function h(m,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=oy(""+_,m.mode,w),_.return=m,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case hp:return w=zm(_.type,_.key,_.props,null,m.mode,w),w.ref=Od(m,null,_),w.return=m,w;case tu:return _=ay(_,m.mode,w),_.return=m,_;case oa:var S=_._init;return h(m,S(_._payload),w)}if(ih(_)||kd(_))return _=ql(_,m.mode,w,null),_.return=m,_;Sp(m,_)}return null}function f(m,_,w,S){var N=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:a(m,_,""+w,S);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case hp:return w.key===N?l(m,_,w,S):null;case tu:return w.key===N?c(m,_,w,S):null;case oa:return N=w._init,f(m,_,N(w._payload),S)}if(ih(w)||kd(w))return N!==null?null:u(m,_,w,S,null);Sp(m,w)}return null}function p(m,_,w,S,N){if(typeof S=="string"&&S!==""||typeof S=="number")return m=m.get(w)||null,a(_,m,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case hp:return m=m.get(S.key===null?w:S.key)||null,l(_,m,S,N);case tu:return m=m.get(S.key===null?w:S.key)||null,c(_,m,S,N);case oa:var k=S._init;return p(m,_,w,k(S._payload),N)}if(ih(S)||kd(S))return m=m.get(w)||null,u(_,m,S,N,null);Sp(_,S)}return null}function x(m,_,w,S){for(var N=null,k=null,R=_,B=_=0,L=null;R!==null&&B<w.length;B++){R.index>B?(L=R,R=null):L=R.sibling;var D=f(m,R,w[B],S);if(D===null){R===null&&(R=L);break}t&&R&&D.alternate===null&&e(m,R),_=s(D,_,B),k===null?N=D:k.sibling=D,k=D,R=L}if(B===w.length)return n(m,R),hn&&pl(m,B),N;if(R===null){for(;B<w.length;B++)R=h(m,w[B],S),R!==null&&(_=s(R,_,B),k===null?N=R:k.sibling=R,k=R);return hn&&pl(m,B),N}for(R=i(m,R);B<w.length;B++)L=p(R,m,B,w[B],S),L!==null&&(t&&L.alternate!==null&&R.delete(L.key===null?B:L.key),_=s(L,_,B),k===null?N=L:k.sibling=L,k=L);return t&&R.forEach(function(j){return e(m,j)}),hn&&pl(m,B),N}function y(m,_,w,S){var N=kd(w);if(typeof N!="function")throw Error(Ce(150));if(w=N.call(w),w==null)throw Error(Ce(151));for(var k=N=null,R=_,B=_=0,L=null,D=w.next();R!==null&&!D.done;B++,D=w.next()){R.index>B?(L=R,R=null):L=R.sibling;var j=f(m,R,D.value,S);if(j===null){R===null&&(R=L);break}t&&R&&j.alternate===null&&e(m,R),_=s(j,_,B),k===null?N=j:k.sibling=j,k=j,R=L}if(D.done)return n(m,R),hn&&pl(m,B),N;if(R===null){for(;!D.done;B++,D=w.next())D=h(m,D.value,S),D!==null&&(_=s(D,_,B),k===null?N=D:k.sibling=D,k=D);return hn&&pl(m,B),N}for(R=i(m,R);!D.done;B++,D=w.next())D=p(R,m,B,D.value,S),D!==null&&(t&&D.alternate!==null&&R.delete(D.key===null?B:D.key),_=s(D,_,B),k===null?N=D:k.sibling=D,k=D);return t&&R.forEach(function(Y){return e(m,Y)}),hn&&pl(m,B),N}function g(m,_,w,S){if(typeof w=="object"&&w!==null&&w.type===nu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case hp:e:{for(var N=w.key,k=_;k!==null;){if(k.key===N){if(N=w.type,N===nu){if(k.tag===7){n(m,k.sibling),_=r(k,w.props.children),_.return=m,m=_;break e}}else if(k.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===oa&&I2(N)===k.type){n(m,k.sibling),_=r(k,w.props),_.ref=Od(m,k,w),_.return=m,m=_;break e}n(m,k);break}else e(m,k);k=k.sibling}w.type===nu?(_=ql(w.props.children,m.mode,S,w.key),_.return=m,m=_):(S=zm(w.type,w.key,w.props,null,m.mode,S),S.ref=Od(m,_,w),S.return=m,m=S)}return o(m);case tu:e:{for(k=w.key;_!==null;){if(_.key===k)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){n(m,_.sibling),_=r(_,w.children||[]),_.return=m,m=_;break e}else{n(m,_);break}else e(m,_);_=_.sibling}_=ay(w,m.mode,S),_.return=m,m=_}return o(m);case oa:return k=w._init,g(m,_,k(w._payload),S)}if(ih(w))return x(m,_,w,S);if(kd(w))return y(m,_,w,S);Sp(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(n(m,_.sibling),_=r(_,w),_.return=m,m=_):(n(m,_),_=oy(w,m.mode,S),_.return=m,m=_),o(m)):n(m,_)}return g}var Vu=mR(!0),gR=mR(!1),U0=Xa(null),O0=null,uu=null,Tb=null;function Ab(){Tb=uu=O0=null}function Cb(t){var e=U0.current;sn(U0),t._currentValue=e}function M1(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function Tu(t,e){O0=t,Tb=uu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(tr=!0),t.firstContext=null)}function qr(t){var e=t._currentValue;if(Tb!==t)if(t={context:t,memoizedValue:e,next:null},uu===null){if(O0===null)throw Error(Ce(308));uu=t,O0.dependencies={lanes:0,firstContext:t}}else uu=uu.next=t;return e}var Rl=null;function Nb(t){Rl===null?Rl=[t]:Rl.push(t)}function xR(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Nb(e)):(n.next=r.next,r.next=n),e.interleaved=n,Co(t,i)}function Co(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var aa=!1;function Rb(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function yR(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ca(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,Nt&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Co(t,n)}return r=i.interleaved,r===null?(e.next=e,Nb(i)):(e.next=r.next,r.next=e),i.interleaved=e,Co(t,n)}function Dm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,mb(t,n)}}function k2(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function j0(t,e,n,i){var r=t.updateQueue;aa=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=t.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,u=c=l=null,a=s;do{var f=a.lane,p=a.eventTime;if((i&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=t,y=a;switch(f=e,p=n,y.tag){case 1:if(x=y.payload,typeof x=="function"){h=x.call(p,h,f);break e}h=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=y.payload,f=typeof x=="function"?x.call(p,h,f):x,f==null)break e;h=Tn({},h,f);break e;case 2:aa=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[a]:f.push(a))}else p={eventTime:p,lane:f,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=p,l=h):u=u.next=p,o|=f;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;f=a,a=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(u===null&&(l=h),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);oc|=o,t.lanes=o,t.memoizedState=h}}function P2(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(Ce(191,r));r.call(i)}}}var Of={},Os=Xa(Of),Qh=Xa(Of),Jh=Xa(Of);function Ll(t){if(t===Of)throw Error(Ce(174));return t}function Lb(t,e){switch(Jt(Jh,e),Jt(Qh,t),Jt(Os,Of),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:r1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=r1(e,t)}sn(Os),Jt(Os,e)}function Wu(){sn(Os),sn(Qh),sn(Jh)}function vR(t){Ll(Jh.current);var e=Ll(Os.current),n=r1(e,t.type);e!==n&&(Jt(Qh,t),Jt(Os,n))}function Ib(t){Qh.current===t&&(sn(Os),sn(Qh))}var bn=Xa(0);function F0(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ey=[];function kb(){for(var t=0;t<ey.length;t++)ey[t]._workInProgressVersionPrimary=null;ey.length=0}var Bm=Fo.ReactCurrentDispatcher,ty=Fo.ReactCurrentBatchConfig,sc=0,En=null,Kn=null,ai=null,z0=!1,Mh=!1,ef=0,LB=0;function wi(){throw Error(Ce(321))}function Pb(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ys(t[n],e[n]))return!1;return!0}function Db(t,e,n,i,r,s){if(sc=s,En=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bm.current=t===null||t.memoizedState===null?DB:BB,t=n(i,r),Mh){s=0;do{if(Mh=!1,ef=0,25<=s)throw Error(Ce(301));s+=1,ai=Kn=null,e.updateQueue=null,Bm.current=UB,t=n(i,r)}while(Mh)}if(Bm.current=V0,e=Kn!==null&&Kn.next!==null,sc=0,ai=Kn=En=null,z0=!1,e)throw Error(Ce(300));return t}function Bb(){var t=ef!==0;return ef=0,t}function Ts(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ai===null?En.memoizedState=ai=t:ai=ai.next=t,ai}function Kr(){if(Kn===null){var t=En.alternate;t=t!==null?t.memoizedState:null}else t=Kn.next;var e=ai===null?En.memoizedState:ai.next;if(e!==null)ai=e,Kn=t;else{if(t===null)throw Error(Ce(310));Kn=t,t={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},ai===null?En.memoizedState=ai=t:ai=ai.next=t}return ai}function tf(t,e){return typeof e=="function"?e(t):e}function ny(t){var e=Kr(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var i=Kn,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((sc&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:t(i,c.action);else{var h={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,En.lanes|=u,oc|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,ys(i,e.memoizedState)||(tr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,En.lanes|=s,oc|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function iy(t){var e=Kr(),n=e.queue;if(n===null)throw Error(Ce(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);ys(s,e.memoizedState)||(tr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function wR(){}function _R(t,e){var n=En,i=Kr(),r=e(),s=!ys(i.memoizedState,r);if(s&&(i.memoizedState=r,tr=!0),i=i.queue,Ub(MR.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||ai!==null&&ai.memoizedState.tag&1){if(n.flags|=2048,nf(9,SR.bind(null,n,i,r,e),void 0,null),li===null)throw Error(Ce(349));sc&30||bR(n,e,r)}return r}function bR(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function SR(t,e,n,i){e.value=n,e.getSnapshot=i,ER(e)&&TR(t)}function MR(t,e,n){return n(function(){ER(e)&&TR(t)})}function ER(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ys(t,n)}catch{return!0}}function TR(t){var e=Co(t,1);e!==null&&ps(e,t,1,-1)}function D2(t){var e=Ts();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tf,lastRenderedState:t},e.queue=t,t=t.dispatch=PB.bind(null,En,t),[e.memoizedState,t]}function nf(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=En.updateQueue,e===null?(e={lastEffect:null,stores:null},En.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function AR(){return Kr().memoizedState}function Um(t,e,n,i){var r=Ts();En.flags|=t,r.memoizedState=nf(1|e,n,void 0,i===void 0?null:i)}function zg(t,e,n,i){var r=Kr();i=i===void 0?null:i;var s=void 0;if(Kn!==null){var o=Kn.memoizedState;if(s=o.destroy,i!==null&&Pb(i,o.deps)){r.memoizedState=nf(e,n,s,i);return}}En.flags|=t,r.memoizedState=nf(1|e,n,s,i)}function B2(t,e){return Um(8390656,8,t,e)}function Ub(t,e){return zg(2048,8,t,e)}function CR(t,e){return zg(4,2,t,e)}function NR(t,e){return zg(4,4,t,e)}function RR(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function LR(t,e,n){return n=n!=null?n.concat([t]):null,zg(4,4,RR.bind(null,e,t),n)}function Ob(){}function IR(t,e){var n=Kr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pb(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function kR(t,e){var n=Kr();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&Pb(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function PR(t,e,n){return sc&21?(ys(n,e)||(n=jN(),En.lanes|=n,oc|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,tr=!0),t.memoizedState=n)}function IB(t,e){var n=zt;zt=n!==0&&4>n?n:4,t(!0);var i=ty.transition;ty.transition={};try{t(!1),e()}finally{zt=n,ty.transition=i}}function DR(){return Kr().memoizedState}function kB(t,e,n){var i=Ra(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},BR(t))UR(e,n);else if(n=xR(t,e,n,i),n!==null){var r=Hi();ps(n,t,i,r),OR(n,e,i)}}function PB(t,e,n){var i=Ra(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(BR(t))UR(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,ys(a,o)){var l=e.interleaved;l===null?(r.next=r,Nb(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=xR(t,e,r,i),n!==null&&(r=Hi(),ps(n,t,i,r),OR(n,e,i))}}function BR(t){var e=t.alternate;return t===En||e!==null&&e===En}function UR(t,e){Mh=z0=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function OR(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,mb(t,n)}}var V0={readContext:qr,useCallback:wi,useContext:wi,useEffect:wi,useImperativeHandle:wi,useInsertionEffect:wi,useLayoutEffect:wi,useMemo:wi,useReducer:wi,useRef:wi,useState:wi,useDebugValue:wi,useDeferredValue:wi,useTransition:wi,useMutableSource:wi,useSyncExternalStore:wi,useId:wi,unstable_isNewReconciler:!1},DB={readContext:qr,useCallback:function(t,e){return Ts().memoizedState=[t,e===void 0?null:e],t},useContext:qr,useEffect:B2,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Um(4194308,4,RR.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Um(4194308,4,t,e)},useInsertionEffect:function(t,e){return Um(4,2,t,e)},useMemo:function(t,e){var n=Ts();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Ts();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=kB.bind(null,En,t),[i.memoizedState,t]},useRef:function(t){var e=Ts();return t={current:t},e.memoizedState=t},useState:D2,useDebugValue:Ob,useDeferredValue:function(t){return Ts().memoizedState=t},useTransition:function(){var t=D2(!1),e=t[0];return t=IB.bind(null,t[1]),Ts().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=En,r=Ts();if(hn){if(n===void 0)throw Error(Ce(407));n=n()}else{if(n=e(),li===null)throw Error(Ce(349));sc&30||bR(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,B2(MR.bind(null,i,s,t),[t]),i.flags|=2048,nf(9,SR.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Ts(),e=li.identifierPrefix;if(hn){var n=_o,i=wo;n=(i&~(1<<32-fs(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=ef++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LB++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},BB={readContext:qr,useCallback:IR,useContext:qr,useEffect:Ub,useImperativeHandle:LR,useInsertionEffect:CR,useLayoutEffect:NR,useMemo:kR,useReducer:ny,useRef:AR,useState:function(){return ny(tf)},useDebugValue:Ob,useDeferredValue:function(t){var e=Kr();return PR(e,Kn.memoizedState,t)},useTransition:function(){var t=ny(tf)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:wR,useSyncExternalStore:_R,useId:DR,unstable_isNewReconciler:!1},UB={readContext:qr,useCallback:IR,useContext:qr,useEffect:Ub,useImperativeHandle:LR,useInsertionEffect:CR,useLayoutEffect:NR,useMemo:kR,useReducer:iy,useRef:AR,useState:function(){return iy(tf)},useDebugValue:Ob,useDeferredValue:function(t){var e=Kr();return Kn===null?e.memoizedState=t:PR(e,Kn.memoizedState,t)},useTransition:function(){var t=iy(tf)[0],e=Kr().memoizedState;return[t,e]},useMutableSource:wR,useSyncExternalStore:_R,useId:DR,unstable_isNewReconciler:!1};function rs(t,e){if(t&&t.defaultProps){e=Tn({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function E1(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Tn({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Vg={isMounted:function(t){return(t=t._reactInternals)?fc(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=Hi(),r=Ra(t),s=Mo(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ca(t,s,r),e!==null&&(ps(e,t,r,i),Dm(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=Hi(),r=Ra(t),s=Mo(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ca(t,s,r),e!==null&&(ps(e,t,r,i),Dm(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Hi(),i=Ra(t),r=Mo(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ca(t,r,i),e!==null&&(ps(e,t,i,n),Dm(e,t,i))}};function U2(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Xh(n,i)||!Xh(r,s):!0}function jR(t,e,n){var i=!1,r=Fa,s=e.contextType;return typeof s=="object"&&s!==null?s=qr(s):(r=or(e)?ic:Bi.current,i=e.contextTypes,s=(i=i!=null)?Fu(t,r):Fa),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Vg,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function O2(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Vg.enqueueReplaceState(e,e.state,null)}function T1(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Rb(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=qr(s):(s=or(e)?ic:Bi.current,r.context=Fu(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(E1(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Vg.enqueueReplaceState(r,r.state,null),j0(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Hu(t,e){try{var n="",i=e;do n+=d6(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function ry(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function A1(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var OB=typeof WeakMap=="function"?WeakMap:Map;function FR(t,e,n){n=Mo(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){H0||(H0=!0,U1=i),A1(t,e)},n}function zR(t,e,n){n=Mo(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){A1(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){A1(t,e),typeof i!="function"&&(Na===null?Na=new Set([this]):Na.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function j2(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new OB;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=QB.bind(null,t,e,n),e.then(t,t))}function F2(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function z2(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mo(-1,1),e.tag=2,Ca(n,e,1))),n.lanes|=1),t)}var jB=Fo.ReactCurrentOwner,tr=!1;function Fi(t,e,n,i){e.child=t===null?gR(e,null,n,i):Vu(e,t.child,n,i)}function V2(t,e,n,i,r){n=n.render;var s=e.ref;return Tu(e,r),i=Db(t,e,n,i,s,r),n=Bb(),t!==null&&!tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,No(t,e,r)):(hn&&n&&Sb(e),e.flags|=1,Fi(t,e,i,r),e.child)}function W2(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!$b(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,VR(t,e,s,i,r)):(t=zm(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Xh,n(o,i)&&t.ref===e.ref)return No(t,e,r)}return e.flags|=1,t=La(s,i),t.ref=e.ref,t.return=e,e.child=t}function VR(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Xh(s,i)&&t.ref===e.ref)if(tr=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(tr=!0);else return e.lanes=t.lanes,No(t,e,r)}return C1(t,e,n,i,r)}function WR(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jt(hu,mr),mr|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Jt(hu,mr),mr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,Jt(hu,mr),mr|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,Jt(hu,mr),mr|=i;return Fi(t,e,r,n),e.child}function HR(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function C1(t,e,n,i,r){var s=or(n)?ic:Bi.current;return s=Fu(e,s),Tu(e,r),n=Db(t,e,n,i,s,r),i=Bb(),t!==null&&!tr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,No(t,e,r)):(hn&&i&&Sb(e),e.flags|=1,Fi(t,e,n,r),e.child)}function H2(t,e,n,i,r){if(or(n)){var s=!0;P0(e)}else s=!1;if(Tu(e,r),e.stateNode===null)Om(t,e),jR(e,n,i),T1(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=qr(c):(c=or(n)?ic:Bi.current,c=Fu(e,c));var u=n.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&O2(e,o,i,c),aa=!1;var f=e.memoizedState;o.state=f,j0(e,i,o,r),l=e.memoizedState,a!==i||f!==l||sr.current||aa?(typeof u=="function"&&(E1(e,n,u,i),l=e.memoizedState),(a=aa||U2(e,n,a,i,f,l,c))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,yR(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:rs(e.type,a),o.props=c,h=e.pendingProps,f=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=qr(l):(l=or(n)?ic:Bi.current,l=Fu(e,l));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||f!==l)&&O2(e,o,i,l),aa=!1,f=e.memoizedState,o.state=f,j0(e,i,o,r);var x=e.memoizedState;a!==h||f!==x||sr.current||aa?(typeof p=="function"&&(E1(e,n,p,i),x=e.memoizedState),(c=aa||U2(e,n,c,i,f,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),o.props=i,o.state=x,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),i=!1)}return N1(t,e,n,i,s,r)}function N1(t,e,n,i,r,s){HR(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&N2(e,n,!1),No(t,e,s);i=e.stateNode,jB.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=Vu(e,t.child,null,s),e.child=Vu(e,null,a,s)):Fi(t,e,a,s),e.memoizedState=i.state,r&&N2(e,n,!0),e.child}function GR(t){var e=t.stateNode;e.pendingContext?C2(t,e.pendingContext,e.pendingContext!==e.context):e.context&&C2(t,e.context,!1),Lb(t,e.containerInfo)}function G2(t,e,n,i,r){return zu(),Eb(r),e.flags|=256,Fi(t,e,n,i),e.child}var R1={dehydrated:null,treeContext:null,retryLane:0};function L1(t){return{baseLanes:t,cachePool:null,transitions:null}}function $R(t,e,n){var i=e.pendingProps,r=bn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Jt(bn,r&1),t===null)return S1(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Gg(o,i,0,null),t=ql(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=L1(n),e.memoizedState=R1,t):jb(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return FB(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=La(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=La(a,s):(s=ql(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?L1(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=R1,i}return s=t.child,t=s.sibling,i=La(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function jb(t,e){return e=Gg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Mp(t,e,n,i){return i!==null&&Eb(i),Vu(e,t.child,null,n),t=jb(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function FB(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=ry(Error(Ce(422))),Mp(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Gg({mode:"visible",children:i.children},r,0,null),s=ql(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Vu(e,t.child,null,o),e.child.memoizedState=L1(o),e.memoizedState=R1,s);if(!(e.mode&1))return Mp(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Ce(419)),i=ry(s,i,void 0),Mp(t,e,o,i)}if(a=(o&t.childLanes)!==0,tr||a){if(i=li,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Co(t,r),ps(i,t,r,-1))}return Gb(),i=ry(Error(Ce(421))),Mp(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=JB.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,_r=Aa(r.nextSibling),Sr=e,hn=!0,as=null,t!==null&&(Fr[zr++]=wo,Fr[zr++]=_o,Fr[zr++]=rc,wo=t.id,_o=t.overflow,rc=e),e=jb(e,i.children),e.flags|=4096,e)}function $2(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),M1(t.return,e,n)}function sy(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function YR(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Fi(t,e,i.children,n),i=bn.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&$2(t,n,e);else if(t.tag===19)$2(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(Jt(bn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&F0(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),sy(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&F0(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}sy(e,!0,n,null,s);break;case"together":sy(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Om(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function No(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),oc|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Ce(153));if(e.child!==null){for(t=e.child,n=La(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=La(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zB(t,e,n){switch(e.tag){case 3:GR(e),zu();break;case 5:vR(e);break;case 1:or(e.type)&&P0(e);break;case 4:Lb(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Jt(U0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Jt(bn,bn.current&1),e.flags|=128,null):n&e.child.childLanes?$R(t,e,n):(Jt(bn,bn.current&1),t=No(t,e,n),t!==null?t.sibling:null);Jt(bn,bn.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return YR(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Jt(bn,bn.current),i)break;return null;case 22:case 23:return e.lanes=0,WR(t,e,n)}return No(t,e,n)}var XR,I1,qR,KR;XR=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};I1=function(){};qR=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,Ll(Os.current);var s=null;switch(n){case"input":r=e1(t,r),i=e1(t,i),s=[];break;case"select":r=Tn({},r,{value:void 0}),i=Tn({},i,{value:void 0}),s=[];break;case"textarea":r=i1(t,r),i=i1(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=I0)}s1(n,i);var o;n=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(zh.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r!=null?r[c]:void 0,i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(c,n)),n=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(zh.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&nn("scroll",t),s||a===l||(s=[])):(s=s||[]).push(c,l))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};KR=function(t,e,n,i){n!==i&&(e.flags|=4)};function jd(t,e){if(!hn)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function _i(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function VB(t,e,n){var i=e.pendingProps;switch(Mb(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return _i(e),null;case 1:return or(e.type)&&k0(),_i(e),null;case 3:return i=e.stateNode,Wu(),sn(sr),sn(Bi),kb(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(bp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,as!==null&&(F1(as),as=null))),I1(t,e),_i(e),null;case 5:Ib(e);var r=Ll(Jh.current);if(n=e.type,t!==null&&e.stateNode!=null)qR(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Ce(166));return _i(e),null}if(t=Ll(Os.current),bp(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[Ns]=e,i[Zh]=s,t=(e.mode&1)!==0,n){case"dialog":nn("cancel",i),nn("close",i);break;case"iframe":case"object":case"embed":nn("load",i);break;case"video":case"audio":for(r=0;r<sh.length;r++)nn(sh[r],i);break;case"source":nn("error",i);break;case"img":case"image":case"link":nn("error",i),nn("load",i);break;case"details":nn("toggle",i);break;case"input":t2(i,s),nn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},nn("invalid",i);break;case"textarea":i2(i,s),nn("invalid",i)}s1(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&_p(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&_p(i.textContent,a,t),r=["children",""+a]):zh.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&nn("scroll",i)}switch(n){case"input":fp(i),n2(i,s,!0);break;case"textarea":fp(i),r2(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=I0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=MN(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[Ns]=e,t[Zh]=i,XR(t,e,!1,!1),e.stateNode=t;e:{switch(o=o1(n,i),n){case"dialog":nn("cancel",t),nn("close",t),r=i;break;case"iframe":case"object":case"embed":nn("load",t),r=i;break;case"video":case"audio":for(r=0;r<sh.length;r++)nn(sh[r],t);r=i;break;case"source":nn("error",t),r=i;break;case"img":case"image":case"link":nn("error",t),nn("load",t),r=i;break;case"details":nn("toggle",t),r=i;break;case"input":t2(t,i),r=e1(t,i),nn("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Tn({},i,{value:void 0}),nn("invalid",t);break;case"textarea":i2(t,i),r=i1(t,i),nn("invalid",t);break;default:r=i}s1(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?AN(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&EN(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Vh(t,l):typeof l=="number"&&Vh(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zh.hasOwnProperty(s)?l!=null&&s==="onScroll"&&nn("scroll",t):l!=null&&cb(t,s,l,o))}switch(n){case"input":fp(t),n2(t,i,!1);break;case"textarea":fp(t),r2(t);break;case"option":i.value!=null&&t.setAttribute("value",""+ja(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?bu(t,!!i.multiple,s,!1):i.defaultValue!=null&&bu(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=I0)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return _i(e),null;case 6:if(t&&e.stateNode!=null)KR(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Ce(166));if(n=Ll(Jh.current),Ll(Os.current),bp(e)){if(i=e.stateNode,n=e.memoizedProps,i[Ns]=e,(s=i.nodeValue!==n)&&(t=Sr,t!==null))switch(t.tag){case 3:_p(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&_p(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[Ns]=e,e.stateNode=i}return _i(e),null;case 13:if(sn(bn),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(hn&&_r!==null&&e.mode&1&&!(e.flags&128))pR(),zu(),e.flags|=98560,s=!1;else if(s=bp(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(Ce(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ce(317));s[Ns]=e}else zu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;_i(e),s=!1}else as!==null&&(F1(as),as=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||bn.current&1?Qn===0&&(Qn=3):Gb())),e.updateQueue!==null&&(e.flags|=4),_i(e),null);case 4:return Wu(),I1(t,e),t===null&&qh(e.stateNode.containerInfo),_i(e),null;case 10:return Cb(e.type._context),_i(e),null;case 17:return or(e.type)&&k0(),_i(e),null;case 19:if(sn(bn),s=e.memoizedState,s===null)return _i(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)jd(s,!1);else{if(Qn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=F0(t),o!==null){for(e.flags|=128,jd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Jt(bn,bn.current&1|2),e.child}t=t.sibling}s.tail!==null&&Un()>Gu&&(e.flags|=128,i=!0,jd(s,!1),e.lanes=4194304)}else{if(!i)if(t=F0(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),jd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!hn)return _i(e),null}else 2*Un()-s.renderingStartTime>Gu&&n!==1073741824&&(e.flags|=128,i=!0,jd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Un(),e.sibling=null,n=bn.current,Jt(bn,i?n&1|2:n&1),e):(_i(e),null);case 22:case 23:return Hb(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?mr&1073741824&&(_i(e),e.subtreeFlags&6&&(e.flags|=8192)):_i(e),null;case 24:return null;case 25:return null}throw Error(Ce(156,e.tag))}function WB(t,e){switch(Mb(e),e.tag){case 1:return or(e.type)&&k0(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Wu(),sn(sr),sn(Bi),kb(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ib(e),null;case 13:if(sn(bn),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Ce(340));zu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return sn(bn),null;case 4:return Wu(),null;case 10:return Cb(e.type._context),null;case 22:case 23:return Hb(),null;case 24:return null;default:return null}}var Ep=!1,Ii=!1,HB=typeof WeakSet=="function"?WeakSet:Set,Ye=null;function du(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){kn(t,e,i)}else n.current=null}function k1(t,e,n){try{n()}catch(i){kn(t,e,i)}}var Y2=!1;function GB(t,e){if(g1=N0,t=tR(),bb(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,c=0,u=0,h=t,f=null;t:for(;;){for(var p;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===t)break t;if(f===n&&++c===r&&(a=o),f===s&&++u===i&&(l=o),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(x1={focusedElem:t,selectionRange:n},N0=!1,Ye=e;Ye!==null;)if(e=Ye,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Ye=t;else for(;Ye!==null;){e=Ye;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var y=x.memoizedProps,g=x.memoizedState,m=e.stateNode,_=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:rs(e.type,y),g);m.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ce(163))}}catch(S){kn(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,Ye=t;break}Ye=e.return}return x=Y2,Y2=!1,x}function Eh(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&k1(e,n,s)}r=r.next}while(r!==i)}}function Wg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function P1(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function ZR(t){var e=t.alternate;e!==null&&(t.alternate=null,ZR(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ns],delete e[Zh],delete e[w1],delete e[AB],delete e[CB])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function QR(t){return t.tag===5||t.tag===3||t.tag===4}function X2(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||QR(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function D1(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=I0));else if(i!==4&&(t=t.child,t!==null))for(D1(t,e,n),t=t.sibling;t!==null;)D1(t,e,n),t=t.sibling}function B1(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(B1(t,e,n),t=t.sibling;t!==null;)B1(t,e,n),t=t.sibling}var hi=null,os=!1;function zo(t,e,n){for(n=n.child;n!==null;)JR(t,e,n),n=n.sibling}function JR(t,e,n){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(Dg,n)}catch{}switch(n.tag){case 5:Ii||du(n,e);case 6:var i=hi,r=os;hi=null,zo(t,e,n),hi=i,os=r,hi!==null&&(os?(t=hi,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):hi.removeChild(n.stateNode));break;case 18:hi!==null&&(os?(t=hi,n=n.stateNode,t.nodeType===8?Qx(t.parentNode,n):t.nodeType===1&&Qx(t,n),$h(t)):Qx(hi,n.stateNode));break;case 4:i=hi,r=os,hi=n.stateNode.containerInfo,os=!0,zo(t,e,n),hi=i,os=r;break;case 0:case 11:case 14:case 15:if(!Ii&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&k1(n,e,o),r=r.next}while(r!==i)}zo(t,e,n);break;case 1:if(!Ii&&(du(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){kn(n,e,a)}zo(t,e,n);break;case 21:zo(t,e,n);break;case 22:n.mode&1?(Ii=(i=Ii)||n.memoizedState!==null,zo(t,e,n),Ii=i):zo(t,e,n);break;default:zo(t,e,n)}}function q2(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new HB),e.forEach(function(i){var r=eU.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function Jr(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:hi=a.stateNode,os=!1;break e;case 3:hi=a.stateNode.containerInfo,os=!0;break e;case 4:hi=a.stateNode.containerInfo,os=!0;break e}a=a.return}if(hi===null)throw Error(Ce(160));JR(s,o,r),hi=null,os=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){kn(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)e4(e,t),e=e.sibling}function e4(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jr(e,t),_s(t),i&4){try{Eh(3,t,t.return),Wg(3,t)}catch(y){kn(t,t.return,y)}try{Eh(5,t,t.return)}catch(y){kn(t,t.return,y)}}break;case 1:Jr(e,t),_s(t),i&512&&n!==null&&du(n,n.return);break;case 5:if(Jr(e,t),_s(t),i&512&&n!==null&&du(n,n.return),t.flags&32){var r=t.stateNode;try{Vh(r,"")}catch(y){kn(t,t.return,y)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&bN(r,s),o1(a,o);var c=o1(a,s);for(o=0;o<l.length;o+=2){var u=l[o],h=l[o+1];u==="style"?AN(r,h):u==="dangerouslySetInnerHTML"?EN(r,h):u==="children"?Vh(r,h):cb(r,u,h,c)}switch(a){case"input":t1(r,s);break;case"textarea":SN(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?bu(r,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?bu(r,!!s.multiple,s.defaultValue,!0):bu(r,!!s.multiple,s.multiple?[]:"",!1))}r[Zh]=s}catch(y){kn(t,t.return,y)}}break;case 6:if(Jr(e,t),_s(t),i&4){if(t.stateNode===null)throw Error(Ce(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(y){kn(t,t.return,y)}}break;case 3:if(Jr(e,t),_s(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{$h(e.containerInfo)}catch(y){kn(t,t.return,y)}break;case 4:Jr(e,t),_s(t);break;case 13:Jr(e,t),_s(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Vb=Un())),i&4&&q2(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Ii=(c=Ii)||u,Jr(e,t),Ii=c):Jr(e,t),_s(t),i&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(Ye=t,u=t.child;u!==null;){for(h=Ye=u;Ye!==null;){switch(f=Ye,p=f.child,f.tag){case 0:case 11:case 14:case 15:Eh(4,f,f.return);break;case 1:du(f,f.return);var x=f.stateNode;if(typeof x.componentWillUnmount=="function"){i=f,n=f.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(y){kn(i,n,y)}}break;case 5:du(f,f.return);break;case 22:if(f.memoizedState!==null){Z2(h);continue}}p!==null?(p.return=f,Ye=p):Z2(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=TN("display",o))}catch(y){kn(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=c?"":h.memoizedProps}catch(y){kn(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jr(e,t),_s(t),i&4&&q2(t);break;case 21:break;default:Jr(e,t),_s(t)}}function _s(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(QR(n)){var i=n;break e}n=n.return}throw Error(Ce(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Vh(r,""),i.flags&=-33);var s=X2(t);B1(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=X2(t);D1(t,a,o);break;default:throw Error(Ce(161))}}catch(l){kn(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $B(t,e,n){Ye=t,t4(t)}function t4(t,e,n){for(var i=(t.mode&1)!==0;Ye!==null;){var r=Ye,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ep;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Ii;a=Ep;var c=Ii;if(Ep=o,(Ii=l)&&!c)for(Ye=r;Ye!==null;)o=Ye,l=o.child,o.tag===22&&o.memoizedState!==null?Q2(r):l!==null?(l.return=o,Ye=l):Q2(r);for(;s!==null;)Ye=s,t4(s),s=s.sibling;Ye=r,Ep=a,Ii=c}K2(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Ye=s):K2(t)}}function K2(t){for(;Ye!==null;){var e=Ye;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ii||Wg(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Ii)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:rs(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&P2(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}P2(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&$h(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ce(163))}Ii||e.flags&512&&P1(e)}catch(f){kn(e,e.return,f)}}if(e===t){Ye=null;break}if(n=e.sibling,n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function Z2(t){for(;Ye!==null;){var e=Ye;if(e===t){Ye=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Ye=n;break}Ye=e.return}}function Q2(t){for(;Ye!==null;){var e=Ye;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Wg(4,e)}catch(l){kn(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){kn(e,r,l)}}var s=e.return;try{P1(e)}catch(l){kn(e,s,l)}break;case 5:var o=e.return;try{P1(e)}catch(l){kn(e,o,l)}}}catch(l){kn(e,e.return,l)}if(e===t){Ye=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Ye=a;break}Ye=e.return}}var YB=Math.ceil,W0=Fo.ReactCurrentDispatcher,Fb=Fo.ReactCurrentOwner,$r=Fo.ReactCurrentBatchConfig,Nt=0,li=null,$n=null,xi=0,mr=0,hu=Xa(0),Qn=0,rf=null,oc=0,Hg=0,zb=0,Th=null,Qi=null,Vb=0,Gu=1/0,lo=null,H0=!1,U1=null,Na=null,Tp=!1,ma=null,G0=0,Ah=0,O1=null,jm=-1,Fm=0;function Hi(){return Nt&6?Un():jm!==-1?jm:jm=Un()}function Ra(t){return t.mode&1?Nt&2&&xi!==0?xi&-xi:RB.transition!==null?(Fm===0&&(Fm=jN()),Fm):(t=zt,t!==0||(t=window.event,t=t===void 0?16:$N(t.type)),t):1}function ps(t,e,n,i){if(50<Ah)throw Ah=0,O1=null,Error(Ce(185));Df(t,n,i),(!(Nt&2)||t!==li)&&(t===li&&(!(Nt&2)&&(Hg|=n),Qn===4&&da(t,xi)),ar(t,i),n===1&&Nt===0&&!(e.mode&1)&&(Gu=Un()+500,Fg&&qa()))}function ar(t,e){var n=t.callbackNode;R6(t,e);var i=C0(t,t===li?xi:0);if(i===0)n!==null&&a2(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&a2(n),e===1)t.tag===0?NB(J2.bind(null,t)):dR(J2.bind(null,t)),EB(function(){!(Nt&6)&&qa()}),n=null;else{switch(FN(i)){case 1:n=pb;break;case 4:n=UN;break;case 16:n=A0;break;case 536870912:n=ON;break;default:n=A0}n=c4(n,n4.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function n4(t,e){if(jm=-1,Fm=0,Nt&6)throw Error(Ce(327));var n=t.callbackNode;if(Au()&&t.callbackNode!==n)return null;var i=C0(t,t===li?xi:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=$0(t,i);else{e=i;var r=Nt;Nt|=2;var s=r4();(li!==t||xi!==e)&&(lo=null,Gu=Un()+500,Xl(t,e));do try{KB();break}catch(a){i4(t,a)}while(!0);Ab(),W0.current=s,Nt=r,$n!==null?e=0:(li=null,xi=0,e=Qn)}if(e!==0){if(e===2&&(r=d1(t),r!==0&&(i=r,e=j1(t,r))),e===1)throw n=rf,Xl(t,0),da(t,i),ar(t,Un()),n;if(e===6)da(t,i);else{if(r=t.current.alternate,!(i&30)&&!XB(r)&&(e=$0(t,i),e===2&&(s=d1(t),s!==0&&(i=s,e=j1(t,s))),e===1))throw n=rf,Xl(t,0),da(t,i),ar(t,Un()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(Ce(345));case 2:ml(t,Qi,lo);break;case 3:if(da(t,i),(i&130023424)===i&&(e=Vb+500-Un(),10<e)){if(C0(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){Hi(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=v1(ml.bind(null,t,Qi,lo),e);break}ml(t,Qi,lo);break;case 4:if(da(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-fs(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Un()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*YB(i/1960))-i,10<i){t.timeoutHandle=v1(ml.bind(null,t,Qi,lo),i);break}ml(t,Qi,lo);break;case 5:ml(t,Qi,lo);break;default:throw Error(Ce(329))}}}return ar(t,Un()),t.callbackNode===n?n4.bind(null,t):null}function j1(t,e){var n=Th;return t.current.memoizedState.isDehydrated&&(Xl(t,e).flags|=256),t=$0(t,e),t!==2&&(e=Qi,Qi=n,e!==null&&F1(e)),t}function F1(t){Qi===null?Qi=t:Qi.push.apply(Qi,t)}function XB(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!ys(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function da(t,e){for(e&=~zb,e&=~Hg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-fs(e),i=1<<n;t[n]=-1,e&=~i}}function J2(t){if(Nt&6)throw Error(Ce(327));Au();var e=C0(t,0);if(!(e&1))return ar(t,Un()),null;var n=$0(t,e);if(t.tag!==0&&n===2){var i=d1(t);i!==0&&(e=i,n=j1(t,i))}if(n===1)throw n=rf,Xl(t,0),da(t,e),ar(t,Un()),n;if(n===6)throw Error(Ce(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,ml(t,Qi,lo),ar(t,Un()),null}function Wb(t,e){var n=Nt;Nt|=1;try{return t(e)}finally{Nt=n,Nt===0&&(Gu=Un()+500,Fg&&qa())}}function ac(t){ma!==null&&ma.tag===0&&!(Nt&6)&&Au();var e=Nt;Nt|=1;var n=$r.transition,i=zt;try{if($r.transition=null,zt=1,t)return t()}finally{zt=i,$r.transition=n,Nt=e,!(Nt&6)&&qa()}}function Hb(){mr=hu.current,sn(hu)}function Xl(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MB(n)),$n!==null)for(n=$n.return;n!==null;){var i=n;switch(Mb(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&k0();break;case 3:Wu(),sn(sr),sn(Bi),kb();break;case 5:Ib(i);break;case 4:Wu();break;case 13:sn(bn);break;case 19:sn(bn);break;case 10:Cb(i.type._context);break;case 22:case 23:Hb()}n=n.return}if(li=t,$n=t=La(t.current,null),xi=mr=e,Qn=0,rf=null,zb=Hg=oc=0,Qi=Th=null,Rl!==null){for(e=0;e<Rl.length;e++)if(n=Rl[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}Rl=null}return t}function i4(t,e){do{var n=$n;try{if(Ab(),Bm.current=V0,z0){for(var i=En.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}z0=!1}if(sc=0,ai=Kn=En=null,Mh=!1,ef=0,Fb.current=null,n===null||n.return===null){Qn=1,rf=e,$n=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=xi,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=F2(o);if(p!==null){p.flags&=-257,z2(p,o,a,s,e),p.mode&1&&j2(s,c,e),e=p,l=c;var x=e.updateQueue;if(x===null){var y=new Set;y.add(l),e.updateQueue=y}else x.add(l);break e}else{if(!(e&1)){j2(s,c,e),Gb();break e}l=Error(Ce(426))}}else if(hn&&a.mode&1){var g=F2(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),z2(g,o,a,s,e),Eb(Hu(l,a));break e}}s=l=Hu(l,a),Qn!==4&&(Qn=2),Th===null?Th=[s]:Th.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=FR(s,l,e);k2(s,m);break e;case 1:a=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Na===null||!Na.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var S=zR(s,a,e);k2(s,S);break e}}s=s.return}while(s!==null)}o4(n)}catch(N){e=N,$n===n&&n!==null&&($n=n=n.return);continue}break}while(!0)}function r4(){var t=W0.current;return W0.current=V0,t===null?V0:t}function Gb(){(Qn===0||Qn===3||Qn===2)&&(Qn=4),li===null||!(oc&268435455)&&!(Hg&268435455)||da(li,xi)}function $0(t,e){var n=Nt;Nt|=2;var i=r4();(li!==t||xi!==e)&&(lo=null,Xl(t,e));do try{qB();break}catch(r){i4(t,r)}while(!0);if(Ab(),Nt=n,W0.current=i,$n!==null)throw Error(Ce(261));return li=null,xi=0,Qn}function qB(){for(;$n!==null;)s4($n)}function KB(){for(;$n!==null&&!_6();)s4($n)}function s4(t){var e=l4(t.alternate,t,mr);t.memoizedProps=t.pendingProps,e===null?o4(t):$n=e,Fb.current=null}function o4(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=WB(n,e),n!==null){n.flags&=32767,$n=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qn=6,$n=null;return}}else if(n=VB(n,e,mr),n!==null){$n=n;return}if(e=e.sibling,e!==null){$n=e;return}$n=e=t}while(e!==null);Qn===0&&(Qn=5)}function ml(t,e,n){var i=zt,r=$r.transition;try{$r.transition=null,zt=1,ZB(t,e,n,i)}finally{$r.transition=r,zt=i}return null}function ZB(t,e,n,i){do Au();while(ma!==null);if(Nt&6)throw Error(Ce(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Ce(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(L6(t,s),t===li&&($n=li=null,xi=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Tp||(Tp=!0,c4(A0,function(){return Au(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=$r.transition,$r.transition=null;var o=zt;zt=1;var a=Nt;Nt|=4,Fb.current=null,GB(t,n),e4(n,t),xB(x1),N0=!!g1,x1=g1=null,t.current=n,$B(n),b6(),Nt=a,zt=o,$r.transition=s}else t.current=n;if(Tp&&(Tp=!1,ma=t,G0=r),s=t.pendingLanes,s===0&&(Na=null),E6(n.stateNode),ar(t,Un()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(H0)throw H0=!1,t=U1,U1=null,t;return G0&1&&t.tag!==0&&Au(),s=t.pendingLanes,s&1?t===O1?Ah++:(Ah=0,O1=t):Ah=0,qa(),null}function Au(){if(ma!==null){var t=FN(G0),e=$r.transition,n=zt;try{if($r.transition=null,zt=16>t?16:t,ma===null)var i=!1;else{if(t=ma,ma=null,G0=0,Nt&6)throw Error(Ce(331));var r=Nt;for(Nt|=4,Ye=t.current;Ye!==null;){var s=Ye,o=s.child;if(Ye.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(Ye=c;Ye!==null;){var u=Ye;switch(u.tag){case 0:case 11:case 15:Eh(8,u,s)}var h=u.child;if(h!==null)h.return=u,Ye=h;else for(;Ye!==null;){u=Ye;var f=u.sibling,p=u.return;if(ZR(u),u===c){Ye=null;break}if(f!==null){f.return=p,Ye=f;break}Ye=p}}}var x=s.alternate;if(x!==null){var y=x.child;if(y!==null){x.child=null;do{var g=y.sibling;y.sibling=null,y=g}while(y!==null)}}Ye=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Ye=o;else e:for(;Ye!==null;){if(s=Ye,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Eh(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Ye=m;break e}Ye=s.return}}var _=t.current;for(Ye=_;Ye!==null;){o=Ye;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,Ye=w;else e:for(o=_;Ye!==null;){if(a=Ye,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Wg(9,a)}}catch(N){kn(a,a.return,N)}if(a===o){Ye=null;break e}var S=a.sibling;if(S!==null){S.return=a.return,Ye=S;break e}Ye=a.return}}if(Nt=r,qa(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(Dg,t)}catch{}i=!0}return i}finally{zt=n,$r.transition=e}}return!1}function eE(t,e,n){e=Hu(n,e),e=FR(t,e,1),t=Ca(t,e,1),e=Hi(),t!==null&&(Df(t,1,e),ar(t,e))}function kn(t,e,n){if(t.tag===3)eE(t,t,n);else for(;e!==null;){if(e.tag===3){eE(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Na===null||!Na.has(i))){t=Hu(n,t),t=zR(e,t,1),e=Ca(e,t,1),t=Hi(),e!==null&&(Df(e,1,t),ar(e,t));break}}e=e.return}}function QB(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=Hi(),t.pingedLanes|=t.suspendedLanes&n,li===t&&(xi&n)===n&&(Qn===4||Qn===3&&(xi&130023424)===xi&&500>Un()-Vb?Xl(t,0):zb|=n),ar(t,e)}function a4(t,e){e===0&&(t.mode&1?(e=gp,gp<<=1,!(gp&130023424)&&(gp=4194304)):e=1);var n=Hi();t=Co(t,e),t!==null&&(Df(t,e,n),ar(t,n))}function JB(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),a4(t,n)}function eU(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(Ce(314))}i!==null&&i.delete(e),a4(t,n)}var l4;l4=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||sr.current)tr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return tr=!1,zB(t,e,n);tr=!!(t.flags&131072)}else tr=!1,hn&&e.flags&1048576&&hR(e,B0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;Om(t,e),t=e.pendingProps;var r=Fu(e,Bi.current);Tu(e,n),r=Db(null,e,i,t,r,n);var s=Bb();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,or(i)?(s=!0,P0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Rb(e),r.updater=Vg,e.stateNode=r,r._reactInternals=e,T1(e,i,t,n),e=N1(null,e,i,!0,s,n)):(e.tag=0,hn&&s&&Sb(e),Fi(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(Om(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=nU(i),t=rs(i,t),r){case 0:e=C1(null,e,i,t,n);break e;case 1:e=H2(null,e,i,t,n);break e;case 11:e=V2(null,e,i,t,n);break e;case 14:e=W2(null,e,i,rs(i.type,t),n);break e}throw Error(Ce(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),C1(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),H2(t,e,i,r,n);case 3:e:{if(GR(e),t===null)throw Error(Ce(387));i=e.pendingProps,s=e.memoizedState,r=s.element,yR(t,e),j0(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Hu(Error(Ce(423)),e),e=G2(t,e,i,n,r);break e}else if(i!==r){r=Hu(Error(Ce(424)),e),e=G2(t,e,i,n,r);break e}else for(_r=Aa(e.stateNode.containerInfo.firstChild),Sr=e,hn=!0,as=null,n=gR(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(zu(),i===r){e=No(t,e,n);break e}Fi(t,e,i,n)}e=e.child}return e;case 5:return vR(e),t===null&&S1(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,y1(i,r)?o=null:s!==null&&y1(i,s)&&(e.flags|=32),HR(t,e),Fi(t,e,o,n),e.child;case 6:return t===null&&S1(e),null;case 13:return $R(t,e,n);case 4:return Lb(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=Vu(e,null,i,n):Fi(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),V2(t,e,i,r,n);case 7:return Fi(t,e,e.pendingProps,n),e.child;case 8:return Fi(t,e,e.pendingProps.children,n),e.child;case 12:return Fi(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Jt(U0,i._currentValue),i._currentValue=o,s!==null)if(ys(s.value,o)){if(s.children===r.children&&!sr.current){e=No(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Mo(-1,n&-n),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),M1(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Ce(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),M1(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Fi(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Tu(e,n),r=qr(r),i=i(r),e.flags|=1,Fi(t,e,i,n),e.child;case 14:return i=e.type,r=rs(i,e.pendingProps),r=rs(i.type,r),W2(t,e,i,r,n);case 15:return VR(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:rs(i,r),Om(t,e),e.tag=1,or(i)?(t=!0,P0(e)):t=!1,Tu(e,n),jR(e,i,r),T1(e,i,r,n),N1(null,e,i,!0,t,n);case 19:return YR(t,e,n);case 22:return WR(t,e,n)}throw Error(Ce(156,e.tag))};function c4(t,e){return BN(t,e)}function tU(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wr(t,e,n,i){return new tU(t,e,n,i)}function $b(t){return t=t.prototype,!(!t||!t.isReactComponent)}function nU(t){if(typeof t=="function")return $b(t)?1:0;if(t!=null){if(t=t.$$typeof,t===db)return 11;if(t===hb)return 14}return 2}function La(t,e){var n=t.alternate;return n===null?(n=Wr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function zm(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")$b(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case nu:return ql(n.children,r,s,e);case ub:o=8,r|=8;break;case Kv:return t=Wr(12,n,e,r|2),t.elementType=Kv,t.lanes=s,t;case Zv:return t=Wr(13,n,e,r),t.elementType=Zv,t.lanes=s,t;case Qv:return t=Wr(19,n,e,r),t.elementType=Qv,t.lanes=s,t;case vN:return Gg(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case xN:o=10;break e;case yN:o=9;break e;case db:o=11;break e;case hb:o=14;break e;case oa:o=16,i=null;break e}throw Error(Ce(130,t==null?t:typeof t,""))}return e=Wr(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function ql(t,e,n,i){return t=Wr(7,t,i,e),t.lanes=n,t}function Gg(t,e,n,i){return t=Wr(22,t,i,e),t.elementType=vN,t.lanes=n,t.stateNode={isHidden:!1},t}function oy(t,e,n){return t=Wr(6,t,null,e),t.lanes=n,t}function ay(t,e,n){return e=Wr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function iU(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zx(0),this.expirationTimes=zx(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zx(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Yb(t,e,n,i,r,s,o,a,l){return t=new iU(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Wr(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rb(s),t}function rU(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tu,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function u4(t){if(!t)return Fa;t=t._reactInternals;e:{if(fc(t)!==t||t.tag!==1)throw Error(Ce(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(or(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ce(171))}if(t.tag===1){var n=t.type;if(or(n))return uR(t,n,e)}return e}function d4(t,e,n,i,r,s,o,a,l){return t=Yb(n,i,!0,t,r,s,o,a,l),t.context=u4(null),n=t.current,i=Hi(),r=Ra(n),s=Mo(i,r),s.callback=e??null,Ca(n,s,r),t.current.lanes=r,Df(t,r,i),ar(t,i),t}function $g(t,e,n,i){var r=e.current,s=Hi(),o=Ra(r);return n=u4(n),e.context===null?e.context=n:e.pendingContext=n,e=Mo(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ca(r,e,o),t!==null&&(ps(t,r,o,s),Dm(t,r,o)),o}function Y0(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function tE(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Xb(t,e){tE(t,e),(t=t.alternate)&&tE(t,e)}function sU(){return null}var h4=typeof reportError=="function"?reportError:function(t){console.error(t)};function qb(t){this._internalRoot=t}Yg.prototype.render=qb.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Ce(409));$g(t,e,null,null)};Yg.prototype.unmount=qb.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;ac(function(){$g(null,t,null,null)}),e[Ao]=null}};function Yg(t){this._internalRoot=t}Yg.prototype.unstable_scheduleHydration=function(t){if(t){var e=WN();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ua.length&&e!==0&&e<ua[n].priority;n++);ua.splice(n,0,t),n===0&&GN(t)}};function Kb(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xg(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nE(){}function oU(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=Y0(o);s.call(c)}}var o=d4(e,i,t,0,null,!1,!1,"",nE);return t._reactRootContainer=o,t[Ao]=o.current,qh(t.nodeType===8?t.parentNode:t),ac(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=Y0(l);a.call(c)}}var l=Yb(t,0,!1,null,null,!1,!1,"",nE);return t._reactRootContainer=l,t[Ao]=l.current,qh(t.nodeType===8?t.parentNode:t),ac(function(){$g(e,l,n,i)}),l}function qg(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=Y0(o);a.call(l)}}$g(e,o,t,r)}else o=oU(n,e,t,r,i);return Y0(o)}zN=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=rh(e.pendingLanes);n!==0&&(mb(e,n|1),ar(e,Un()),!(Nt&6)&&(Gu=Un()+500,qa()))}break;case 13:ac(function(){var i=Co(t,1);if(i!==null){var r=Hi();ps(i,t,1,r)}}),Xb(t,1)}};gb=function(t){if(t.tag===13){var e=Co(t,134217728);if(e!==null){var n=Hi();ps(e,t,134217728,n)}Xb(t,134217728)}};VN=function(t){if(t.tag===13){var e=Ra(t),n=Co(t,e);if(n!==null){var i=Hi();ps(n,t,e,i)}Xb(t,e)}};WN=function(){return zt};HN=function(t,e){var n=zt;try{return zt=t,e()}finally{zt=n}};l1=function(t,e,n){switch(e){case"input":if(t1(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=jg(i);if(!r)throw Error(Ce(90));_N(i),t1(i,r)}}}break;case"textarea":SN(t,n);break;case"select":e=n.value,e!=null&&bu(t,!!n.multiple,e,!1)}};RN=Wb;LN=ac;var aU={usingClientEntryPoint:!1,Events:[Uf,ou,jg,CN,NN,Wb]},Fd={findFiberByHostInstance:Nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lU={bundleType:Fd.bundleType,version:Fd.version,rendererPackageName:Fd.rendererPackageName,rendererConfig:Fd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=PN(t),t===null?null:t.stateNode},findFiberByHostInstance:Fd.findFiberByHostInstance||sU,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ap=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ap.isDisabled&&Ap.supportsFiber)try{Dg=Ap.inject(lU),Us=Ap}catch{}}Tr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aU;Tr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Kb(e))throw Error(Ce(200));return rU(t,e,null,n)};Tr.createRoot=function(t,e){if(!Kb(t))throw Error(Ce(299));var n=!1,i="",r=h4;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Yb(t,1,!1,null,null,n,!1,i,r),t[Ao]=e.current,qh(t.nodeType===8?t.parentNode:t),new qb(e)};Tr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Ce(188)):(t=Object.keys(t).join(","),Error(Ce(268,t)));return t=PN(e),t=t===null?null:t.stateNode,t};Tr.flushSync=function(t){return ac(t)};Tr.hydrate=function(t,e,n){if(!Xg(e))throw Error(Ce(200));return qg(null,t,e,!0,n)};Tr.hydrateRoot=function(t,e,n){if(!Kb(t))throw Error(Ce(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=h4;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=d4(e,null,t,1,n??null,r,!1,s,o),t[Ao]=e.current,qh(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Yg(e)};Tr.render=function(t,e,n){if(!Xg(e))throw Error(Ce(200));return qg(null,t,e,!1,n)};Tr.unmountComponentAtNode=function(t){if(!Xg(t))throw Error(Ce(40));return t._reactRootContainer?(ac(function(){qg(null,null,t,!1,function(){t._reactRootContainer=null,t[Ao]=null})}),!0):!1};Tr.unstable_batchedUpdates=Wb;Tr.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!Xg(n))throw Error(Ce(200));if(t==null||t._reactInternals===void 0)throw Error(Ce(38));return qg(t,e,n,!1,i)};Tr.version="18.3.1-next-f1338f8080-20240426";function f4(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(f4)}catch(t){console.error(t)}}f4(),fN.exports=Tr;var Zb=fN.exports,iE=Zb;Xv.createRoot=iE.createRoot,Xv.hydrateRoot=iE.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sf(){return sf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},sf.apply(this,arguments)}var ga;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(ga||(ga={}));const rE="popstate";function cU(t){t===void 0&&(t={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return z1("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:X0(r)}return dU(e,n,null,t)}function Yn(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function p4(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uU(){return Math.random().toString(36).substr(2,8)}function sE(t,e){return{usr:t.state,key:t.key,idx:e}}function z1(t,e,n,i){return n===void 0&&(n=null),sf({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?pd(e):e,{state:n,key:e&&e.key||i||uU()})}function X0(t){let{pathname:e="/",search:n="",hash:i=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function pd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substr(i),t=t.substr(0,i)),t&&(e.pathname=t)}return e}function dU(t,e,n,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ga.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(sf({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function h(){a=ga.Pop;let g=u(),m=g==null?null:g-c;c=g,l&&l({action:a,location:y.location,delta:m})}function f(g,m){a=ga.Push;let _=z1(y.location,g,m);c=u()+1;let w=sE(_,c),S=y.createHref(_);try{o.pushState(w,"",S)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;r.location.assign(S)}s&&l&&l({action:a,location:y.location,delta:1})}function p(g,m){a=ga.Replace;let _=z1(y.location,g,m);c=u();let w=sE(_,c),S=y.createHref(_);o.replaceState(w,"",S),s&&l&&l({action:a,location:y.location,delta:0})}function x(g){let m=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof g=="string"?g:X0(g);return _=_.replace(/ $/,"%20"),Yn(m,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,m)}let y={get action(){return a},get location(){return t(r,o)},listen(g){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(rE,h),l=g,()=>{r.removeEventListener(rE,h),l=null}},createHref(g){return e(r,g)},createURL:x,encodeLocation(g){let m=x(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(g){return o.go(g)}};return y}var oE;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oE||(oE={}));function hU(t,e,n){return n===void 0&&(n="/"),fU(t,e,n)}function fU(t,e,n,i){let r=typeof e=="string"?pd(e):e,s=Qb(r.pathname||"/",n);if(s==null)return null;let o=m4(t);pU(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=TU(s);a=SU(o[l],c)}return a}function m4(t,e,n,i){e===void 0&&(e=[]),n===void 0&&(n=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(Yn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Ia([i,l.relativePath]),u=n.concat(l);s.children&&s.children.length>0&&(Yn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),m4(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:_U(c,s.index),routesMeta:u})};return t.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of g4(s.path))r(s,o,l)}),e}function g4(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),s=n.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=g4(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function pU(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bU(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}const mU=/^:[\w-]+$/,gU=3,xU=2,yU=1,vU=10,wU=-2,aE=t=>t==="*";function _U(t,e){let n=t.split("/"),i=n.length;return n.some(aE)&&(i+=wU),e&&(i+=xU),n.filter(r=>!aE(r)).reduce((r,s)=>r+(mU.test(s)?gU:s===""?yU:vU),i)}function bU(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function SU(t,e,n){let{routesMeta:i}=t,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",h=MU({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),f=l.route;if(!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:Ia([s,h.pathname]),pathnameBase:RU(Ia([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Ia([s,h.pathnameBase]))}return o}function MU(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=EU(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,h)=>{let{paramName:f,isOptional:p}=u;if(f==="*"){let y=a[h]||"";o=s.slice(0,s.length-y.length).replace(/(.)\/+$/,"$1")}const x=a[h];return p&&!x?c[f]=void 0:c[f]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:t}}function EU(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),p4(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function TU(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return p4(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Qb(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}function AU(t,e){e===void 0&&(e="/");let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?pd(t):t;return{pathname:n?n.startsWith("/")?n:CU(n,e):e,search:LU(i),hash:IU(r)}}function CU(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function ly(t,e,n,i){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NU(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function x4(t,e){let n=NU(t);return e?n.map((i,r)=>r===n.length-1?i.pathname:i.pathnameBase):n.map(i=>i.pathnameBase)}function y4(t,e,n,i){i===void 0&&(i=!1);let r;typeof t=="string"?r=pd(t):(r=sf({},t),Yn(!r.pathname||!r.pathname.includes("?"),ly("?","pathname","search",r)),Yn(!r.pathname||!r.pathname.includes("#"),ly("#","pathname","hash",r)),Yn(!r.search||!r.search.includes("#"),ly("#","search","hash",r)));let s=t===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=n;else{let h=e.length-1;if(!i&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}a=h>=0?e[h]:"/"}let l=AU(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&n.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Ia=t=>t.join("/").replace(/\/\/+/g,"/"),RU=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),LU=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,IU=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function kU(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const v4=["post","put","patch","delete"];new Set(v4);const PU=["get",...v4];new Set(PU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function of(){return of=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},of.apply(this,arguments)}const Jb=F.createContext(null),DU=F.createContext(null),pc=F.createContext(null),Kg=F.createContext(null),Ka=F.createContext({outlet:null,matches:[],isDataRoute:!1}),w4=F.createContext(null);function BU(t,e){let{relative:n}=e===void 0?{}:e;jf()||Yn(!1);let{basename:i,navigator:r}=F.useContext(pc),{hash:s,pathname:o,search:a}=S4(t,{relative:n}),l=o;return i!=="/"&&(l=o==="/"?i:Ia([i,o])),r.createHref({pathname:l,search:a,hash:s})}function jf(){return F.useContext(Kg)!=null}function mc(){return jf()||Yn(!1),F.useContext(Kg).location}function _4(t){F.useContext(pc).static||F.useLayoutEffect(t)}function eS(){let{isDataRoute:t}=F.useContext(Ka);return t?qU():UU()}function UU(){jf()||Yn(!1);let t=F.useContext(Jb),{basename:e,future:n,navigator:i}=F.useContext(pc),{matches:r}=F.useContext(Ka),{pathname:s}=mc(),o=JSON.stringify(x4(r,n.v7_relativeSplatPath)),a=F.useRef(!1);return _4(()=>{a.current=!0}),F.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let h=y4(c,JSON.parse(o),s,u.relative==="path");t==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Ia([e,h.pathname])),(u.replace?i.replace:i.push)(h,u.state,u)},[e,i,o,s,t])}function b4(){let{matches:t}=F.useContext(Ka),e=t[t.length-1];return e?e.params:{}}function S4(t,e){let{relative:n}=e===void 0?{}:e,{future:i}=F.useContext(pc),{matches:r}=F.useContext(Ka),{pathname:s}=mc(),o=JSON.stringify(x4(r,i.v7_relativeSplatPath));return F.useMemo(()=>y4(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function OU(t,e){return jU(t,e)}function jU(t,e,n,i){jf()||Yn(!1);let{navigator:r}=F.useContext(pc),{matches:s}=F.useContext(Ka),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=mc(),u;if(e){var h;let g=typeof e=="string"?pd(e):e;l==="/"||(h=g.pathname)!=null&&h.startsWith(l)||Yn(!1),u=g}else u=c;let f=u.pathname||"/",p=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");p="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let x=hU(t,{pathname:p}),y=HU(x&&x.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Ia([l,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Ia([l,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,i);return e&&y?F.createElement(Kg.Provider,{value:{location:of({pathname:"/",search:"",hash:"",state:null,key:"default"},u),navigationType:ga.Pop}},y):y}function FU(){let t=XU(),e=kU(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return F.createElement(F.Fragment,null,F.createElement("h2",null,"Unexpected Application Error!"),F.createElement("h3",{style:{fontStyle:"italic"}},e),n?F.createElement("pre",{style:r},n):null,null)}const zU=F.createElement(FU,null);class VU extends F.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?F.createElement(Ka.Provider,{value:this.props.routeContext},F.createElement(w4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function WU(t){let{routeContext:e,match:n,children:i}=t,r=F.useContext(Jb);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),F.createElement(Ka.Provider,{value:e},i)}function HU(t,e,n,i){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),i===void 0&&(i=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,a=(r=n)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(h=>h.route.id&&(a==null?void 0:a[h.route.id])!==void 0);u>=0||Yn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(n&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let h=o[u];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(c=u),h.route.id){let{loaderData:f,errors:p}=n,x=h.route.loader&&f[h.route.id]===void 0&&(!p||p[h.route.id]===void 0);if(h.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,h,f)=>{let p,x=!1,y=null,g=null;n&&(p=a&&h.route.id?a[h.route.id]:void 0,y=h.route.errorElement||zU,l&&(c<0&&f===0?(KU("route-fallback"),x=!0,g=null):c===f&&(x=!0,g=h.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),_=()=>{let w;return p?w=y:x?w=g:h.route.Component?w=F.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=u,F.createElement(WU,{match:h,routeContext:{outlet:u,matches:m,isDataRoute:n!=null},children:w})};return n&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?F.createElement(VU,{location:n.location,revalidation:n.revalidation,component:y,error:p,children:_(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):_()},null)}var M4=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(M4||{}),E4=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(E4||{});function GU(t){let e=F.useContext(Jb);return e||Yn(!1),e}function $U(t){let e=F.useContext(DU);return e||Yn(!1),e}function YU(t){let e=F.useContext(Ka);return e||Yn(!1),e}function T4(t){let e=YU(),n=e.matches[e.matches.length-1];return n.route.id||Yn(!1),n.route.id}function XU(){var t;let e=F.useContext(w4),n=$U(),i=T4();return e!==void 0?e:(t=n.errors)==null?void 0:t[i]}function qU(){let{router:t}=GU(M4.UseNavigateStable),e=T4(E4.UseNavigateStable),n=F.useRef(!1);return _4(()=>{n.current=!0}),F.useCallback(function(r,s){s===void 0&&(s={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,of({fromRouteId:e},s)))},[t,e])}const lE={};function KU(t,e,n){lE[t]||(lE[t]=!0)}function ZU(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ms(t){Yn(!1)}function QU(t){let{basename:e="/",children:n=null,location:i,navigationType:r=ga.Pop,navigator:s,static:o=!1,future:a}=t;jf()&&Yn(!1);let l=e.replace(/^\/*/,"/"),c=F.useMemo(()=>({basename:l,navigator:s,static:o,future:of({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=pd(i));let{pathname:u="/",search:h="",hash:f="",state:p=null,key:x="default"}=i,y=F.useMemo(()=>{let g=Qb(u,l);return g==null?null:{location:{pathname:g,search:h,hash:f,state:p,key:x},navigationType:r}},[l,u,h,f,p,x,r]);return y==null?null:F.createElement(pc.Provider,{value:c},F.createElement(Kg.Provider,{children:n,value:y}))}function JU(t){let{children:e,location:n}=t;return OU(V1(e),n)}new Promise(()=>{});function V1(t,e){e===void 0&&(e=[]);let n=[];return F.Children.forEach(t,(i,r)=>{if(!F.isValidElement(i))return;let s=[...e,r];if(i.type===F.Fragment){n.push.apply(n,V1(i.props.children,s));return}i.type!==Ms&&Yn(!1),!i.props.index||!i.props.children||Yn(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=V1(i.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function W1(){return W1=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},W1.apply(this,arguments)}function eO(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function tO(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nO(t,e){return t.button===0&&(!e||e==="_self")&&!tO(t)}const iO=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rO="6";try{window.__reactRouterVersion=rO}catch{}const sO="startTransition",cE=dN[sO];function oO(t){let{basename:e,children:n,future:i,window:r}=t,s=F.useRef();s.current==null&&(s.current=cU({window:r,v5Compat:!0}));let o=s.current,[a,l]=F.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=F.useCallback(h=>{c&&cE?cE(()=>l(h)):l(h)},[l,c]);return F.useLayoutEffect(()=>o.listen(u),[o,u]),F.useEffect(()=>ZU(i),[i]),F.createElement(QU,{basename:e,children:n,location:a.location,navigationType:a.action,navigator:o,future:i})}const aO=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lO=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,on=F.forwardRef(function(e,n){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:h}=e,f=eO(e,iO),{basename:p}=F.useContext(pc),x,y=!1;if(typeof c=="string"&&lO.test(c)&&(x=c,aO))try{let w=new URL(window.location.href),S=c.startsWith("//")?new URL(w.protocol+c):new URL(c),N=Qb(S.pathname,p);S.origin===w.origin&&N!=null?c=N+S.search+S.hash:y=!0}catch{}let g=BU(c,{relative:r}),m=cO(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:h});function _(w){i&&i(w),w.defaultPrevented||m(w)}return F.createElement("a",W1({},f,{href:x||g,onClick:y||s?i:_,ref:n,target:l}))});var uE;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(uE||(uE={}));var dE;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dE||(dE={}));function cO(t,e){let{target:n,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=eS(),c=mc(),u=S4(t,{relative:o});return F.useCallback(h=>{if(nO(h,n)){h.preventDefault();let f=i!==void 0?i:X0(c)===X0(u);l(t,{replace:f,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,n,t,s,o,a])}const tS=F.createContext({});function nS(t){const e=F.useRef(null);return e.current===null&&(e.current=t()),e.current}const iS=typeof window<"u",A4=iS?F.useLayoutEffect:F.useEffect,Zg=F.createContext(null);function rS(t,e){t.indexOf(e)===-1&&t.push(e)}function sS(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ro=(t,e,n)=>n>e?e:n<t?t:n;let oS=()=>{};const Lo={},C4=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function N4(t){return typeof t=="object"&&t!==null}const R4=t=>/^0[^.\s]+$/u.test(t);function aS(t){let e;return()=>(e===void 0&&(e=t()),e)}const Yr=t=>t,uO=(t,e)=>n=>e(t(n)),Ff=(...t)=>t.reduce(uO),af=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class lS{constructor(){this.subscriptions=[]}add(e){return rS(this.subscriptions,e),()=>sS(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const js=t=>t*1e3,Hr=t=>t/1e3;function L4(t,e){return e?t*(1e3/e):0}const I4=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,dO=1e-7,hO=12;function fO(t,e,n,i,r){let s,o,a=0;do o=e+(n-e)/2,s=I4(o,i,r)-t,s>0?n=o:e=o;while(Math.abs(s)>dO&&++a<hO);return o}function zf(t,e,n,i){if(t===e&&n===i)return Yr;const r=s=>fO(s,0,1,t,n);return s=>s===0||s===1?s:I4(r(s),e,i)}const k4=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,P4=t=>e=>1-t(1-e),D4=zf(.33,1.53,.69,.99),cS=P4(D4),B4=k4(cS),U4=t=>(t*=2)<1?.5*cS(t):.5*(2-Math.pow(2,-10*(t-1))),uS=t=>1-Math.sin(Math.acos(t)),O4=P4(uS),j4=k4(uS),pO=zf(.42,0,1,1),mO=zf(0,0,.58,1),F4=zf(.42,0,.58,1),gO=t=>Array.isArray(t)&&typeof t[0]!="number",z4=t=>Array.isArray(t)&&typeof t[0]=="number",xO={linear:Yr,easeIn:pO,easeInOut:F4,easeOut:mO,circIn:uS,circInOut:j4,circOut:O4,backIn:cS,backInOut:B4,backOut:D4,anticipate:U4},yO=t=>typeof t=="string",hE=t=>{if(z4(t)){oS(t.length===4);const[e,n,i,r]=t;return zf(e,n,i,r)}else if(yO(t))return xO[t];return t},Cp=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function vO(t,e){let n=new Set,i=new Set,r=!1,s=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function l(u){o.has(u)&&(c.schedule(u),t()),u(a)}const c={schedule:(u,h=!1,f=!1)=>{const x=f&&r?n:i;return h&&o.add(u),x.has(u)||x.add(u),u},cancel:u=>{i.delete(u),o.delete(u)},process:u=>{if(a=u,r){s=!0;return}r=!0,[n,i]=[i,n],n.forEach(l),n.clear(),r=!1,s&&(s=!1,c.process(u))}};return c}const wO=40;function V4(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Cp.reduce((w,S)=>(w[S]=vO(s),w),{}),{setup:a,read:l,resolveKeyframes:c,preUpdate:u,update:h,preRender:f,render:p,postRender:x}=o,y=()=>{const w=Lo.useManualTiming?r.timestamp:performance.now();n=!1,Lo.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(w-r.timestamp,wO),1)),r.timestamp=w,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),h.process(r),f.process(r),p.process(r),x.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(y))},g=()=>{n=!0,i=!0,r.isProcessing||t(y)};return{schedule:Cp.reduce((w,S)=>{const N=o[S];return w[S]=(k,R=!1,B=!1)=>(n||g(),N.schedule(k,R,B)),w},{}),cancel:w=>{for(let S=0;S<Cp.length;S++)o[Cp[S]].cancel(w)},state:r,steps:o}}const{schedule:fn,cancel:za,state:fi,steps:cy}=V4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Yr,!0);let Vm;function _O(){Vm=void 0}const nr={now:()=>(Vm===void 0&&nr.set(fi.isProcessing||Lo.useManualTiming?fi.timestamp:performance.now()),Vm),set:t=>{Vm=t,queueMicrotask(_O)}},W4=t=>e=>typeof e=="string"&&e.startsWith(t),dS=W4("--"),bO=W4("var(--"),hS=t=>bO(t)?SO.test(t.split("/*")[0].trim()):!1,SO=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,md={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},lf={...md,transform:t=>Ro(0,1,t)},Np={...md,default:1},Ch=t=>Math.round(t*1e5)/1e5,fS=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function MO(t){return t==null}const EO=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pS=(t,e)=>n=>!!(typeof n=="string"&&EO.test(n)&&n.startsWith(t)||e&&!MO(n)&&Object.prototype.hasOwnProperty.call(n,e)),H4=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(fS);return{[t]:parseFloat(r),[e]:parseFloat(s),[n]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},TO=t=>Ro(0,255,t),uy={...md,transform:t=>Math.round(TO(t))},Il={test:pS("rgb","red"),parse:H4("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+uy.transform(t)+", "+uy.transform(e)+", "+uy.transform(n)+", "+Ch(lf.transform(i))+")"};function AO(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const H1={test:pS("#"),parse:AO,transform:Il.transform},Vf=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ia=Vf("deg"),Fs=Vf("%"),pt=Vf("px"),CO=Vf("vh"),NO=Vf("vw"),fE={...Fs,parse:t=>Fs.parse(t)/100,transform:t=>Fs.transform(t*100)},fu={test:pS("hsl","hue"),parse:H4("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+Fs.transform(Ch(e))+", "+Fs.transform(Ch(n))+", "+Ch(lf.transform(i))+")"},Wn={test:t=>Il.test(t)||H1.test(t)||fu.test(t),parse:t=>Il.test(t)?Il.parse(t):fu.test(t)?fu.parse(t):H1.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?Il.transform(t):fu.transform(t),getAnimatableNone:t=>{const e=Wn.parse(t);return e.alpha=0,Wn.transform(e)}},RO=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function LO(t){var e,n;return isNaN(t)&&typeof t=="string"&&(((e=t.match(fS))==null?void 0:e.length)||0)+(((n=t.match(RO))==null?void 0:n.length)||0)>0}const G4="number",$4="color",IO="var",kO="var(",pE="${}",PO=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function cf(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(PO,l=>(Wn.test(l)?(i.color.push(s),r.push($4),n.push(Wn.parse(l))):l.startsWith(kO)?(i.var.push(s),r.push(IO),n.push(l)):(i.number.push(s),r.push(G4),n.push(parseFloat(l))),++s,pE)).split(pE);return{values:n,split:a,indexes:i,types:r}}function Y4(t){return cf(t).values}function X4(t){const{split:e,types:n}=cf(t),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=n[o];a===G4?s+=Ch(r[o]):a===$4?s+=Wn.transform(r[o]):s+=r[o]}return s}}const DO=t=>typeof t=="number"?0:Wn.test(t)?Wn.getAnimatableNone(t):t;function BO(t){const e=Y4(t);return X4(t)(e.map(DO))}const Va={test:LO,parse:Y4,createTransformer:X4,getAnimatableNone:BO};function dy(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function UO({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,s=0,o=0;if(!e)r=s=o=n;else{const a=n<.5?n*(1+e):n+e-n*e,l=2*n-a;r=dy(l,a,t+1/3),s=dy(l,a,t),o=dy(l,a,t-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function q0(t,e){return n=>n>0?e:t}const Mn=(t,e,n)=>t+(e-t)*n,hy=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},OO=[H1,Il,fu],jO=t=>OO.find(e=>e.test(t));function mE(t){const e=jO(t);if(!e)return!1;let n=e.parse(t);return e===fu&&(n=UO(n)),n}const gE=(t,e)=>{const n=mE(t),i=mE(e);if(!n||!i)return q0(t,e);const r={...n};return s=>(r.red=hy(n.red,i.red,s),r.green=hy(n.green,i.green,s),r.blue=hy(n.blue,i.blue,s),r.alpha=Mn(n.alpha,i.alpha,s),Il.transform(r))},G1=new Set(["none","hidden"]);function FO(t,e){return G1.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function zO(t,e){return n=>Mn(t,e,n)}function mS(t){return typeof t=="number"?zO:typeof t=="string"?hS(t)?q0:Wn.test(t)?gE:HO:Array.isArray(t)?q4:typeof t=="object"?Wn.test(t)?gE:VO:q0}function q4(t,e){const n=[...t],i=n.length,r=t.map((s,o)=>mS(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)n[o]=r[o](s);return n}}function VO(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=mS(t[r])(t[r],e[r]));return r=>{for(const s in i)n[s]=i[s](r);return n}}function WO(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const s=e.types[r],o=t.indexes[s][i[s]],a=t.values[o]??0;n[r]=a,i[s]++}return n}const HO=(t,e)=>{const n=Va.createTransformer(e),i=cf(t),r=cf(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?G1.has(t)&&!r.values.length||G1.has(e)&&!i.values.length?FO(t,e):Ff(q4(WO(i,r),r.values),n):q0(t,e)};function K4(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?Mn(t,e,n):mS(t)(t,e)}const GO=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>fn.update(e,n),stop:()=>za(e),now:()=>fi.isProcessing?fi.timestamp:nr.now()}},Z4=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let s=0;s<r;s++)i+=Math.round(t(s/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},K0=2e4;function gS(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<K0;)e+=n,i=t.next(e);return e>=K0?1/0:e}function $O(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(gS(i),K0);return{type:"keyframes",ease:s=>i.next(r*s).value/e,duration:Hr(r)}}const YO=5;function Q4(t,e,n){const i=Math.max(e-YO,0);return L4(n-t(i),e-i)}const Ln={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},fy=.001;function XO({duration:t=Ln.duration,bounce:e=Ln.bounce,velocity:n=Ln.velocity,mass:i=Ln.mass}){let r,s,o=1-e;o=Ro(Ln.minDamping,Ln.maxDamping,o),t=Ro(Ln.minDuration,Ln.maxDuration,Hr(t)),o<1?(r=c=>{const u=c*o,h=u*t,f=u-n,p=$1(c,o),x=Math.exp(-h);return fy-f/p*x},s=c=>{const h=c*o*t,f=h*n+n,p=Math.pow(o,2)*Math.pow(c,2)*t,x=Math.exp(-h),y=$1(Math.pow(c,2),o);return(-r(c)+fy>0?-1:1)*((f-p)*x)/y}):(r=c=>{const u=Math.exp(-c*t),h=(c-n)*t+1;return-fy+u*h},s=c=>{const u=Math.exp(-c*t),h=(n-c)*(t*t);return u*h});const a=5/t,l=KO(r,s,a);if(t=js(t),isNaN(l))return{stiffness:Ln.stiffness,damping:Ln.damping,duration:t};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:t}}}const qO=12;function KO(t,e,n){let i=n;for(let r=1;r<qO;r++)i=i-t(i)/e(i);return i}function $1(t,e){return t*Math.sqrt(1-e*e)}const ZO=["duration","bounce"],QO=["stiffness","damping","mass"];function xE(t,e){return e.some(n=>t[n]!==void 0)}function JO(t){let e={velocity:Ln.velocity,stiffness:Ln.stiffness,damping:Ln.damping,mass:Ln.mass,isResolvedFromDuration:!1,...t};if(!xE(t,QO)&&xE(t,ZO))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,s=2*Ro(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:Ln.mass,stiffness:r,damping:s}}else{const n=XO(t);e={...e,...n,mass:Ln.mass},e.isResolvedFromDuration=!0}return e}function Z0(t=Ln.visualDuration,e=Ln.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=JO({...n,velocity:-Hr(n.velocity||0)}),x=f||0,y=c/(2*Math.sqrt(l*u)),g=o-s,m=Hr(Math.sqrt(l/u)),_=Math.abs(g)<5;i||(i=_?Ln.restSpeed.granular:Ln.restSpeed.default),r||(r=_?Ln.restDelta.granular:Ln.restDelta.default);let w;if(y<1){const N=$1(m,y);w=k=>{const R=Math.exp(-y*m*k);return o-R*((x+y*m*g)/N*Math.sin(N*k)+g*Math.cos(N*k))}}else if(y===1)w=N=>o-Math.exp(-m*N)*(g+(x+m*g)*N);else{const N=m*Math.sqrt(y*y-1);w=k=>{const R=Math.exp(-y*m*k),B=Math.min(N*k,300);return o-R*((x+y*m*g)*Math.sinh(B)+N*g*Math.cosh(B))/N}}const S={calculatedDuration:p&&h||null,next:N=>{const k=w(N);if(p)a.done=N>=h;else{let R=N===0?x:0;y<1&&(R=N===0?js(x):Q4(w,N,k));const B=Math.abs(R)<=i,L=Math.abs(o-k)<=r;a.done=B&&L}return a.value=a.done?o:k,a},toString:()=>{const N=Math.min(gS(S),K0),k=Z4(R=>S.next(N*R).value,N,30);return N+"ms "+k},toTransition:()=>{}};return S}Z0.applyToOptions=t=>{const e=$O(t,100,Z0);return t.ease=e.ease,t.duration=js(e.duration),t.type="keyframes",t};function Y1({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},p=B=>a!==void 0&&B<a||l!==void 0&&B>l,x=B=>a===void 0?l:l===void 0||Math.abs(a-B)<Math.abs(l-B)?a:l;let y=n*e;const g=h+y,m=o===void 0?g:o(g);m!==g&&(y=m-h);const _=B=>-y*Math.exp(-B/i),w=B=>m+_(B),S=B=>{const L=_(B),D=w(B);f.done=Math.abs(L)<=c,f.value=f.done?m:D};let N,k;const R=B=>{p(f.value)&&(N=B,k=Z0({keyframes:[f.value,x(f.value)],velocity:Q4(w,B,f.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return R(0),{calculatedDuration:null,next:B=>{let L=!1;return!k&&N===void 0&&(L=!0,S(B),R(B)),N!==void 0&&B>=N?k.next(B-N):(!L&&S(B),f)}}}function ej(t,e,n){const i=[],r=n||Lo.mix||K4,s=t.length-1;for(let o=0;o<s;o++){let a=r(t[o],t[o+1]);if(e){const l=Array.isArray(e)?e[o]||Yr:e;a=Ff(l,a)}i.push(a)}return i}function tj(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const s=t.length;if(oS(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[s-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=ej(e,i,r),l=a.length,c=u=>{if(o&&u<t[0])return e[0];let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=af(t[h],t[h+1],u);return a[h](f)};return n?u=>c(Ro(t[0],t[s-1],u)):c}function nj(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=af(0,e,i);t.push(Mn(n,1,r))}}function ij(t){const e=[0];return nj(e,t.length-1),e}function rj(t,e){return t.map(n=>n*e)}function sj(t,e){return t.map(()=>e||F4).splice(0,t.length-1)}function Nh({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=gO(i)?i.map(hE):hE(i),s={done:!1,value:e[0]},o=rj(n&&n.length===e.length?n:ij(e),t),a=tj(o,e,{ease:Array.isArray(r)?r:sj(e,r)});return{calculatedDuration:t,next:l=>(s.value=a(l),s.done=l>=t,s)}}const oj=t=>t!==null;function xS(t,{repeat:e,repeatType:n="loop"},i,r=1){const s=t.filter(oj),a=r<0||e&&n!=="loop"&&e%2===1?0:s.length-1;return!a||i===void 0?s[a]:i}const aj={decay:Y1,inertia:Y1,tween:Nh,keyframes:Nh,spring:Z0};function J4(t){typeof t.type=="string"&&(t.type=aj[t.type])}class yS{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const lj=t=>t/100;class vS extends yS{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var i,r;const{motionValue:n}=this.options;n&&n.updatedAt!==nr.now()&&this.tick(nr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(r=(i=this.options).onStop)==null||r.call(i))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;J4(e);const{type:n=Nh,repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=e;let{keyframes:a}=e;const l=n||Nh;l!==Nh&&typeof a[0]!="number"&&(this.mixKeyframes=Ff(lj,K4(a[0],a[1])),a=[0,100]);const c=l({...e,keyframes:a});s==="mirror"&&(this.mirroredGenerator=l({...e,keyframes:[...a].reverse(),velocity:-o})),c.calculatedDuration===null&&(c.calculatedDuration=gS(c));const{calculatedDuration:u}=c;this.calculatedDuration=u,this.resolvedDuration=u+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=c}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:l}=this;if(this.startTime===null)return i.next(0);const{delay:c=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:x,onUpdate:y,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const m=this.currentTime-c*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?m<0:m>r;this.currentTime=Math.max(m,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let w=this.currentTime,S=i;if(h){const B=Math.min(this.currentTime,r)/a;let L=Math.floor(B),D=B%1;!D&&B>=1&&(D=1),D===1&&L--,L=Math.min(L,h+1),!!(L%2)&&(f==="reverse"?(D=1-D,p&&(D-=p/a)):f==="mirror"&&(S=o)),w=Ro(0,1,D)*a}const N=_?{done:!1,value:u[0]}:S.next(w);s&&(N.value=s(N.value));let{done:k}=N;!_&&l!==null&&(k=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&k);return R&&x!==Y1&&(N.value=xS(u,this.options,g,this.speed)),y&&y(N.value),R&&this.finish(),N}then(e,n){return this.finished.then(e,n)}get duration(){return Hr(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Hr(e)}get time(){return Hr(this.currentTime)}set time(e){var n;e=js(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(n=this.driver)==null||n.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(nr.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Hr(this.currentTime))}play(){var r,s;if(this.isStopped)return;const{driver:e=GO,startTime:n}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(s=(r=this.options).onPlay)==null||s.call(r);const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(nr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,n;this.notifyFinished(),this.teardown(),this.state="finished",(n=(e=this.options).onComplete)==null||n.call(e)}cancel(){var e,n;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(n=(e=this.options).onCancel)==null||n.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var n;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(n=this.driver)==null||n.stop(),e.observe(this)}}function cj(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const kl=t=>t*180/Math.PI,X1=t=>{const e=kl(Math.atan2(t[1],t[0]));return q1(e)},uj={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:X1,rotateZ:X1,skewX:t=>kl(Math.atan(t[1])),skewY:t=>kl(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},q1=t=>(t=t%360,t<0&&(t+=360),t),yE=X1,vE=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),wE=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),dj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:vE,scaleY:wE,scale:t=>(vE(t)+wE(t))/2,rotateX:t=>q1(kl(Math.atan2(t[6],t[5]))),rotateY:t=>q1(kl(Math.atan2(-t[2],t[0]))),rotateZ:yE,rotate:yE,skewX:t=>kl(Math.atan(t[4])),skewY:t=>kl(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function K1(t){return t.includes("scale")?1:0}function Z1(t,e){if(!t||t==="none")return K1(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=dj,r=n;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=uj,r=a}if(!r)return K1(e);const s=i[e],o=r[1].split(",").map(fj);return typeof s=="function"?s(o):o[s]}const hj=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Z1(n,e)};function fj(t){return parseFloat(t.trim())}const gd=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],xd=new Set(gd),_E=t=>t===md||t===pt,pj=new Set(["x","y","z"]),mj=gd.filter(t=>!pj.has(t));function gj(t){const e=[];return mj.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const Kl={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Z1(e,"x"),y:(t,{transform:e})=>Z1(e,"y")};Kl.translateX=Kl.x;Kl.translateY=Kl.y;const Zl=new Set;let Q1=!1,J1=!1,ew=!1;function eL(){if(J1){const t=Array.from(Zl).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=gj(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))==null||a.set(o)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}J1=!1,Q1=!1,Zl.forEach(t=>t.complete(ew)),Zl.clear()}function tL(){Zl.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(J1=!0)})}function xj(){ew=!0,tL(),eL(),ew=!1}class wS{constructor(e,n,i,r,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Zl.add(this),Q1||(Q1=!0,fn.read(tL),fn.resolveKeyframes(eL))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const s=r==null?void 0:r.get(),o=e[e.length-1];if(s!==void 0)e[0]=s;else if(i&&n){const a=i.readValue(n,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),r&&s===void 0&&r.set(e[0])}cj(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Zl.delete(this)}cancel(){this.state==="scheduled"&&(Zl.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const yj=t=>t.startsWith("--");function vj(t,e,n){yj(e)?t.style.setProperty(e,n):t.style[e]=n}const wj=aS(()=>window.ScrollTimeline!==void 0),_j={};function bj(t,e){const n=aS(t);return()=>_j[e]??n()}const nL=bj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),oh=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,bE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:oh([0,.65,.55,1]),circOut:oh([.55,0,1,.45]),backIn:oh([.31,.01,.66,-.59]),backOut:oh([.33,1.53,.69,.99])};function iL(t,e){if(t)return typeof t=="function"?nL()?Z4(t,e):"ease-out":z4(t)?oh(t):Array.isArray(t)?t.map(n=>iL(n,e)||bE.easeOut):bE[t]}function Sj(t,e,n,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeOut",times:l}={},c=void 0){const u={[e]:n};l&&(u.offset=l);const h=iL(a,r);Array.isArray(h)&&(u.easing=h);const f={delay:i,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return c&&(f.pseudoElement=c),t.animate(u,f)}function rL(t){return typeof t=="function"&&"applyToOptions"in t}function Mj({type:t,...e}){return rL(t)&&nL()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class Ej extends yS{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:a,onComplete:l}=e;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=e,oS(typeof e.type!="string");const c=Mj(e);this.animation=Sj(n,i,r,c,s),c.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const u=xS(r,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):vj(n,i,u),this.animation.cancel()}l==null||l(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,n;(n=(e=this.animation).finish)==null||n.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,n;this.isPseudoElement||(n=(e=this.animation).commitStyles)==null||n.call(e)}get duration(){var n,i;const e=((i=(n=this.animation.effect)==null?void 0:n.getComputedTiming)==null?void 0:i.call(n).duration)||0;return Hr(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Hr(e)}get time(){return Hr(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=js(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){var i;return this.allowFlatten&&((i=this.animation.effect)==null||i.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&wj()?(this.animation.timeline=e,Yr):n(this)}}const sL={anticipate:U4,backInOut:B4,circInOut:j4};function Tj(t){return t in sL}function Aj(t){typeof t.ease=="string"&&Tj(t.ease)&&(t.ease=sL[t.ease])}const SE=10;class Cj extends Ej{constructor(e){Aj(e),J4(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:s,...o}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const a=new vS({...o,autoplay:!1}),l=js(this.finishedTime??this.time);n.setWithVelocity(a.sample(l-SE).value,a.sample(l).value,SE),a.stop()}}const ME=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Va.test(t)||t==="0")&&!t.startsWith("url("));function Nj(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function Rj(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=t[t.length-1],o=ME(r,e),a=ME(s,e);return!o||!a?!1:Nj(t)||(n==="spring"||rL(n))&&i}function tw(t){t.duration=0,t.type="keyframes"}const Lj=new Set(["opacity","clipPath","filter","transform"]),Ij=aS(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function kj(t){var u;const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:s,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=e.owner.getProps();return Ij()&&n&&Lj.has(n)&&(n!=="transform"||!c)&&!l&&!i&&r!=="mirror"&&s!==0&&o!=="inertia"}const Pj=40;class Dj extends yS{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",keyframes:a,name:l,motionValue:c,element:u,...h}){var x;super(),this.stop=()=>{var y,g;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(g=this.keyframeResolver)==null||g.cancel()},this.createdAt=nr.now();const f={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:s,repeatType:o,name:l,motionValue:c,element:u,...h},p=(u==null?void 0:u.KeyframeResolver)||wS;this.keyframeResolver=new p(a,(y,g,m)=>this.onKeyframesResolved(y,g,f,!m),l,c,u),(x=this.keyframeResolver)==null||x.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:s,type:o,velocity:a,delay:l,isHandoff:c,onUpdate:u}=i;this.resolvedAt=nr.now(),Rj(e,s,o,a)||((Lo.instantAnimations||!l)&&(u==null||u(xS(e,i,n))),e[0]=e[e.length-1],tw(i),i.repeat=0);const f={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>Pj?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},p=!c&&kj(f)?new Cj({...f,element:f.motionValue.owner.current}):new vS(f);p.finished.then(()=>this.notifyFinished()).catch(Yr),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),xj()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const Bj=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Uj(t){const e=Bj.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function oL(t,e,n=1){const[i,r]=Uj(t);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return C4(o)?parseFloat(o):o}return hS(r)?oL(r,e,n+1):r}function _S(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const aL=new Set(["width","height","top","left","right","bottom",...gd]),Oj={test:t=>t==="auto",parse:t=>t},lL=t=>e=>e.test(t),cL=[md,pt,Fs,ia,NO,CO,Oj],EE=t=>cL.find(lL(t));function jj(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||R4(t):!0}const Fj=new Set(["brightness","contrast","saturate","opacity"]);function zj(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(fS)||[];if(!i)return t;const r=n.replace(i,"");let s=Fj.has(e)?1:0;return i!==n&&(s*=100),e+"("+s+r+")"}const Vj=/\b([a-z-]*)\(.*?\)/gu,nw={...Va,getAnimatableNone:t=>{const e=t.match(Vj);return e?e.map(zj).join(" "):t}},TE={...md,transform:Math.round},Wj={rotate:ia,rotateX:ia,rotateY:ia,rotateZ:ia,scale:Np,scaleX:Np,scaleY:Np,scaleZ:Np,skew:ia,skewX:ia,skewY:ia,distance:pt,translateX:pt,translateY:pt,translateZ:pt,x:pt,y:pt,z:pt,perspective:pt,transformPerspective:pt,opacity:lf,originX:fE,originY:fE,originZ:pt},bS={borderWidth:pt,borderTopWidth:pt,borderRightWidth:pt,borderBottomWidth:pt,borderLeftWidth:pt,borderRadius:pt,radius:pt,borderTopLeftRadius:pt,borderTopRightRadius:pt,borderBottomRightRadius:pt,borderBottomLeftRadius:pt,width:pt,maxWidth:pt,height:pt,maxHeight:pt,top:pt,right:pt,bottom:pt,left:pt,padding:pt,paddingTop:pt,paddingRight:pt,paddingBottom:pt,paddingLeft:pt,margin:pt,marginTop:pt,marginRight:pt,marginBottom:pt,marginLeft:pt,backgroundPositionX:pt,backgroundPositionY:pt,...Wj,zIndex:TE,fillOpacity:lf,strokeOpacity:lf,numOctaves:TE},Hj={...bS,color:Wn,backgroundColor:Wn,outlineColor:Wn,fill:Wn,stroke:Wn,borderColor:Wn,borderTopColor:Wn,borderRightColor:Wn,borderBottomColor:Wn,borderLeftColor:Wn,filter:nw,WebkitFilter:nw},uL=t=>Hj[t];function dL(t,e){let n=uL(t);return n!==nw&&(n=Va),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const Gj=new Set(["auto","none","0"]);function $j(t,e,n){let i=0,r;for(;i<t.length&&!r;){const s=t[i];typeof s=="string"&&!Gj.has(s)&&cf(s).values.length&&(r=t[i]),i++}if(r&&n)for(const s of e)t[s]=dL(n,r)}class Yj extends wS{constructor(e,n,i,r,s){super(e,n,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),hS(c))){const u=oL(c,n.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!aL.has(i)||e.length!==2)return;const[r,s]=e,o=EE(r),a=EE(s);if(o!==a)if(_E(o)&&_E(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else Kl[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||jj(e[r]))&&i.push(r);i.length&&$j(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kl[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var a;const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const s=i.length-1,o=i[s];i[s]=Kl[n](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([l,c])=>{e.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function Xj(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=(n==null?void 0:n[t])??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const hL=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function fL(t){return N4(t)&&"offsetHeight"in t}const AE=30,qj=t=>!isNaN(parseFloat(t));class Kj{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{var s;const r=nr.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&((s=this.events.change)==null||s.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=nr.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=qj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new lS);const i=this.events[e].add(n);return e==="change"?()=>{i(),fn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=nr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>AE)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,AE);return L4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,n;(e=this.dependents)==null||e.clear(),(n=this.events.destroy)==null||n.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function $u(t,e){return new Kj(t,e)}const{schedule:SS}=V4(queueMicrotask,!1),is={x:!1,y:!1};function pL(){return is.x||is.y}function Zj(t){return t==="x"||t==="y"?is[t]?null:(is[t]=!0,()=>{is[t]=!1}):is.x||is.y?null:(is.x=is.y=!0,()=>{is.x=is.y=!1})}function mL(t,e){const n=Xj(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function CE(t){return!(t.pointerType==="touch"||pL())}function Qj(t,e,n={}){const[i,r,s]=mL(t,n),o=a=>{if(!CE(a))return;const{target:l}=a,c=e(l,a);if(typeof c!="function"||!l)return;const u=h=>{CE(h)&&(c(h),l.removeEventListener("pointerleave",u))};l.addEventListener("pointerleave",u,r)};return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const gL=(t,e)=>e?t===e?!0:gL(t,e.parentElement):!1,MS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,Jj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function e8(t){return Jj.has(t.tagName)||t.tabIndex!==-1}const Wm=new WeakSet;function NE(t){return e=>{e.key==="Enter"&&t(e)}}function py(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const t8=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=NE(()=>{if(Wm.has(n))return;py(n,"down");const r=NE(()=>{py(n,"up")}),s=()=>py(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",s,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function RE(t){return MS(t)&&!pL()}function n8(t,e,n={}){const[i,r,s]=mL(t,n),o=a=>{const l=a.currentTarget;if(!RE(a))return;Wm.add(l);const c=e(l,a),u=(p,x)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Wm.has(l)&&Wm.delete(l),RE(p)&&typeof c=="function"&&c(p,{success:x})},h=p=>{u(p,l===window||l===document||n.useGlobalTarget||gL(l,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,r),window.addEventListener("pointercancel",f,r)};return i.forEach(a=>{(n.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),fL(a)&&(a.addEventListener("focus",c=>t8(c,r)),!e8(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),s}function xL(t){return N4(t)&&"ownerSVGElement"in t}function i8(t){return xL(t)&&t.tagName==="svg"}const ki=t=>!!(t&&t.getVelocity),r8=[...cL,Wn,Va],s8=t=>r8.find(lL(t)),ES=F.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function LE(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function o8(...t){return e=>{let n=!1;const i=t.map(r=>{const s=LE(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():LE(t[r],null)}}}}function a8(...t){return F.useCallback(o8(...t),t)}class l8 extends F.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=fL(i)&&i.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function c8({children:t,isPresent:e,anchorX:n,root:i}){const r=F.useId(),s=F.useRef(null),o=F.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=F.useContext(ES),l=a8(s,t==null?void 0:t.ref);return F.useInsertionEffect(()=>{const{width:c,height:u,top:h,left:f,right:p}=o.current;if(e||!s.current||!c||!u)return;const x=n==="left"?`left: ${f}`:`right: ${p}`;s.current.dataset.motionPopId=r;const y=document.createElement("style");a&&(y.nonce=a);const g=i??document.head;return g.appendChild(y),y.sheet&&y.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${x}px !important;
            top: ${h}px !important;
          }
        `),()=>{g.contains(y)&&g.removeChild(y)}},[e]),d.jsx(l8,{isPresent:e,childRef:s,sizeRef:o,children:F.cloneElement(t,{ref:l})})}const u8=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:s,mode:o,anchorX:a,root:l})=>{const c=nS(d8),u=F.useId();let h=!0,f=F.useMemo(()=>(h=!1,{id:u,initial:e,isPresent:n,custom:r,onExitComplete:p=>{c.set(p,!0);for(const x of c.values())if(!x)return;i&&i()},register:p=>(c.set(p,!1),()=>c.delete(p))}),[n,c,i]);return s&&h&&(f={...f}),F.useMemo(()=>{c.forEach((p,x)=>c.set(x,!1))},[n]),F.useEffect(()=>{!n&&!c.size&&i&&i()},[n]),o==="popLayout"&&(t=d.jsx(c8,{isPresent:n,anchorX:a,root:l,children:t})),d.jsx(Zg.Provider,{value:f,children:t})};function d8(){return new Map}function yL(t=!0){const e=F.useContext(Zg);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,s=F.useId();F.useEffect(()=>{if(t)return r(s)},[t]);const o=F.useCallback(()=>t&&i&&i(s),[s,i,t]);return!n&&i?[!1,o]:[!0]}const Rp=t=>t.key||"";function IE(t){const e=[];return F.Children.forEach(t,n=>{F.isValidElement(n)&&e.push(n)}),e}const po=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:s="sync",propagate:o=!1,anchorX:a="left",root:l})=>{const[c,u]=yL(o),h=F.useMemo(()=>IE(t),[t]),f=o&&!c?[]:h.map(Rp),p=F.useRef(!0),x=F.useRef(h),y=nS(()=>new Map),[g,m]=F.useState(h),[_,w]=F.useState(h);A4(()=>{p.current=!1,x.current=h;for(let k=0;k<_.length;k++){const R=Rp(_[k]);f.includes(R)?y.delete(R):y.get(R)!==!0&&y.set(R,!1)}},[_,f.length,f.join("-")]);const S=[];if(h!==g){let k=[...h];for(let R=0;R<_.length;R++){const B=_[R],L=Rp(B);f.includes(L)||(k.splice(R,0,B),S.push(B))}return s==="wait"&&S.length&&(k=S),w(IE(k)),m(h),null}const{forceRender:N}=F.useContext(tS);return d.jsx(d.Fragment,{children:_.map(k=>{const R=Rp(k),B=o&&!c?!1:h===_||f.includes(R),L=()=>{if(y.has(R))y.set(R,!0);else return;let D=!0;y.forEach(j=>{j||(D=!1)}),D&&(N==null||N(),w(x.current),o&&(u==null||u()),i&&i())};return d.jsx(u8,{isPresent:B,initial:!p.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:s,root:l,onExitComplete:B?void 0:L,anchorX:a,children:k},R)})})},vL=F.createContext({strict:!1}),kE={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Yu={};for(const t in kE)Yu[t]={isEnabled:e=>kE[t].some(n=>!!e[n])};function h8(t){for(const e in t)Yu[e]={...Yu[e],...t[e]}}const f8=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Q0(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||f8.has(t)}let wL=t=>!Q0(t);function p8(t){typeof t=="function"&&(wL=e=>e.startsWith("on")?!Q0(e):t(e))}try{p8(require("@emotion/is-prop-valid").default)}catch{}function m8(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(wL(r)||n===!0&&Q0(r)||!e&&!Q0(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const Qg=F.createContext({});function Jg(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function uf(t){return typeof t=="string"||Array.isArray(t)}const TS=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],AS=["initial",...TS];function ex(t){return Jg(t.animate)||AS.some(e=>uf(t[e]))}function _L(t){return!!(ex(t)||t.variants)}function g8(t,e){if(ex(t)){const{initial:n,animate:i}=t;return{initial:n===!1||uf(n)?n:void 0,animate:uf(i)?i:void 0}}return t.inherit!==!1?e:{}}function x8(t){const{initial:e,animate:n}=g8(t,F.useContext(Qg));return F.useMemo(()=>({initial:e,animate:n}),[PE(e),PE(n)])}function PE(t){return Array.isArray(t)?t.join(" "):t}const df={};function y8(t){for(const e in t)df[e]=t[e],dS(e)&&(df[e].isCSSVariable=!0)}function bL(t,{layout:e,layoutId:n}){return xd.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!df[t]||t==="opacity")}const v8={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},w8=gd.length;function _8(t,e,n){let i="",r=!0;for(let s=0;s<w8;s++){const o=gd[s],a=t[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||n){const c=hL(a,bS[o]);if(!l){r=!1;const u=v8[o]||o;i+=`${u}(${c}) `}n&&(e[o]=c)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function CS(t,e,n){const{style:i,vars:r,transformOrigin:s}=t;let o=!1,a=!1;for(const l in e){const c=e[l];if(xd.has(l)){o=!0;continue}else if(dS(l)){r[l]=c;continue}else{const u=hL(c,bS[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||n?i.transform=_8(e,t.transform,n):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const NS=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SL(t,e,n){for(const i in e)!ki(e[i])&&!bL(i,n)&&(t[i]=e[i])}function b8({transformTemplate:t},e){return F.useMemo(()=>{const n=NS();return CS(n,e,t),Object.assign({},n.vars,n.style)},[e])}function S8(t,e){const n=t.style||{},i={};return SL(i,n,t),Object.assign(i,b8(t,e)),i}function M8(t,e){const n={},i=S8(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const E8={offset:"stroke-dashoffset",array:"stroke-dasharray"},T8={offset:"strokeDashoffset",array:"strokeDasharray"};function A8(t,e,n=1,i=0,r=!0){t.pathLength=1;const s=r?E8:T8;t[s.offset]=pt.transform(-i);const o=pt.transform(e),a=pt.transform(n);t[s.array]=`${o} ${a}`}function ML(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:s=1,pathOffset:o=0,...a},l,c,u){if(CS(t,a,c),l){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),n!==void 0&&(h.y=n),i!==void 0&&(h.scale=i),r!==void 0&&A8(h,r,s,o,!1)}const EL=()=>({...NS(),attrs:{}}),TL=t=>typeof t=="string"&&t.toLowerCase()==="svg";function C8(t,e,n,i){const r=F.useMemo(()=>{const s=EL();return ML(s,e,TL(i),t.transformTemplate,t.style),{...s.attrs,style:{...s.style}}},[e]);if(t.style){const s={};SL(s,t.style,t),r.style={...s,...r.style}}return r}const N8=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function RS(t){return typeof t!="string"||t.includes("-")?!1:!!(N8.indexOf(t)>-1||/[A-Z]/u.test(t))}function R8(t,e,n,{latestValues:i},r,s=!1){const a=(RS(t)?C8:M8)(e,i,r,t),l=m8(e,typeof t=="string",s),c=t!==F.Fragment?{...l,...a,ref:n}:{},{children:u}=e,h=F.useMemo(()=>ki(u)?u.get():u,[u]);return F.createElement(t,{...c,children:h})}function DE(t){const e=[{},{}];return t==null||t.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function LS(t,e,n,i){if(typeof e=="function"){const[r,s]=DE(i);e=e(n!==void 0?n:t.custom,r,s)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,s]=DE(i);e=e(n!==void 0?n:t.custom,r,s)}return e}function Hm(t){return ki(t)?t.get():t}function L8({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:I8(n,i,r,t),renderState:e()}}function I8(t,e,n,i){const r={},s=i(t,{});for(const f in s)r[f]=Hm(s[f]);let{initial:o,animate:a}=t;const l=ex(t),c=_L(t);e&&c&&!l&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=n?n.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Jg(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const x=LS(t,f[p]);if(x){const{transitionEnd:y,transition:g,...m}=x;for(const _ in m){let w=m[_];if(Array.isArray(w)){const S=u?w.length-1:0;w=w[S]}w!==null&&(r[_]=w)}for(const _ in y)r[_]=y[_]}}}return r}const AL=t=>(e,n)=>{const i=F.useContext(Qg),r=F.useContext(Zg),s=()=>L8(t,e,i,r);return n?s():nS(s)};function IS(t,e,n){var s;const{style:i}=t,r={};for(const o in i)(ki(i[o])||e.style&&ki(e.style[o])||bL(o,t)||((s=n==null?void 0:n.getValue(o))==null?void 0:s.liveStyle)!==void 0)&&(r[o]=i[o]);return r}const k8=AL({scrapeMotionValuesFromProps:IS,createRenderState:NS});function CL(t,e,n){const i=IS(t,e,n);for(const r in t)if(ki(t[r])||ki(e[r])){const s=gd.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=t[r]}return i}const P8=AL({scrapeMotionValuesFromProps:CL,createRenderState:EL}),D8=Symbol.for("motionComponentSymbol");function pu(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function B8(t,e,n){return F.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):pu(n)&&(n.current=i))},[e])}const kS=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),U8="framerAppearId",NL="data-"+kS(U8),RL=F.createContext({});function O8(t,e,n,i,r){var y,g;const{visualElement:s}=F.useContext(Qg),o=F.useContext(vL),a=F.useContext(Zg),l=F.useContext(ES).reducedMotion,c=F.useRef(null);i=i||o.renderer,!c.current&&i&&(c.current=i(t,{visualState:e,parent:s,props:n,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:l}));const u=c.current,h=F.useContext(RL);u&&!u.projection&&r&&(u.type==="html"||u.type==="svg")&&j8(c.current,n,r,h);const f=F.useRef(!1);F.useInsertionEffect(()=>{u&&f.current&&u.update(n,a)});const p=n[NL],x=F.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((g=window.MotionHasOptimisedAnimation)==null?void 0:g.call(window,p)));return A4(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),x.current&&u.animationState&&u.animationState.animateChanges())}),F.useEffect(()=>{u&&(!x.current&&u.animationState&&u.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{var m;(m=window.MotionHandoffMarkAsComplete)==null||m.call(window,p)}),x.current=!1),u.enteringChildren=void 0)}),u}function j8(t,e,n,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c,layoutCrossfade:u}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:LL(t.parent)),t.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&pu(a),visualElement:t,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,crossfade:u,layoutScroll:l,layoutRoot:c})}function LL(t){if(t)return t.options.allowProjection!==!1?t.projection:LL(t.parent)}function my(t,{forwardMotionProps:e=!1}={},n,i){n&&h8(n);const r=RS(t)?P8:k8;function s(a,l){let c;const u={...F.useContext(ES),...a,layoutId:F8(a)},{isStatic:h}=u,f=x8(a),p=r(a,h);if(!h&&iS){z8();const x=V8(u);c=x.MeasureLayout,f.visualElement=O8(t,p,u,i,x.ProjectionNode)}return d.jsxs(Qg.Provider,{value:f,children:[c&&f.visualElement?d.jsx(c,{visualElement:f.visualElement,...u}):null,R8(t,a,B8(p,f.visualElement,l),p,h,e)]})}s.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=F.forwardRef(s);return o[D8]=t,o}function F8({layoutId:t}){const e=F.useContext(tS).id;return e&&t!==void 0?e+"-"+t:t}function z8(t,e){F.useContext(vL).strict}function V8(t){const{drag:e,layout:n}=Yu;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e!=null&&e.isEnabled(t)||n!=null&&n.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function W8(t,e){if(typeof Proxy>"u")return my;const n=new Map,i=(s,o)=>my(s,o,t,e),r=(s,o)=>i(s,o);return new Proxy(r,{get:(s,o)=>o==="create"?i:(n.has(o)||n.set(o,my(o,void 0,t,e)),n.get(o))})}function IL({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function H8({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function G8(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function gy(t){return t===void 0||t===1}function iw({scale:t,scaleX:e,scaleY:n}){return!gy(t)||!gy(e)||!gy(n)}function gl(t){return iw(t)||kL(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function kL(t){return BE(t.x)||BE(t.y)}function BE(t){return t&&t!=="0%"}function J0(t,e,n){const i=t-n,r=e*i;return n+r}function UE(t,e,n,i,r){return r!==void 0&&(t=J0(t,r,i)),J0(t,n,i)+e}function rw(t,e=0,n=1,i,r){t.min=UE(t.min,e,n,i,r),t.max=UE(t.max,e,n,i,r)}function PL(t,{x:e,y:n}){rw(t.x,e.translate,e.scale,e.originPoint),rw(t.y,n.translate,n.scale,n.originPoint)}const OE=.999999999999,jE=1.0000000000001;function $8(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=n[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&gu(t,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,PL(t,o)),i&&gl(s.latestValues)&&gu(t,s.latestValues))}e.x<jE&&e.x>OE&&(e.x=1),e.y<jE&&e.y>OE&&(e.y=1)}function mu(t,e){t.min=t.min+e,t.max=t.max+e}function FE(t,e,n,i,r=.5){const s=Mn(t.min,t.max,r);rw(t,e,n,s,i)}function gu(t,e){FE(t.x,e.x,e.scaleX,e.scale,e.originX),FE(t.y,e.y,e.scaleY,e.scale,e.originY)}function DL(t,e){return IL(G8(t.getBoundingClientRect(),e))}function Y8(t,e,n){const i=DL(t,n),{scroll:r}=e;return r&&(mu(i.x,r.offset.x),mu(i.y,r.offset.y)),i}const zE=()=>({translate:0,scale:1,origin:0,originPoint:0}),xu=()=>({x:zE(),y:zE()}),VE=()=>({min:0,max:0}),Dn=()=>({x:VE(),y:VE()}),sw={current:null},BL={current:!1};function X8(){if(BL.current=!0,!!iS)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>sw.current=t.matches;t.addEventListener("change",e),e()}else sw.current=!1}const q8=new WeakMap;function K8(t,e,n){for(const i in e){const r=e[i],s=n[i];if(ki(r))t.addValue(i,r);else if(ki(s))t.addValue(i,$u(r,{owner:t}));else if(s!==r)if(t.hasValue(i)){const o=t.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=t.getStaticValue(i);t.addValue(i,$u(o!==void 0?o:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const WE=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Z8{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=wS,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=nr.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,fn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=ex(n),this.isVariantNode=_L(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{},this);for(const f in h){const p=h[f];l[f]!==void 0&&ki(p)&&p.set(l[f])}}mount(e){var n;this.current=e,q8.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((i,r)=>this.bindToMotionValue(r,i)),BL.current||X8(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:sw.current,(n=this.parent)==null||n.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),za(this.notifyUpdate),za(this.render),this.valueSubscriptions.forEach(n=>n()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const n in this.events)this.events[n].clear();for(const n in this.features){const i=this.features[n];i&&(i.unmount(),i.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=xd.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&fn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),s&&s(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Yu){const n=Yu[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Dn()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<WE.length;i++){const r=WE[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=K8(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=$u(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(C4(i)||R4(i))?i=parseFloat(i):!s8(i)&&Va.test(n)&&(i=dL(e,n)),this.setBaseTarget(e,ki(i)?i.get():i)),ki(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var s;const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=LS(this.props,n,(s=this.presenceContext)==null?void 0:s.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!ki(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new lS),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){SS.render(this.render)}}class UL extends Z8{constructor(){super(...arguments),this.KeyframeResolver=Yj}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;ki(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function OL(t,{style:e,vars:n},i,r){const s=t.style;let o;for(o in e)s[o]=e[o];r==null||r.applyProjectionStyles(s,i);for(o in n)s.setProperty(o,n[o])}function Q8(t){return window.getComputedStyle(t)}class J8 extends UL{constructor(){super(...arguments),this.type="html",this.renderInstance=OL}readValueFromInstance(e,n){var i;if(xd.has(n))return(i=this.projection)!=null&&i.isProjecting?K1(n):hj(e,n);{const r=Q8(e),s=(dS(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(e,{transformPagePoint:n}){return DL(e,n)}build(e,n,i){CS(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return IS(e,n,i)}}const jL=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function eF(t,e,n,i){OL(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(jL.has(r)?r:kS(r),e.attrs[r])}class tF extends UL{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Dn}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(xd.has(n)){const i=uL(n);return i&&i.default||0}return n=jL.has(n)?n:kS(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return CL(e,n,i)}build(e,n,i){ML(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){eF(e,n,i,r)}mount(e){this.isSVGTag=TL(e.tagName),super.mount(e)}}const nF=(t,e)=>RS(t)?new tF(e):new J8(e,{allowProjection:t!==F.Fragment});function Cu(t,e,n){const i=t.getProps();return LS(i,e,n!==void 0?n:i.custom,t)}const ow=t=>Array.isArray(t);function iF(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,$u(n))}function rF(t){return ow(t)?t[t.length-1]||0:t}function sF(t,e){const n=Cu(t,e);let{transitionEnd:i={},transition:r={},...s}=n||{};s={...s,...i};for(const o in s){const a=rF(s[o]);iF(t,o,a)}}function oF(t){return!!(ki(t)&&t.add)}function aw(t,e){const n=t.getValue("willChange");if(oF(n))return n.add(e);if(!n&&Lo.WillChange){const i=new Lo.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function FL(t){return t.props[NL]}const aF=t=>t!==null;function lF(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(aF),s=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[s]}const cF={type:"spring",stiffness:500,damping:25,restSpeed:10},uF=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),dF={type:"keyframes",duration:.8},hF={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fF=(t,{keyframes:e})=>e.length>2?dF:xd.has(t)?t.startsWith("scale")?uF(e[1]):cF:hF;function pF({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const PS=(t,e,n,i={},r,s)=>o=>{const a=_S(i,t)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-js(l);const u={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:s?void 0:r};pF(a)||Object.assign(u,fF(t,u)),u.duration&&(u.duration=js(u.duration)),u.repeatDelay&&(u.repeatDelay=js(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(tw(u),u.delay===0&&(h=!0)),(Lo.instantAnimations||Lo.skipAnimations)&&(h=!0,tw(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!s&&e.get()!==void 0){const f=lF(u.keyframes,a);if(f!==void 0){fn.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new vS(u):new Dj(u)};function mF({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function zL(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:s=t.getDefaultTransition(),transitionEnd:o,...a}=e;i&&(s=i);const l=[],c=r&&t.animationState&&t.animationState.getState()[r];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),f=a[u];if(f===void 0||c&&mF(c,u))continue;const p={delay:n,..._S(s||{},u)},x=h.get();if(x!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===x&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const m=FL(t);if(m){const _=window.MotionHandoffAnimation(m,u,fn);_!==null&&(p.startTime=_,y=!0)}}aw(t,u),h.start(PS(u,h,f,t.shouldReduceMotion&&aL.has(u)?{type:!1}:p,t,y));const g=h.animation;g&&l.push(g)}return o&&Promise.all(l).then(()=>{fn.update(()=>{o&&sF(t,o)})}),l}function VL(t,e,n,i=0,r=1){const s=Array.from(t).sort((c,u)=>c.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*i;return typeof n=="function"?n(s,o):r===1?s*i:a-s*i}function lw(t,e,n={}){var l;const i=Cu(t,e,n.type==="exit"?(l=t.presenceContext)==null?void 0:l.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const s=i?()=>Promise.all(zL(t,i,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=r;return gF(t,e,c,u,h,f,n)}:()=>Promise.resolve(),{when:a}=r;if(a){const[c,u]=a==="beforeChildren"?[s,o]:[o,s];return c().then(()=>u())}else return Promise.all([s(),o(n.delay)])}function gF(t,e,n=0,i=0,r=0,s=1,o){const a=[];for(const l of t.variantChildren)l.notify("AnimationStart",e),a.push(lw(l,e,{...o,delay:n+(typeof i=="function"?0:i)+VL(t.variantChildren,l,i,r,s)}).then(()=>l.notify("AnimationComplete",e)));return Promise.all(a)}function xF(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>lw(t,s,n));i=Promise.all(r)}else if(typeof e=="string")i=lw(t,e,n);else{const r=typeof e=="function"?Cu(t,e,n.custom):e;i=Promise.all(zL(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function WL(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const yF=AS.length;function HL(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?HL(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<yF;n++){const i=AS[n],r=t.props[i];(uf(r)||r===!1)&&(e[i]=r)}return e}const vF=[...TS].reverse(),wF=TS.length;function _F(t){return e=>Promise.all(e.map(({animation:n,options:i})=>xF(t,n,i)))}function bF(t){let e=_F(t),n=HE(),i=!0;const r=l=>(c,u)=>{var f;const h=Cu(t,u,l==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:x,...y}=h;c={...c,...y,...x}}return c};function s(l){e=l(t)}function o(l){const{props:c}=t,u=HL(t.parent)||{},h=[],f=new Set;let p={},x=1/0;for(let g=0;g<wF;g++){const m=vF[g],_=n[m],w=c[m]!==void 0?c[m]:u[m],S=uf(w),N=m===l?_.isActive:null;N===!1&&(x=g);let k=w===u[m]&&w!==c[m]&&S;if(k&&i&&t.manuallyAnimateOnMount&&(k=!1),_.protectedKeys={...p},!_.isActive&&N===null||!w&&!_.prevProp||Jg(w)||typeof w=="boolean")continue;const R=SF(_.prevProp,w);let B=R||m===l&&_.isActive&&!k&&S||g>x&&S,L=!1;const D=Array.isArray(w)?w:[w];let j=D.reduce(r(m),{});N===!1&&(j={});const{prevResolvedValues:Y={}}=_,I={...Y,...j},v=P=>{B=!0,f.has(P)&&(L=!0,f.delete(P)),_.needsAnimating[P]=!0;const C=t.getValue(P);C&&(C.liveStyle=!1)};for(const P in I){const C=j[P],z=Y[P];if(p.hasOwnProperty(P))continue;let V=!1;ow(C)&&ow(z)?V=!WL(C,z):V=C!==z,V?C!=null?v(P):f.add(P):C!==void 0&&f.has(P)?v(P):_.protectedKeys[P]=!0}_.prevProp=w,_.prevResolvedValues=j,_.isActive&&(p={...p,...j}),i&&t.blockInitialAnimation&&(B=!1);const b=k&&R;B&&(!b||L)&&h.push(...D.map(P=>{const C={type:m};if(typeof P=="string"&&i&&!b&&t.manuallyAnimateOnMount&&t.parent){const{parent:z}=t,V=Cu(z,P);if(z.enteringChildren&&V){const{delayChildren:U}=V.transition||{};C.delay=VL(z.enteringChildren,t,U)}}return{animation:P,options:C}}))}if(f.size){const g={};if(typeof c.initial!="boolean"){const m=Cu(t,Array.isArray(c.initial)?c.initial[0]:c.initial);m&&m.transition&&(g.transition=m.transition)}f.forEach(m=>{const _=t.getBaseTarget(m),w=t.getValue(m);w&&(w.liveStyle=!0),g[m]=_??null}),h.push({animation:g})}let y=!!h.length;return i&&(c.initial===!1||c.initial===c.animate)&&!t.manuallyAnimateOnMount&&(y=!1),i=!1,y?e(h):Promise.resolve()}function a(l,c){var h;if(n[l].isActive===c)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(l,c)}),n[l].isActive=c;const u=o(l);for(const f in n)n[f].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>n,reset:()=>{n=HE()}}}function SF(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!WL(e,t):!1}function il(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function HE(){return{animate:il(!0),whileInView:il(),whileHover:il(),whileTap:il(),whileDrag:il(),whileFocus:il(),exit:il()}}class Za{constructor(e){this.isMounted=!1,this.node=e}update(){}}class MF extends Za{constructor(e){super(e),e.animationState||(e.animationState=bF(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Jg(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let EF=0;class TF extends Za{constructor(){super(...arguments),this.id=EF++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const AF={animation:{Feature:MF},exit:{Feature:TF}};function hf(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function Wf(t){return{point:{x:t.pageX,y:t.pageY}}}const CF=t=>e=>MS(e)&&t(e,Wf(e));function Rh(t,e,n,i){return hf(t,e,CF(n),i)}const GL=1e-4,NF=1-GL,RF=1+GL,$L=.01,LF=0-$L,IF=0+$L;function Vi(t){return t.max-t.min}function kF(t,e,n){return Math.abs(t-e)<=n}function GE(t,e,n,i=.5){t.origin=i,t.originPoint=Mn(e.min,e.max,t.origin),t.scale=Vi(n)/Vi(e),t.translate=Mn(n.min,n.max,t.origin)-t.originPoint,(t.scale>=NF&&t.scale<=RF||isNaN(t.scale))&&(t.scale=1),(t.translate>=LF&&t.translate<=IF||isNaN(t.translate))&&(t.translate=0)}function Lh(t,e,n,i){GE(t.x,e.x,n.x,i?i.originX:void 0),GE(t.y,e.y,n.y,i?i.originY:void 0)}function $E(t,e,n){t.min=n.min+e.min,t.max=t.min+Vi(e)}function PF(t,e,n){$E(t.x,e.x,n.x),$E(t.y,e.y,n.y)}function YE(t,e,n){t.min=e.min-n.min,t.max=t.min+Vi(e)}function Ih(t,e,n){YE(t.x,e.x,n.x),YE(t.y,e.y,n.y)}function Br(t){return[t("x"),t("y")]}const YL=({current:t})=>t?t.ownerDocument.defaultView:null,XE=(t,e)=>Math.abs(t-e);function DF(t,e){const n=XE(t.x,e.x),i=XE(t.y,e.y);return Math.sqrt(n**2+i**2)}class XL{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=yy(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,x=DF(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!x)return;const{point:y}=f,{timestamp:g}=fi;this.history.push({...y,timestamp:g});const{onStart:m,onMove:_}=this.handlers;p||(m&&m(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=xy(p,this.transformPagePoint),fn.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:x,onSessionEnd:y,resumeAnimation:g}=this.handlers;if(this.dragSnapToOrigin&&g&&g(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=yy(f.type==="pointercancel"?this.lastMoveEventInfo:xy(p,this.transformPagePoint),this.history);this.startEvent&&x&&x(f,m),y&&y(f,m)},!MS(e))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=o,this.contextWindow=r||window;const a=Wf(e),l=xy(a,this.transformPagePoint),{point:c}=l,{timestamp:u}=fi;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,yy(l,this.history)),this.removeListeners=Ff(Rh(this.contextWindow,"pointermove",this.handlePointerMove),Rh(this.contextWindow,"pointerup",this.handlePointerUp),Rh(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),za(this.updatePoint)}}function xy(t,e){return e?{point:e(t.point)}:t}function qE(t,e){return{x:t.x-e.x,y:t.y-e.y}}function yy({point:t},e){return{point:t,delta:qE(t,qL(e)),offset:qE(t,BF(e)),velocity:UF(e,.1)}}function BF(t){return t[0]}function qL(t){return t[t.length-1]}function UF(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=qL(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>js(e)));)n--;if(!i)return{x:0,y:0};const s=Hr(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function OF(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?Mn(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?Mn(n,t,i.max):Math.min(t,n)),t}function KE(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function jF(t,{top:e,left:n,bottom:i,right:r}){return{x:KE(t.x,n,r),y:KE(t.y,e,i)}}function ZE(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function FF(t,e){return{x:ZE(t.x,e.x),y:ZE(t.y,e.y)}}function zF(t,e){let n=.5;const i=Vi(t),r=Vi(e);return r>i?n=af(e.min,e.max-i,t.min):i>r&&(n=af(t.min,t.max-r,e.min)),Ro(0,1,n)}function VF(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const cw=.35;function WF(t=cw){return t===!1?t=0:t===!0&&(t=cw),{x:QE(t,"left","right"),y:QE(t,"top","bottom")}}function QE(t,e,n){return{min:JE(t,e),max:JE(t,n)}}function JE(t,e){return typeof t=="number"?t:t[e]||0}const HF=new WeakMap;class GF{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Dn(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wf(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:x,onDragStart:y}=this.getProps();if(p&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Zj(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Br(m=>{let _=this.getAxisMotionValue(m).get()||0;if(Fs.test(_)){const{projection:w}=this.visualElement;if(w&&w.layout){const S=w.layout.layoutBox[m];S&&(_=Vi(S)*(parseFloat(_)/100))}}this.originPoint[m]=_}),y&&fn.postRender(()=>y(h,f)),aw(this.visualElement,"transform");const{animationState:g}=this.visualElement;g&&g.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:x,onDirectionLock:y,onDrag:g}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:m}=f;if(x&&this.currentDirection===null){this.currentDirection=$F(m),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,m),this.updateAxis("y",f.point,m),this.visualElement.render(),g&&g(h,f)},l=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},c=()=>Br(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new XL(e,{onSessionStart:s,onStart:o,onMove:a,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:i,contextWindow:YL(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!r||!i)return;const{velocity:o}=r;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&fn.postRender(()=>a(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Lp(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=OF(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var s;const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(s=this.visualElement.projection)==null?void 0:s.layout,r=this.constraints;e&&pu(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=jF(i.layoutBox,e):this.constraints=!1,this.elastic=WF(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&Br(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=VF(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!pu(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Y8(i,r.root,this.visualElement.getTransformPagePoint());let o=FF(r.layout.layoutBox,s);if(n){const a=n(H8(o));this.hasMutatedConstraints=!!a,a&&(o=IL(a))}return o}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Br(u=>{if(!Lp(u,n,this.currentDirection))return;let h=l&&l[u]||{};o&&(h={min:0,max:0});const f=r?200:1e6,p=r?40:1e7,x={type:"inertia",velocity:i?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...s,...h};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return aw(this.visualElement,e),i.start(PS(e,i,0,n,this.visualElement,!1))}stopAnimation(){Br(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Br(e=>{var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)==null?void 0:n.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Br(n=>{const{drag:i}=this.getProps();if(!Lp(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[n];s.set(e[n]-Mn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!pu(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Br(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=zF({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Br(o=>{if(!Lp(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(Mn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;HF.set(this.visualElement,this);const e=this.visualElement.current,n=Rh(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();pu(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),fn.read(i);const o=hf(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Br(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=l[u].translate,h.set(h.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),n(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=cw,dragMomentum:a=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function Lp(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function $F(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class YF extends Za{constructor(e){super(e),this.removeGroupControls=Yr,this.removeListeners=Yr,this.controls=new GF(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Yr}unmount(){this.removeGroupControls(),this.removeListeners()}}const eT=t=>(e,n)=>{t&&fn.postRender(()=>t(e,n))};class XF extends Za{constructor(){super(...arguments),this.removePointerDownListener=Yr}onPointerDown(e){this.session=new XL(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:YL(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:eT(e),onStart:eT(n),onMove:i,onEnd:(s,o)=>{delete this.session,r&&fn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Rh(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Gm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function tT(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const zd={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(pt.test(t))t=parseFloat(t);else return t;const n=tT(t,e.target.x),i=tT(t,e.target.y);return`${n}% ${i}%`}},qF={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Va.parse(t);if(r.length>5)return i;const s=Va.createTransformer(t),o=typeof r[0]!="number"?1:0,a=n.x.scale*e.x,l=n.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=Mn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};let vy=!1;class KF extends F.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;y8(ZF),s&&(n.group&&n.group.add(s),i&&i.register&&r&&i.register(s),vy&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Gm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:s}=this.props,{projection:o}=i;return o&&(o.isPresent=s,vy=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==s?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||fn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),SS.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;vy=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function KL(t){const[e,n]=yL(),i=F.useContext(tS);return d.jsx(KF,{...t,layoutGroup:i,switchLayoutGroup:F.useContext(RL),isPresent:e,safeToRemove:n})}const ZF={borderRadius:{...zd,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zd,borderTopRightRadius:zd,borderBottomLeftRadius:zd,borderBottomRightRadius:zd,boxShadow:qF};function QF(t,e,n){const i=ki(t)?t:$u(t);return i.start(PS("",i,e,n)),i.animation}const JF=(t,e)=>t.depth-e.depth;class ez{constructor(){this.children=[],this.isDirty=!1}add(e){rS(this.children,e),this.isDirty=!0}remove(e){sS(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(JF),this.isDirty=!1,this.children.forEach(e)}}function tz(t,e){const n=nr.now(),i=({timestamp:r})=>{const s=r-n;s>=e&&(za(i),t(s-e))};return fn.setup(i,!0),()=>za(i)}const ZL=["TopLeft","TopRight","BottomLeft","BottomRight"],nz=ZL.length,nT=t=>typeof t=="string"?parseFloat(t):t,iT=t=>typeof t=="number"||pt.test(t);function iz(t,e,n,i,r,s){r?(t.opacity=Mn(0,n.opacity??1,rz(i)),t.opacityExit=Mn(e.opacity??1,0,sz(i))):s&&(t.opacity=Mn(e.opacity??1,n.opacity??1,i));for(let o=0;o<nz;o++){const a=`border${ZL[o]}Radius`;let l=rT(e,a),c=rT(n,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||iT(l)===iT(c)?(t[a]=Math.max(Mn(nT(l),nT(c),i),0),(Fs.test(c)||Fs.test(l))&&(t[a]+="%")):t[a]=c}(e.rotate||n.rotate)&&(t.rotate=Mn(e.rotate||0,n.rotate||0,i))}function rT(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const rz=QL(0,.5,O4),sz=QL(.5,.95,Yr);function QL(t,e,n){return i=>i<t?0:i>e?1:n(af(t,e,i))}function sT(t,e){t.min=e.min,t.max=e.max}function kr(t,e){sT(t.x,e.x),sT(t.y,e.y)}function oT(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function aT(t,e,n,i,r){return t-=e,t=J0(t,1/n,i),r!==void 0&&(t=J0(t,1/r,i)),t}function oz(t,e=0,n=1,i=.5,r,s=t,o=t){if(Fs.test(e)&&(e=parseFloat(e),e=Mn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=Mn(s.min,s.max,i);t===s&&(a-=e),t.min=aT(t.min,e,n,a,r),t.max=aT(t.max,e,n,a,r)}function lT(t,e,[n,i,r],s,o){oz(t,e[n],e[i],e[r],e.scale,s,o)}const az=["x","scaleX","originX"],lz=["y","scaleY","originY"];function cT(t,e,n,i){lT(t.x,e,az,n?n.x:void 0,i?i.x:void 0),lT(t.y,e,lz,n?n.y:void 0,i?i.y:void 0)}function uT(t){return t.translate===0&&t.scale===1}function JL(t){return uT(t.x)&&uT(t.y)}function dT(t,e){return t.min===e.min&&t.max===e.max}function cz(t,e){return dT(t.x,e.x)&&dT(t.y,e.y)}function hT(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function eI(t,e){return hT(t.x,e.x)&&hT(t.y,e.y)}function fT(t){return Vi(t.x)/Vi(t.y)}function pT(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class uz{constructor(){this.members=[]}add(e){rS(this.members,e),e.scheduleRender()}remove(e){if(sS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function dz(t,e,n){let i="";const r=t.x.translate/e.x,s=t.y.translate/e.y,o=(n==null?void 0:n.z)||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:c,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:x}=n;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),h&&(i+=`rotateX(${h}deg) `),f&&(i+=`rotateY(${f}deg) `),p&&(i+=`skewX(${p}deg) `),x&&(i+=`skewY(${x}deg) `)}const a=t.x.scale*e.x,l=t.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const wy=["","X","Y","Z"],hz=1e3;let fz=0;function _y(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function tI(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=FL(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:s}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",fn,!(r||s))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&tI(i)}function nI({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e==null?void 0:e()){this.id=fz++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(gz),this.nodes.forEach(wz),this.nodes.forEach(_z),this.nodes.forEach(xz)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new ez)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lS),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=xL(o)&&!i8(o),this.instance=o;const{layoutId:a,layout:l,visualElement:c}=this.options;if(c&&!c.current&&c.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(l||a)&&(this.isLayoutDirty=!0),t){let u,h=0;const f=()=>this.root.updateBlockedByResize=!1;fn.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,u&&u(),u=tz(f,250),Gm.hasAnimatedSinceResize&&(Gm.hasAnimatedSinceResize=!1,this.nodes.forEach(xT)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&c&&(a||l)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||c.getDefaultTransition()||Tz,{onLayoutAnimationStart:y,onLayoutAnimationComplete:g}=c.getProps(),m=!this.targetLayout||!eI(this.targetLayout,p),_=!h&&f;if(this.options.layoutRoot||this.resumeFrom||_||h&&(m||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const w={..._S(x,"layout"),onPlay:y,onComplete:g};(c.shouldReduceMotion||this.options.layoutRoot)&&(w.delay=0,w.type=!1),this.startAnimation(w),this.setAnimationOrigin(u,_)}else h||xT(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),za(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bz),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&tI(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(mT);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(gT);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(vz),this.nodes.forEach(pz),this.nodes.forEach(mz)):this.nodes.forEach(gT),this.clearAllSnapshots();const a=nr.now();fi.delta=Ro(0,1e3/60,a-fi.timestamp),fi.timestamp=a,fi.isProcessing=!0,cy.update.process(fi),cy.preRender.process(fi),cy.render.process(fi),fi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,SS.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(yz),this.sharedNodes.forEach(Sz)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Vi(this.snapshot.measuredBox.x)&&!Vi(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Dn(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!JL(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&this.instance&&(a||gl(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Az(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var c;const{visualElement:o}=this.options;if(!o)return Dn();const a=o.measureViewportBox();if(!(((c=this.scroll)==null?void 0:c.wasRoot)||this.path.some(Cz))){const{scroll:u}=this.root;u&&(mu(a.x,u.offset.x),mu(a.y,u.offset.y))}return a}removeElementScroll(o){var l;const a=Dn();if(kr(a,o),(l=this.scroll)!=null&&l.wasRoot)return a;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&kr(a,o),mu(a.x,h.offset.x),mu(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const l=Dn();kr(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&gu(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),gl(u.latestValues)&&gu(l,u.latestValues)}return gl(this.latestValues)&&gu(l,this.latestValues),l}removeTransform(o){const a=Dn();kr(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!gl(c.latestValues))continue;iw(c.latestValues)&&c.updateSnapshot();const u=Dn(),h=c.measurePageBox();kr(u,h),cT(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return gl(this.latestValues)&&cT(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const l=!!this.resumingFrom||this!==a;if(!(o||l&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=fi.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),Ih(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Dn(),this.targetWithTransforms=Dn()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PF(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):kr(this.target,this.layout.layoutBox),PL(this.target,this.targetDelta)):kr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Dn(),this.relativeTargetOrigin=Dn(),Ih(this.relativeTargetOrigin,this.target,p.target),kr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||iw(this.parent.latestValues)||kL(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var x;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let l=!0;if((this.isProjectionDirty||(x=this.parent)!=null&&x.isProjectionDirty)&&(l=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(l=!1),this.resolvedRelativeTargetAt===fi.timestamp&&(l=!1),l)return;const{layout:c,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(c||u))return;kr(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;$8(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=Dn());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(oT(this.prevProjectionDelta.x,this.projectionDelta.x),oT(this.prevProjectionDelta.y,this.projectionDelta.y)),Lh(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!pT(this.projectionDelta.x,this.prevProjectionDelta.x)||!pT(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=xu(),this.projectionDelta=xu(),this.projectionDeltaWithTransform=xu()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},h=xu();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=Dn(),p=l?l.source:void 0,x=this.layout?this.layout.source:void 0,y=p!==x,g=this.getStack(),m=!g||g.members.length<=1,_=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(Ez));this.animationProgress=0;let w;this.mixTargetDelta=S=>{const N=S/1e3;yT(h.x,o.x,N),yT(h.y,o.y,N),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ih(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Mz(this.relativeTarget,this.relativeTargetOrigin,f,N),w&&cz(this.relativeTarget,w)&&(this.isProjectionDirty=!1),w||(w=Dn()),kr(w,this.relativeTarget)),y&&(this.animationValues=u,iz(u,c,this.latestValues,N,_,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=N},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,l,c;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(c=(l=this.resumingFrom)==null?void 0:l.currentAnimation)==null||c.stop(),this.pendingAnimation&&(za(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=fn.update(()=>{Gm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=$u(0)),this.currentAnimation=QF(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(hz),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&iI(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Dn();const h=Vi(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+h;const f=Vi(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+f}kr(a,l),gu(a,u),Lh(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new uz),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&_y("z",o,c,this.animationValues);for(let u=0;u<wy.length;u++)_y(`rotate${wy[u]}`,o,c,this.animationValues),_y(`skew${wy[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const l=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Hm(a==null?void 0:a.pointerEvents)||"",o.transform=l?l(this.latestValues,""):"none";return}const c=this.getLead();if(!this.projectionDelta||!this.layout||!c.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Hm(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!gl(this.latestValues)&&(o.transform=l?l({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=c.animationValues||c.latestValues;this.applyTransformsToTarget();let h=dz(this.projectionDeltaWithTransform,this.treeScale,u);l&&(h=l(u,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,c.animationValues?o.opacity=c===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=c===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const x in df){if(u[x]===void 0)continue;const{correct:y,applyTo:g,isCSSVariable:m}=df[x],_=h==="none"?u[x]:y(u[x],c);if(g){const w=g.length;for(let S=0;S<w;S++)o[g[S]]=_}else m?this.options.visualElement.renderState.vars[x]=_:o[x]=_}this.options.layoutId&&(o.pointerEvents=c===this?Hm(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(mT),this.root.sharedNodes.clear()}}}function pz(t){t.updateLayout()}function mz(t){var n;const e=((n=t.resumeFrom)==null?void 0:n.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=t.layout,{animationType:s}=t.options,o=e.source!==t.layout.source;s==="size"?Br(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Vi(f);f.min=i[h].min,f.max=f.min+p}):iI(s,e.layoutBox,i)&&Br(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Vi(i[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=xu();Lh(a,i,e.layoutBox);const l=xu();o?Lh(l,t.applyTransform(r,!0),e.measuredBox):Lh(l,i,e.layoutBox);const c=!JL(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const x=Dn();Ih(x,e.layoutBox,f.layoutBox);const y=Dn();Ih(y,i,p.layoutBox),eI(x,y)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=x,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:i,snapshot:e,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:i}=t.options;i&&i()}t.options.transition=void 0}function gz(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xz(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function yz(t){t.clearSnapshot()}function mT(t){t.clearMeasurements()}function gT(t){t.isLayoutDirty=!1}function vz(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function xT(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function wz(t){t.resolveTargetDelta()}function _z(t){t.calcProjection()}function bz(t){t.resetSkewAndRotation()}function Sz(t){t.removeLeadSnapshot()}function yT(t,e,n){t.translate=Mn(e.translate,0,n),t.scale=Mn(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function vT(t,e,n,i){t.min=Mn(e.min,n.min,i),t.max=Mn(e.max,n.max,i)}function Mz(t,e,n,i){vT(t.x,e.x,n.x,i),vT(t.y,e.y,n.y,i)}function Ez(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const Tz={duration:.45,ease:[.4,0,.1,1]},wT=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),_T=wT("applewebkit/")&&!wT("chrome/")?Math.round:Yr;function bT(t){t.min=_T(t.min),t.max=_T(t.max)}function Az(t){bT(t.x),bT(t.y)}function iI(t,e,n){return t==="position"||t==="preserve-aspect"&&!kF(fT(e),fT(n),.2)}function Cz(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const Nz=nI({attachResizeListener:(t,e)=>hf(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),by={current:void 0},rI=nI({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!by.current){const t=new Nz({});t.mount(window),t.setOptions({layoutScroll:!0}),by.current=t}return by.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),Rz={pan:{Feature:XF},drag:{Feature:YF,ProjectionNode:rI,MeasureLayout:KL}};function ST(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,s=i[r];s&&fn.postRender(()=>s(e,Wf(e)))}class Lz extends Za{mount(){const{current:e}=this.node;e&&(this.unmount=Qj(e,(n,i)=>(ST(this.node,i,"Start"),r=>ST(this.node,r,"End"))))}unmount(){}}class Iz extends Za{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ff(hf(this.node.current,"focus",()=>this.onFocus()),hf(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function MT(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),s=i[r];s&&fn.postRender(()=>s(e,Wf(e)))}class kz extends Za{mount(){const{current:e}=this.node;e&&(this.unmount=n8(e,(n,i)=>(MT(this.node,i,"Start"),(r,{success:s})=>MT(this.node,r,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const uw=new WeakMap,Sy=new WeakMap,Pz=t=>{const e=uw.get(t.target);e&&e(t)},Dz=t=>{t.forEach(Pz)};function Bz({root:t,...e}){const n=t||document;Sy.has(n)||Sy.set(n,{});const i=Sy.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(Dz,{root:t,...e})),i[r]}function Uz(t,e,n){const i=Bz(e);return uw.set(t,n),i.observe(t),()=>{uw.delete(t),i.unobserve(t)}}const Oz={some:0,all:1};class jz extends Za{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:s}=e,o={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Oz[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=c?u:h;f&&f(l)};return Uz(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(Fz(e,n))&&this.startObserver()}unmount(){}}function Fz({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const zz={inView:{Feature:jz},tap:{Feature:kz},focus:{Feature:Iz},hover:{Feature:Lz}},Vz={layout:{ProjectionNode:rI,MeasureLayout:KL}},Wz={...AF,...zz,...Rz,...Vz},et=W8(Wz,nF);var ni={},tx={};tx.byteLength=$z;tx.toByteArray=Xz;tx.fromByteArray=Zz;var Rs=[],Ur=[],Hz=typeof Uint8Array<"u"?Uint8Array:Array,My="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var Tc=0,Gz=My.length;Tc<Gz;++Tc)Rs[Tc]=My[Tc],Ur[My.charCodeAt(Tc)]=Tc;Ur[45]=62;Ur[95]=63;function sI(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");n===-1&&(n=e);var i=n===e?0:4-n%4;return[n,i]}function $z(t){var e=sI(t),n=e[0],i=e[1];return(n+i)*3/4-i}function Yz(t,e,n){return(e+n)*3/4-n}function Xz(t){var e,n=sI(t),i=n[0],r=n[1],s=new Hz(Yz(t,i,r)),o=0,a=r>0?i-4:i,l;for(l=0;l<a;l+=4)e=Ur[t.charCodeAt(l)]<<18|Ur[t.charCodeAt(l+1)]<<12|Ur[t.charCodeAt(l+2)]<<6|Ur[t.charCodeAt(l+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return r===2&&(e=Ur[t.charCodeAt(l)]<<2|Ur[t.charCodeAt(l+1)]>>4,s[o++]=e&255),r===1&&(e=Ur[t.charCodeAt(l)]<<10|Ur[t.charCodeAt(l+1)]<<4|Ur[t.charCodeAt(l+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function qz(t){return Rs[t>>18&63]+Rs[t>>12&63]+Rs[t>>6&63]+Rs[t&63]}function Kz(t,e,n){for(var i,r=[],s=e;s<n;s+=3)i=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),r.push(qz(i));return r.join("")}function Zz(t){for(var e,n=t.length,i=n%3,r=[],s=16383,o=0,a=n-i;o<a;o+=s)r.push(Kz(t,o,o+s>a?a:o+s));return i===1?(e=t[n-1],r.push(Rs[e>>2]+Rs[e<<4&63]+"==")):i===2&&(e=(t[n-2]<<8)+t[n-1],r.push(Rs[e>>10]+Rs[e>>4&63]+Rs[e<<2&63]+"=")),r.join("")}var DS={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */DS.read=function(t,e,n,i,r){var s,o,a=r*8-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,f=n?-1:1,p=t[e+h];for(h+=f,s=p&(1<<-u)-1,p>>=-u,u+=a;u>0;s=s*256+t[e+h],h+=f,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=o*256+t[e+h],h+=f,u-=8);if(s===0)s=1-c;else{if(s===l)return o?NaN:(p?-1:1)*(1/0);o=o+Math.pow(2,i),s=s-c}return(p?-1:1)*o*Math.pow(2,s-i)};DS.write=function(t,e,n,i,r,s){var o,a,l,c=s*8-r-1,u=(1<<c)-1,h=u>>1,f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=i?0:s-1,x=i?1:-1,y=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),o+h>=1?e+=f/l:e+=f*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,r),o=o+h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;t[n+p]=a&255,p+=x,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;t[n+p]=o&255,p+=x,o/=256,c-=8);t[n+p-x]|=y*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(t){const e=tx,n=DS,i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=u,t.SlowBuffer=N,t.INSPECT_MAX_BYTES=50;const r=2147483647;t.kMaxLength=r;const{Uint8Array:s,ArrayBuffer:o,SharedArrayBuffer:a}=globalThis;u.TYPED_ARRAY_SUPPORT=l(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function l(){try{const O=new s(1),M={foo:function(){return 42}};return Object.setPrototypeOf(M,s.prototype),Object.setPrototypeOf(O,M),O.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function c(O){if(O>r)throw new RangeError('The value "'+O+'" is invalid for option "size"');const M=new s(O);return Object.setPrototypeOf(M,u.prototype),M}function u(O,M,A){if(typeof O=="number"){if(typeof M=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return x(O)}return h(O,M,A)}u.poolSize=8192;function h(O,M,A){if(typeof O=="string")return y(O,M);if(o.isView(O))return m(O);if(O==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O);if(se(O,o)||O&&se(O.buffer,o)||typeof a<"u"&&(se(O,a)||O&&se(O.buffer,a)))return _(O,M,A);if(typeof O=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const W=O.valueOf&&O.valueOf();if(W!=null&&W!==O)return u.from(W,M,A);const q=w(O);if(q)return q;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof O[Symbol.toPrimitive]=="function")return u.from(O[Symbol.toPrimitive]("string"),M,A);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof O)}u.from=function(O,M,A){return h(O,M,A)},Object.setPrototypeOf(u.prototype,s.prototype),Object.setPrototypeOf(u,s);function f(O){if(typeof O!="number")throw new TypeError('"size" argument must be of type number');if(O<0)throw new RangeError('The value "'+O+'" is invalid for option "size"')}function p(O,M,A){return f(O),O<=0?c(O):M!==void 0?typeof A=="string"?c(O).fill(M,A):c(O).fill(M):c(O)}u.alloc=function(O,M,A){return p(O,M,A)};function x(O){return f(O),c(O<0?0:S(O)|0)}u.allocUnsafe=function(O){return x(O)},u.allocUnsafeSlow=function(O){return x(O)};function y(O,M){if((typeof M!="string"||M==="")&&(M="utf8"),!u.isEncoding(M))throw new TypeError("Unknown encoding: "+M);const A=k(O,M)|0;let W=c(A);const q=W.write(O,M);return q!==A&&(W=W.slice(0,q)),W}function g(O){const M=O.length<0?0:S(O.length)|0,A=c(M);for(let W=0;W<M;W+=1)A[W]=O[W]&255;return A}function m(O){if(se(O,s)){const M=new s(O);return _(M.buffer,M.byteOffset,M.byteLength)}return g(O)}function _(O,M,A){if(M<0||O.byteLength<M)throw new RangeError('"offset" is outside of buffer bounds');if(O.byteLength<M+(A||0))throw new RangeError('"length" is outside of buffer bounds');let W;return M===void 0&&A===void 0?W=new s(O):A===void 0?W=new s(O,M):W=new s(O,M,A),Object.setPrototypeOf(W,u.prototype),W}function w(O){if(u.isBuffer(O)){const M=S(O.length)|0,A=c(M);return A.length===0||O.copy(A,0,0,M),A}if(O.length!==void 0)return typeof O.length!="number"||ce(O.length)?c(0):g(O);if(O.type==="Buffer"&&Array.isArray(O.data))return g(O.data)}function S(O){if(O>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return O|0}function N(O){return+O!=O&&(O=0),u.alloc(+O)}u.isBuffer=function(M){return M!=null&&M._isBuffer===!0&&M!==u.prototype},u.compare=function(M,A){if(se(M,s)&&(M=u.from(M,M.offset,M.byteLength)),se(A,s)&&(A=u.from(A,A.offset,A.byteLength)),!u.isBuffer(M)||!u.isBuffer(A))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(M===A)return 0;let W=M.length,q=A.length;for(let te=0,ie=Math.min(W,q);te<ie;++te)if(M[te]!==A[te]){W=M[te],q=A[te];break}return W<q?-1:q<W?1:0},u.isEncoding=function(M){switch(String(M).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(M,A){if(!Array.isArray(M))throw new TypeError('"list" argument must be an Array of Buffers');if(M.length===0)return u.alloc(0);let W;if(A===void 0)for(A=0,W=0;W<M.length;++W)A+=M[W].length;const q=u.allocUnsafe(A);let te=0;for(W=0;W<M.length;++W){let ie=M[W];if(se(ie,s))te+ie.length>q.length?(u.isBuffer(ie)||(ie=u.from(ie)),ie.copy(q,te)):s.prototype.set.call(q,ie,te);else if(u.isBuffer(ie))ie.copy(q,te);else throw new TypeError('"list" argument must be an Array of Buffers');te+=ie.length}return q};function k(O,M){if(u.isBuffer(O))return O.length;if(o.isView(O)||se(O,o))return O.byteLength;if(typeof O!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof O);const A=O.length,W=arguments.length>2&&arguments[2]===!0;if(!W&&A===0)return 0;let q=!1;for(;;)switch(M){case"ascii":case"latin1":case"binary":return A;case"utf8":case"utf-8":return De(O).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A*2;case"hex":return A>>>1;case"base64":return X(O).length;default:if(q)return W?-1:De(O).length;M=(""+M).toLowerCase(),q=!0}}u.byteLength=k;function R(O,M,A){let W=!1;if((M===void 0||M<0)&&(M=0),M>this.length||((A===void 0||A>this.length)&&(A=this.length),A<=0)||(A>>>=0,M>>>=0,A<=M))return"";for(O||(O="utf8");;)switch(O){case"hex":return T(this,M,A);case"utf8":case"utf-8":return P(this,M,A);case"ascii":return V(this,M,A);case"latin1":case"binary":return U(this,M,A);case"base64":return E(this,M,A);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return G(this,M,A);default:if(W)throw new TypeError("Unknown encoding: "+O);O=(O+"").toLowerCase(),W=!0}}u.prototype._isBuffer=!0;function B(O,M,A){const W=O[M];O[M]=O[A],O[A]=W}u.prototype.swap16=function(){const M=this.length;if(M%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let A=0;A<M;A+=2)B(this,A,A+1);return this},u.prototype.swap32=function(){const M=this.length;if(M%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let A=0;A<M;A+=4)B(this,A,A+3),B(this,A+1,A+2);return this},u.prototype.swap64=function(){const M=this.length;if(M%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let A=0;A<M;A+=8)B(this,A,A+7),B(this,A+1,A+6),B(this,A+2,A+5),B(this,A+3,A+4);return this},u.prototype.toString=function(){const M=this.length;return M===0?"":arguments.length===0?P(this,0,M):R.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(M){if(!u.isBuffer(M))throw new TypeError("Argument must be a Buffer");return this===M?!0:u.compare(this,M)===0},u.prototype.inspect=function(){let M="";const A=t.INSPECT_MAX_BYTES;return M=this.toString("hex",0,A).replace(/(.{2})/g,"$1 ").trim(),this.length>A&&(M+=" ... "),"<Buffer "+M+">"},i&&(u.prototype[i]=u.prototype.inspect),u.prototype.compare=function(M,A,W,q,te){if(se(M,s)&&(M=u.from(M,M.offset,M.byteLength)),!u.isBuffer(M))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof M);if(A===void 0&&(A=0),W===void 0&&(W=M?M.length:0),q===void 0&&(q=0),te===void 0&&(te=this.length),A<0||W>M.length||q<0||te>this.length)throw new RangeError("out of range index");if(q>=te&&A>=W)return 0;if(q>=te)return-1;if(A>=W)return 1;if(A>>>=0,W>>>=0,q>>>=0,te>>>=0,this===M)return 0;let ie=te-q,ve=W-A;const Ie=Math.min(ie,ve),Q=this.slice(q,te),we=M.slice(A,W);for(let xe=0;xe<Ie;++xe)if(Q[xe]!==we[xe]){ie=Q[xe],ve=we[xe];break}return ie<ve?-1:ve<ie?1:0};function L(O,M,A,W,q){if(O.length===0)return-1;if(typeof A=="string"?(W=A,A=0):A>2147483647?A=2147483647:A<-2147483648&&(A=-2147483648),A=+A,ce(A)&&(A=q?0:O.length-1),A<0&&(A=O.length+A),A>=O.length){if(q)return-1;A=O.length-1}else if(A<0)if(q)A=0;else return-1;if(typeof M=="string"&&(M=u.from(M,W)),u.isBuffer(M))return M.length===0?-1:D(O,M,A,W,q);if(typeof M=="number")return M=M&255,typeof s.prototype.indexOf=="function"?q?s.prototype.indexOf.call(O,M,A):s.prototype.lastIndexOf.call(O,M,A):D(O,[M],A,W,q);throw new TypeError("val must be string, number or Buffer")}function D(O,M,A,W,q){let te=1,ie=O.length,ve=M.length;if(W!==void 0&&(W=String(W).toLowerCase(),W==="ucs2"||W==="ucs-2"||W==="utf16le"||W==="utf-16le")){if(O.length<2||M.length<2)return-1;te=2,ie/=2,ve/=2,A/=2}function Ie(we,xe){return te===1?we[xe]:we.readUInt16BE(xe*te)}let Q;if(q){let we=-1;for(Q=A;Q<ie;Q++)if(Ie(O,Q)===Ie(M,we===-1?0:Q-we)){if(we===-1&&(we=Q),Q-we+1===ve)return we*te}else we!==-1&&(Q-=Q-we),we=-1}else for(A+ve>ie&&(A=ie-ve),Q=A;Q>=0;Q--){let we=!0;for(let xe=0;xe<ve;xe++)if(Ie(O,Q+xe)!==Ie(M,xe)){we=!1;break}if(we)return Q}return-1}u.prototype.includes=function(M,A,W){return this.indexOf(M,A,W)!==-1},u.prototype.indexOf=function(M,A,W){return L(this,M,A,W,!0)},u.prototype.lastIndexOf=function(M,A,W){return L(this,M,A,W,!1)};function j(O,M,A,W){A=Number(A)||0;const q=O.length-A;W?(W=Number(W),W>q&&(W=q)):W=q;const te=M.length;W>te/2&&(W=te/2);let ie;for(ie=0;ie<W;++ie){const ve=parseInt(M.substr(ie*2,2),16);if(ce(ve))return ie;O[A+ie]=ve}return ie}function Y(O,M,A,W){return H(De(M,O.length-A),O,A,W)}function I(O,M,A,W){return H(_e(M),O,A,W)}function v(O,M,A,W){return H(X(M),O,A,W)}function b(O,M,A,W){return H(lt(M,O.length-A),O,A,W)}u.prototype.write=function(M,A,W,q){if(A===void 0)q="utf8",W=this.length,A=0;else if(W===void 0&&typeof A=="string")q=A,W=this.length,A=0;else if(isFinite(A))A=A>>>0,isFinite(W)?(W=W>>>0,q===void 0&&(q="utf8")):(q=W,W=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const te=this.length-A;if((W===void 0||W>te)&&(W=te),M.length>0&&(W<0||A<0)||A>this.length)throw new RangeError("Attempt to write outside buffer bounds");q||(q="utf8");let ie=!1;for(;;)switch(q){case"hex":return j(this,M,A,W);case"utf8":case"utf-8":return Y(this,M,A,W);case"ascii":case"latin1":case"binary":return I(this,M,A,W);case"base64":return v(this,M,A,W);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,M,A,W);default:if(ie)throw new TypeError("Unknown encoding: "+q);q=(""+q).toLowerCase(),ie=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function E(O,M,A){return M===0&&A===O.length?e.fromByteArray(O):e.fromByteArray(O.slice(M,A))}function P(O,M,A){A=Math.min(O.length,A);const W=[];let q=M;for(;q<A;){const te=O[q];let ie=null,ve=te>239?4:te>223?3:te>191?2:1;if(q+ve<=A){let Ie,Q,we,xe;switch(ve){case 1:te<128&&(ie=te);break;case 2:Ie=O[q+1],(Ie&192)===128&&(xe=(te&31)<<6|Ie&63,xe>127&&(ie=xe));break;case 3:Ie=O[q+1],Q=O[q+2],(Ie&192)===128&&(Q&192)===128&&(xe=(te&15)<<12|(Ie&63)<<6|Q&63,xe>2047&&(xe<55296||xe>57343)&&(ie=xe));break;case 4:Ie=O[q+1],Q=O[q+2],we=O[q+3],(Ie&192)===128&&(Q&192)===128&&(we&192)===128&&(xe=(te&15)<<18|(Ie&63)<<12|(Q&63)<<6|we&63,xe>65535&&xe<1114112&&(ie=xe))}}ie===null?(ie=65533,ve=1):ie>65535&&(ie-=65536,W.push(ie>>>10&1023|55296),ie=56320|ie&1023),W.push(ie),q+=ve}return z(W)}const C=4096;function z(O){const M=O.length;if(M<=C)return String.fromCharCode.apply(String,O);let A="",W=0;for(;W<M;)A+=String.fromCharCode.apply(String,O.slice(W,W+=C));return A}function V(O,M,A){let W="";A=Math.min(O.length,A);for(let q=M;q<A;++q)W+=String.fromCharCode(O[q]&127);return W}function U(O,M,A){let W="";A=Math.min(O.length,A);for(let q=M;q<A;++q)W+=String.fromCharCode(O[q]);return W}function T(O,M,A){const W=O.length;(!M||M<0)&&(M=0),(!A||A<0||A>W)&&(A=W);let q="";for(let te=M;te<A;++te)q+=ye[O[te]];return q}function G(O,M,A){const W=O.slice(M,A);let q="";for(let te=0;te<W.length-1;te+=2)q+=String.fromCharCode(W[te]+W[te+1]*256);return q}u.prototype.slice=function(M,A){const W=this.length;M=~~M,A=A===void 0?W:~~A,M<0?(M+=W,M<0&&(M=0)):M>W&&(M=W),A<0?(A+=W,A<0&&(A=0)):A>W&&(A=W),A<M&&(A=M);const q=this.subarray(M,A);return Object.setPrototypeOf(q,u.prototype),q};function K(O,M,A){if(O%1!==0||O<0)throw new RangeError("offset is not uint");if(O+M>A)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(M,A,W){M=M>>>0,A=A>>>0,W||K(M,A,this.length);let q=this[M],te=1,ie=0;for(;++ie<A&&(te*=256);)q+=this[M+ie]*te;return q},u.prototype.readUintBE=u.prototype.readUIntBE=function(M,A,W){M=M>>>0,A=A>>>0,W||K(M,A,this.length);let q=this[M+--A],te=1;for(;A>0&&(te*=256);)q+=this[M+--A]*te;return q},u.prototype.readUint8=u.prototype.readUInt8=function(M,A){return M=M>>>0,A||K(M,1,this.length),this[M]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(M,A){return M=M>>>0,A||K(M,2,this.length),this[M]|this[M+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(M,A){return M=M>>>0,A||K(M,2,this.length),this[M]<<8|this[M+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(M,A){return M=M>>>0,A||K(M,4,this.length),(this[M]|this[M+1]<<8|this[M+2]<<16)+this[M+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(M,A){return M=M>>>0,A||K(M,4,this.length),this[M]*16777216+(this[M+1]<<16|this[M+2]<<8|this[M+3])},u.prototype.readBigUInt64LE=fe(function(M){M=M>>>0,He(M,"offset");const A=this[M],W=this[M+7];(A===void 0||W===void 0)&&Ee(M,this.length-8);const q=A+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24,te=this[++M]+this[++M]*2**8+this[++M]*2**16+W*2**24;return BigInt(q)+(BigInt(te)<<BigInt(32))}),u.prototype.readBigUInt64BE=fe(function(M){M=M>>>0,He(M,"offset");const A=this[M],W=this[M+7];(A===void 0||W===void 0)&&Ee(M,this.length-8);const q=A*2**24+this[++M]*2**16+this[++M]*2**8+this[++M],te=this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+W;return(BigInt(q)<<BigInt(32))+BigInt(te)}),u.prototype.readIntLE=function(M,A,W){M=M>>>0,A=A>>>0,W||K(M,A,this.length);let q=this[M],te=1,ie=0;for(;++ie<A&&(te*=256);)q+=this[M+ie]*te;return te*=128,q>=te&&(q-=Math.pow(2,8*A)),q},u.prototype.readIntBE=function(M,A,W){M=M>>>0,A=A>>>0,W||K(M,A,this.length);let q=A,te=1,ie=this[M+--q];for(;q>0&&(te*=256);)ie+=this[M+--q]*te;return te*=128,ie>=te&&(ie-=Math.pow(2,8*A)),ie},u.prototype.readInt8=function(M,A){return M=M>>>0,A||K(M,1,this.length),this[M]&128?(255-this[M]+1)*-1:this[M]},u.prototype.readInt16LE=function(M,A){M=M>>>0,A||K(M,2,this.length);const W=this[M]|this[M+1]<<8;return W&32768?W|4294901760:W},u.prototype.readInt16BE=function(M,A){M=M>>>0,A||K(M,2,this.length);const W=this[M+1]|this[M]<<8;return W&32768?W|4294901760:W},u.prototype.readInt32LE=function(M,A){return M=M>>>0,A||K(M,4,this.length),this[M]|this[M+1]<<8|this[M+2]<<16|this[M+3]<<24},u.prototype.readInt32BE=function(M,A){return M=M>>>0,A||K(M,4,this.length),this[M]<<24|this[M+1]<<16|this[M+2]<<8|this[M+3]},u.prototype.readBigInt64LE=fe(function(M){M=M>>>0,He(M,"offset");const A=this[M],W=this[M+7];(A===void 0||W===void 0)&&Ee(M,this.length-8);const q=this[M+4]+this[M+5]*2**8+this[M+6]*2**16+(W<<24);return(BigInt(q)<<BigInt(32))+BigInt(A+this[++M]*2**8+this[++M]*2**16+this[++M]*2**24)}),u.prototype.readBigInt64BE=fe(function(M){M=M>>>0,He(M,"offset");const A=this[M],W=this[M+7];(A===void 0||W===void 0)&&Ee(M,this.length-8);const q=(A<<24)+this[++M]*2**16+this[++M]*2**8+this[++M];return(BigInt(q)<<BigInt(32))+BigInt(this[++M]*2**24+this[++M]*2**16+this[++M]*2**8+W)}),u.prototype.readFloatLE=function(M,A){return M=M>>>0,A||K(M,4,this.length),n.read(this,M,!0,23,4)},u.prototype.readFloatBE=function(M,A){return M=M>>>0,A||K(M,4,this.length),n.read(this,M,!1,23,4)},u.prototype.readDoubleLE=function(M,A){return M=M>>>0,A||K(M,8,this.length),n.read(this,M,!0,52,8)},u.prototype.readDoubleBE=function(M,A){return M=M>>>0,A||K(M,8,this.length),n.read(this,M,!1,52,8)};function ne(O,M,A,W,q,te){if(!u.isBuffer(O))throw new TypeError('"buffer" argument must be a Buffer instance');if(M>q||M<te)throw new RangeError('"value" argument is out of bounds');if(A+W>O.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(M,A,W,q){if(M=+M,A=A>>>0,W=W>>>0,!q){const ve=Math.pow(2,8*W)-1;ne(this,M,A,W,ve,0)}let te=1,ie=0;for(this[A]=M&255;++ie<W&&(te*=256);)this[A+ie]=M/te&255;return A+W},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(M,A,W,q){if(M=+M,A=A>>>0,W=W>>>0,!q){const ve=Math.pow(2,8*W)-1;ne(this,M,A,W,ve,0)}let te=W-1,ie=1;for(this[A+te]=M&255;--te>=0&&(ie*=256);)this[A+te]=M/ie&255;return A+W},u.prototype.writeUint8=u.prototype.writeUInt8=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,1,255,0),this[A]=M&255,A+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,2,65535,0),this[A]=M&255,this[A+1]=M>>>8,A+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,2,65535,0),this[A]=M>>>8,this[A+1]=M&255,A+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,4,4294967295,0),this[A+3]=M>>>24,this[A+2]=M>>>16,this[A+1]=M>>>8,this[A]=M&255,A+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,4,4294967295,0),this[A]=M>>>24,this[A+1]=M>>>16,this[A+2]=M>>>8,this[A+3]=M&255,A+4};function Z(O,M,A,W,q){We(M,W,q,O,A,7);let te=Number(M&BigInt(4294967295));O[A++]=te,te=te>>8,O[A++]=te,te=te>>8,O[A++]=te,te=te>>8,O[A++]=te;let ie=Number(M>>BigInt(32)&BigInt(4294967295));return O[A++]=ie,ie=ie>>8,O[A++]=ie,ie=ie>>8,O[A++]=ie,ie=ie>>8,O[A++]=ie,A}function ee(O,M,A,W,q){We(M,W,q,O,A,7);let te=Number(M&BigInt(4294967295));O[A+7]=te,te=te>>8,O[A+6]=te,te=te>>8,O[A+5]=te,te=te>>8,O[A+4]=te;let ie=Number(M>>BigInt(32)&BigInt(4294967295));return O[A+3]=ie,ie=ie>>8,O[A+2]=ie,ie=ie>>8,O[A+1]=ie,ie=ie>>8,O[A]=ie,A+8}u.prototype.writeBigUInt64LE=fe(function(M,A=0){return Z(this,M,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=fe(function(M,A=0){return ee(this,M,A,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(M,A,W,q){if(M=+M,A=A>>>0,!q){const Ie=Math.pow(2,8*W-1);ne(this,M,A,W,Ie-1,-Ie)}let te=0,ie=1,ve=0;for(this[A]=M&255;++te<W&&(ie*=256);)M<0&&ve===0&&this[A+te-1]!==0&&(ve=1),this[A+te]=(M/ie>>0)-ve&255;return A+W},u.prototype.writeIntBE=function(M,A,W,q){if(M=+M,A=A>>>0,!q){const Ie=Math.pow(2,8*W-1);ne(this,M,A,W,Ie-1,-Ie)}let te=W-1,ie=1,ve=0;for(this[A+te]=M&255;--te>=0&&(ie*=256);)M<0&&ve===0&&this[A+te+1]!==0&&(ve=1),this[A+te]=(M/ie>>0)-ve&255;return A+W},u.prototype.writeInt8=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,1,127,-128),M<0&&(M=255+M+1),this[A]=M&255,A+1},u.prototype.writeInt16LE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,2,32767,-32768),this[A]=M&255,this[A+1]=M>>>8,A+2},u.prototype.writeInt16BE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,2,32767,-32768),this[A]=M>>>8,this[A+1]=M&255,A+2},u.prototype.writeInt32LE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,4,2147483647,-2147483648),this[A]=M&255,this[A+1]=M>>>8,this[A+2]=M>>>16,this[A+3]=M>>>24,A+4},u.prototype.writeInt32BE=function(M,A,W){return M=+M,A=A>>>0,W||ne(this,M,A,4,2147483647,-2147483648),M<0&&(M=4294967295+M+1),this[A]=M>>>24,this[A+1]=M>>>16,this[A+2]=M>>>8,this[A+3]=M&255,A+4},u.prototype.writeBigInt64LE=fe(function(M,A=0){return Z(this,M,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=fe(function(M,A=0){return ee(this,M,A,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function me(O,M,A,W,q,te){if(A+W>O.length)throw new RangeError("Index out of range");if(A<0)throw new RangeError("Index out of range")}function pe(O,M,A,W,q){return M=+M,A=A>>>0,q||me(O,M,A,4),n.write(O,M,A,W,23,4),A+4}u.prototype.writeFloatLE=function(M,A,W){return pe(this,M,A,!0,W)},u.prototype.writeFloatBE=function(M,A,W){return pe(this,M,A,!1,W)};function Se(O,M,A,W,q){return M=+M,A=A>>>0,q||me(O,M,A,8),n.write(O,M,A,W,52,8),A+8}u.prototype.writeDoubleLE=function(M,A,W){return Se(this,M,A,!0,W)},u.prototype.writeDoubleBE=function(M,A,W){return Se(this,M,A,!1,W)},u.prototype.copy=function(M,A,W,q){if(!u.isBuffer(M))throw new TypeError("argument should be a Buffer");if(W||(W=0),!q&&q!==0&&(q=this.length),A>=M.length&&(A=M.length),A||(A=0),q>0&&q<W&&(q=W),q===W||M.length===0||this.length===0)return 0;if(A<0)throw new RangeError("targetStart out of bounds");if(W<0||W>=this.length)throw new RangeError("Index out of range");if(q<0)throw new RangeError("sourceEnd out of bounds");q>this.length&&(q=this.length),M.length-A<q-W&&(q=M.length-A+W);const te=q-W;return this===M&&typeof s.prototype.copyWithin=="function"?this.copyWithin(A,W,q):s.prototype.set.call(M,this.subarray(W,q),A),te},u.prototype.fill=function(M,A,W,q){if(typeof M=="string"){if(typeof A=="string"?(q=A,A=0,W=this.length):typeof W=="string"&&(q=W,W=this.length),q!==void 0&&typeof q!="string")throw new TypeError("encoding must be a string");if(typeof q=="string"&&!u.isEncoding(q))throw new TypeError("Unknown encoding: "+q);if(M.length===1){const ie=M.charCodeAt(0);(q==="utf8"&&ie<128||q==="latin1")&&(M=ie)}}else typeof M=="number"?M=M&255:typeof M=="boolean"&&(M=Number(M));if(A<0||this.length<A||this.length<W)throw new RangeError("Out of range index");if(W<=A)return this;A=A>>>0,W=W===void 0?this.length:W>>>0,M||(M=0);let te;if(typeof M=="number")for(te=A;te<W;++te)this[te]=M;else{const ie=u.isBuffer(M)?M:u.from(M,q),ve=ie.length;if(ve===0)throw new TypeError('The value "'+M+'" is invalid for argument "value"');for(te=0;te<W-A;++te)this[te+A]=ie[te%ve]}return this};const Re={};function it(O,M,A){Re[O]=class extends A{constructor(){super(),Object.defineProperty(this,"message",{value:M.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${O}]`,this.stack,delete this.name}get code(){return O}set code(q){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:q,writable:!0})}toString(){return`${this.name} [${O}]: ${this.message}`}}}it("ERR_BUFFER_OUT_OF_BOUNDS",function(O){return O?`${O} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),it("ERR_INVALID_ARG_TYPE",function(O,M){return`The "${O}" argument must be of type number. Received type ${typeof M}`},TypeError),it("ERR_OUT_OF_RANGE",function(O,M,A){let W=`The value of "${O}" is out of range.`,q=A;return Number.isInteger(A)&&Math.abs(A)>2**32?q=J(String(A)):typeof A=="bigint"&&(q=String(A),(A>BigInt(2)**BigInt(32)||A<-(BigInt(2)**BigInt(32)))&&(q=J(q)),q+="n"),W+=` It must be ${M}. Received ${q}`,W},RangeError);function J(O){let M="",A=O.length;const W=O[0]==="-"?1:0;for(;A>=W+4;A-=3)M=`_${O.slice(A-3,A)}${M}`;return`${O.slice(0,A)}${M}`}function ot(O,M,A){He(M,"offset"),(O[M]===void 0||O[M+A]===void 0)&&Ee(M,O.length-(A+1))}function We(O,M,A,W,q,te){if(O>A||O<M){const ie=typeof M=="bigint"?"n":"";let ve;throw M===0||M===BigInt(0)?ve=`>= 0${ie} and < 2${ie} ** ${(te+1)*8}${ie}`:ve=`>= -(2${ie} ** ${(te+1)*8-1}${ie}) and < 2 ** ${(te+1)*8-1}${ie}`,new Re.ERR_OUT_OF_RANGE("value",ve,O)}ot(W,q,te)}function He(O,M){if(typeof O!="number")throw new Re.ERR_INVALID_ARG_TYPE(M,"number",O)}function Ee(O,M,A){throw Math.floor(O)!==O?(He(O,A),new Re.ERR_OUT_OF_RANGE("offset","an integer",O)):M<0?new Re.ERR_BUFFER_OUT_OF_BOUNDS:new Re.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${M}`,O)}const ft=/[^+/0-9A-Za-z-_]/g;function $e(O){if(O=O.split("=")[0],O=O.trim().replace(ft,""),O.length<2)return"";for(;O.length%4!==0;)O=O+"=";return O}function De(O,M){M=M||1/0;let A;const W=O.length;let q=null;const te=[];for(let ie=0;ie<W;++ie){if(A=O.charCodeAt(ie),A>55295&&A<57344){if(!q){if(A>56319){(M-=3)>-1&&te.push(239,191,189);continue}else if(ie+1===W){(M-=3)>-1&&te.push(239,191,189);continue}q=A;continue}if(A<56320){(M-=3)>-1&&te.push(239,191,189),q=A;continue}A=(q-55296<<10|A-56320)+65536}else q&&(M-=3)>-1&&te.push(239,191,189);if(q=null,A<128){if((M-=1)<0)break;te.push(A)}else if(A<2048){if((M-=2)<0)break;te.push(A>>6|192,A&63|128)}else if(A<65536){if((M-=3)<0)break;te.push(A>>12|224,A>>6&63|128,A&63|128)}else if(A<1114112){if((M-=4)<0)break;te.push(A>>18|240,A>>12&63|128,A>>6&63|128,A&63|128)}else throw new Error("Invalid code point")}return te}function _e(O){const M=[];for(let A=0;A<O.length;++A)M.push(O.charCodeAt(A)&255);return M}function lt(O,M){let A,W,q;const te=[];for(let ie=0;ie<O.length&&!((M-=2)<0);++ie)A=O.charCodeAt(ie),W=A>>8,q=A%256,te.push(q),te.push(W);return te}function X(O){return e.toByteArray($e(O))}function H(O,M,A,W){let q;for(q=0;q<W&&!(q+A>=M.length||q>=O.length);++q)M[q+A]=O[q];return q}function se(O,M){return O instanceof M||O!=null&&O.constructor!=null&&O.constructor.name!=null&&O.constructor.name===M.name}function ce(O){return O!==O}const ye=function(){const O="0123456789abcdef",M=new Array(256);for(let A=0;A<16;++A){const W=A*16;for(let q=0;q<16;++q)M[W+q]=O[A]+O[q]}return M}();function fe(O){return typeof BigInt>"u"?Ne:O}function Ne(){throw new Error("BigInt not supported")}})(ni);const cn=ni.Buffer,Qz=ni.Blob,Jz=ni.BlobOptions,vt=ni.Buffer,e7=ni.File,t7=ni.FileOptions,n7=ni.INSPECT_MAX_BYTES,i7=ni.SlowBuffer,r7=ni.TranscodeEncoding,s7=ni.atob,o7=ni.btoa,a7=ni.constants,l7=ni.isAscii,c7=ni.isUtf8,u7=ni.kMaxLength,d7=ni.kStringMaxLength,h7=ni.resolveObjectURL,f7=ni.transcode,p7=Object.freeze(Object.defineProperty({__proto__:null,Blob:Qz,BlobOptions:Jz,Buffer:vt,File:e7,FileOptions:t7,INSPECT_MAX_BYTES:n7,SlowBuffer:i7,TranscodeEncoding:r7,atob:s7,btoa:o7,constants:a7,default:cn,isAscii:l7,isUtf8:c7,kMaxLength:u7,kStringMaxLength:d7,resolveObjectURL:h7,transcode:f7},Symbol.toStringTag,{value:"Module"})),Ac=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;/*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) */function Hf(t){return t instanceof Uint8Array||ArrayBuffer.isView(t)&&t.constructor.name==="Uint8Array"}function dw(t){if(!Number.isSafeInteger(t)||t<0)throw new Error("positive integer expected, got "+t)}function gc(t,...e){if(!Hf(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error("Uint8Array expected of length "+e+", got length="+t.length)}function oI(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");dw(t.outputLen),dw(t.blockLen)}function eg(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}function m7(t,e){gc(t);const n=e.outputLen;if(t.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}function Xu(...t){for(let e=0;e<t.length;e++)t[e].fill(0)}function Ey(t){return new DataView(t.buffer,t.byteOffset,t.byteLength)}function bs(t,e){return t<<32-e|t>>>e}const aI=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",g7=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Ql(t){if(gc(t),aI)return t.toHex();let e="";for(let n=0;n<t.length;n++)e+=g7[t[n]];return e}const qs={_0:48,_9:57,A:65,F:70,a:97,f:102};function ET(t){if(t>=qs._0&&t<=qs._9)return t-qs._0;if(t>=qs.A&&t<=qs.F)return t-(qs.A-10);if(t>=qs.a&&t<=qs.f)return t-(qs.a-10)}function tg(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);if(aI)return Uint8Array.fromHex(t);const e=t.length,n=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);const i=new Uint8Array(n);for(let r=0,s=0;r<n;r++,s+=2){const o=ET(t.charCodeAt(s)),a=ET(t.charCodeAt(s+1));if(o===void 0||a===void 0){const l=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+l+'" at index '+s)}i[r]=o*16+a}return i}function x7(t){if(typeof t!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(t))}function BS(t){return typeof t=="string"&&(t=x7(t)),gc(t),t}function Ls(...t){let e=0;for(let i=0;i<t.length;i++){const r=t[i];gc(r),e+=r.length}const n=new Uint8Array(e);for(let i=0,r=0;i<t.length;i++){const s=t[i];n.set(s,r),r+=s.length}return n}class lI{}function cI(t){const e=i=>t().update(BS(i)).digest(),n=t();return e.outputLen=n.outputLen,e.blockLen=n.blockLen,e.create=()=>t(),e}function US(t=32){if(Ac&&typeof Ac.getRandomValues=="function")return Ac.getRandomValues(new Uint8Array(t));if(Ac&&typeof Ac.randomBytes=="function")return Uint8Array.from(Ac.randomBytes(t));throw new Error("crypto.getRandomValues must be defined")}function y7(t,e,n,i){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,n,i);const r=BigInt(32),s=BigInt(4294967295),o=Number(n>>r&s),a=Number(n&s),l=i?4:0,c=i?0:4;t.setUint32(e+l,o,i),t.setUint32(e+c,a,i)}function v7(t,e,n){return t&e^~t&n}function w7(t,e,n){return t&e^t&n^e&n}class uI extends lI{constructor(e,n,i,r){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=n,this.padOffset=i,this.isLE=r,this.buffer=new Uint8Array(e),this.view=Ey(this.buffer)}update(e){eg(this),e=BS(e),gc(e);const{view:n,buffer:i,blockLen:r}=this,s=e.length;for(let o=0;o<s;){const a=Math.min(r-this.pos,s-o);if(a===r){const l=Ey(e);for(;r<=s-o;o+=r)this.process(l,o);continue}i.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===r&&(this.process(n,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){eg(this),m7(e,this),this.finished=!0;const{buffer:n,view:i,blockLen:r,isLE:s}=this;let{pos:o}=this;n[o++]=128,Xu(this.buffer.subarray(o)),this.padOffset>r-o&&(this.process(i,0),o=0);for(let h=o;h<r;h++)n[h]=0;y7(i,r-8,BigInt(this.length*8),s),this.process(i,0);const a=Ey(e),l=this.outputLen;if(l%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const c=l/4,u=this.get();if(c>u.length)throw new Error("_sha2: outputLen bigger than state");for(let h=0;h<c;h++)a.setUint32(4*h,u[h],s)}digest(){const{buffer:e,outputLen:n}=this;this.digestInto(e);const i=e.slice(0,n);return this.destroy(),i}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:n,buffer:i,length:r,finished:s,destroyed:o,pos:a}=this;return e.destroyed=o,e.finished=s,e.length=r,e.pos=a,r%n&&e.buffer.set(i),e}clone(){return this._cloneInto()}}const Vo=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),bi=Uint32Array.from([1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209]),Ip=BigInt(2**32-1),TT=BigInt(32);function _7(t,e=!1){return e?{h:Number(t&Ip),l:Number(t>>TT&Ip)}:{h:Number(t>>TT&Ip)|0,l:Number(t&Ip)|0}}function b7(t,e=!1){const n=t.length;let i=new Uint32Array(n),r=new Uint32Array(n);for(let s=0;s<n;s++){const{h:o,l:a}=_7(t[s],e);[i[s],r[s]]=[o,a]}return[i,r]}const AT=(t,e,n)=>t>>>n,CT=(t,e,n)=>t<<32-n|e>>>n,Cc=(t,e,n)=>t>>>n|e<<32-n,Nc=(t,e,n)=>t<<32-n|e>>>n,kp=(t,e,n)=>t<<64-n|e>>>n-32,Pp=(t,e,n)=>t>>>n-32|e<<64-n;function Ks(t,e,n,i){const r=(e>>>0)+(i>>>0);return{h:t+n+(r/2**32|0)|0,l:r|0}}const S7=(t,e,n)=>(t>>>0)+(e>>>0)+(n>>>0),M7=(t,e,n,i)=>e+n+i+(t/2**32|0)|0,E7=(t,e,n,i)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0),T7=(t,e,n,i,r)=>e+n+i+r+(t/2**32|0)|0,A7=(t,e,n,i,r)=>(t>>>0)+(e>>>0)+(n>>>0)+(i>>>0)+(r>>>0),C7=(t,e,n,i,r,s)=>e+n+i+r+s+(t/2**32|0)|0,N7=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Wo=new Uint32Array(64);class R7 extends uI{constructor(e=32){super(64,e,8,!1),this.A=Vo[0]|0,this.B=Vo[1]|0,this.C=Vo[2]|0,this.D=Vo[3]|0,this.E=Vo[4]|0,this.F=Vo[5]|0,this.G=Vo[6]|0,this.H=Vo[7]|0}get(){const{A:e,B:n,C:i,D:r,E:s,F:o,G:a,H:l}=this;return[e,n,i,r,s,o,a,l]}set(e,n,i,r,s,o,a,l){this.A=e|0,this.B=n|0,this.C=i|0,this.D=r|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=l|0}process(e,n){for(let h=0;h<16;h++,n+=4)Wo[h]=e.getUint32(n,!1);for(let h=16;h<64;h++){const f=Wo[h-15],p=Wo[h-2],x=bs(f,7)^bs(f,18)^f>>>3,y=bs(p,17)^bs(p,19)^p>>>10;Wo[h]=y+Wo[h-7]+x+Wo[h-16]|0}let{A:i,B:r,C:s,D:o,E:a,F:l,G:c,H:u}=this;for(let h=0;h<64;h++){const f=bs(a,6)^bs(a,11)^bs(a,25),p=u+f+v7(a,l,c)+N7[h]+Wo[h]|0,y=(bs(i,2)^bs(i,13)^bs(i,22))+w7(i,r,s)|0;u=c,c=l,l=a,a=o+p|0,o=s,s=r,r=i,i=p+y|0}i=i+this.A|0,r=r+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,l=l+this.F|0,c=c+this.G|0,u=u+this.H|0,this.set(i,r,s,o,a,l,c,u)}roundClean(){Xu(Wo)}destroy(){this.set(0,0,0,0,0,0,0,0),Xu(this.buffer)}}const dI=b7(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(t=>BigInt(t))),L7=dI[0],I7=dI[1],Ho=new Uint32Array(80),Go=new Uint32Array(80);class k7 extends uI{constructor(e=64){super(128,e,16,!1),this.Ah=bi[0]|0,this.Al=bi[1]|0,this.Bh=bi[2]|0,this.Bl=bi[3]|0,this.Ch=bi[4]|0,this.Cl=bi[5]|0,this.Dh=bi[6]|0,this.Dl=bi[7]|0,this.Eh=bi[8]|0,this.El=bi[9]|0,this.Fh=bi[10]|0,this.Fl=bi[11]|0,this.Gh=bi[12]|0,this.Gl=bi[13]|0,this.Hh=bi[14]|0,this.Hl=bi[15]|0}get(){const{Ah:e,Al:n,Bh:i,Bl:r,Ch:s,Cl:o,Dh:a,Dl:l,Eh:c,El:u,Fh:h,Fl:f,Gh:p,Gl:x,Hh:y,Hl:g}=this;return[e,n,i,r,s,o,a,l,c,u,h,f,p,x,y,g]}set(e,n,i,r,s,o,a,l,c,u,h,f,p,x,y,g){this.Ah=e|0,this.Al=n|0,this.Bh=i|0,this.Bl=r|0,this.Ch=s|0,this.Cl=o|0,this.Dh=a|0,this.Dl=l|0,this.Eh=c|0,this.El=u|0,this.Fh=h|0,this.Fl=f|0,this.Gh=p|0,this.Gl=x|0,this.Hh=y|0,this.Hl=g|0}process(e,n){for(let w=0;w<16;w++,n+=4)Ho[w]=e.getUint32(n),Go[w]=e.getUint32(n+=4);for(let w=16;w<80;w++){const S=Ho[w-15]|0,N=Go[w-15]|0,k=Cc(S,N,1)^Cc(S,N,8)^AT(S,N,7),R=Nc(S,N,1)^Nc(S,N,8)^CT(S,N,7),B=Ho[w-2]|0,L=Go[w-2]|0,D=Cc(B,L,19)^kp(B,L,61)^AT(B,L,6),j=Nc(B,L,19)^Pp(B,L,61)^CT(B,L,6),Y=E7(R,j,Go[w-7],Go[w-16]),I=T7(Y,k,D,Ho[w-7],Ho[w-16]);Ho[w]=I|0,Go[w]=Y|0}let{Ah:i,Al:r,Bh:s,Bl:o,Ch:a,Cl:l,Dh:c,Dl:u,Eh:h,El:f,Fh:p,Fl:x,Gh:y,Gl:g,Hh:m,Hl:_}=this;for(let w=0;w<80;w++){const S=Cc(h,f,14)^Cc(h,f,18)^kp(h,f,41),N=Nc(h,f,14)^Nc(h,f,18)^Pp(h,f,41),k=h&p^~h&y,R=f&x^~f&g,B=A7(_,N,R,I7[w],Go[w]),L=C7(B,m,S,k,L7[w],Ho[w]),D=B|0,j=Cc(i,r,28)^kp(i,r,34)^kp(i,r,39),Y=Nc(i,r,28)^Pp(i,r,34)^Pp(i,r,39),I=i&s^i&a^s&a,v=r&o^r&l^o&l;m=y|0,_=g|0,y=p|0,g=x|0,p=h|0,x=f|0,{h,l:f}=Ks(c|0,u|0,L|0,D|0),c=a|0,u=l|0,a=s|0,l=o|0,s=i|0,o=r|0;const b=S7(D,Y,v);i=M7(b,L,j,I),r=b|0}({h:i,l:r}=Ks(this.Ah|0,this.Al|0,i|0,r|0)),{h:s,l:o}=Ks(this.Bh|0,this.Bl|0,s|0,o|0),{h:a,l}=Ks(this.Ch|0,this.Cl|0,a|0,l|0),{h:c,l:u}=Ks(this.Dh|0,this.Dl|0,c|0,u|0),{h,l:f}=Ks(this.Eh|0,this.El|0,h|0,f|0),{h:p,l:x}=Ks(this.Fh|0,this.Fl|0,p|0,x|0),{h:y,l:g}=Ks(this.Gh|0,this.Gl|0,y|0,g|0),{h:m,l:_}=Ks(this.Hh|0,this.Hl|0,m|0,_|0),this.set(i,r,s,o,a,l,c,u,h,f,p,x,y,g,m,_)}roundClean(){Xu(Ho,Go)}destroy(){Xu(this.buffer),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}const hI=cI(()=>new R7),P7=cI(()=>new k7);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const OS=BigInt(0),hw=BigInt(1);function lc(t,e=""){if(typeof t!="boolean"){const n=e&&`"${e}"`;throw new Error(n+"expected boolean, got type="+typeof t)}return t}function us(t,e,n=""){const i=Hf(t),r=t==null?void 0:t.length,s=e!==void 0;if(!i||s&&r!==e){const o=n&&`"${n}" `,a=s?` of length ${e}`:"",l=i?`length=${r}`:`type=${typeof t}`;throw new Error(o+"expected Uint8Array"+a+", got "+l)}return t}function Dp(t){const e=t.toString(16);return e.length&1?"0"+e:e}function fI(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return t===""?OS:BigInt("0x"+t)}function nx(t){return fI(Ql(t))}function ff(t){return gc(t),fI(Ql(Uint8Array.from(t).reverse()))}function jS(t,e){return tg(t.toString(16).padStart(e*2,"0"))}function pI(t,e){return jS(t,e).reverse()}function In(t,e,n){let i;if(typeof e=="string")try{i=tg(e)}catch(s){throw new Error(t+" must be hex string or Uint8Array, cause: "+s)}else if(Hf(e))i=Uint8Array.from(e);else throw new Error(t+" must be hex string or Uint8Array");const r=i.length;if(typeof n=="number"&&r!==n)throw new Error(t+" of length "+n+" expected, got "+r);return i}function NT(t){return Uint8Array.from(t)}const Ty=t=>typeof t=="bigint"&&OS<=t;function D7(t,e,n){return Ty(t)&&Ty(e)&&Ty(n)&&e<=t&&t<n}function fw(t,e,n,i){if(!D7(e,n,i))throw new Error("expected valid "+t+": "+n+" <= n < "+i+", got "+e)}function mI(t){let e;for(e=0;t>OS;t>>=hw,e+=1);return e}const Gf=t=>(hw<<BigInt(t))-hw;function B7(t,e,n){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof n!="function")throw new Error("hmacFn must be a function");const i=p=>new Uint8Array(p),r=p=>Uint8Array.of(p);let s=i(t),o=i(t),a=0;const l=()=>{s.fill(1),o.fill(0),a=0},c=(...p)=>n(o,s,...p),u=(p=i(0))=>{o=c(r(0),p),s=c(),p.length!==0&&(o=c(r(1),p),s=c())},h=()=>{if(a++>=1e3)throw new Error("drbg: tried 1000 values");let p=0;const x=[];for(;p<e;){s=c();const y=s.slice();x.push(y),p+=s.length}return Ls(...x)};return(p,x)=>{l(),u(p);let y;for(;!(y=x(h()));)u();return l(),y}}function $f(t,e,n={}){if(!t||typeof t!="object")throw new Error("expected valid options object");function i(r,s,o){const a=t[r];if(o&&a===void 0)return;const l=typeof a;if(l!==s||a===null)throw new Error(`param "${r}" is invalid: expected ${s}, got ${l}`)}Object.entries(e).forEach(([r,s])=>i(r,s,!1)),Object.entries(n).forEach(([r,s])=>i(r,s,!0))}function ng(t){const e=new WeakMap;return(n,...i)=>{const r=e.get(n);if(r!==void 0)return r;const s=t(n,...i);return e.set(n,s),s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const ir=BigInt(0),yi=BigInt(1),Pl=BigInt(2),gI=BigInt(3),xI=BigInt(4),yI=BigInt(5),U7=BigInt(7),vI=BigInt(8),O7=BigInt(9),wI=BigInt(16);function Hn(t,e){const n=t%e;return n>=ir?n:e+n}function Rn(t,e,n){let i=t;for(;e-- >ir;)i*=i,i%=n;return i}function RT(t,e){if(t===ir)throw new Error("invert: expected non-zero number");if(e<=ir)throw new Error("invert: expected positive modulus, got "+e);let n=Hn(t,e),i=e,r=ir,s=yi;for(;n!==ir;){const a=i/n,l=i%n,c=r-s*a;i=n,n=l,r=s,s=c}if(i!==yi)throw new Error("invert: does not exist");return Hn(r,e)}function FS(t,e,n){if(!t.eql(t.sqr(e),n))throw new Error("Cannot find square root")}function _I(t,e){const n=(t.ORDER+yi)/xI,i=t.pow(e,n);return FS(t,i,e),i}function j7(t,e){const n=(t.ORDER-yI)/vI,i=t.mul(e,Pl),r=t.pow(i,n),s=t.mul(e,r),o=t.mul(t.mul(s,Pl),r),a=t.mul(s,t.sub(o,t.ONE));return FS(t,a,e),a}function F7(t){const e=xc(t),n=bI(t),i=n(e,e.neg(e.ONE)),r=n(e,i),s=n(e,e.neg(i)),o=(t+U7)/wI;return(a,l)=>{let c=a.pow(l,o),u=a.mul(c,i);const h=a.mul(c,r),f=a.mul(c,s),p=a.eql(a.sqr(u),l),x=a.eql(a.sqr(h),l);c=a.cmov(c,u,p),u=a.cmov(f,h,x);const y=a.eql(a.sqr(u),l),g=a.cmov(c,u,y);return FS(a,g,l),g}}function bI(t){if(t<gI)throw new Error("sqrt is not defined for small field");let e=t-yi,n=0;for(;e%Pl===ir;)e/=Pl,n++;let i=Pl;const r=xc(t);for(;LT(r,i)===1;)if(i++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(n===1)return _I;let s=r.pow(i,e);const o=(e+yi)/Pl;return function(l,c){if(l.is0(c))return c;if(LT(l,c)!==1)throw new Error("Cannot find square root");let u=n,h=l.mul(l.ONE,s),f=l.pow(c,e),p=l.pow(c,o);for(;!l.eql(f,l.ONE);){if(l.is0(f))return l.ZERO;let x=1,y=l.sqr(f);for(;!l.eql(y,l.ONE);)if(x++,y=l.sqr(y),x===u)throw new Error("Cannot find square root");const g=yi<<BigInt(u-x-1),m=l.pow(h,g);u=x,h=l.sqr(m),f=l.mul(f,h),p=l.mul(p,m)}return p}}function z7(t){return t%xI===gI?_I:t%vI===yI?j7:t%wI===O7?F7(t):bI(t)}const V7=(t,e)=>(Hn(t,e)&yi)===yi,W7=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function H7(t){const e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},n=W7.reduce((i,r)=>(i[r]="function",i),e);return $f(t,n),t}function G7(t,e,n){if(n<ir)throw new Error("invalid exponent, negatives unsupported");if(n===ir)return t.ONE;if(n===yi)return e;let i=t.ONE,r=e;for(;n>ir;)n&yi&&(i=t.mul(i,r)),r=t.sqr(r),n>>=yi;return i}function SI(t,e,n=!1){const i=new Array(e.length).fill(n?t.ZERO:void 0),r=e.reduce((o,a,l)=>t.is0(a)?o:(i[l]=o,t.mul(o,a)),t.ONE),s=t.inv(r);return e.reduceRight((o,a,l)=>t.is0(a)?o:(i[l]=t.mul(o,i[l]),t.mul(o,a)),s),i}function LT(t,e){const n=(t.ORDER-yi)/Pl,i=t.pow(e,n),r=t.eql(i,t.ONE),s=t.eql(i,t.ZERO),o=t.eql(i,t.neg(t.ONE));if(!r&&!s&&!o)throw new Error("invalid Legendre symbol result");return r?1:s?0:-1}function MI(t,e){e!==void 0&&dw(e);const n=e!==void 0?e:t.toString(2).length,i=Math.ceil(n/8);return{nBitLength:n,nByteLength:i}}function xc(t,e,n=!1,i={}){if(t<=ir)throw new Error("invalid field: expected ORDER > 0, got "+t);let r,s,o=!1,a;if(typeof e=="object"&&e!=null){if(i.sqrt||n)throw new Error("cannot specify opts in two arguments");const f=e;f.BITS&&(r=f.BITS),f.sqrt&&(s=f.sqrt),typeof f.isLE=="boolean"&&(n=f.isLE),typeof f.modFromBytes=="boolean"&&(o=f.modFromBytes),a=f.allowedLengths}else typeof e=="number"&&(r=e),i.sqrt&&(s=i.sqrt);const{nBitLength:l,nByteLength:c}=MI(t,r);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const h=Object.freeze({ORDER:t,isLE:n,BITS:l,BYTES:c,MASK:Gf(l),ZERO:ir,ONE:yi,allowedLengths:a,create:f=>Hn(f,t),isValid:f=>{if(typeof f!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof f);return ir<=f&&f<t},is0:f=>f===ir,isValidNot0:f=>!h.is0(f)&&h.isValid(f),isOdd:f=>(f&yi)===yi,neg:f=>Hn(-f,t),eql:(f,p)=>f===p,sqr:f=>Hn(f*f,t),add:(f,p)=>Hn(f+p,t),sub:(f,p)=>Hn(f-p,t),mul:(f,p)=>Hn(f*p,t),pow:(f,p)=>G7(h,f,p),div:(f,p)=>Hn(f*RT(p,t),t),sqrN:f=>f*f,addN:(f,p)=>f+p,subN:(f,p)=>f-p,mulN:(f,p)=>f*p,inv:f=>RT(f,t),sqrt:s||(f=>(u||(u=z7(t)),u(h,f))),toBytes:f=>n?pI(f,c):jS(f,c),fromBytes:(f,p=!0)=>{if(a){if(!a.includes(f.length)||f.length>c)throw new Error("Field.fromBytes: expected "+a+" bytes, got "+f.length);const y=new Uint8Array(c);y.set(f,n?0:y.length-f.length),f=y}if(f.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+f.length);let x=n?ff(f):nx(f);if(o&&(x=Hn(x,t)),!p&&!h.isValid(x))throw new Error("invalid field element: outside of range 0..ORDER");return x},invertBatch:f=>SI(h,f),cmov:(f,p,x)=>x?p:f});return Object.freeze(h)}function EI(t){if(typeof t!="bigint")throw new Error("field order must be bigint");const e=t.toString(2).length;return Math.ceil(e/8)}function TI(t){const e=EI(t);return e+Math.ceil(e/2)}function $7(t,e,n=!1){const i=t.length,r=EI(e),s=TI(e);if(i<16||i<s||i>1024)throw new Error("expected "+s+"-1024 bytes of input, got "+i);const o=n?ff(t):nx(t),a=Hn(o,e-yi)+yi;return n?pI(a,r):jS(a,r)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const qu=BigInt(0),Dl=BigInt(1);function ig(t,e){const n=e.negate();return t?n:e}function Bl(t,e){const n=SI(t.Fp,e.map(i=>i.Z));return e.map((i,r)=>t.fromAffine(i.toAffine(n[r])))}function AI(t,e){if(!Number.isSafeInteger(t)||t<=0||t>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+t)}function Ay(t,e){AI(t,e);const n=Math.ceil(e/t)+1,i=2**(t-1),r=2**t,s=Gf(t),o=BigInt(t);return{windows:n,windowSize:i,mask:s,maxNumber:r,shiftBy:o}}function IT(t,e,n){const{windowSize:i,mask:r,maxNumber:s,shiftBy:o}=n;let a=Number(t&r),l=t>>o;a>i&&(a-=s,l+=Dl);const c=e*i,u=c+Math.abs(a)-1,h=a===0,f=a<0,p=e%2!==0;return{nextN:l,offset:u,isZero:h,isNeg:f,isNegF:p,offsetF:c}}function Y7(t,e){if(!Array.isArray(t))throw new Error("array expected");t.forEach((n,i)=>{if(!(n instanceof e))throw new Error("invalid point at index "+i)})}function X7(t,e){if(!Array.isArray(t))throw new Error("array of scalars expected");t.forEach((n,i)=>{if(!e.isValid(n))throw new Error("invalid scalar at index "+i)})}const Cy=new WeakMap,CI=new WeakMap;function Ny(t){return CI.get(t)||1}function kT(t){if(t!==qu)throw new Error("invalid wNAF")}class NI{constructor(e,n){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=n}_unsafeLadder(e,n,i=this.ZERO){let r=e;for(;n>qu;)n&Dl&&(i=i.add(r)),r=r.double(),n>>=Dl;return i}precomputeWindow(e,n){const{windows:i,windowSize:r}=Ay(n,this.bits),s=[];let o=e,a=o;for(let l=0;l<i;l++){a=o,s.push(a);for(let c=1;c<r;c++)a=a.add(o),s.push(a);o=a.double()}return s}wNAF(e,n,i){if(!this.Fn.isValid(i))throw new Error("invalid scalar");let r=this.ZERO,s=this.BASE;const o=Ay(e,this.bits);for(let a=0;a<o.windows;a++){const{nextN:l,offset:c,isZero:u,isNeg:h,isNegF:f,offsetF:p}=IT(i,a,o);i=l,u?s=s.add(ig(f,n[p])):r=r.add(ig(h,n[c]))}return kT(i),{p:r,f:s}}wNAFUnsafe(e,n,i,r=this.ZERO){const s=Ay(e,this.bits);for(let o=0;o<s.windows&&i!==qu;o++){const{nextN:a,offset:l,isZero:c,isNeg:u}=IT(i,o,s);if(i=a,!c){const h=n[l];r=r.add(u?h.negate():h)}}return kT(i),r}getPrecomputes(e,n,i){let r=Cy.get(n);return r||(r=this.precomputeWindow(n,e),e!==1&&(typeof i=="function"&&(r=i(r)),Cy.set(n,r))),r}cached(e,n,i){const r=Ny(e);return this.wNAF(r,this.getPrecomputes(r,e,i),n)}unsafe(e,n,i,r){const s=Ny(e);return s===1?this._unsafeLadder(e,n,r):this.wNAFUnsafe(s,this.getPrecomputes(s,e,i),n,r)}createCache(e,n){AI(n,this.bits),CI.set(e,n),Cy.delete(e)}hasCache(e){return Ny(e)!==1}}function q7(t,e,n,i){let r=e,s=t.ZERO,o=t.ZERO;for(;n>qu||i>qu;)n&Dl&&(s=s.add(r)),i&Dl&&(o=o.add(r)),r=r.double(),n>>=Dl,i>>=Dl;return{p1:s,p2:o}}function RI(t,e,n,i){Y7(n,t),X7(i,e);const r=n.length,s=i.length;if(r!==s)throw new Error("arrays of points and scalars must have equal length");const o=t.ZERO,a=mI(BigInt(r));let l=1;a>12?l=a-3:a>4?l=a-2:a>0&&(l=2);const c=Gf(l),u=new Array(Number(c)+1).fill(o),h=Math.floor((e.BITS-1)/l)*l;let f=o;for(let p=h;p>=0;p-=l){u.fill(o);for(let y=0;y<s;y++){const g=i[y],m=Number(g>>BigInt(p)&c);u[m]=u[m].add(n[y])}let x=o;for(let y=u.length-1,g=o;y>0;y--)g=g.add(u[y]),x=x.add(g);if(f=f.add(x),p!==0)for(let y=0;y<l;y++)f=f.double()}return f}function PT(t,e,n){if(e){if(e.ORDER!==t)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return H7(e),e}else return xc(t,{isLE:n})}function LI(t,e,n={},i){if(i===void 0&&(i=t==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${t} CURVE object`);for(const l of["p","n","h"]){const c=e[l];if(!(typeof c=="bigint"&&c>qu))throw new Error(`CURVE.${l} must be positive bigint`)}const r=PT(e.p,n.Fp,i),s=PT(e.n,n.Fn,i),a=["Gx","Gy","a",t==="weierstrass"?"b":"d"];for(const l of a)if(!r.isValid(e[l]))throw new Error(`CURVE.${l} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:r,Fn:s}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const $o=BigInt(0),oi=BigInt(1),Ry=BigInt(2),K7=BigInt(8);function Z7(t,e,n,i){const r=t.sqr(n),s=t.sqr(i),o=t.add(t.mul(e.a,r),s),a=t.add(t.ONE,t.mul(e.d,t.mul(r,s)));return t.eql(o,a)}function Q7(t,e={}){const n=LI("edwards",t,e,e.FpFnLE),{Fp:i,Fn:r}=n;let s=n.CURVE;const{h:o}=s;$f(e,{},{uvRatio:"function"});const a=Ry<<BigInt(r.BYTES*8)-oi,l=g=>i.create(g),c=e.uvRatio||((g,m)=>{try{return{isValid:!0,value:i.sqrt(i.div(g,m))}}catch{return{isValid:!1,value:$o}}});if(!Z7(i,s,s.Gx,s.Gy))throw new Error("bad curve params: generator point");function u(g,m,_=!1){const w=_?oi:$o;return fw("coordinate "+g,m,w,a),m}function h(g){if(!(g instanceof x))throw new Error("ExtendedPoint expected")}const f=ng((g,m)=>{const{X:_,Y:w,Z:S}=g,N=g.is0();m==null&&(m=N?K7:i.inv(S));const k=l(_*m),R=l(w*m),B=i.mul(S,m);if(N)return{x:$o,y:oi};if(B!==oi)throw new Error("invZ was invalid");return{x:k,y:R}}),p=ng(g=>{const{a:m,d:_}=s;if(g.is0())throw new Error("bad point: ZERO");const{X:w,Y:S,Z:N,T:k}=g,R=l(w*w),B=l(S*S),L=l(N*N),D=l(L*L),j=l(R*m),Y=l(L*l(j+B)),I=l(D+l(_*l(R*B)));if(Y!==I)throw new Error("bad point: equation left != right (1)");const v=l(w*S),b=l(N*k);if(v!==b)throw new Error("bad point: equation left != right (2)");return!0});class x{constructor(m,_,w,S){this.X=u("x",m),this.Y=u("y",_),this.Z=u("z",w,!0),this.T=u("t",S),Object.freeze(this)}static CURVE(){return s}static fromAffine(m){if(m instanceof x)throw new Error("extended point not allowed");const{x:_,y:w}=m||{};return u("x",_),u("y",w),new x(_,w,oi,l(_*w))}static fromBytes(m,_=!1){const w=i.BYTES,{a:S,d:N}=s;m=NT(us(m,w,"point")),lc(_,"zip215");const k=NT(m),R=m[w-1];k[w-1]=R&-129;const B=ff(k),L=_?a:i.ORDER;fw("point.y",B,$o,L);const D=l(B*B),j=l(D-oi),Y=l(N*D-S);let{isValid:I,value:v}=c(j,Y);if(!I)throw new Error("bad point: invalid y coordinate");const b=(v&oi)===oi,E=(R&128)!==0;if(!_&&v===$o&&E)throw new Error("bad point: x=0 and x_0=1");return E!==b&&(v=l(-v)),x.fromAffine({x:v,y:B})}static fromHex(m,_=!1){return x.fromBytes(In("point",m),_)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(m=8,_=!0){return y.createCache(this,m),_||this.multiply(Ry),this}assertValidity(){p(this)}equals(m){h(m);const{X:_,Y:w,Z:S}=this,{X:N,Y:k,Z:R}=m,B=l(_*R),L=l(N*S),D=l(w*R),j=l(k*S);return B===L&&D===j}is0(){return this.equals(x.ZERO)}negate(){return new x(l(-this.X),this.Y,this.Z,l(-this.T))}double(){const{a:m}=s,{X:_,Y:w,Z:S}=this,N=l(_*_),k=l(w*w),R=l(Ry*l(S*S)),B=l(m*N),L=_+w,D=l(l(L*L)-N-k),j=B+k,Y=j-R,I=B-k,v=l(D*Y),b=l(j*I),E=l(D*I),P=l(Y*j);return new x(v,b,P,E)}add(m){h(m);const{a:_,d:w}=s,{X:S,Y:N,Z:k,T:R}=this,{X:B,Y:L,Z:D,T:j}=m,Y=l(S*B),I=l(N*L),v=l(R*w*j),b=l(k*D),E=l((S+N)*(B+L)-Y-I),P=b-v,C=b+v,z=l(I-_*Y),V=l(E*P),U=l(C*z),T=l(E*z),G=l(P*C);return new x(V,U,G,T)}subtract(m){return this.add(m.negate())}multiply(m){if(!r.isValidNot0(m))throw new Error("invalid scalar: expected 1 <= sc < curve.n");const{p:_,f:w}=y.cached(this,m,S=>Bl(x,S));return Bl(x,[_,w])[0]}multiplyUnsafe(m,_=x.ZERO){if(!r.isValid(m))throw new Error("invalid scalar: expected 0 <= sc < curve.n");return m===$o?x.ZERO:this.is0()||m===oi?this:y.unsafe(this,m,w=>Bl(x,w),_)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}isTorsionFree(){return y.unsafe(this,s.n).is0()}toAffine(m){return f(this,m)}clearCofactor(){return o===oi?this:this.multiplyUnsafe(o)}toBytes(){const{x:m,y:_}=this.toAffine(),w=i.toBytes(_);return w[w.length-1]|=m&oi?128:0,w}toHex(){return Ql(this.toBytes())}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get ex(){return this.X}get ey(){return this.Y}get ez(){return this.Z}get et(){return this.T}static normalizeZ(m){return Bl(x,m)}static msm(m,_){return RI(x,r,m,_)}_setWindowSize(m){this.precompute(m)}toRawBytes(){return this.toBytes()}}x.BASE=new x(s.Gx,s.Gy,oi,l(s.Gx*s.Gy)),x.ZERO=new x($o,oi,oi,$o),x.Fp=i,x.Fn=r;const y=new NI(x,r.BITS);return x.BASE.precompute(8),x}function J7(t,e,n={}){if(typeof e!="function")throw new Error('"hash" function param is required');$f(n,{},{adjustScalarBytes:"function",randomBytes:"function",domain:"function",prehash:"function",mapToCurve:"function"});const{prehash:i}=n,{BASE:r,Fp:s,Fn:o}=t,a=n.randomBytes||US,l=n.adjustScalarBytes||(L=>L),c=n.domain||((L,D,j)=>{if(lc(j,"phflag"),D.length||j)throw new Error("Contexts/pre-hash are not supported");return L});function u(L){return o.create(ff(L))}function h(L){const D=w.secretKey;L=In("private key",L,D);const j=In("hashed private key",e(L),2*D),Y=l(j.slice(0,D)),I=j.slice(D,2*D),v=u(Y);return{head:Y,prefix:I,scalar:v}}function f(L){const{head:D,prefix:j,scalar:Y}=h(L),I=r.multiply(Y),v=I.toBytes();return{head:D,prefix:j,scalar:Y,point:I,pointBytes:v}}function p(L){return f(L).pointBytes}function x(L=Uint8Array.of(),...D){const j=Ls(...D);return u(e(c(j,In("context",L),!!i)))}function y(L,D,j={}){L=In("message",L),i&&(L=i(L));const{prefix:Y,scalar:I,pointBytes:v}=f(D),b=x(j.context,Y,L),E=r.multiply(b).toBytes(),P=x(j.context,E,v,L),C=o.create(b+P*I);if(!o.isValid(C))throw new Error("sign failed: invalid s");const z=Ls(E,o.toBytes(C));return us(z,w.signature,"result")}const g={zip215:!0};function m(L,D,j,Y=g){const{context:I,zip215:v}=Y,b=w.signature;L=In("signature",L,b),D=In("message",D),j=In("publicKey",j,w.publicKey),v!==void 0&&lc(v,"zip215"),i&&(D=i(D));const E=b/2,P=L.subarray(0,E),C=ff(L.subarray(E,b));let z,V,U;try{z=t.fromBytes(j,v),V=t.fromBytes(P,v),U=r.multiplyUnsafe(C)}catch{return!1}if(!v&&z.isSmallOrder())return!1;const T=x(I,V.toBytes(),z.toBytes(),D);return V.add(z.multiplyUnsafe(T)).subtract(U).clearCofactor().is0()}const _=s.BYTES,w={secretKey:_,publicKey:_,signature:2*_,seed:_};function S(L=a(w.seed)){return us(L,w.seed,"seed")}function N(L){const D=B.randomSecretKey(L);return{secretKey:D,publicKey:p(D)}}function k(L){return Hf(L)&&L.length===o.BYTES}function R(L,D){try{return!!t.fromBytes(L,D)}catch{return!1}}const B={getExtendedPublicKey:f,randomSecretKey:S,isValidSecretKey:k,isValidPublicKey:R,toMontgomery(L){const{y:D}=t.fromBytes(L),j=w.publicKey,Y=j===32;if(!Y&&j!==57)throw new Error("only defined for 25519 and 448");const I=Y?s.div(oi+D,oi-D):s.div(D-oi,D+oi);return s.toBytes(I)},toMontgomerySecret(L){const D=w.secretKey;us(L,D);const j=e(L.subarray(0,D));return l(j).subarray(0,D)},randomPrivateKey:S,precompute(L=8,D=t.BASE){return D.precompute(L,!1)}};return Object.freeze({keygen:N,getPublicKey:p,sign:y,verify:m,utils:B,Point:t,lengths:w})}function eV(t){const e={a:t.a,d:t.d,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp,i=xc(e.n,t.nBitLength,!0),r={Fp:n,Fn:i,uvRatio:t.uvRatio},s={randomBytes:t.randomBytes,adjustScalarBytes:t.adjustScalarBytes,domain:t.domain,prehash:t.prehash,mapToCurve:t.mapToCurve};return{CURVE:e,curveOpts:r,hash:t.hash,eddsaOpts:s}}function tV(t,e){const n=e.Point;return Object.assign({},e,{ExtendedPoint:n,CURVE:t,nBitLength:n.Fn.BITS,nByteLength:n.Fn.BYTES})}function nV(t){const{CURVE:e,curveOpts:n,hash:i,eddsaOpts:r}=eV(t),s=Q7(e,n),o=J7(s,i,r);return tV(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const iV=BigInt(1),DT=BigInt(2);BigInt(3);const rV=BigInt(5),sV=BigInt(8),zS=BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffed"),II={p:zS,n:BigInt("0x1000000000000000000000000000000014def9dea2f79cd65812631a5cf5d3ed"),h:sV,a:BigInt("0x7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffec"),d:BigInt("0x52036cee2b6ffe738cc740797779e89800700a4d4141d8ab75eb4dca135978a3"),Gx:BigInt("0x216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a"),Gy:BigInt("0x6666666666666666666666666666666666666666666666666666666666666658")};function oV(t){const e=BigInt(10),n=BigInt(20),i=BigInt(40),r=BigInt(80),s=zS,a=t*t%s*t%s,l=Rn(a,DT,s)*a%s,c=Rn(l,iV,s)*t%s,u=Rn(c,rV,s)*c%s,h=Rn(u,e,s)*u%s,f=Rn(h,n,s)*h%s,p=Rn(f,i,s)*f%s,x=Rn(p,r,s)*p%s,y=Rn(x,r,s)*p%s,g=Rn(y,e,s)*u%s;return{pow_p_5_8:Rn(g,DT,s)*t%s,b2:a}}function aV(t){return t[0]&=248,t[31]&=127,t[31]|=64,t}const BT=BigInt("19681161376707505956807079304988542015446066515923890162744021073123829784752");function lV(t,e){const n=zS,i=Hn(e*e*e,n),r=Hn(i*i*e,n),s=oV(t*r).pow_p_5_8;let o=Hn(t*i*s,n);const a=Hn(e*o*o,n),l=o,c=Hn(o*BT,n),u=a===t,h=a===Hn(-t,n),f=a===Hn(-t*BT,n);return u&&(o=l),(h||f)&&(o=c),V7(o,n)&&(o=Hn(-o,n)),{isValid:u||h,value:o}}const cV=xc(II.p,{isLE:!0}),uV={...II,Fp:cV,hash:P7,adjustScalarBytes:aV,uvRatio:lV},Yf=nV(uV);var VS={exports:{}};const WS=nb(p7);VS.exports;(function(t){(function(e,n){function i(I,v){if(!I)throw new Error(v||"Assertion failed")}function r(I,v){I.super_=v;var b=function(){};b.prototype=v.prototype,I.prototype=new b,I.prototype.constructor=I}function s(I,v,b){if(s.isBN(I))return I;this.negative=0,this.words=null,this.length=0,this.red=null,I!==null&&((v==="le"||v==="be")&&(b=v,v=10),this._init(I||0,v||10,b||"be"))}typeof e=="object"?e.exports=s:n.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=WS.Buffer}catch{}s.isBN=function(v){return v instanceof s?!0:v!==null&&typeof v=="object"&&v.constructor.wordSize===s.wordSize&&Array.isArray(v.words)},s.max=function(v,b){return v.cmp(b)>0?v:b},s.min=function(v,b){return v.cmp(b)<0?v:b},s.prototype._init=function(v,b,E){if(typeof v=="number")return this._initNumber(v,b,E);if(typeof v=="object")return this._initArray(v,b,E);b==="hex"&&(b=16),i(b===(b|0)&&b>=2&&b<=36),v=v.toString().replace(/\s+/g,"");var P=0;v[0]==="-"&&(P++,this.negative=1),P<v.length&&(b===16?this._parseHex(v,P,E):(this._parseBase(v,b,P),E==="le"&&this._initArray(this.toArray(),b,E)))},s.prototype._initNumber=function(v,b,E){v<0&&(this.negative=1,v=-v),v<67108864?(this.words=[v&67108863],this.length=1):v<4503599627370496?(this.words=[v&67108863,v/67108864&67108863],this.length=2):(i(v<9007199254740992),this.words=[v&67108863,v/67108864&67108863,1],this.length=3),E==="le"&&this._initArray(this.toArray(),b,E)},s.prototype._initArray=function(v,b,E){if(i(typeof v.length=="number"),v.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(v.length/3),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var C,z,V=0;if(E==="be")for(P=v.length-1,C=0;P>=0;P-=3)z=v[P]|v[P-1]<<8|v[P-2]<<16,this.words[C]|=z<<V&67108863,this.words[C+1]=z>>>26-V&67108863,V+=24,V>=26&&(V-=26,C++);else if(E==="le")for(P=0,C=0;P<v.length;P+=3)z=v[P]|v[P+1]<<8|v[P+2]<<16,this.words[C]|=z<<V&67108863,this.words[C+1]=z>>>26-V&67108863,V+=24,V>=26&&(V-=26,C++);return this._strip()};function a(I,v){var b=I.charCodeAt(v);if(b>=48&&b<=57)return b-48;if(b>=65&&b<=70)return b-55;if(b>=97&&b<=102)return b-87;i(!1,"Invalid character in "+I)}function l(I,v,b){var E=a(I,b);return b-1>=v&&(E|=a(I,b-1)<<4),E}s.prototype._parseHex=function(v,b,E){this.length=Math.ceil((v.length-b)/6),this.words=new Array(this.length);for(var P=0;P<this.length;P++)this.words[P]=0;var C=0,z=0,V;if(E==="be")for(P=v.length-1;P>=b;P-=2)V=l(v,b,P)<<C,this.words[z]|=V&67108863,C>=18?(C-=18,z+=1,this.words[z]|=V>>>26):C+=8;else{var U=v.length-b;for(P=U%2===0?b+1:b;P<v.length;P+=2)V=l(v,b,P)<<C,this.words[z]|=V&67108863,C>=18?(C-=18,z+=1,this.words[z]|=V>>>26):C+=8}this._strip()};function c(I,v,b,E){for(var P=0,C=0,z=Math.min(I.length,b),V=v;V<z;V++){var U=I.charCodeAt(V)-48;P*=E,U>=49?C=U-49+10:U>=17?C=U-17+10:C=U,i(U>=0&&C<E,"Invalid character"),P+=C}return P}s.prototype._parseBase=function(v,b,E){this.words=[0],this.length=1;for(var P=0,C=1;C<=67108863;C*=b)P++;P--,C=C/b|0;for(var z=v.length-E,V=z%P,U=Math.min(z,z-V)+E,T=0,G=E;G<U;G+=P)T=c(v,G,G+P,b),this.imuln(C),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T);if(V!==0){var K=1;for(T=c(v,G,v.length,b),G=0;G<V;G++)K*=b;this.imuln(K),this.words[0]+T<67108864?this.words[0]+=T:this._iaddn(T)}this._strip()},s.prototype.copy=function(v){v.words=new Array(this.length);for(var b=0;b<this.length;b++)v.words[b]=this.words[b];v.length=this.length,v.negative=this.negative,v.red=this.red};function u(I,v){I.words=v.words,I.length=v.length,I.negative=v.negative,I.red=v.red}if(s.prototype._move=function(v){u(v,this)},s.prototype.clone=function(){var v=new s(null);return this.copy(v),v},s.prototype._expand=function(v){for(;this.length<v;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=h}catch{s.prototype.inspect=h}else s.prototype.inspect=h;function h(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var f=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],p=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],x=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(v,b){v=v||10,b=b|0||1;var E;if(v===16||v==="hex"){E="";for(var P=0,C=0,z=0;z<this.length;z++){var V=this.words[z],U=((V<<P|C)&16777215).toString(16);C=V>>>24-P&16777215,P+=2,P>=26&&(P-=26,z--),C!==0||z!==this.length-1?E=f[6-U.length]+U+E:E=U+E}for(C!==0&&(E=C.toString(16)+E);E.length%b!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}if(v===(v|0)&&v>=2&&v<=36){var T=p[v],G=x[v];E="";var K=this.clone();for(K.negative=0;!K.isZero();){var ne=K.modrn(G).toString(v);K=K.idivn(G),K.isZero()?E=ne+E:E=f[T-ne.length]+ne+E}for(this.isZero()&&(E="0"+E);E.length%b!==0;)E="0"+E;return this.negative!==0&&(E="-"+E),E}i(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var v=this.words[0];return this.length===2?v+=this.words[1]*67108864:this.length===3&&this.words[2]===1?v+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-v:v},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(v,b){return this.toArrayLike(o,v,b)}),s.prototype.toArray=function(v,b){return this.toArrayLike(Array,v,b)};var y=function(v,b){return v.allocUnsafe?v.allocUnsafe(b):new v(b)};s.prototype.toArrayLike=function(v,b,E){this._strip();var P=this.byteLength(),C=E||Math.max(1,P);i(P<=C,"byte array longer than desired length"),i(C>0,"Requested array length <= 0");var z=y(v,C),V=b==="le"?"LE":"BE";return this["_toArrayLike"+V](z,P),z},s.prototype._toArrayLikeLE=function(v,b){for(var E=0,P=0,C=0,z=0;C<this.length;C++){var V=this.words[C]<<z|P;v[E++]=V&255,E<v.length&&(v[E++]=V>>8&255),E<v.length&&(v[E++]=V>>16&255),z===6?(E<v.length&&(v[E++]=V>>24&255),P=0,z=0):(P=V>>>24,z+=2)}if(E<v.length)for(v[E++]=P;E<v.length;)v[E++]=0},s.prototype._toArrayLikeBE=function(v,b){for(var E=v.length-1,P=0,C=0,z=0;C<this.length;C++){var V=this.words[C]<<z|P;v[E--]=V&255,E>=0&&(v[E--]=V>>8&255),E>=0&&(v[E--]=V>>16&255),z===6?(E>=0&&(v[E--]=V>>24&255),P=0,z=0):(P=V>>>24,z+=2)}if(E>=0)for(v[E--]=P;E>=0;)v[E--]=0},Math.clz32?s.prototype._countBits=function(v){return 32-Math.clz32(v)}:s.prototype._countBits=function(v){var b=v,E=0;return b>=4096&&(E+=13,b>>>=13),b>=64&&(E+=7,b>>>=7),b>=8&&(E+=4,b>>>=4),b>=2&&(E+=2,b>>>=2),E+b},s.prototype._zeroBits=function(v){if(v===0)return 26;var b=v,E=0;return b&8191||(E+=13,b>>>=13),b&127||(E+=7,b>>>=7),b&15||(E+=4,b>>>=4),b&3||(E+=2,b>>>=2),b&1||E++,E},s.prototype.bitLength=function(){var v=this.words[this.length-1],b=this._countBits(v);return(this.length-1)*26+b};function g(I){for(var v=new Array(I.bitLength()),b=0;b<v.length;b++){var E=b/26|0,P=b%26;v[b]=I.words[E]>>>P&1}return v}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var v=0,b=0;b<this.length;b++){var E=this._zeroBits(this.words[b]);if(v+=E,E!==26)break}return v},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(v){return this.negative!==0?this.abs().inotn(v).iaddn(1):this.clone()},s.prototype.fromTwos=function(v){return this.testn(v-1)?this.notn(v).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(v){for(;this.length<v.length;)this.words[this.length++]=0;for(var b=0;b<v.length;b++)this.words[b]=this.words[b]|v.words[b];return this._strip()},s.prototype.ior=function(v){return i((this.negative|v.negative)===0),this.iuor(v)},s.prototype.or=function(v){return this.length>v.length?this.clone().ior(v):v.clone().ior(this)},s.prototype.uor=function(v){return this.length>v.length?this.clone().iuor(v):v.clone().iuor(this)},s.prototype.iuand=function(v){var b;this.length>v.length?b=v:b=this;for(var E=0;E<b.length;E++)this.words[E]=this.words[E]&v.words[E];return this.length=b.length,this._strip()},s.prototype.iand=function(v){return i((this.negative|v.negative)===0),this.iuand(v)},s.prototype.and=function(v){return this.length>v.length?this.clone().iand(v):v.clone().iand(this)},s.prototype.uand=function(v){return this.length>v.length?this.clone().iuand(v):v.clone().iuand(this)},s.prototype.iuxor=function(v){var b,E;this.length>v.length?(b=this,E=v):(b=v,E=this);for(var P=0;P<E.length;P++)this.words[P]=b.words[P]^E.words[P];if(this!==b)for(;P<b.length;P++)this.words[P]=b.words[P];return this.length=b.length,this._strip()},s.prototype.ixor=function(v){return i((this.negative|v.negative)===0),this.iuxor(v)},s.prototype.xor=function(v){return this.length>v.length?this.clone().ixor(v):v.clone().ixor(this)},s.prototype.uxor=function(v){return this.length>v.length?this.clone().iuxor(v):v.clone().iuxor(this)},s.prototype.inotn=function(v){i(typeof v=="number"&&v>=0);var b=Math.ceil(v/26)|0,E=v%26;this._expand(b),E>0&&b--;for(var P=0;P<b;P++)this.words[P]=~this.words[P]&67108863;return E>0&&(this.words[P]=~this.words[P]&67108863>>26-E),this._strip()},s.prototype.notn=function(v){return this.clone().inotn(v)},s.prototype.setn=function(v,b){i(typeof v=="number"&&v>=0);var E=v/26|0,P=v%26;return this._expand(E+1),b?this.words[E]=this.words[E]|1<<P:this.words[E]=this.words[E]&~(1<<P),this._strip()},s.prototype.iadd=function(v){var b;if(this.negative!==0&&v.negative===0)return this.negative=0,b=this.isub(v),this.negative^=1,this._normSign();if(this.negative===0&&v.negative!==0)return v.negative=0,b=this.isub(v),v.negative=1,b._normSign();var E,P;this.length>v.length?(E=this,P=v):(E=v,P=this);for(var C=0,z=0;z<P.length;z++)b=(E.words[z]|0)+(P.words[z]|0)+C,this.words[z]=b&67108863,C=b>>>26;for(;C!==0&&z<E.length;z++)b=(E.words[z]|0)+C,this.words[z]=b&67108863,C=b>>>26;if(this.length=E.length,C!==0)this.words[this.length]=C,this.length++;else if(E!==this)for(;z<E.length;z++)this.words[z]=E.words[z];return this},s.prototype.add=function(v){var b;return v.negative!==0&&this.negative===0?(v.negative=0,b=this.sub(v),v.negative^=1,b):v.negative===0&&this.negative!==0?(this.negative=0,b=v.sub(this),this.negative=1,b):this.length>v.length?this.clone().iadd(v):v.clone().iadd(this)},s.prototype.isub=function(v){if(v.negative!==0){v.negative=0;var b=this.iadd(v);return v.negative=1,b._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(v),this.negative=1,this._normSign();var E=this.cmp(v);if(E===0)return this.negative=0,this.length=1,this.words[0]=0,this;var P,C;E>0?(P=this,C=v):(P=v,C=this);for(var z=0,V=0;V<C.length;V++)b=(P.words[V]|0)-(C.words[V]|0)+z,z=b>>26,this.words[V]=b&67108863;for(;z!==0&&V<P.length;V++)b=(P.words[V]|0)+z,z=b>>26,this.words[V]=b&67108863;if(z===0&&V<P.length&&P!==this)for(;V<P.length;V++)this.words[V]=P.words[V];return this.length=Math.max(this.length,V),P!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(v){return this.clone().isub(v)};function m(I,v,b){b.negative=v.negative^I.negative;var E=I.length+v.length|0;b.length=E,E=E-1|0;var P=I.words[0]|0,C=v.words[0]|0,z=P*C,V=z&67108863,U=z/67108864|0;b.words[0]=V;for(var T=1;T<E;T++){for(var G=U>>>26,K=U&67108863,ne=Math.min(T,v.length-1),Z=Math.max(0,T-I.length+1);Z<=ne;Z++){var ee=T-Z|0;P=I.words[ee]|0,C=v.words[Z]|0,z=P*C+K,G+=z/67108864|0,K=z&67108863}b.words[T]=K|0,U=G|0}return U!==0?b.words[T]=U|0:b.length--,b._strip()}var _=function(v,b,E){var P=v.words,C=b.words,z=E.words,V=0,U,T,G,K=P[0]|0,ne=K&8191,Z=K>>>13,ee=P[1]|0,me=ee&8191,pe=ee>>>13,Se=P[2]|0,Re=Se&8191,it=Se>>>13,J=P[3]|0,ot=J&8191,We=J>>>13,He=P[4]|0,Ee=He&8191,ft=He>>>13,$e=P[5]|0,De=$e&8191,_e=$e>>>13,lt=P[6]|0,X=lt&8191,H=lt>>>13,se=P[7]|0,ce=se&8191,ye=se>>>13,fe=P[8]|0,Ne=fe&8191,O=fe>>>13,M=P[9]|0,A=M&8191,W=M>>>13,q=C[0]|0,te=q&8191,ie=q>>>13,ve=C[1]|0,Ie=ve&8191,Q=ve>>>13,we=C[2]|0,xe=we&8191,Pe=we>>>13,Te=C[3]|0,ge=Te&8191,Be=Te>>>13,gt=C[4]|0,mt=gt&8191,ut=gt>>>13,Rr=C[5]|0,Bt=Rr&8191,pn=Rr>>>13,ws=C[6]|0,an=ws&8191,mn=ws>>>13,Cd=C[7]|0,tn=Cd&8191,gn=Cd>>>13,tl=C[8]|0,xn=tl&8191,yn=tl>>>13,up=C[9]|0,Cn=up&8191,Nn=up>>>13;E.negative=v.negative^b.negative,E.length=19,U=Math.imul(ne,te),T=Math.imul(ne,ie),T=T+Math.imul(Z,te)|0,G=Math.imul(Z,ie);var Nd=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Nd>>>26)|0,Nd&=67108863,U=Math.imul(me,te),T=Math.imul(me,ie),T=T+Math.imul(pe,te)|0,G=Math.imul(pe,ie),U=U+Math.imul(ne,Ie)|0,T=T+Math.imul(ne,Q)|0,T=T+Math.imul(Z,Ie)|0,G=G+Math.imul(Z,Q)|0;var Rd=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Rd>>>26)|0,Rd&=67108863,U=Math.imul(Re,te),T=Math.imul(Re,ie),T=T+Math.imul(it,te)|0,G=Math.imul(it,ie),U=U+Math.imul(me,Ie)|0,T=T+Math.imul(me,Q)|0,T=T+Math.imul(pe,Ie)|0,G=G+Math.imul(pe,Q)|0,U=U+Math.imul(ne,xe)|0,T=T+Math.imul(ne,Pe)|0,T=T+Math.imul(Z,xe)|0,G=G+Math.imul(Z,Pe)|0;var Ld=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Ld>>>26)|0,Ld&=67108863,U=Math.imul(ot,te),T=Math.imul(ot,ie),T=T+Math.imul(We,te)|0,G=Math.imul(We,ie),U=U+Math.imul(Re,Ie)|0,T=T+Math.imul(Re,Q)|0,T=T+Math.imul(it,Ie)|0,G=G+Math.imul(it,Q)|0,U=U+Math.imul(me,xe)|0,T=T+Math.imul(me,Pe)|0,T=T+Math.imul(pe,xe)|0,G=G+Math.imul(pe,Pe)|0,U=U+Math.imul(ne,ge)|0,T=T+Math.imul(ne,Be)|0,T=T+Math.imul(Z,ge)|0,G=G+Math.imul(Z,Be)|0;var $=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+($>>>26)|0,$&=67108863,U=Math.imul(Ee,te),T=Math.imul(Ee,ie),T=T+Math.imul(ft,te)|0,G=Math.imul(ft,ie),U=U+Math.imul(ot,Ie)|0,T=T+Math.imul(ot,Q)|0,T=T+Math.imul(We,Ie)|0,G=G+Math.imul(We,Q)|0,U=U+Math.imul(Re,xe)|0,T=T+Math.imul(Re,Pe)|0,T=T+Math.imul(it,xe)|0,G=G+Math.imul(it,Pe)|0,U=U+Math.imul(me,ge)|0,T=T+Math.imul(me,Be)|0,T=T+Math.imul(pe,ge)|0,G=G+Math.imul(pe,Be)|0,U=U+Math.imul(ne,mt)|0,T=T+Math.imul(ne,ut)|0,T=T+Math.imul(Z,mt)|0,G=G+Math.imul(Z,ut)|0;var re=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(re>>>26)|0,re&=67108863,U=Math.imul(De,te),T=Math.imul(De,ie),T=T+Math.imul(_e,te)|0,G=Math.imul(_e,ie),U=U+Math.imul(Ee,Ie)|0,T=T+Math.imul(Ee,Q)|0,T=T+Math.imul(ft,Ie)|0,G=G+Math.imul(ft,Q)|0,U=U+Math.imul(ot,xe)|0,T=T+Math.imul(ot,Pe)|0,T=T+Math.imul(We,xe)|0,G=G+Math.imul(We,Pe)|0,U=U+Math.imul(Re,ge)|0,T=T+Math.imul(Re,Be)|0,T=T+Math.imul(it,ge)|0,G=G+Math.imul(it,Be)|0,U=U+Math.imul(me,mt)|0,T=T+Math.imul(me,ut)|0,T=T+Math.imul(pe,mt)|0,G=G+Math.imul(pe,ut)|0,U=U+Math.imul(ne,Bt)|0,T=T+Math.imul(ne,pn)|0,T=T+Math.imul(Z,Bt)|0,G=G+Math.imul(Z,pn)|0;var ue=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(ue>>>26)|0,ue&=67108863,U=Math.imul(X,te),T=Math.imul(X,ie),T=T+Math.imul(H,te)|0,G=Math.imul(H,ie),U=U+Math.imul(De,Ie)|0,T=T+Math.imul(De,Q)|0,T=T+Math.imul(_e,Ie)|0,G=G+Math.imul(_e,Q)|0,U=U+Math.imul(Ee,xe)|0,T=T+Math.imul(Ee,Pe)|0,T=T+Math.imul(ft,xe)|0,G=G+Math.imul(ft,Pe)|0,U=U+Math.imul(ot,ge)|0,T=T+Math.imul(ot,Be)|0,T=T+Math.imul(We,ge)|0,G=G+Math.imul(We,Be)|0,U=U+Math.imul(Re,mt)|0,T=T+Math.imul(Re,ut)|0,T=T+Math.imul(it,mt)|0,G=G+Math.imul(it,ut)|0,U=U+Math.imul(me,Bt)|0,T=T+Math.imul(me,pn)|0,T=T+Math.imul(pe,Bt)|0,G=G+Math.imul(pe,pn)|0,U=U+Math.imul(ne,an)|0,T=T+Math.imul(ne,mn)|0,T=T+Math.imul(Z,an)|0,G=G+Math.imul(Z,mn)|0;var de=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(de>>>26)|0,de&=67108863,U=Math.imul(ce,te),T=Math.imul(ce,ie),T=T+Math.imul(ye,te)|0,G=Math.imul(ye,ie),U=U+Math.imul(X,Ie)|0,T=T+Math.imul(X,Q)|0,T=T+Math.imul(H,Ie)|0,G=G+Math.imul(H,Q)|0,U=U+Math.imul(De,xe)|0,T=T+Math.imul(De,Pe)|0,T=T+Math.imul(_e,xe)|0,G=G+Math.imul(_e,Pe)|0,U=U+Math.imul(Ee,ge)|0,T=T+Math.imul(Ee,Be)|0,T=T+Math.imul(ft,ge)|0,G=G+Math.imul(ft,Be)|0,U=U+Math.imul(ot,mt)|0,T=T+Math.imul(ot,ut)|0,T=T+Math.imul(We,mt)|0,G=G+Math.imul(We,ut)|0,U=U+Math.imul(Re,Bt)|0,T=T+Math.imul(Re,pn)|0,T=T+Math.imul(it,Bt)|0,G=G+Math.imul(it,pn)|0,U=U+Math.imul(me,an)|0,T=T+Math.imul(me,mn)|0,T=T+Math.imul(pe,an)|0,G=G+Math.imul(pe,mn)|0,U=U+Math.imul(ne,tn)|0,T=T+Math.imul(ne,gn)|0,T=T+Math.imul(Z,tn)|0,G=G+Math.imul(Z,gn)|0;var oe=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(oe>>>26)|0,oe&=67108863,U=Math.imul(Ne,te),T=Math.imul(Ne,ie),T=T+Math.imul(O,te)|0,G=Math.imul(O,ie),U=U+Math.imul(ce,Ie)|0,T=T+Math.imul(ce,Q)|0,T=T+Math.imul(ye,Ie)|0,G=G+Math.imul(ye,Q)|0,U=U+Math.imul(X,xe)|0,T=T+Math.imul(X,Pe)|0,T=T+Math.imul(H,xe)|0,G=G+Math.imul(H,Pe)|0,U=U+Math.imul(De,ge)|0,T=T+Math.imul(De,Be)|0,T=T+Math.imul(_e,ge)|0,G=G+Math.imul(_e,Be)|0,U=U+Math.imul(Ee,mt)|0,T=T+Math.imul(Ee,ut)|0,T=T+Math.imul(ft,mt)|0,G=G+Math.imul(ft,ut)|0,U=U+Math.imul(ot,Bt)|0,T=T+Math.imul(ot,pn)|0,T=T+Math.imul(We,Bt)|0,G=G+Math.imul(We,pn)|0,U=U+Math.imul(Re,an)|0,T=T+Math.imul(Re,mn)|0,T=T+Math.imul(it,an)|0,G=G+Math.imul(it,mn)|0,U=U+Math.imul(me,tn)|0,T=T+Math.imul(me,gn)|0,T=T+Math.imul(pe,tn)|0,G=G+Math.imul(pe,gn)|0,U=U+Math.imul(ne,xn)|0,T=T+Math.imul(ne,yn)|0,T=T+Math.imul(Z,xn)|0,G=G+Math.imul(Z,yn)|0;var Ae=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Ae>>>26)|0,Ae&=67108863,U=Math.imul(A,te),T=Math.imul(A,ie),T=T+Math.imul(W,te)|0,G=Math.imul(W,ie),U=U+Math.imul(Ne,Ie)|0,T=T+Math.imul(Ne,Q)|0,T=T+Math.imul(O,Ie)|0,G=G+Math.imul(O,Q)|0,U=U+Math.imul(ce,xe)|0,T=T+Math.imul(ce,Pe)|0,T=T+Math.imul(ye,xe)|0,G=G+Math.imul(ye,Pe)|0,U=U+Math.imul(X,ge)|0,T=T+Math.imul(X,Be)|0,T=T+Math.imul(H,ge)|0,G=G+Math.imul(H,Be)|0,U=U+Math.imul(De,mt)|0,T=T+Math.imul(De,ut)|0,T=T+Math.imul(_e,mt)|0,G=G+Math.imul(_e,ut)|0,U=U+Math.imul(Ee,Bt)|0,T=T+Math.imul(Ee,pn)|0,T=T+Math.imul(ft,Bt)|0,G=G+Math.imul(ft,pn)|0,U=U+Math.imul(ot,an)|0,T=T+Math.imul(ot,mn)|0,T=T+Math.imul(We,an)|0,G=G+Math.imul(We,mn)|0,U=U+Math.imul(Re,tn)|0,T=T+Math.imul(Re,gn)|0,T=T+Math.imul(it,tn)|0,G=G+Math.imul(it,gn)|0,U=U+Math.imul(me,xn)|0,T=T+Math.imul(me,yn)|0,T=T+Math.imul(pe,xn)|0,G=G+Math.imul(pe,yn)|0,U=U+Math.imul(ne,Cn)|0,T=T+Math.imul(ne,Nn)|0,T=T+Math.imul(Z,Cn)|0,G=G+Math.imul(Z,Nn)|0;var je=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(je>>>26)|0,je&=67108863,U=Math.imul(A,Ie),T=Math.imul(A,Q),T=T+Math.imul(W,Ie)|0,G=Math.imul(W,Q),U=U+Math.imul(Ne,xe)|0,T=T+Math.imul(Ne,Pe)|0,T=T+Math.imul(O,xe)|0,G=G+Math.imul(O,Pe)|0,U=U+Math.imul(ce,ge)|0,T=T+Math.imul(ce,Be)|0,T=T+Math.imul(ye,ge)|0,G=G+Math.imul(ye,Be)|0,U=U+Math.imul(X,mt)|0,T=T+Math.imul(X,ut)|0,T=T+Math.imul(H,mt)|0,G=G+Math.imul(H,ut)|0,U=U+Math.imul(De,Bt)|0,T=T+Math.imul(De,pn)|0,T=T+Math.imul(_e,Bt)|0,G=G+Math.imul(_e,pn)|0,U=U+Math.imul(Ee,an)|0,T=T+Math.imul(Ee,mn)|0,T=T+Math.imul(ft,an)|0,G=G+Math.imul(ft,mn)|0,U=U+Math.imul(ot,tn)|0,T=T+Math.imul(ot,gn)|0,T=T+Math.imul(We,tn)|0,G=G+Math.imul(We,gn)|0,U=U+Math.imul(Re,xn)|0,T=T+Math.imul(Re,yn)|0,T=T+Math.imul(it,xn)|0,G=G+Math.imul(it,yn)|0,U=U+Math.imul(me,Cn)|0,T=T+Math.imul(me,Nn)|0,T=T+Math.imul(pe,Cn)|0,G=G+Math.imul(pe,Nn)|0;var qe=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(qe>>>26)|0,qe&=67108863,U=Math.imul(A,xe),T=Math.imul(A,Pe),T=T+Math.imul(W,xe)|0,G=Math.imul(W,Pe),U=U+Math.imul(Ne,ge)|0,T=T+Math.imul(Ne,Be)|0,T=T+Math.imul(O,ge)|0,G=G+Math.imul(O,Be)|0,U=U+Math.imul(ce,mt)|0,T=T+Math.imul(ce,ut)|0,T=T+Math.imul(ye,mt)|0,G=G+Math.imul(ye,ut)|0,U=U+Math.imul(X,Bt)|0,T=T+Math.imul(X,pn)|0,T=T+Math.imul(H,Bt)|0,G=G+Math.imul(H,pn)|0,U=U+Math.imul(De,an)|0,T=T+Math.imul(De,mn)|0,T=T+Math.imul(_e,an)|0,G=G+Math.imul(_e,mn)|0,U=U+Math.imul(Ee,tn)|0,T=T+Math.imul(Ee,gn)|0,T=T+Math.imul(ft,tn)|0,G=G+Math.imul(ft,gn)|0,U=U+Math.imul(ot,xn)|0,T=T+Math.imul(ot,yn)|0,T=T+Math.imul(We,xn)|0,G=G+Math.imul(We,yn)|0,U=U+Math.imul(Re,Cn)|0,T=T+Math.imul(Re,Nn)|0,T=T+Math.imul(it,Cn)|0,G=G+Math.imul(it,Nn)|0;var Ge=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Ge>>>26)|0,Ge&=67108863,U=Math.imul(A,ge),T=Math.imul(A,Be),T=T+Math.imul(W,ge)|0,G=Math.imul(W,Be),U=U+Math.imul(Ne,mt)|0,T=T+Math.imul(Ne,ut)|0,T=T+Math.imul(O,mt)|0,G=G+Math.imul(O,ut)|0,U=U+Math.imul(ce,Bt)|0,T=T+Math.imul(ce,pn)|0,T=T+Math.imul(ye,Bt)|0,G=G+Math.imul(ye,pn)|0,U=U+Math.imul(X,an)|0,T=T+Math.imul(X,mn)|0,T=T+Math.imul(H,an)|0,G=G+Math.imul(H,mn)|0,U=U+Math.imul(De,tn)|0,T=T+Math.imul(De,gn)|0,T=T+Math.imul(_e,tn)|0,G=G+Math.imul(_e,gn)|0,U=U+Math.imul(Ee,xn)|0,T=T+Math.imul(Ee,yn)|0,T=T+Math.imul(ft,xn)|0,G=G+Math.imul(ft,yn)|0,U=U+Math.imul(ot,Cn)|0,T=T+Math.imul(ot,Nn)|0,T=T+Math.imul(We,Cn)|0,G=G+Math.imul(We,Nn)|0;var at=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(at>>>26)|0,at&=67108863,U=Math.imul(A,mt),T=Math.imul(A,ut),T=T+Math.imul(W,mt)|0,G=Math.imul(W,ut),U=U+Math.imul(Ne,Bt)|0,T=T+Math.imul(Ne,pn)|0,T=T+Math.imul(O,Bt)|0,G=G+Math.imul(O,pn)|0,U=U+Math.imul(ce,an)|0,T=T+Math.imul(ce,mn)|0,T=T+Math.imul(ye,an)|0,G=G+Math.imul(ye,mn)|0,U=U+Math.imul(X,tn)|0,T=T+Math.imul(X,gn)|0,T=T+Math.imul(H,tn)|0,G=G+Math.imul(H,gn)|0,U=U+Math.imul(De,xn)|0,T=T+Math.imul(De,yn)|0,T=T+Math.imul(_e,xn)|0,G=G+Math.imul(_e,yn)|0,U=U+Math.imul(Ee,Cn)|0,T=T+Math.imul(Ee,Nn)|0,T=T+Math.imul(ft,Cn)|0,G=G+Math.imul(ft,Nn)|0;var dt=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(dt>>>26)|0,dt&=67108863,U=Math.imul(A,Bt),T=Math.imul(A,pn),T=T+Math.imul(W,Bt)|0,G=Math.imul(W,pn),U=U+Math.imul(Ne,an)|0,T=T+Math.imul(Ne,mn)|0,T=T+Math.imul(O,an)|0,G=G+Math.imul(O,mn)|0,U=U+Math.imul(ce,tn)|0,T=T+Math.imul(ce,gn)|0,T=T+Math.imul(ye,tn)|0,G=G+Math.imul(ye,gn)|0,U=U+Math.imul(X,xn)|0,T=T+Math.imul(X,yn)|0,T=T+Math.imul(H,xn)|0,G=G+Math.imul(H,yn)|0,U=U+Math.imul(De,Cn)|0,T=T+Math.imul(De,Nn)|0,T=T+Math.imul(_e,Cn)|0,G=G+Math.imul(_e,Nn)|0;var nt=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(nt>>>26)|0,nt&=67108863,U=Math.imul(A,an),T=Math.imul(A,mn),T=T+Math.imul(W,an)|0,G=Math.imul(W,mn),U=U+Math.imul(Ne,tn)|0,T=T+Math.imul(Ne,gn)|0,T=T+Math.imul(O,tn)|0,G=G+Math.imul(O,gn)|0,U=U+Math.imul(ce,xn)|0,T=T+Math.imul(ce,yn)|0,T=T+Math.imul(ye,xn)|0,G=G+Math.imul(ye,yn)|0,U=U+Math.imul(X,Cn)|0,T=T+Math.imul(X,Nn)|0,T=T+Math.imul(H,Cn)|0,G=G+Math.imul(H,Nn)|0;var wt=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(wt>>>26)|0,wt&=67108863,U=Math.imul(A,tn),T=Math.imul(A,gn),T=T+Math.imul(W,tn)|0,G=Math.imul(W,gn),U=U+Math.imul(Ne,xn)|0,T=T+Math.imul(Ne,yn)|0,T=T+Math.imul(O,xn)|0,G=G+Math.imul(O,yn)|0,U=U+Math.imul(ce,Cn)|0,T=T+Math.imul(ce,Nn)|0,T=T+Math.imul(ye,Cn)|0,G=G+Math.imul(ye,Nn)|0;var Rt=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,U=Math.imul(A,xn),T=Math.imul(A,yn),T=T+Math.imul(W,xn)|0,G=Math.imul(W,yn),U=U+Math.imul(Ne,Cn)|0,T=T+Math.imul(Ne,Nn)|0,T=T+Math.imul(O,Cn)|0,G=G+Math.imul(O,Nn)|0;var Kt=(V+U|0)+((T&8191)<<13)|0;V=(G+(T>>>13)|0)+(Kt>>>26)|0,Kt&=67108863,U=Math.imul(A,Cn),T=Math.imul(A,Nn),T=T+Math.imul(W,Cn)|0,G=Math.imul(W,Nn);var Ot=(V+U|0)+((T&8191)<<13)|0;return V=(G+(T>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,z[0]=Nd,z[1]=Rd,z[2]=Ld,z[3]=$,z[4]=re,z[5]=ue,z[6]=de,z[7]=oe,z[8]=Ae,z[9]=je,z[10]=qe,z[11]=Ge,z[12]=at,z[13]=dt,z[14]=nt,z[15]=wt,z[16]=Rt,z[17]=Kt,z[18]=Ot,V!==0&&(z[19]=V,E.length++),E};Math.imul||(_=m);function w(I,v,b){b.negative=v.negative^I.negative,b.length=I.length+v.length;for(var E=0,P=0,C=0;C<b.length-1;C++){var z=P;P=0;for(var V=E&67108863,U=Math.min(C,v.length-1),T=Math.max(0,C-I.length+1);T<=U;T++){var G=C-T,K=I.words[G]|0,ne=v.words[T]|0,Z=K*ne,ee=Z&67108863;z=z+(Z/67108864|0)|0,ee=ee+V|0,V=ee&67108863,z=z+(ee>>>26)|0,P+=z>>>26,z&=67108863}b.words[C]=V,E=z,z=P}return E!==0?b.words[C]=E:b.length--,b._strip()}function S(I,v,b){return w(I,v,b)}s.prototype.mulTo=function(v,b){var E,P=this.length+v.length;return this.length===10&&v.length===10?E=_(this,v,b):P<63?E=m(this,v,b):P<1024?E=w(this,v,b):E=S(this,v,b),E},s.prototype.mul=function(v){var b=new s(null);return b.words=new Array(this.length+v.length),this.mulTo(v,b)},s.prototype.mulf=function(v){var b=new s(null);return b.words=new Array(this.length+v.length),S(this,v,b)},s.prototype.imul=function(v){return this.clone().mulTo(v,this)},s.prototype.imuln=function(v){var b=v<0;b&&(v=-v),i(typeof v=="number"),i(v<67108864);for(var E=0,P=0;P<this.length;P++){var C=(this.words[P]|0)*v,z=(C&67108863)+(E&67108863);E>>=26,E+=C/67108864|0,E+=z>>>26,this.words[P]=z&67108863}return E!==0&&(this.words[P]=E,this.length++),this.length=v===0?1:this.length,b?this.ineg():this},s.prototype.muln=function(v){return this.clone().imuln(v)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(v){var b=g(v);if(b.length===0)return new s(1);for(var E=this,P=0;P<b.length&&b[P]===0;P++,E=E.sqr());if(++P<b.length)for(var C=E.sqr();P<b.length;P++,C=C.sqr())b[P]!==0&&(E=E.mul(C));return E},s.prototype.iushln=function(v){i(typeof v=="number"&&v>=0);var b=v%26,E=(v-b)/26,P=67108863>>>26-b<<26-b,C;if(b!==0){var z=0;for(C=0;C<this.length;C++){var V=this.words[C]&P,U=(this.words[C]|0)-V<<b;this.words[C]=U|z,z=V>>>26-b}z&&(this.words[C]=z,this.length++)}if(E!==0){for(C=this.length-1;C>=0;C--)this.words[C+E]=this.words[C];for(C=0;C<E;C++)this.words[C]=0;this.length+=E}return this._strip()},s.prototype.ishln=function(v){return i(this.negative===0),this.iushln(v)},s.prototype.iushrn=function(v,b,E){i(typeof v=="number"&&v>=0);var P;b?P=(b-b%26)/26:P=0;var C=v%26,z=Math.min((v-C)/26,this.length),V=67108863^67108863>>>C<<C,U=E;if(P-=z,P=Math.max(0,P),U){for(var T=0;T<z;T++)U.words[T]=this.words[T];U.length=z}if(z!==0)if(this.length>z)for(this.length-=z,T=0;T<this.length;T++)this.words[T]=this.words[T+z];else this.words[0]=0,this.length=1;var G=0;for(T=this.length-1;T>=0&&(G!==0||T>=P);T--){var K=this.words[T]|0;this.words[T]=G<<26-C|K>>>C,G=K&V}return U&&G!==0&&(U.words[U.length++]=G),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(v,b,E){return i(this.negative===0),this.iushrn(v,b,E)},s.prototype.shln=function(v){return this.clone().ishln(v)},s.prototype.ushln=function(v){return this.clone().iushln(v)},s.prototype.shrn=function(v){return this.clone().ishrn(v)},s.prototype.ushrn=function(v){return this.clone().iushrn(v)},s.prototype.testn=function(v){i(typeof v=="number"&&v>=0);var b=v%26,E=(v-b)/26,P=1<<b;if(this.length<=E)return!1;var C=this.words[E];return!!(C&P)},s.prototype.imaskn=function(v){i(typeof v=="number"&&v>=0);var b=v%26,E=(v-b)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=E)return this;if(b!==0&&E++,this.length=Math.min(E,this.length),b!==0){var P=67108863^67108863>>>b<<b;this.words[this.length-1]&=P}return this._strip()},s.prototype.maskn=function(v){return this.clone().imaskn(v)},s.prototype.iaddn=function(v){return i(typeof v=="number"),i(v<67108864),v<0?this.isubn(-v):this.negative!==0?this.length===1&&(this.words[0]|0)<=v?(this.words[0]=v-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(v),this.negative=1,this):this._iaddn(v)},s.prototype._iaddn=function(v){this.words[0]+=v;for(var b=0;b<this.length&&this.words[b]>=67108864;b++)this.words[b]-=67108864,b===this.length-1?this.words[b+1]=1:this.words[b+1]++;return this.length=Math.max(this.length,b+1),this},s.prototype.isubn=function(v){if(i(typeof v=="number"),i(v<67108864),v<0)return this.iaddn(-v);if(this.negative!==0)return this.negative=0,this.iaddn(v),this.negative=1,this;if(this.words[0]-=v,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var b=0;b<this.length&&this.words[b]<0;b++)this.words[b]+=67108864,this.words[b+1]-=1;return this._strip()},s.prototype.addn=function(v){return this.clone().iaddn(v)},s.prototype.subn=function(v){return this.clone().isubn(v)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(v,b,E){var P=v.length+E,C;this._expand(P);var z,V=0;for(C=0;C<v.length;C++){z=(this.words[C+E]|0)+V;var U=(v.words[C]|0)*b;z-=U&67108863,V=(z>>26)-(U/67108864|0),this.words[C+E]=z&67108863}for(;C<this.length-E;C++)z=(this.words[C+E]|0)+V,V=z>>26,this.words[C+E]=z&67108863;if(V===0)return this._strip();for(i(V===-1),V=0,C=0;C<this.length;C++)z=-(this.words[C]|0)+V,V=z>>26,this.words[C]=z&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(v,b){var E=this.length-v.length,P=this.clone(),C=v,z=C.words[C.length-1]|0,V=this._countBits(z);E=26-V,E!==0&&(C=C.ushln(E),P.iushln(E),z=C.words[C.length-1]|0);var U=P.length-C.length,T;if(b!=="mod"){T=new s(null),T.length=U+1,T.words=new Array(T.length);for(var G=0;G<T.length;G++)T.words[G]=0}var K=P.clone()._ishlnsubmul(C,1,U);K.negative===0&&(P=K,T&&(T.words[U]=1));for(var ne=U-1;ne>=0;ne--){var Z=(P.words[C.length+ne]|0)*67108864+(P.words[C.length+ne-1]|0);for(Z=Math.min(Z/z|0,67108863),P._ishlnsubmul(C,Z,ne);P.negative!==0;)Z--,P.negative=0,P._ishlnsubmul(C,1,ne),P.isZero()||(P.negative^=1);T&&(T.words[ne]=Z)}return T&&T._strip(),P._strip(),b!=="div"&&E!==0&&P.iushrn(E),{div:T||null,mod:P}},s.prototype.divmod=function(v,b,E){if(i(!v.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var P,C,z;return this.negative!==0&&v.negative===0?(z=this.neg().divmod(v,b),b!=="mod"&&(P=z.div.neg()),b!=="div"&&(C=z.mod.neg(),E&&C.negative!==0&&C.iadd(v)),{div:P,mod:C}):this.negative===0&&v.negative!==0?(z=this.divmod(v.neg(),b),b!=="mod"&&(P=z.div.neg()),{div:P,mod:z.mod}):this.negative&v.negative?(z=this.neg().divmod(v.neg(),b),b!=="div"&&(C=z.mod.neg(),E&&C.negative!==0&&C.isub(v)),{div:z.div,mod:C}):v.length>this.length||this.cmp(v)<0?{div:new s(0),mod:this}:v.length===1?b==="div"?{div:this.divn(v.words[0]),mod:null}:b==="mod"?{div:null,mod:new s(this.modrn(v.words[0]))}:{div:this.divn(v.words[0]),mod:new s(this.modrn(v.words[0]))}:this._wordDiv(v,b)},s.prototype.div=function(v){return this.divmod(v,"div",!1).div},s.prototype.mod=function(v){return this.divmod(v,"mod",!1).mod},s.prototype.umod=function(v){return this.divmod(v,"mod",!0).mod},s.prototype.divRound=function(v){var b=this.divmod(v);if(b.mod.isZero())return b.div;var E=b.div.negative!==0?b.mod.isub(v):b.mod,P=v.ushrn(1),C=v.andln(1),z=E.cmp(P);return z<0||C===1&&z===0?b.div:b.div.negative!==0?b.div.isubn(1):b.div.iaddn(1)},s.prototype.modrn=function(v){var b=v<0;b&&(v=-v),i(v<=67108863);for(var E=(1<<26)%v,P=0,C=this.length-1;C>=0;C--)P=(E*P+(this.words[C]|0))%v;return b?-P:P},s.prototype.modn=function(v){return this.modrn(v)},s.prototype.idivn=function(v){var b=v<0;b&&(v=-v),i(v<=67108863);for(var E=0,P=this.length-1;P>=0;P--){var C=(this.words[P]|0)+E*67108864;this.words[P]=C/v|0,E=C%v}return this._strip(),b?this.ineg():this},s.prototype.divn=function(v){return this.clone().idivn(v)},s.prototype.egcd=function(v){i(v.negative===0),i(!v.isZero());var b=this,E=v.clone();b.negative!==0?b=b.umod(v):b=b.clone();for(var P=new s(1),C=new s(0),z=new s(0),V=new s(1),U=0;b.isEven()&&E.isEven();)b.iushrn(1),E.iushrn(1),++U;for(var T=E.clone(),G=b.clone();!b.isZero();){for(var K=0,ne=1;!(b.words[0]&ne)&&K<26;++K,ne<<=1);if(K>0)for(b.iushrn(K);K-- >0;)(P.isOdd()||C.isOdd())&&(P.iadd(T),C.isub(G)),P.iushrn(1),C.iushrn(1);for(var Z=0,ee=1;!(E.words[0]&ee)&&Z<26;++Z,ee<<=1);if(Z>0)for(E.iushrn(Z);Z-- >0;)(z.isOdd()||V.isOdd())&&(z.iadd(T),V.isub(G)),z.iushrn(1),V.iushrn(1);b.cmp(E)>=0?(b.isub(E),P.isub(z),C.isub(V)):(E.isub(b),z.isub(P),V.isub(C))}return{a:z,b:V,gcd:E.iushln(U)}},s.prototype._invmp=function(v){i(v.negative===0),i(!v.isZero());var b=this,E=v.clone();b.negative!==0?b=b.umod(v):b=b.clone();for(var P=new s(1),C=new s(0),z=E.clone();b.cmpn(1)>0&&E.cmpn(1)>0;){for(var V=0,U=1;!(b.words[0]&U)&&V<26;++V,U<<=1);if(V>0)for(b.iushrn(V);V-- >0;)P.isOdd()&&P.iadd(z),P.iushrn(1);for(var T=0,G=1;!(E.words[0]&G)&&T<26;++T,G<<=1);if(T>0)for(E.iushrn(T);T-- >0;)C.isOdd()&&C.iadd(z),C.iushrn(1);b.cmp(E)>=0?(b.isub(E),P.isub(C)):(E.isub(b),C.isub(P))}var K;return b.cmpn(1)===0?K=P:K=C,K.cmpn(0)<0&&K.iadd(v),K},s.prototype.gcd=function(v){if(this.isZero())return v.abs();if(v.isZero())return this.abs();var b=this.clone(),E=v.clone();b.negative=0,E.negative=0;for(var P=0;b.isEven()&&E.isEven();P++)b.iushrn(1),E.iushrn(1);do{for(;b.isEven();)b.iushrn(1);for(;E.isEven();)E.iushrn(1);var C=b.cmp(E);if(C<0){var z=b;b=E,E=z}else if(C===0||E.cmpn(1)===0)break;b.isub(E)}while(!0);return E.iushln(P)},s.prototype.invm=function(v){return this.egcd(v).a.umod(v)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(v){return this.words[0]&v},s.prototype.bincn=function(v){i(typeof v=="number");var b=v%26,E=(v-b)/26,P=1<<b;if(this.length<=E)return this._expand(E+1),this.words[E]|=P,this;for(var C=P,z=E;C!==0&&z<this.length;z++){var V=this.words[z]|0;V+=C,C=V>>>26,V&=67108863,this.words[z]=V}return C!==0&&(this.words[z]=C,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(v){var b=v<0;if(this.negative!==0&&!b)return-1;if(this.negative===0&&b)return 1;this._strip();var E;if(this.length>1)E=1;else{b&&(v=-v),i(v<=67108863,"Number is too big");var P=this.words[0]|0;E=P===v?0:P<v?-1:1}return this.negative!==0?-E|0:E},s.prototype.cmp=function(v){if(this.negative!==0&&v.negative===0)return-1;if(this.negative===0&&v.negative!==0)return 1;var b=this.ucmp(v);return this.negative!==0?-b|0:b},s.prototype.ucmp=function(v){if(this.length>v.length)return 1;if(this.length<v.length)return-1;for(var b=0,E=this.length-1;E>=0;E--){var P=this.words[E]|0,C=v.words[E]|0;if(P!==C){P<C?b=-1:P>C&&(b=1);break}}return b},s.prototype.gtn=function(v){return this.cmpn(v)===1},s.prototype.gt=function(v){return this.cmp(v)===1},s.prototype.gten=function(v){return this.cmpn(v)>=0},s.prototype.gte=function(v){return this.cmp(v)>=0},s.prototype.ltn=function(v){return this.cmpn(v)===-1},s.prototype.lt=function(v){return this.cmp(v)===-1},s.prototype.lten=function(v){return this.cmpn(v)<=0},s.prototype.lte=function(v){return this.cmp(v)<=0},s.prototype.eqn=function(v){return this.cmpn(v)===0},s.prototype.eq=function(v){return this.cmp(v)===0},s.red=function(v){return new j(v)},s.prototype.toRed=function(v){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),v.convertTo(this)._forceRed(v)},s.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(v){return this.red=v,this},s.prototype.forceRed=function(v){return i(!this.red,"Already a number in reduction context"),this._forceRed(v)},s.prototype.redAdd=function(v){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,v)},s.prototype.redIAdd=function(v){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,v)},s.prototype.redSub=function(v){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,v)},s.prototype.redISub=function(v){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,v)},s.prototype.redShl=function(v){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,v)},s.prototype.redMul=function(v){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.mul(this,v)},s.prototype.redIMul=function(v){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,v),this.red.imul(this,v)},s.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(v){return i(this.red&&!v.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,v)};var N={k256:null,p224:null,p192:null,p25519:null};function k(I,v){this.name=I,this.p=new s(v,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}k.prototype._tmp=function(){var v=new s(null);return v.words=new Array(Math.ceil(this.n/13)),v},k.prototype.ireduce=function(v){var b=v,E;do this.split(b,this.tmp),b=this.imulK(b),b=b.iadd(this.tmp),E=b.bitLength();while(E>this.n);var P=E<this.n?-1:b.ucmp(this.p);return P===0?(b.words[0]=0,b.length=1):P>0?b.isub(this.p):b.strip!==void 0?b.strip():b._strip(),b},k.prototype.split=function(v,b){v.iushrn(this.n,0,b)},k.prototype.imulK=function(v){return v.imul(this.k)};function R(){k.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}r(R,k),R.prototype.split=function(v,b){for(var E=4194303,P=Math.min(v.length,9),C=0;C<P;C++)b.words[C]=v.words[C];if(b.length=P,v.length<=9){v.words[0]=0,v.length=1;return}var z=v.words[9];for(b.words[b.length++]=z&E,C=10;C<v.length;C++){var V=v.words[C]|0;v.words[C-10]=(V&E)<<4|z>>>22,z=V}z>>>=22,v.words[C-10]=z,z===0&&v.length>10?v.length-=10:v.length-=9},R.prototype.imulK=function(v){v.words[v.length]=0,v.words[v.length+1]=0,v.length+=2;for(var b=0,E=0;E<v.length;E++){var P=v.words[E]|0;b+=P*977,v.words[E]=b&67108863,b=P*64+(b/67108864|0)}return v.words[v.length-1]===0&&(v.length--,v.words[v.length-1]===0&&v.length--),v};function B(){k.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}r(B,k);function L(){k.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}r(L,k);function D(){k.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}r(D,k),D.prototype.imulK=function(v){for(var b=0,E=0;E<v.length;E++){var P=(v.words[E]|0)*19+b,C=P&67108863;P>>>=26,v.words[E]=C,b=P}return b!==0&&(v.words[v.length++]=b),v},s._prime=function(v){if(N[v])return N[v];var b;if(v==="k256")b=new R;else if(v==="p224")b=new B;else if(v==="p192")b=new L;else if(v==="p25519")b=new D;else throw new Error("Unknown prime "+v);return N[v]=b,b};function j(I){if(typeof I=="string"){var v=s._prime(I);this.m=v.p,this.prime=v}else i(I.gtn(1),"modulus must be greater than 1"),this.m=I,this.prime=null}j.prototype._verify1=function(v){i(v.negative===0,"red works only with positives"),i(v.red,"red works only with red numbers")},j.prototype._verify2=function(v,b){i((v.negative|b.negative)===0,"red works only with positives"),i(v.red&&v.red===b.red,"red works only with red numbers")},j.prototype.imod=function(v){return this.prime?this.prime.ireduce(v)._forceRed(this):(u(v,v.umod(this.m)._forceRed(this)),v)},j.prototype.neg=function(v){return v.isZero()?v.clone():this.m.sub(v)._forceRed(this)},j.prototype.add=function(v,b){this._verify2(v,b);var E=v.add(b);return E.cmp(this.m)>=0&&E.isub(this.m),E._forceRed(this)},j.prototype.iadd=function(v,b){this._verify2(v,b);var E=v.iadd(b);return E.cmp(this.m)>=0&&E.isub(this.m),E},j.prototype.sub=function(v,b){this._verify2(v,b);var E=v.sub(b);return E.cmpn(0)<0&&E.iadd(this.m),E._forceRed(this)},j.prototype.isub=function(v,b){this._verify2(v,b);var E=v.isub(b);return E.cmpn(0)<0&&E.iadd(this.m),E},j.prototype.shl=function(v,b){return this._verify1(v),this.imod(v.ushln(b))},j.prototype.imul=function(v,b){return this._verify2(v,b),this.imod(v.imul(b))},j.prototype.mul=function(v,b){return this._verify2(v,b),this.imod(v.mul(b))},j.prototype.isqr=function(v){return this.imul(v,v.clone())},j.prototype.sqr=function(v){return this.mul(v,v)},j.prototype.sqrt=function(v){if(v.isZero())return v.clone();var b=this.m.andln(3);if(i(b%2===1),b===3){var E=this.m.add(new s(1)).iushrn(2);return this.pow(v,E)}for(var P=this.m.subn(1),C=0;!P.isZero()&&P.andln(1)===0;)C++,P.iushrn(1);i(!P.isZero());var z=new s(1).toRed(this),V=z.redNeg(),U=this.m.subn(1).iushrn(1),T=this.m.bitLength();for(T=new s(2*T*T).toRed(this);this.pow(T,U).cmp(V)!==0;)T.redIAdd(V);for(var G=this.pow(T,P),K=this.pow(v,P.addn(1).iushrn(1)),ne=this.pow(v,P),Z=C;ne.cmp(z)!==0;){for(var ee=ne,me=0;ee.cmp(z)!==0;me++)ee=ee.redSqr();i(me<Z);var pe=this.pow(G,new s(1).iushln(Z-me-1));K=K.redMul(pe),G=pe.redSqr(),ne=ne.redMul(G),Z=me}return K},j.prototype.invm=function(v){var b=v._invmp(this.m);return b.negative!==0?(b.negative=0,this.imod(b).redNeg()):this.imod(b)},j.prototype.pow=function(v,b){if(b.isZero())return new s(1).toRed(this);if(b.cmpn(1)===0)return v.clone();var E=4,P=new Array(1<<E);P[0]=new s(1).toRed(this),P[1]=v;for(var C=2;C<P.length;C++)P[C]=this.mul(P[C-1],v);var z=P[0],V=0,U=0,T=b.bitLength()%26;for(T===0&&(T=26),C=b.length-1;C>=0;C--){for(var G=b.words[C],K=T-1;K>=0;K--){var ne=G>>K&1;if(z!==P[0]&&(z=this.sqr(z)),ne===0&&V===0){U=0;continue}V<<=1,V|=ne,U++,!(U!==E&&(C!==0||K!==0))&&(z=this.mul(z,P[V]),U=0,V=0)}T=26}return z},j.prototype.convertTo=function(v){var b=v.umod(this.m);return b===v?b.clone():b},j.prototype.convertFrom=function(v){var b=v.clone();return b.red=null,b},s.mont=function(v){return new Y(v)};function Y(I){j.call(this,I),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}r(Y,j),Y.prototype.convertTo=function(v){return this.imod(v.ushln(this.shift))},Y.prototype.convertFrom=function(v){var b=this.imod(v.mul(this.rinv));return b.red=null,b},Y.prototype.imul=function(v,b){if(v.isZero()||b.isZero())return v.words[0]=0,v.length=1,v;var E=v.imul(b),P=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=E.isub(P).iushrn(this.shift),z=C;return C.cmp(this.m)>=0?z=C.isub(this.m):C.cmpn(0)<0&&(z=C.iadd(this.m)),z._forceRed(this)},Y.prototype.mul=function(v,b){if(v.isZero()||b.isZero())return new s(0)._forceRed(this);var E=v.mul(b),P=E.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),C=E.isub(P).iushrn(this.shift),z=C;return C.cmp(this.m)>=0?z=C.isub(this.m):C.cmpn(0)<0&&(z=C.iadd(this.m)),z._forceRed(this)},Y.prototype.invm=function(v){var b=this.imod(v._invmp(this.m).mul(this.r2));return b._forceRed(this)}})(t,xs)})(VS);var kI=VS.exports;const UT=$a(kI);var pw={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */(function(t,e){var n=WS,i=n.Buffer;function r(o,a){for(var l in o)a[l]=o[l]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?t.exports=n:(r(n,e),e.Buffer=s);function s(o,a,l){return i(o,a,l)}s.prototype=Object.create(i.prototype),r(i,s),s.from=function(o,a,l){if(typeof o=="number")throw new TypeError("Argument must not be a number");return i(o,a,l)},s.alloc=function(o,a,l){if(typeof o!="number")throw new TypeError("Argument must be a number");var c=i(o);return a!==void 0?typeof l=="string"?c.fill(a,l):c.fill(a):c.fill(0),c},s.allocUnsafe=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return i(o)},s.allocUnsafeSlow=function(o){if(typeof o!="number")throw new TypeError("Argument must be a number");return n.SlowBuffer(o)}})(pw,pw.exports);var PI=pw.exports,Bp=PI.Buffer;function dV(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),s=r.charCodeAt(0);if(e[s]!==255)throw new TypeError(r+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function u(p){if((Array.isArray(p)||p instanceof Uint8Array)&&(p=Bp.from(p)),!Bp.isBuffer(p))throw new TypeError("Expected Buffer");if(p.length===0)return"";for(var x=0,y=0,g=0,m=p.length;g!==m&&p[g]===0;)g++,x++;for(var _=(m-g)*c+1>>>0,w=new Uint8Array(_);g!==m;){for(var S=p[g],N=0,k=_-1;(S!==0||N<y)&&k!==-1;k--,N++)S+=256*w[k]>>>0,w[k]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");y=N,g++}for(var R=_-y;R!==_&&w[R]===0;)R++;for(var B=a.repeat(x);R<_;++R)B+=t.charAt(w[R]);return B}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return Bp.alloc(0);for(var x=0,y=0,g=0;p[x]===a;)y++,x++;for(var m=(p.length-x)*l+1>>>0,_=new Uint8Array(m);x<p.length;){var w=p.charCodeAt(x);if(w>255)return;var S=e[w];if(S===255)return;for(var N=0,k=m-1;(S!==0||N<g)&&k!==-1;k--,N++)S+=o*_[k]>>>0,_[k]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");g=N,x++}for(var R=m-g;R!==m&&_[R]===0;)R++;var B=Bp.allocUnsafe(y+(m-R));B.fill(0,0,y);for(var L=y;R!==m;)B[L++]=_[R++];return B}function f(p){var x=h(p);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:f}}var hV=dV,fV=hV,pV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",mV=fV(pV);const gi=$a(mV),OT=hI;var mi={},Up=PI.Buffer;function gV(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),s=r.charCodeAt(0);if(e[s]!==255)throw new TypeError(r+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function u(p){if((Array.isArray(p)||p instanceof Uint8Array)&&(p=Up.from(p)),!Up.isBuffer(p))throw new TypeError("Expected Buffer");if(p.length===0)return"";for(var x=0,y=0,g=0,m=p.length;g!==m&&p[g]===0;)g++,x++;for(var _=(m-g)*c+1>>>0,w=new Uint8Array(_);g!==m;){for(var S=p[g],N=0,k=_-1;(S!==0||N<y)&&k!==-1;k--,N++)S+=256*w[k]>>>0,w[k]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");y=N,g++}for(var R=_-y;R!==_&&w[R]===0;)R++;for(var B=a.repeat(x);R<_;++R)B+=t.charAt(w[R]);return B}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return Up.alloc(0);for(var x=0,y=0,g=0;p[x]===a;)y++,x++;for(var m=(p.length-x)*l+1>>>0,_=new Uint8Array(m);x<p.length;){var w=p.charCodeAt(x);if(w>255)return;var S=e[w];if(S===255)return;for(var N=0,k=m-1;(S!==0||N<g)&&k!==-1;k--,N++)S+=o*_[k]>>>0,_[k]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");g=N,x++}for(var R=m-g;R!==m&&_[R]===0;)R++;var B=Up.allocUnsafe(y+(m-R));B.fill(0,0,y);for(var L=y;R!==m;)B[L++]=_[R++];return B}function f(p){var x=h(p);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:f}}var xV=gV,yV=xV,vV="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",wV=yV(vV);function mo(t,e,n){return e<=t&&t<=n}function ix(t){if(t===void 0)return{};if(t===Object(t))return t;throw TypeError("Could not convert argument to dictionary")}function _V(t){for(var e=String(t),n=e.length,i=0,r=[];i<n;){var s=e.charCodeAt(i);if(s<55296||s>57343)r.push(s);else if(56320<=s&&s<=57343)r.push(65533);else if(55296<=s&&s<=56319)if(i===n-1)r.push(65533);else{var o=t.charCodeAt(i+1);if(56320<=o&&o<=57343){var a=s&1023,l=o&1023;r.push(65536+(a<<10)+l),i+=1}else r.push(65533)}i+=1}return r}function bV(t){for(var e="",n=0;n<t.length;++n){var i=t[n];i<=65535?e+=String.fromCharCode(i):(i-=65536,e+=String.fromCharCode((i>>10)+55296,(i&1023)+56320))}return e}var rg=-1;function HS(t){this.tokens=[].slice.call(t)}HS.prototype={endOfStream:function(){return!this.tokens.length},read:function(){return this.tokens.length?this.tokens.shift():rg},prepend:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.unshift(e.pop());else this.tokens.unshift(t)},push:function(t){if(Array.isArray(t))for(var e=t;e.length;)this.tokens.push(e.shift());else this.tokens.push(t)}};var Ku=-1;function Ly(t,e){if(t)throw TypeError("Decoder error");return e||65533}var sg="utf-8";function og(t,e){if(!(this instanceof og))return new og(t,e);if(t=t!==void 0?String(t).toLowerCase():sg,t!==sg)throw new Error("Encoding not supported. Only utf-8 is supported");e=ix(e),this._streaming=!1,this._BOMseen=!1,this._decoder=null,this._fatal=!!e.fatal,this._ignoreBOM=!!e.ignoreBOM,Object.defineProperty(this,"encoding",{value:"utf-8"}),Object.defineProperty(this,"fatal",{value:this._fatal}),Object.defineProperty(this,"ignoreBOM",{value:this._ignoreBOM})}og.prototype={decode:function(e,n){var i;typeof e=="object"&&e instanceof ArrayBuffer?i=new Uint8Array(e):typeof e=="object"&&"buffer"in e&&e.buffer instanceof ArrayBuffer?i=new Uint8Array(e.buffer,e.byteOffset,e.byteLength):i=new Uint8Array(0),n=ix(n),this._streaming||(this._decoder=new SV({fatal:this._fatal}),this._BOMseen=!1),this._streaming=!!n.stream;for(var r=new HS(i),s=[],o;!r.endOfStream()&&(o=this._decoder.handler(r,r.read()),o!==Ku);)o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o));if(!this._streaming){do{if(o=this._decoder.handler(r,r.read()),o===Ku)break;o!==null&&(Array.isArray(o)?s.push.apply(s,o):s.push(o))}while(!r.endOfStream());this._decoder=null}return s.length&&["utf-8"].indexOf(this.encoding)!==-1&&!this._ignoreBOM&&!this._BOMseen&&(s[0]===65279?(this._BOMseen=!0,s.shift()):this._BOMseen=!0),bV(s)}};function ag(t,e){if(!(this instanceof ag))return new ag(t,e);if(t=t!==void 0?String(t).toLowerCase():sg,t!==sg)throw new Error("Encoding not supported. Only utf-8 is supported");e=ix(e),this._streaming=!1,this._encoder=null,this._options={fatal:!!e.fatal},Object.defineProperty(this,"encoding",{value:"utf-8"})}ag.prototype={encode:function(e,n){e=e?String(e):"",n=ix(n),this._streaming||(this._encoder=new MV(this._options)),this._streaming=!!n.stream;for(var i=[],r=new HS(_V(e)),s;!r.endOfStream()&&(s=this._encoder.handler(r,r.read()),s!==Ku);)Array.isArray(s)?i.push.apply(i,s):i.push(s);if(!this._streaming){for(;s=this._encoder.handler(r,r.read()),s!==Ku;)Array.isArray(s)?i.push.apply(i,s):i.push(s);this._encoder=null}return new Uint8Array(i)}};function SV(t){var e=t.fatal,n=0,i=0,r=0,s=128,o=191;this.handler=function(a,l){if(l===rg&&r!==0)return r=0,Ly(e);if(l===rg)return Ku;if(r===0){if(mo(l,0,127))return l;if(mo(l,194,223))r=1,n=l-192;else if(mo(l,224,239))l===224&&(s=160),l===237&&(o=159),r=2,n=l-224;else if(mo(l,240,244))l===240&&(s=144),l===244&&(o=143),r=3,n=l-240;else return Ly(e);return n=n<<6*r,null}if(!mo(l,s,o))return n=r=i=0,s=128,o=191,a.prepend(l),Ly(e);if(s=128,o=191,i+=1,n+=l-128<<6*(r-i),i!==r)return null;var c=n;return n=r=i=0,c}}function MV(t){t.fatal,this.handler=function(e,n){if(n===rg)return Ku;if(mo(n,0,127))return n;var i,r;mo(n,128,2047)?(i=1,r=192):mo(n,2048,65535)?(i=2,r=224):mo(n,65536,1114111)&&(i=3,r=240);for(var s=[(n>>6*i)+r];i>0;){var o=n>>6*(i-1);s.push(128|o&63),i-=1}return s}}const EV=Object.freeze(Object.defineProperty({__proto__:null,TextDecoder:og,TextEncoder:ag},Symbol.toStringTag,{value:"Module"})),TV=nb(EV);var AV=xs&&xs.__createBinding||(Object.create?function(t,e,n,i){i===void 0&&(i=n),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,i){i===void 0&&(i=n),t[i]=e[n]}),CV=xs&&xs.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),Gs=xs&&xs.__decorate||function(t,e,n,i){var r=arguments.length,s=r<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,n):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(o=t[a])&&(s=(r<3?o(s):r>3?o(e,n,s):o(e,n))||s);return r>3&&s&&Object.defineProperty(e,n,s),s},NV=xs&&xs.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(t!=null)for(var n in t)n!=="default"&&Object.hasOwnProperty.call(t,n)&&AV(e,t,n);return CV(e,t),e},DI=xs&&xs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(mi,"__esModule",{value:!0});var BI=mi.deserializeUnchecked=VI=mi.deserialize=zI=mi.serialize=mi.BinaryReader=mi.BinaryWriter=mi.BorshError=mi.baseDecode=mi.baseEncode=void 0;const xa=DI(kI),UI=DI(wV),RV=NV(TV),LV=typeof TextDecoder!="function"?RV.TextDecoder:TextDecoder,IV=new LV("utf-8",{fatal:!0});function kV(t){return typeof t=="string"&&(t=cn.from(t,"utf8")),UI.default.encode(cn.from(t))}mi.baseEncode=kV;function PV(t){return cn.from(UI.default.decode(t))}mi.baseDecode=PV;const Iy=1024;class Wi extends Error{constructor(e){super(e),this.fieldPath=[],this.originalMessage=e}addToFieldPath(e){this.fieldPath.splice(0,0,e),this.message=this.originalMessage+": "+this.fieldPath.join(".")}}mi.BorshError=Wi;class OI{constructor(){this.buf=cn.alloc(Iy),this.length=0}maybeResize(){this.buf.length<16+this.length&&(this.buf=cn.concat([this.buf,cn.alloc(Iy)]))}writeU8(e){this.maybeResize(),this.buf.writeUInt8(e,this.length),this.length+=1}writeU16(e){this.maybeResize(),this.buf.writeUInt16LE(e,this.length),this.length+=2}writeU32(e){this.maybeResize(),this.buf.writeUInt32LE(e,this.length),this.length+=4}writeU64(e){this.maybeResize(),this.writeBuffer(cn.from(new xa.default(e).toArray("le",8)))}writeU128(e){this.maybeResize(),this.writeBuffer(cn.from(new xa.default(e).toArray("le",16)))}writeU256(e){this.maybeResize(),this.writeBuffer(cn.from(new xa.default(e).toArray("le",32)))}writeU512(e){this.maybeResize(),this.writeBuffer(cn.from(new xa.default(e).toArray("le",64)))}writeBuffer(e){this.buf=cn.concat([cn.from(this.buf.subarray(0,this.length)),e,cn.alloc(Iy)]),this.length+=e.length}writeString(e){this.maybeResize();const n=cn.from(e,"utf8");this.writeU32(n.length),this.writeBuffer(n)}writeFixedArray(e){this.writeBuffer(cn.from(e))}writeArray(e,n){this.maybeResize(),this.writeU32(e.length);for(const i of e)this.maybeResize(),n(i)}toArray(){return this.buf.subarray(0,this.length)}}mi.BinaryWriter=OI;function $s(t,e,n){const i=n.value;n.value=function(...r){try{return i.apply(this,r)}catch(s){if(s instanceof RangeError){const o=s.code;if(["ERR_BUFFER_OUT_OF_BOUNDS","ERR_OUT_OF_RANGE"].indexOf(o)>=0)throw new Wi("Reached the end of buffer when deserializing")}throw s}}}class Cr{constructor(e){this.buf=e,this.offset=0}readU8(){const e=this.buf.readUInt8(this.offset);return this.offset+=1,e}readU16(){const e=this.buf.readUInt16LE(this.offset);return this.offset+=2,e}readU32(){const e=this.buf.readUInt32LE(this.offset);return this.offset+=4,e}readU64(){const e=this.readBuffer(8);return new xa.default(e,"le")}readU128(){const e=this.readBuffer(16);return new xa.default(e,"le")}readU256(){const e=this.readBuffer(32);return new xa.default(e,"le")}readU512(){const e=this.readBuffer(64);return new xa.default(e,"le")}readBuffer(e){if(this.offset+e>this.buf.length)throw new Wi(`Expected buffer length ${e} isn't within bounds`);const n=this.buf.slice(this.offset,this.offset+e);return this.offset+=e,n}readString(){const e=this.readU32(),n=this.readBuffer(e);try{return IV.decode(n)}catch(i){throw new Wi(`Error decoding UTF-8 string: ${i}`)}}readFixedArray(e){return new Uint8Array(this.readBuffer(e))}readArray(e){const n=this.readU32(),i=Array();for(let r=0;r<n;++r)i.push(e());return i}}Gs([$s],Cr.prototype,"readU8",null);Gs([$s],Cr.prototype,"readU16",null);Gs([$s],Cr.prototype,"readU32",null);Gs([$s],Cr.prototype,"readU64",null);Gs([$s],Cr.prototype,"readU128",null);Gs([$s],Cr.prototype,"readU256",null);Gs([$s],Cr.prototype,"readU512",null);Gs([$s],Cr.prototype,"readString",null);Gs([$s],Cr.prototype,"readFixedArray",null);Gs([$s],Cr.prototype,"readArray",null);mi.BinaryReader=Cr;function jI(t){return t.charAt(0).toUpperCase()+t.slice(1)}function El(t,e,n,i,r){try{if(typeof i=="string")r[`write${jI(i)}`](n);else if(i instanceof Array)if(typeof i[0]=="number"){if(n.length!==i[0])throw new Wi(`Expecting byte array of length ${i[0]}, but got ${n.length} bytes`);r.writeFixedArray(n)}else if(i.length===2&&typeof i[1]=="number"){if(n.length!==i[1])throw new Wi(`Expecting byte array of length ${i[1]}, but got ${n.length} bytes`);for(let s=0;s<i[1];s++)El(t,null,n[s],i[0],r)}else r.writeArray(n,s=>{El(t,e,s,i[0],r)});else if(i.kind!==void 0)switch(i.kind){case"option":{n==null?r.writeU8(0):(r.writeU8(1),El(t,e,n,i.type,r));break}case"map":{r.writeU32(n.size),n.forEach((s,o)=>{El(t,e,o,i.key,r),El(t,e,s,i.value,r)});break}default:throw new Wi(`FieldType ${i} unrecognized`)}else FI(t,n,r)}catch(s){throw s instanceof Wi&&s.addToFieldPath(e),s}}function FI(t,e,n){if(typeof e.borshSerialize=="function"){e.borshSerialize(n);return}const i=t.get(e.constructor);if(!i)throw new Wi(`Class ${e.constructor.name} is missing in schema`);if(i.kind==="struct")i.fields.map(([r,s])=>{El(t,r,e[r],s,n)});else if(i.kind==="enum"){const r=e[i.field];for(let s=0;s<i.values.length;++s){const[o,a]=i.values[s];if(o===r){n.writeU8(s),El(t,o,e[o],a,n);break}}}else throw new Wi(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}function DV(t,e,n=OI){const i=new n;return FI(t,e,i),i.toArray()}var zI=mi.serialize=DV;function Tl(t,e,n,i){try{if(typeof n=="string")return i[`read${jI(n)}`]();if(n instanceof Array){if(typeof n[0]=="number")return i.readFixedArray(n[0]);if(typeof n[1]=="number"){const r=[];for(let s=0;s<n[1];s++)r.push(Tl(t,null,n[0],i));return r}else return i.readArray(()=>Tl(t,e,n[0],i))}if(n.kind==="option")return i.readU8()?Tl(t,e,n.type,i):void 0;if(n.kind==="map"){let r=new Map;const s=i.readU32();for(let o=0;o<s;o++){const a=Tl(t,e,n.key,i),l=Tl(t,e,n.value,i);r.set(a,l)}return r}return GS(t,n,i)}catch(r){throw r instanceof Wi&&r.addToFieldPath(e),r}}function GS(t,e,n){if(typeof e.borshDeserialize=="function")return e.borshDeserialize(n);const i=t.get(e);if(!i)throw new Wi(`Class ${e.name} is missing in schema`);if(i.kind==="struct"){const r={};for(const[s,o]of t.get(e).fields)r[s]=Tl(t,s,o,n);return new e(r)}if(i.kind==="enum"){const r=n.readU8();if(r>=i.values.length)throw new Wi(`Enum index: ${r} is out of range`);const[s,o]=i.values[r],a=Tl(t,s,o,n);return new e({[s]:a})}throw new Wi(`Unexpected schema kind: ${i.kind} for ${e.constructor.name}`)}function BV(t,e,n,i=Cr){const r=new i(n),s=GS(t,e,r);if(r.offset<n.length)throw new Wi(`Unexpected ${n.length-r.offset} bytes after deserialized data`);return s}var VI=mi.deserialize=BV;function UV(t,e,n,i=Cr){const r=new i(n);return GS(t,e,r)}BI=mi.deserializeUnchecked=UV;var le={};Object.defineProperty(le,"__esModule",{value:!0});le.s16=le.s8=le.nu64be=le.u48be=le.u40be=le.u32be=le.u24be=le.u16be=di=le.nu64=le.u48=le.u40=rt=le.u32=le.u24=Or=le.u16=Ct=le.u8=Jl=le.offset=le.greedy=le.Constant=le.UTF8=le.CString=le.Blob=le.Boolean=le.BitField=le.BitStructure=le.VariantLayout=le.Union=le.UnionLayoutDiscriminator=le.UnionDiscriminator=le.Structure=le.Sequence=le.DoubleBE=le.Double=le.FloatBE=le.Float=le.NearInt64BE=le.NearInt64=le.NearUInt64BE=le.NearUInt64=le.IntBE=le.Int=le.UIntBE=le.UInt=le.OffsetLayout=le.GreedyCount=le.ExternalLayout=le.bindConstructorLayout=le.nameWithProperty=le.Layout=le.uint8ArrayToBuffer=le.checkUint8Array=void 0;le.constant=le.utf8=le.cstr=qt=le.blob=le.unionLayoutDiscriminator=le.union=Pi=le.seq=le.bits=Qe=le.struct=le.f64be=le.f64=le.f32be=le.f32=le.ns64be=le.s48be=le.s40be=le.s32be=le.s24be=le.s16be=xr=le.ns64=le.s48=le.s40=le.s32=le.s24=void 0;const $S=WS;function yd(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}le.checkUint8Array=yd;function Dt(t){return yd(t),$S.Buffer.from(t.buffer,t.byteOffset,t.length)}le.uint8ArrayToBuffer=Dt;class Wt{constructor(e,n){if(!Number.isInteger(e))throw new TypeError("span must be an integer");this.span=e,this.property=n}makeDestinationObject(){return{}}getSpan(e,n){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(e){const n=Object.create(this.constructor.prototype);return Object.assign(n,this),n.property=e,n}fromArray(e){}}le.Layout=Wt;function YS(t,e){return e.property?t+"["+e.property+"]":t}le.nameWithProperty=YS;function OV(t,e){if(typeof t!="function")throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof Wt))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(n,i){return e.encode(this,n,i)},writable:!0}),Object.defineProperty(t,"decode",{value(n,i){return e.decode(n,i)},writable:!0})}le.bindConstructorLayout=OV;class Ji extends Wt{isCount(){throw new Error("ExternalLayout is abstract")}}le.ExternalLayout=Ji;class WI extends Ji{constructor(e=1,n){if(!Number.isInteger(e)||0>=e)throw new TypeError("elementSpan must be a (positive) integer");super(-1,n),this.elementSpan=e}isCount(){return!0}decode(e,n=0){yd(e);const i=e.length-n;return Math.floor(i/this.elementSpan)}encode(e,n,i){return 0}}le.GreedyCount=WI;class XS extends Ji{constructor(e,n=0,i){if(!(e instanceof Wt))throw new TypeError("layout must be a Layout");if(!Number.isInteger(n))throw new TypeError("offset must be integer or undefined");super(e.span,i||e.property),this.layout=e,this.offset=n}isCount(){return this.layout instanceof Xr||this.layout instanceof ms}decode(e,n=0){return this.layout.decode(e,n+this.offset)}encode(e,n,i=0){return this.layout.encode(e,n,i+this.offset)}}le.OffsetLayout=XS;class Xr extends Wt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Dt(e).readUIntLE(n,this.span)}encode(e,n,i=0){return Dt(n).writeUIntLE(e,i,this.span),this.span}}le.UInt=Xr;class ms extends Wt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Dt(e).readUIntBE(n,this.span)}encode(e,n,i=0){return Dt(n).writeUIntBE(e,i,this.span),this.span}}le.UIntBE=ms;class yc extends Wt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Dt(e).readIntLE(n,this.span)}encode(e,n,i=0){return Dt(n).writeIntLE(e,i,this.span),this.span}}le.Int=yc;class vd extends Wt{constructor(e,n){if(super(e,n),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(e,n=0){return Dt(e).readIntBE(n,this.span)}encode(e,n,i=0){return Dt(n).writeIntBE(e,i,this.span),this.span}}le.IntBE=vd;const mw=Math.pow(2,32);function rx(t){const e=Math.floor(t/mw),n=t-e*mw;return{hi32:e,lo32:n}}function sx(t,e){return t*mw+e}class HI extends Wt{constructor(e){super(8,e)}decode(e,n=0){const i=Dt(e),r=i.readUInt32LE(n),s=i.readUInt32LE(n+4);return sx(s,r)}encode(e,n,i=0){const r=rx(e),s=Dt(n);return s.writeUInt32LE(r.lo32,i),s.writeUInt32LE(r.hi32,i+4),8}}le.NearUInt64=HI;class GI extends Wt{constructor(e){super(8,e)}decode(e,n=0){const i=Dt(e),r=i.readUInt32BE(n),s=i.readUInt32BE(n+4);return sx(r,s)}encode(e,n,i=0){const r=rx(e),s=Dt(n);return s.writeUInt32BE(r.hi32,i),s.writeUInt32BE(r.lo32,i+4),8}}le.NearUInt64BE=GI;class $I extends Wt{constructor(e){super(8,e)}decode(e,n=0){const i=Dt(e),r=i.readUInt32LE(n),s=i.readInt32LE(n+4);return sx(s,r)}encode(e,n,i=0){const r=rx(e),s=Dt(n);return s.writeUInt32LE(r.lo32,i),s.writeInt32LE(r.hi32,i+4),8}}le.NearInt64=$I;class YI extends Wt{constructor(e){super(8,e)}decode(e,n=0){const i=Dt(e),r=i.readInt32BE(n),s=i.readUInt32BE(n+4);return sx(r,s)}encode(e,n,i=0){const r=rx(e),s=Dt(n);return s.writeInt32BE(r.hi32,i),s.writeUInt32BE(r.lo32,i+4),8}}le.NearInt64BE=YI;class XI extends Wt{constructor(e){super(4,e)}decode(e,n=0){return Dt(e).readFloatLE(n)}encode(e,n,i=0){return Dt(n).writeFloatLE(e,i),4}}le.Float=XI;class qI extends Wt{constructor(e){super(4,e)}decode(e,n=0){return Dt(e).readFloatBE(n)}encode(e,n,i=0){return Dt(n).writeFloatBE(e,i),4}}le.FloatBE=qI;class KI extends Wt{constructor(e){super(8,e)}decode(e,n=0){return Dt(e).readDoubleLE(n)}encode(e,n,i=0){return Dt(n).writeDoubleLE(e,i),8}}le.Double=KI;class ZI extends Wt{constructor(e){super(8,e)}decode(e,n=0){return Dt(e).readDoubleBE(n)}encode(e,n,i=0){return Dt(n).writeDoubleBE(e,i),8}}le.DoubleBE=ZI;class QI extends Wt{constructor(e,n,i){if(!(e instanceof Wt))throw new TypeError("elementLayout must be a Layout");if(!(n instanceof Ji&&n.isCount()||Number.isInteger(n)&&0<=n))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(n instanceof Ji)&&0<e.span&&(r=n*e.span),super(r,i),this.elementLayout=e,this.count=n}getSpan(e,n=0){if(0<=this.span)return this.span;let i=0,r=this.count;if(r instanceof Ji&&(r=r.decode(e,n)),0<this.elementLayout.span)i=r*this.elementLayout.span;else{let s=0;for(;s<r;)i+=this.elementLayout.getSpan(e,n+i),++s}return i}decode(e,n=0){const i=[];let r=0,s=this.count;for(s instanceof Ji&&(s=s.decode(e,n));r<s;)i.push(this.elementLayout.decode(e,n)),n+=this.elementLayout.getSpan(e,n),r+=1;return i}encode(e,n,i=0){const r=this.elementLayout,s=e.reduce((o,a)=>o+r.encode(a,n,i+o),0);return this.count instanceof Ji&&this.count.encode(e.length,n,i),s}}le.Sequence=QI;class JI extends Wt{constructor(e,n,i){if(!(Array.isArray(e)&&e.reduce((s,o)=>s&&o instanceof Wt,!0)))throw new TypeError("fields must be array of Layout instances");typeof n=="boolean"&&i===void 0&&(i=n,n=void 0);for(const s of e)if(0>s.span&&s.property===void 0)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=e.reduce((s,o)=>s+o.getSpan(),0)}catch{}super(r,n),this.fields=e,this.decodePrefixes=!!i}getSpan(e,n=0){if(0<=this.span)return this.span;let i=0;try{i=this.fields.reduce((r,s)=>{const o=s.getSpan(e,n);return n+=o,r+o},0)}catch{throw new RangeError("indeterminate span")}return i}decode(e,n=0){yd(e);const i=this.makeDestinationObject();for(const r of this.fields)if(r.property!==void 0&&(i[r.property]=r.decode(e,n)),n+=r.getSpan(e,n),this.decodePrefixes&&e.length===n)break;return i}encode(e,n,i=0){const r=i;let s=0,o=0;for(const a of this.fields){let l=a.span;if(o=0<l?l:0,a.property!==void 0){const c=e[a.property];c!==void 0&&(o=a.encode(c,n,i),0>l&&(l=a.getSpan(n,i)))}s=i,i+=l}return s+o-r}fromArray(e){const n=this.makeDestinationObject();for(const i of this.fields)i.property!==void 0&&0<e.length&&(n[i.property]=e.shift());return n}layoutFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}offsetOf(e){if(typeof e!="string")throw new TypeError("property must be string");let n=0;for(const i of this.fields){if(i.property===e)return n;0>i.span?n=-1:0<=n&&(n+=i.span)}}}le.Structure=JI;class qS{constructor(e){this.property=e}decode(e,n){throw new Error("UnionDiscriminator is abstract")}encode(e,n,i){throw new Error("UnionDiscriminator is abstract")}}le.UnionDiscriminator=qS;class lg extends qS{constructor(e,n){if(!(e instanceof Ji&&e.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(n||e.property||"variant"),this.layout=e}decode(e,n){return this.layout.decode(e,n)}encode(e,n,i){return this.layout.encode(e,n,i)}}le.UnionLayoutDiscriminator=lg;class KS extends Wt{constructor(e,n,i){let r;if(e instanceof Xr||e instanceof ms)r=new lg(new XS(e));else if(e instanceof Ji&&e.isCount())r=new lg(e);else if(e instanceof qS)r=e;else throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(n===void 0&&(n=null),!(n===null||n instanceof Wt))throw new TypeError("defaultLayout must be null or a Layout");if(n!==null){if(0>n.span)throw new Error("defaultLayout must have constant span");n.property===void 0&&(n=n.replicate("content"))}let s=-1;n&&(s=n.span,0<=s&&(e instanceof Xr||e instanceof ms)&&(s+=r.layout.span)),super(s,i),this.discriminator=r,this.usesPrefixDiscriminator=e instanceof Xr||e instanceof ms,this.defaultLayout=n,this.registry={};let o=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(a){return o(a)},this.configGetSourceVariant=function(a){o=a.bind(this)}}getSpan(e,n=0){if(0<=this.span)return this.span;const i=this.getVariant(e,n);if(!i)throw new Error("unable to determine span for unrecognized variant");return i.getSpan(e,n)}defaultGetSourceVariant(e){if(Object.prototype.hasOwnProperty.call(e,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(e,this.defaultLayout.property))return;const n=this.registry[e[this.discriminator.property]];if(n&&(!n.layout||n.property&&Object.prototype.hasOwnProperty.call(e,n.property)))return n}else for(const n in this.registry){const i=this.registry[n];if(i.property&&Object.prototype.hasOwnProperty.call(e,i.property))return i}throw new Error("unable to infer src variant")}decode(e,n=0){let i;const r=this.discriminator,s=r.decode(e,n),o=this.registry[s];if(o===void 0){const a=this.defaultLayout;let l=0;this.usesPrefixDiscriminator&&(l=r.layout.span),i=this.makeDestinationObject(),i[r.property]=s,i[a.property]=a.decode(e,n+l)}else i=o.decode(e,n);return i}encode(e,n,i=0){const r=this.getSourceVariant(e);if(r===void 0){const s=this.discriminator,o=this.defaultLayout;let a=0;return this.usesPrefixDiscriminator&&(a=s.layout.span),s.encode(e[s.property],n,i),a+o.encode(e[o.property],n,i+a)}return r.encode(e,n,i)}addVariant(e,n,i){const r=new ek(this,e,n,i);return this.registry[e]=r,r}getVariant(e,n=0){let i;return e instanceof Uint8Array?i=this.discriminator.decode(e,n):i=e,this.registry[i]}}le.Union=KS;class ek extends Wt{constructor(e,n,i,r){if(!(e instanceof KS))throw new TypeError("union must be a Union");if(!Number.isInteger(n)||0>n)throw new TypeError("variant must be a (non-negative) integer");if(typeof i=="string"&&r===void 0&&(r=i,i=null),i){if(!(i instanceof Wt))throw new TypeError("layout must be a Layout");if(e.defaultLayout!==null&&0<=i.span&&i.span>e.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if(typeof r!="string")throw new TypeError("variant must have a String property")}let s=e.span;0>e.span&&(s=i?i.span:0,0<=s&&e.usesPrefixDiscriminator&&(s+=e.discriminator.layout.span)),super(s,r),this.union=e,this.variant=n,this.layout=i||null}getSpan(e,n=0){if(0<=this.span)return this.span;let i=0;this.union.usesPrefixDiscriminator&&(i=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(e,n+i)),i+r}decode(e,n=0){const i=this.makeDestinationObject();if(this!==this.union.getVariant(e,n))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?i[this.property]=this.layout.decode(e,n+r):this.property?i[this.property]=!0:this.union.usesPrefixDiscriminator&&(i[this.union.discriminator.property]=this.variant),i}encode(e,n,i=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(e,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,n,i);let s=r;if(this.layout&&(this.layout.encode(e[this.property],n,i+r),s+=this.layout.getSpan(n,i+r),0<=this.union.span&&s>this.union.span))throw new Error("encoded variant overruns containing union");return s}fromArray(e){if(this.layout)return this.layout.fromArray(e)}}le.VariantLayout=ek;function Yc(t){return 0>t&&(t+=4294967296),t}class ZS extends Wt{constructor(e,n,i){if(!(e instanceof Xr||e instanceof ms))throw new TypeError("word must be a UInt or UIntBE layout");if(typeof n=="string"&&i===void 0&&(i=n,n=!1),4<e.span)throw new RangeError("word cannot exceed 32 bits");super(e.span,i),this.word=e,this.msb=!!n,this.fields=[];let r=0;this._packedSetValue=function(s){return r=Yc(s),this},this._packedGetValue=function(){return r}}decode(e,n=0){const i=this.makeDestinationObject(),r=this.word.decode(e,n);this._packedSetValue(r);for(const s of this.fields)s.property!==void 0&&(i[s.property]=s.decode(e));return i}encode(e,n,i=0){const r=this.word.decode(n,i);this._packedSetValue(r);for(const s of this.fields)if(s.property!==void 0){const o=e[s.property];o!==void 0&&s.encode(o)}return this.word.encode(this._packedGetValue(),n,i)}addField(e,n){const i=new QS(this,e,n);return this.fields.push(i),i}addBoolean(e){const n=new tk(this,e);return this.fields.push(n),n}fieldFor(e){if(typeof e!="string")throw new TypeError("property must be string");for(const n of this.fields)if(n.property===e)return n}}le.BitStructure=ZS;class QS{constructor(e,n,i){if(!(e instanceof ZS))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(n)||0>=n)throw new TypeError("bits must be positive integer");const r=8*e.span,s=e.fields.reduce((o,a)=>o+a.bits,0);if(n+s>r)throw new Error("bits too long for span remainder ("+(r-s)+" of "+r+" remain)");this.container=e,this.bits=n,this.valueMask=(1<<n)-1,n===32&&(this.valueMask=4294967295),this.start=s,this.container.msb&&(this.start=r-s-n),this.wordMask=Yc(this.valueMask<<this.start),this.property=i}decode(e,n){const i=this.container._packedGetValue();return Yc(i&this.wordMask)>>>this.start}encode(e){if(typeof e!="number"||!Number.isInteger(e)||e!==Yc(e&this.valueMask))throw new TypeError(YS("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const n=this.container._packedGetValue(),i=Yc(e<<this.start);this.container._packedSetValue(Yc(n&~this.wordMask)|i)}}le.BitField=QS;let tk=class extends QS{constructor(e,n){super(e,1,n)}decode(e,n){return!!super.decode(e,n)}encode(e){typeof e=="boolean"&&(e=+e),super.encode(e)}};le.Boolean=tk;class nk extends Wt{constructor(e,n){if(!(e instanceof Ji&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let i=-1;e instanceof Ji||(i=e),super(i,n),this.length=e}getSpan(e,n){let i=this.span;return 0>i&&(i=this.length.decode(e,n)),i}decode(e,n=0){let i=this.span;return 0>i&&(i=this.length.decode(e,n)),Dt(e).slice(n,n+i)}encode(e,n,i){let r=this.length;if(this.length instanceof Ji&&(r=e.length),!(e instanceof Uint8Array&&r===e.length))throw new TypeError(YS("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(i+r>n.length)throw new RangeError("encoding overruns Uint8Array");const s=Dt(e);return Dt(n).write(s.toString("hex"),i,r,"hex"),this.length instanceof Ji&&this.length.encode(r,n,i),r}}le.Blob=nk;class ik extends Wt{constructor(e){super(-1,e)}getSpan(e,n=0){yd(e);let i=n;for(;i<e.length&&e[i]!==0;)i+=1;return 1+i-n}decode(e,n=0){const i=this.getSpan(e,n);return Dt(e).slice(n,n+i-1).toString("utf-8")}encode(e,n,i=0){typeof e!="string"&&(e=String(e));const r=$S.Buffer.from(e,"utf8"),s=r.length;if(i+s>n.length)throw new RangeError("encoding overruns Buffer");const o=Dt(n);return r.copy(o,i),o[i+s]=0,s+1}}le.CString=ik;class rk extends Wt{constructor(e,n){if(typeof e=="string"&&n===void 0&&(n=e,e=void 0),e===void 0)e=-1;else if(!Number.isInteger(e))throw new TypeError("maxSpan must be an integer");super(-1,n),this.maxSpan=e}getSpan(e,n=0){return yd(e),e.length-n}decode(e,n=0){const i=this.getSpan(e,n);if(0<=this.maxSpan&&this.maxSpan<i)throw new RangeError("text length exceeds maxSpan");return Dt(e).slice(n,n+i).toString("utf-8")}encode(e,n,i=0){typeof e!="string"&&(e=String(e));const r=$S.Buffer.from(e,"utf8"),s=r.length;if(0<=this.maxSpan&&this.maxSpan<s)throw new RangeError("text length exceeds maxSpan");if(i+s>n.length)throw new RangeError("encoding overruns Buffer");return r.copy(Dt(n),i),s}}le.UTF8=rk;class sk extends Wt{constructor(e,n){super(0,n),this.value=e}decode(e,n){return this.value}encode(e,n,i){return 0}}le.Constant=sk;le.greedy=(t,e)=>new WI(t,e);var Jl=le.offset=(t,e,n)=>new XS(t,e,n),Ct=le.u8=t=>new Xr(1,t),Or=le.u16=t=>new Xr(2,t);le.u24=t=>new Xr(3,t);var rt=le.u32=t=>new Xr(4,t);le.u40=t=>new Xr(5,t);le.u48=t=>new Xr(6,t);var di=le.nu64=t=>new HI(t);le.u16be=t=>new ms(2,t);le.u24be=t=>new ms(3,t);le.u32be=t=>new ms(4,t);le.u40be=t=>new ms(5,t);le.u48be=t=>new ms(6,t);le.nu64be=t=>new GI(t);le.s8=t=>new yc(1,t);le.s16=t=>new yc(2,t);le.s24=t=>new yc(3,t);le.s32=t=>new yc(4,t);le.s40=t=>new yc(5,t);le.s48=t=>new yc(6,t);var xr=le.ns64=t=>new $I(t);le.s16be=t=>new vd(2,t);le.s24be=t=>new vd(3,t);le.s32be=t=>new vd(4,t);le.s40be=t=>new vd(5,t);le.s48be=t=>new vd(6,t);le.ns64be=t=>new YI(t);le.f32=t=>new XI(t);le.f32be=t=>new qI(t);le.f64=t=>new KI(t);le.f64be=t=>new ZI(t);var Qe=le.struct=(t,e,n)=>new JI(t,e,n);le.bits=(t,e,n)=>new ZS(t,e,n);var Pi=le.seq=(t,e,n)=>new QI(t,e,n);le.union=(t,e,n)=>new KS(t,e,n);le.unionLayoutDiscriminator=(t,e)=>new lg(t,e);var qt=le.blob=(t,e)=>new nk(t,e);le.cstr=t=>new ik(t);le.utf8=(t,e)=>new rk(t,e);le.constant=(t,e)=>new sk(t,e);var jV=8078e3,FV=8078001,zV=8078004,VV=8078005,WV=8078006,HV=8078011;function ok(t){return Array.isArray(t)?"%5B"+t.map(ok).join("%2C%20")+"%5D":typeof t=="bigint"?`${t}n`:encodeURIComponent(String(t!=null&&Object.getPrototypeOf(t)===null?{...t}:t))}function GV([t,e]){return`${t}=${ok(e)}`}function $V(t){const e=Object.entries(t).map(GV).join("&");return btoa(e)}function YV(t,e={}){{let n=`Solana error #${t}; Decode this error by running \`npx @solana/errors decode -- ${t}`;return Object.keys(e).length&&(n+=` '${$V(e)}'`),`${n}\``}}var Nu=class extends Error{constructor(...[e,n]){let i,r;if(n){const{cause:o,...a}=n;o&&(r={cause:o}),Object.keys(a).length>0&&(i=a)}const s=YV(e,i);super(s,r);Oe(this,"cause",this.cause);Oe(this,"context");this.context={__code:e,...i},this.name="SolanaError"}};function XV(t,e){return"fixedSize"in e?e.fixedSize:e.getSizeFromValue(t)}function qV(t){return Object.freeze({...t,encode:e=>{const n=new Uint8Array(XV(e,t));return t.write(e,n,0),n}})}function KV(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}function Rc(t){return"fixedSize"in t&&typeof t.fixedSize=="number"}function ZV(t,e){if(Rc(t)!==Rc(e))throw new Nu(zV);if(Rc(t)&&Rc(e)&&t.fixedSize!==e.fixedSize)throw new Nu(VV,{decoderFixedSize:e.fixedSize,encoderFixedSize:t.fixedSize});if(!Rc(t)&&!Rc(e)&&t.maxSize!==e.maxSize)throw new Nu(WV,{decoderMaxSize:e.maxSize,encoderMaxSize:t.maxSize});return{...e,...t,decode:e.decode,encode:t.encode,read:e.read,write:t.write}}function QV(t,e,n=0){if(e.length-n<=0)throw new Nu(jV,{codecDescription:t})}function JV(t,e,n,i=0){const r=n.length-i;if(r<e)throw new Nu(FV,{bytesLength:r,codecDescription:t,expected:e})}function e9(t,e,n,i){if(i<e||i>n)throw new Nu(HV,{codecDescription:t,max:n,min:e,value:i})}function ak(t){return(t==null?void 0:t.endian)!==1}function t9(t){return qV({fixedSize:t.size,write(e,n,i){t.range&&e9(t.name,t.range[0],t.range[1],e);const r=new ArrayBuffer(t.size);return t.set(new DataView(r),e,ak(t.config)),n.set(new Uint8Array(r),i),i+t.size}})}function n9(t){return KV({fixedSize:t.size,read(e,n=0){QV(t.name,e,n),JV(t.name,t.size,e,n);const i=new DataView(i9(e,n,t.size));return[t.get(i,ak(t.config)),n+t.size]}})}function i9(t,e,n){const i=t.byteOffset+(e??0),r=n??t.byteLength;return t.buffer.slice(i,i+r)}var r9=(t={})=>t9({config:t,name:"u64",range:[0n,BigInt("0xffffffffffffffff")],set:(e,n,i)=>e.setBigUint64(0,BigInt(n),i),size:8}),s9=(t={})=>n9({config:t,get:(e,n)=>e.getBigUint64(0,n),name:"u64",size:8}),o9=(t={})=>ZV(r9(t),s9(t));class a9 extends TypeError{constructor(e,n){let i;const{message:r,explanation:s,...o}=e,{path:a}=e,l=a.length===0?r:`At path: ${a.join(".")} -- ${r}`;super(s??l),s!=null&&(this.cause=l),Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>i??(i=[e,...n()])}}function l9(t){return Xf(t)&&typeof t[Symbol.iterator]=="function"}function Xf(t){return typeof t=="object"&&t!=null}function cg(t){return Xf(t)&&!Array.isArray(t)}function vs(t){return typeof t=="symbol"?t.toString():typeof t=="string"?JSON.stringify(t):`${t}`}function c9(t){const{done:e,value:n}=t.next();return e?void 0:n}function u9(t,e,n,i){if(t===!0)return;t===!1?t={}:typeof t=="string"&&(t={message:t});const{path:r,branch:s}=e,{type:o}=n,{refinement:a,message:l=`Expected a value of type \`${o}\`${a?` with refinement \`${a}\``:""}, but received: \`${vs(i)}\``}=t;return{value:i,type:o,refinement:a,key:r[r.length-1],path:r,branch:s,...t,message:l}}function*jT(t,e,n,i){l9(t)||(t=[t]);for(const r of t){const s=u9(r,e,n,i);s&&(yield s)}}function*JS(t,e,n={}){const{path:i=[],branch:r=[t],coerce:s=!1,mask:o=!1}=n,a={path:i,branch:r,mask:o};s&&(t=e.coercer(t,a));let l="valid";for(const c of e.validator(t,a))c.explanation=n.message,l="not_valid",yield[c,void 0];for(let[c,u,h]of e.entries(t,a)){const f=JS(u,h,{path:c===void 0?i:[...i,c],branch:c===void 0?r:[...r,u],coerce:s,mask:o,message:n.message});for(const p of f)p[0]?(l=p[0].refinement!=null?"not_refined":"not_valid",yield[p[0],void 0]):s&&(u=p[1],c===void 0?t=u:t instanceof Map?t.set(c,u):t instanceof Set?t.add(u):Xf(t)&&(u!==void 0||c in t)&&(t[c]=u))}if(l!=="not_valid")for(const c of e.refiner(t,a))c.explanation=n.message,l="not_refined",yield[c,void 0];l==="valid"&&(yield[void 0,t])}let Ys=class{constructor(e){const{type:n,schema:i,validator:r,refiner:s,coercer:o=l=>l,entries:a=function*(){}}=e;this.type=n,this.schema=i,this.entries=a,this.coercer=o,r?this.validator=(l,c)=>{const u=r(l,c);return jT(u,c,this,l)}:this.validator=()=>[],s?this.refiner=(l,c)=>{const u=s(l,c);return jT(u,c,this,l)}:this.refiner=()=>[]}assert(e,n){return d9(e,this,n)}create(e,n){return Ue(e,this,n)}is(e){return lk(e,this)}mask(e,n){return h9(e,this,n)}validate(e,n={}){return qf(e,this,n)}};function d9(t,e,n){const i=qf(t,e,{message:n});if(i[0])throw i[0]}function Ue(t,e,n){const i=qf(t,e,{coerce:!0,message:n});if(i[0])throw i[0];return i[1]}function h9(t,e,n){const i=qf(t,e,{coerce:!0,mask:!0,message:n});if(i[0])throw i[0];return i[1]}function lk(t,e){return!qf(t,e)[0]}function qf(t,e,n={}){const i=JS(t,e,n),r=c9(i);return r[0]?[new a9(r[0],function*(){for(const o of i)o[0]&&(yield o[0])}),void 0]:[void 0,r[1]]}function vc(t,e){return new Ys({type:t,schema:null,validator:e})}function f9(){return vc("any",()=>!0)}function ze(t){return new Ys({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,i]of e.entries())yield[n,i,t]},coercer(e){return Array.isArray(e)?e.slice():e},validator(e){return Array.isArray(e)||`Expected an array value, but received: ${vs(e)}`}})}function Hs(){return vc("boolean",t=>typeof t=="boolean")}function eM(t){return vc("instance",e=>e instanceof t||`Expected a \`${t.name}\` instance, but received: ${vs(e)}`)}function Sn(t){const e=vs(t),n=typeof t;return new Ys({type:"literal",schema:n==="string"||n==="number"||n==="boolean"?t:null,validator(i){return i===t||`Expected the literal \`${e}\`, but received: ${vs(i)}`}})}function p9(){return vc("never",()=>!1)}function Ve(t){return new Ys({...t,validator:(e,n)=>e===null||t.validator(e,n),refiner:(e,n)=>e===null||t.refiner(e,n)})}function ae(){return vc("number",t=>typeof t=="number"&&!isNaN(t)||`Expected a number, but received: ${vs(t)}`)}function st(t){return new Ys({...t,validator:(e,n)=>e===void 0||t.validator(e,n),refiner:(e,n)=>e===void 0||t.refiner(e,n)})}function ck(t,e){return new Ys({type:"record",schema:null,*entries(n){if(Xf(n))for(const i in n){const r=n[i];yield[i,i,t],yield[i,r,e]}},validator(n){return cg(n)||`Expected an object, but received: ${vs(n)}`},coercer(n){return cg(n)?{...n}:n}})}function ke(){return vc("string",t=>typeof t=="string"||`Expected a string, but received: ${vs(t)}`)}function tM(t){const e=p9();return new Ys({type:"tuple",schema:null,*entries(n){if(Array.isArray(n)){const i=Math.max(t.length,n.length);for(let r=0;r<i;r++)yield[r,n[r],t[r]||e]}},validator(n){return Array.isArray(n)||`Expected an array, but received: ${vs(n)}`},coercer(n){return Array.isArray(n)?n.slice():n}})}function Me(t){const e=Object.keys(t);return new Ys({type:"type",schema:t,*entries(n){if(Xf(n))for(const i of e)yield[i,n[i],t[i]]},validator(n){return cg(n)||`Expected an object, but received: ${vs(n)}`},coercer(n){return cg(n)?{...n}:n}})}function Gi(t){const e=t.map(n=>n.type).join(" | ");return new Ys({type:"union",schema:null,coercer(n,i){for(const r of t){const[s,o]=r.validate(n,{coerce:!0,mask:i.mask});if(!s)return o}return n},validator(n,i){const r=[];for(const s of t){const[...o]=JS(n,s,i),[a]=o;if(a[0])for(const[l]of o)l&&r.push(l);else return[]}return[`Expected the value to satisfy a union of \`${e}\`, but received: ${vs(n)}`,...r]}})}function wd(){return vc("unknown",()=>!0)}function Kf(t,e,n){return new Ys({...t,coercer:(i,r)=>lk(i,e)?t.coercer(n(i,r),r):t.coercer(i,r)})}var Op,m9=new Uint8Array(16);function uk(){if(!Op&&(Op=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Op))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Op(m9)}const g9=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function ox(t){return typeof t=="string"&&g9.test(t)}var ui=[];for(var ky=0;ky<256;++ky)ui.push((ky+256).toString(16).substr(1));function ax(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=(ui[t[e+0]]+ui[t[e+1]]+ui[t[e+2]]+ui[t[e+3]]+"-"+ui[t[e+4]]+ui[t[e+5]]+"-"+ui[t[e+6]]+ui[t[e+7]]+"-"+ui[t[e+8]]+ui[t[e+9]]+"-"+ui[t[e+10]]+ui[t[e+11]]+ui[t[e+12]]+ui[t[e+13]]+ui[t[e+14]]+ui[t[e+15]]).toLowerCase();if(!ox(n))throw TypeError("Stringified UUID is invalid");return n}var FT,Py,Dy=0,By=0;function x9(t,e,n){var i=e&&n||0,r=e||new Array(16);t=t||{};var s=t.node||FT,o=t.clockseq!==void 0?t.clockseq:Py;if(s==null||o==null){var a=t.random||(t.rng||uk)();s==null&&(s=FT=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),o==null&&(o=Py=(a[6]<<8|a[7])&16383)}var l=t.msecs!==void 0?t.msecs:Date.now(),c=t.nsecs!==void 0?t.nsecs:By+1,u=l-Dy+(c-By)/1e4;if(u<0&&t.clockseq===void 0&&(o=o+1&16383),(u<0||l>Dy)&&t.nsecs===void 0&&(c=0),c>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");Dy=l,By=c,Py=o,l+=122192928e5;var h=((l&268435455)*1e4+c)%4294967296;r[i++]=h>>>24&255,r[i++]=h>>>16&255,r[i++]=h>>>8&255,r[i++]=h&255;var f=l/4294967296*1e4&268435455;r[i++]=f>>>8&255,r[i++]=f&255,r[i++]=f>>>24&15|16,r[i++]=f>>>16&255,r[i++]=o>>>8|128,r[i++]=o&255;for(var p=0;p<6;++p)r[i+p]=s[p];return e||ax(r)}function dk(t){if(!ox(t))throw TypeError("Invalid UUID");var e,n=new Uint8Array(16);return n[0]=(e=parseInt(t.slice(0,8),16))>>>24,n[1]=e>>>16&255,n[2]=e>>>8&255,n[3]=e&255,n[4]=(e=parseInt(t.slice(9,13),16))>>>8,n[5]=e&255,n[6]=(e=parseInt(t.slice(14,18),16))>>>8,n[7]=e&255,n[8]=(e=parseInt(t.slice(19,23),16))>>>8,n[9]=e&255,n[10]=(e=parseInt(t.slice(24,36),16))/1099511627776&255,n[11]=e/4294967296&255,n[12]=e>>>24&255,n[13]=e>>>16&255,n[14]=e>>>8&255,n[15]=e&255,n}function y9(t){t=unescape(encodeURIComponent(t));for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e}var v9="6ba7b810-9dad-11d1-80b4-00c04fd430c8",w9="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function hk(t,e,n){function i(r,s,o,a){if(typeof r=="string"&&(r=y9(r)),typeof s=="string"&&(s=dk(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var l=new Uint8Array(16+r.length);if(l.set(s),l.set(r,s.length),l=n(l),l[6]=l[6]&15|e,l[8]=l[8]&63|128,o){a=a||0;for(var c=0;c<16;++c)o[a+c]=l[c];return o}return ax(l)}try{i.name=t}catch{}return i.DNS=v9,i.URL=w9,i}function _9(t){if(typeof t=="string"){var e=unescape(encodeURIComponent(t));t=new Uint8Array(e.length);for(var n=0;n<e.length;++n)t[n]=e.charCodeAt(n)}return b9(S9(M9(t),t.length*8))}function b9(t){for(var e=[],n=t.length*32,i="0123456789abcdef",r=0;r<n;r+=8){var s=t[r>>5]>>>r%32&255,o=parseInt(i.charAt(s>>>4&15)+i.charAt(s&15),16);e.push(o)}return e}function fk(t){return(t+64>>>9<<4)+14+1}function S9(t,e){t[e>>5]|=128<<e%32,t[fk(e)-1]=e;for(var n=1732584193,i=-271733879,r=-1732584194,s=271733878,o=0;o<t.length;o+=16){var a=n,l=i,c=r,u=s;n=Si(n,i,r,s,t[o],7,-680876936),s=Si(s,n,i,r,t[o+1],12,-389564586),r=Si(r,s,n,i,t[o+2],17,606105819),i=Si(i,r,s,n,t[o+3],22,-1044525330),n=Si(n,i,r,s,t[o+4],7,-176418897),s=Si(s,n,i,r,t[o+5],12,1200080426),r=Si(r,s,n,i,t[o+6],17,-1473231341),i=Si(i,r,s,n,t[o+7],22,-45705983),n=Si(n,i,r,s,t[o+8],7,1770035416),s=Si(s,n,i,r,t[o+9],12,-1958414417),r=Si(r,s,n,i,t[o+10],17,-42063),i=Si(i,r,s,n,t[o+11],22,-1990404162),n=Si(n,i,r,s,t[o+12],7,1804603682),s=Si(s,n,i,r,t[o+13],12,-40341101),r=Si(r,s,n,i,t[o+14],17,-1502002290),i=Si(i,r,s,n,t[o+15],22,1236535329),n=Mi(n,i,r,s,t[o+1],5,-165796510),s=Mi(s,n,i,r,t[o+6],9,-1069501632),r=Mi(r,s,n,i,t[o+11],14,643717713),i=Mi(i,r,s,n,t[o],20,-373897302),n=Mi(n,i,r,s,t[o+5],5,-701558691),s=Mi(s,n,i,r,t[o+10],9,38016083),r=Mi(r,s,n,i,t[o+15],14,-660478335),i=Mi(i,r,s,n,t[o+4],20,-405537848),n=Mi(n,i,r,s,t[o+9],5,568446438),s=Mi(s,n,i,r,t[o+14],9,-1019803690),r=Mi(r,s,n,i,t[o+3],14,-187363961),i=Mi(i,r,s,n,t[o+8],20,1163531501),n=Mi(n,i,r,s,t[o+13],5,-1444681467),s=Mi(s,n,i,r,t[o+2],9,-51403784),r=Mi(r,s,n,i,t[o+7],14,1735328473),i=Mi(i,r,s,n,t[o+12],20,-1926607734),n=Ei(n,i,r,s,t[o+5],4,-378558),s=Ei(s,n,i,r,t[o+8],11,-2022574463),r=Ei(r,s,n,i,t[o+11],16,1839030562),i=Ei(i,r,s,n,t[o+14],23,-35309556),n=Ei(n,i,r,s,t[o+1],4,-1530992060),s=Ei(s,n,i,r,t[o+4],11,1272893353),r=Ei(r,s,n,i,t[o+7],16,-155497632),i=Ei(i,r,s,n,t[o+10],23,-1094730640),n=Ei(n,i,r,s,t[o+13],4,681279174),s=Ei(s,n,i,r,t[o],11,-358537222),r=Ei(r,s,n,i,t[o+3],16,-722521979),i=Ei(i,r,s,n,t[o+6],23,76029189),n=Ei(n,i,r,s,t[o+9],4,-640364487),s=Ei(s,n,i,r,t[o+12],11,-421815835),r=Ei(r,s,n,i,t[o+15],16,530742520),i=Ei(i,r,s,n,t[o+2],23,-995338651),n=Ti(n,i,r,s,t[o],6,-198630844),s=Ti(s,n,i,r,t[o+7],10,1126891415),r=Ti(r,s,n,i,t[o+14],15,-1416354905),i=Ti(i,r,s,n,t[o+5],21,-57434055),n=Ti(n,i,r,s,t[o+12],6,1700485571),s=Ti(s,n,i,r,t[o+3],10,-1894986606),r=Ti(r,s,n,i,t[o+10],15,-1051523),i=Ti(i,r,s,n,t[o+1],21,-2054922799),n=Ti(n,i,r,s,t[o+8],6,1873313359),s=Ti(s,n,i,r,t[o+15],10,-30611744),r=Ti(r,s,n,i,t[o+6],15,-1560198380),i=Ti(i,r,s,n,t[o+13],21,1309151649),n=Ti(n,i,r,s,t[o+4],6,-145523070),s=Ti(s,n,i,r,t[o+11],10,-1120210379),r=Ti(r,s,n,i,t[o+2],15,718787259),i=Ti(i,r,s,n,t[o+9],21,-343485551),n=ya(n,a),i=ya(i,l),r=ya(r,c),s=ya(s,u)}return[n,i,r,s]}function M9(t){if(t.length===0)return[];for(var e=t.length*8,n=new Uint32Array(fk(e)),i=0;i<e;i+=8)n[i>>5]|=(t[i/8]&255)<<i%32;return n}function ya(t,e){var n=(t&65535)+(e&65535),i=(t>>16)+(e>>16)+(n>>16);return i<<16|n&65535}function E9(t,e){return t<<e|t>>>32-e}function lx(t,e,n,i,r,s){return ya(E9(ya(ya(e,t),ya(i,s)),r),n)}function Si(t,e,n,i,r,s,o){return lx(e&n|~e&i,t,e,r,s,o)}function Mi(t,e,n,i,r,s,o){return lx(e&i|n&~i,t,e,r,s,o)}function Ei(t,e,n,i,r,s,o){return lx(e^n^i,t,e,r,s,o)}function Ti(t,e,n,i,r,s,o){return lx(n^(e|~i),t,e,r,s,o)}var T9=hk("v3",48,_9);function A9(t,e,n){t=t||{};var i=t.random||(t.rng||uk)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,e){n=n||0;for(var r=0;r<16;++r)e[n+r]=i[r];return e}return ax(i)}function C9(t,e,n,i){switch(t){case 0:return e&n^~e&i;case 1:return e^n^i;case 2:return e&n^e&i^n&i;case 3:return e^n^i}}function Uy(t,e){return t<<e|t>>>32-e}function N9(t){var e=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof t=="string"){var i=unescape(encodeURIComponent(t));t=[];for(var r=0;r<i.length;++r)t.push(i.charCodeAt(r))}else Array.isArray(t)||(t=Array.prototype.slice.call(t));t.push(128);for(var s=t.length/4+2,o=Math.ceil(s/16),a=new Array(o),l=0;l<o;++l){for(var c=new Uint32Array(16),u=0;u<16;++u)c[u]=t[l*64+u*4]<<24|t[l*64+u*4+1]<<16|t[l*64+u*4+2]<<8|t[l*64+u*4+3];a[l]=c}a[o-1][14]=(t.length-1)*8/Math.pow(2,32),a[o-1][14]=Math.floor(a[o-1][14]),a[o-1][15]=(t.length-1)*8&4294967295;for(var h=0;h<o;++h){for(var f=new Uint32Array(80),p=0;p<16;++p)f[p]=a[h][p];for(var x=16;x<80;++x)f[x]=Uy(f[x-3]^f[x-8]^f[x-14]^f[x-16],1);for(var y=n[0],g=n[1],m=n[2],_=n[3],w=n[4],S=0;S<80;++S){var N=Math.floor(S/20),k=Uy(y,5)+C9(N,g,m,_)+w+e[N]+f[S]>>>0;w=_,_=m,m=Uy(g,30)>>>0,g=y,y=k}n[0]=n[0]+y>>>0,n[1]=n[1]+g>>>0,n[2]=n[2]+m>>>0,n[3]=n[3]+_>>>0,n[4]=n[4]+w>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,n[0]&255,n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,n[1]&255,n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,n[2]&255,n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,n[3]&255,n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,n[4]&255]}var R9=hk("v5",80,N9);const L9="00000000-0000-0000-0000-000000000000";function I9(t){if(!ox(t))throw TypeError("Invalid UUID");return parseInt(t.substr(14,1),16)}const k9=Object.freeze(Object.defineProperty({__proto__:null,NIL:L9,parse:dk,stringify:ax,v1:x9,v3:T9,v4:A9,v5:R9,validate:ox,version:I9},Symbol.toStringTag,{value:"Module"})),pk=nb(k9),P9=pk.v4,D9=function(t,e,n,i){if(typeof t!="string")throw new TypeError(t+" must be a string");i=i||{};const r=typeof i.version=="number"?i.version:2;if(r!==1&&r!==2)throw new TypeError(r+" must be 1 or 2");const s={method:t};if(r===2&&(s.jsonrpc="2.0"),e){if(typeof e!="object"&&!Array.isArray(e))throw new TypeError(e+" must be an object, array or omitted");s.params=e}if(typeof n>"u"){const o=typeof i.generator=="function"?i.generator:function(){return P9()};s.id=o(s,i)}else r===2&&n===null?i.notificationIdNull&&(s.id=null):s.id=n;return s};var B9=D9;const U9=pk.v4,O9=B9,pf=function(t,e){if(!(this instanceof pf))return new pf(t,e);e||(e={}),this.options={reviver:typeof e.reviver<"u"?e.reviver:null,replacer:typeof e.replacer<"u"?e.replacer:null,generator:typeof e.generator<"u"?e.generator:function(){return U9()},version:typeof e.version<"u"?e.version:2,notificationIdNull:typeof e.notificationIdNull=="boolean"?e.notificationIdNull:!1},this.callServer=t};var j9=pf;pf.prototype.request=function(t,e,n,i){const r=this;let s=null;const o=Array.isArray(t)&&typeof e=="function";if(this.options.version===1&&o)throw new TypeError("JSON-RPC 1.0 does not support batching");if(o||!o&&t&&typeof t=="object"&&typeof e=="function")i=e,s=t;else{typeof n=="function"&&(i=n,n=void 0);const c=typeof i=="function";try{s=O9(t,e,n,{generator:this.options.generator,version:this.options.version,notificationIdNull:this.options.notificationIdNull})}catch(u){if(c)return i(u);throw u}if(!c)return s}let l;try{l=JSON.stringify(s,this.options.replacer)}catch(c){return i(c)}return this.callServer(l,function(c,u){r._parseResponse(c,u,i)}),s};pf.prototype._parseResponse=function(t,e,n){if(t){n(t);return}if(!e)return n();let i;try{i=JSON.parse(e,this.options.reviver)}catch(r){return n(r)}if(n.length===3)if(Array.isArray(i)){const r=function(o){return typeof o.error<"u"},s=function(o){return!r(o)};return n(null,i.filter(r),i.filter(s))}else return n(null,i.error,i.result);n(null,i)};const F9=$a(j9);var mk={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,h||l,f),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],p]:l._events[x].push(p):(l._events[x]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,x=new Array(p);f<p;f++)x[f]=h[f].fn;return x},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,f,p,x){var y=n?n+c:c;if(!this._events[y])return!1;var g=this._events[y],m=arguments.length,_,w;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,f),!0;case 5:return g.fn.call(g.context,u,h,f,p),!0;case 6:return g.fn.call(g.context,u,h,f,p,x),!0}for(w=1,_=new Array(m-1);w<m;w++)_[w-1]=arguments[w];g.fn.apply(g.context,_)}else{var S=g.length,N;for(w=0;w<S;w++)switch(g[w].once&&this.removeListener(c,g[w].fn,void 0,!0),m){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,h);break;case 4:g[w].fn.call(g[w].context,u,h,f);break;default:if(!_)for(N=1,_=new Array(m-1);N<m;N++)_[N-1]=arguments[N];g[w].fn.apply(g[w].context,_)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var x=this._events[p];if(x.fn)x.fn===u&&(!f||x.once)&&(!h||x.context===h)&&o(this,p);else{for(var y=0,g=[],m=x.length;y<m;y++)(x[y].fn!==u||f&&!x[y].once||h&&x[y].context!==h)&&g.push(x[y]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(mk);var z9=mk.exports;const gk=$a(z9);var V9=class extends gk{constructor(e,n){super();Oe(this,"socket");this.socket=new window.WebSocket(e,n.protocols),this.socket.onopen=()=>this.emit("open"),this.socket.onmessage=i=>this.emit("message",i.data),this.socket.onerror=i=>this.emit("error",i),this.socket.onclose=i=>{this.emit("close",i.code,i.reason)}}send(e,n,i){const r=i||n;try{this.socket.send(e),r()}catch(s){r(s)}}close(e,n){this.socket.close(e,n)}addEventListener(e,n,i){this.socket.addEventListener(e,n,i)}};function W9(t,e){return new V9(t,e)}var H9=class{encode(t){return JSON.stringify(t)}decode(t){return JSON.parse(t)}},G9=class extends gk{constructor(e,n="ws://localhost:8080",{autoconnect:i=!0,reconnect:r=!0,reconnect_interval:s=1e3,max_reconnects:o=5,...a}={},l,c){super();Oe(this,"address");Oe(this,"rpc_id");Oe(this,"queue");Oe(this,"options");Oe(this,"autoconnect");Oe(this,"ready");Oe(this,"reconnect");Oe(this,"reconnect_timer_id");Oe(this,"reconnect_interval");Oe(this,"max_reconnects");Oe(this,"rest_options");Oe(this,"current_reconnects");Oe(this,"generate_request_id");Oe(this,"socket");Oe(this,"webSocketFactory");Oe(this,"dataPack");this.webSocketFactory=e,this.queue={},this.rpc_id=0,this.address=n,this.autoconnect=i,this.ready=!1,this.reconnect=r,this.reconnect_timer_id=void 0,this.reconnect_interval=s,this.max_reconnects=o,this.rest_options=a,this.current_reconnects=0,this.generate_request_id=l||(()=>typeof this.rpc_id=="number"?++this.rpc_id:Number(this.rpc_id)+1),c?this.dataPack=c:this.dataPack=new H9,this.autoconnect&&this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}connect(){this.socket||this._connect(this.address,{autoconnect:this.autoconnect,reconnect:this.reconnect,reconnect_interval:this.reconnect_interval,max_reconnects:this.max_reconnects,...this.rest_options})}call(e,n,i,r){return!r&&typeof i=="object"&&(r=i,i=null),new Promise((s,o)=>{if(!this.ready)return o(new Error("socket not ready"));const a=this.generate_request_id(e,n),l={jsonrpc:"2.0",method:e,params:n||void 0,id:a};this.socket.send(this.dataPack.encode(l),r,c=>{if(c)return o(c);this.queue[a]={promise:[s,o]},i&&(this.queue[a].timeout=setTimeout(()=>{delete this.queue[a],o(new Error("reply timeout"))},i))})})}async login(e){const n=await this.call("rpc.login",e);if(!n)throw new Error("authentication failed");return n}async listMethods(){return await this.call("__listMethods")}notify(e,n){return new Promise((i,r)=>{if(!this.ready)return r(new Error("socket not ready"));const s={jsonrpc:"2.0",method:e,params:n};this.socket.send(this.dataPack.encode(s),o=>{if(o)return r(o);i()})})}async subscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.on",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed subscribing to an event '"+e+"' with: "+n[e]);return n}async unsubscribe(e){typeof e=="string"&&(e=[e]);const n=await this.call("rpc.off",e);if(typeof e=="string"&&n[e]!=="ok")throw new Error("Failed unsubscribing from an event with: "+n);return n}close(e,n){this.socket&&this.socket.close(e||1e3,n)}setAutoReconnect(e){this.reconnect=e}setReconnectInterval(e){this.reconnect_interval=e}setMaxReconnects(e){this.max_reconnects=e}getCurrentReconnects(){return this.current_reconnects}getMaxReconnects(){return this.max_reconnects}isReconnecting(){return this.reconnect_timer_id!==void 0}willReconnect(){return this.reconnect&&(this.max_reconnects===0||this.current_reconnects<this.max_reconnects)}_connect(e,n){clearTimeout(this.reconnect_timer_id),this.socket=this.webSocketFactory(e,n),this.socket.addEventListener("open",()=>{this.ready=!0,this.emit("open"),this.current_reconnects=0}),this.socket.addEventListener("message",({data:i})=>{i instanceof ArrayBuffer&&(i=vt.from(i).toString());try{i=this.dataPack.decode(i)}catch{return}if(i.notification&&this.listeners(i.notification).length){if(!Object.keys(i.params).length)return this.emit(i.notification);const r=[i.notification];if(i.params.constructor===Object)r.push(i.params);else for(let s=0;s<i.params.length;s++)r.push(i.params[s]);return Promise.resolve().then(()=>{this.emit.apply(this,r)})}if(!this.queue[i.id])return i.method?Promise.resolve().then(()=>{this.emit(i.method,i==null?void 0:i.params)}):void 0;"error"in i=="result"in i&&this.queue[i.id].promise[1](new Error('Server response malformed. Response must include either "result" or "error", but not both.')),this.queue[i.id].timeout&&clearTimeout(this.queue[i.id].timeout),i.error?this.queue[i.id].promise[1](i.error):this.queue[i.id].promise[0](i.result),delete this.queue[i.id]}),this.socket.addEventListener("error",i=>this.emit("error",i)),this.socket.addEventListener("close",({code:i,reason:r})=>{this.ready&&setTimeout(()=>this.emit("close",i,r),0),this.ready=!1,this.socket=void 0,i!==1e3&&(this.current_reconnects++,this.reconnect&&(this.max_reconnects>this.current_reconnects||this.max_reconnects===0)?this.reconnect_timer_id=setTimeout(()=>this._connect(e,n),this.reconnect_interval):this.reconnect&&this.max_reconnects>0&&this.current_reconnects>=this.max_reconnects&&setTimeout(()=>this.emit("max_reconnects_reached",i,r),1))})}};class xk extends lI{constructor(e,n){super(),this.finished=!1,this.destroyed=!1,oI(e);const i=BS(n);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const r=this.blockLen,s=new Uint8Array(r);s.set(i.length>r?e.create().update(i).digest():i);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),Xu(s)}update(e){return eg(this),this.iHash.update(e),this}digestInto(e){eg(this),gc(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:n,iHash:i,finished:r,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=r,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=n._cloneInto(e.oHash),e.iHash=i._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}const yk=(t,e,n)=>new xk(t,e).update(n).digest();yk.create=(t,e)=>new xk(t,e);/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const zT=(t,e)=>(t+(t>=0?e:-e)/vk)/e;function $9(t,e,n){const[[i,r],[s,o]]=e,a=zT(o*t,n),l=zT(-r*t,n);let c=t-a*i-l*s,u=-a*r-l*o;const h=c<bo,f=u<bo;h&&(c=-c),f&&(u=-u);const p=Gf(Math.ceil(mI(n)/2))+Ru;if(c<bo||c>=p||u<bo||u>=p)throw new Error("splitScalar (endomorphism): failed, k="+t);return{k1neg:h,k1:c,k2neg:f,k2:u}}function gw(t){if(!["compact","recovered","der"].includes(t))throw new Error('Signature format must be "compact", "recovered", or "der"');return t}function Oy(t,e){const n={};for(let i of Object.keys(e))n[i]=t[i]===void 0?e[i]:t[i];return lc(n.lowS,"lowS"),lc(n.prehash,"prehash"),n.format!==void 0&&gw(n.format),n}class Y9 extends Error{constructor(e=""){super(e)}}const uo={Err:Y9,_tlv:{encode:(t,e)=>{const{Err:n}=uo;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length&1)throw new n("tlv.encode: unpadded data");const i=e.length/2,r=Dp(i);if(r.length/2&128)throw new n("tlv.encode: long form length too big");const s=i>127?Dp(r.length/2|128):"";return Dp(t)+s+r+e},decode(t,e){const{Err:n}=uo;let i=0;if(t<0||t>256)throw new n("tlv.encode: wrong tag");if(e.length<2||e[i++]!==t)throw new n("tlv.decode: wrong tlv");const r=e[i++],s=!!(r&128);let o=0;if(!s)o=r;else{const l=r&127;if(!l)throw new n("tlv.decode(long): indefinite length not supported");if(l>4)throw new n("tlv.decode(long): byte length is too big");const c=e.subarray(i,i+l);if(c.length!==l)throw new n("tlv.decode: length bytes not complete");if(c[0]===0)throw new n("tlv.decode(long): zero leftmost byte");for(const u of c)o=o<<8|u;if(i+=l,o<128)throw new n("tlv.decode(long): not minimal encoding")}const a=e.subarray(i,i+o);if(a.length!==o)throw new n("tlv.decode: wrong value length");return{v:a,l:e.subarray(i+o)}}},_int:{encode(t){const{Err:e}=uo;if(t<bo)throw new e("integer: negative integers are not allowed");let n=Dp(t);if(Number.parseInt(n[0],16)&8&&(n="00"+n),n.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return n},decode(t){const{Err:e}=uo;if(t[0]&128)throw new e("invalid signature integer: negative");if(t[0]===0&&!(t[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return nx(t)}},toSig(t){const{Err:e,_int:n,_tlv:i}=uo,r=In("signature",t),{v:s,l:o}=i.decode(48,r);if(o.length)throw new e("invalid signature: left bytes after parsing");const{v:a,l}=i.decode(2,s),{v:c,l:u}=i.decode(2,l);if(u.length)throw new e("invalid signature: left bytes after parsing");return{r:n.decode(a),s:n.decode(c)}},hexFromSig(t){const{_tlv:e,_int:n}=uo,i=e.encode(2,n.encode(t.r)),r=e.encode(2,n.encode(t.s)),s=i+r;return e.encode(48,s)}},bo=BigInt(0),Ru=BigInt(1),vk=BigInt(2),jp=BigInt(3),X9=BigInt(4);function yu(t,e){const{BYTES:n}=t;let i;if(typeof e=="bigint")i=e;else{let r=In("private key",e);try{i=t.fromBytes(r)}catch{throw new Error(`invalid private key: expected ui8a of size ${n}, got ${typeof e}`)}}if(!t.isValidNot0(i))throw new Error("invalid private key: out of range [1..N-1]");return i}function q9(t,e={}){const n=LI("weierstrass",t,e),{Fp:i,Fn:r}=n;let s=n.CURVE;const{h:o,n:a}=s;$f(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});const{endo:l}=e;if(l&&(!i.is0(s.a)||typeof l.beta!="bigint"||!Array.isArray(l.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');const c=_k(i,r);function u(){if(!i.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function h(Y,I,v){const{x:b,y:E}=I.toAffine(),P=i.toBytes(b);if(lc(v,"isCompressed"),v){u();const C=!i.isOdd(E);return Ls(wk(C),P)}else return Ls(Uint8Array.of(4),P,i.toBytes(E))}function f(Y){us(Y,void 0,"Point");const{publicKey:I,publicKeyUncompressed:v}=c,b=Y.length,E=Y[0],P=Y.subarray(1);if(b===I&&(E===2||E===3)){const C=i.fromBytes(P);if(!i.isValid(C))throw new Error("bad point: is not on curve, wrong x");const z=y(C);let V;try{V=i.sqrt(z)}catch(G){const K=G instanceof Error?": "+G.message:"";throw new Error("bad point: is not on curve, sqrt error"+K)}u();const U=i.isOdd(V);return(E&1)===1!==U&&(V=i.neg(V)),{x:C,y:V}}else if(b===v&&E===4){const C=i.BYTES,z=i.fromBytes(P.subarray(0,C)),V=i.fromBytes(P.subarray(C,C*2));if(!g(z,V))throw new Error("bad point: is not on curve");return{x:z,y:V}}else throw new Error(`bad point: got length ${b}, expected compressed=${I} or uncompressed=${v}`)}const p=e.toBytes||h,x=e.fromBytes||f;function y(Y){const I=i.sqr(Y),v=i.mul(I,Y);return i.add(i.add(v,i.mul(Y,s.a)),s.b)}function g(Y,I){const v=i.sqr(I),b=y(Y);return i.eql(v,b)}if(!g(s.Gx,s.Gy))throw new Error("bad curve params: generator point");const m=i.mul(i.pow(s.a,jp),X9),_=i.mul(i.sqr(s.b),BigInt(27));if(i.is0(i.add(m,_)))throw new Error("bad curve params: a or b");function w(Y,I,v=!1){if(!i.isValid(I)||v&&i.is0(I))throw new Error(`bad point coordinate ${Y}`);return I}function S(Y){if(!(Y instanceof L))throw new Error("ProjectivePoint expected")}function N(Y){if(!l||!l.basises)throw new Error("no endo");return $9(Y,l.basises,r.ORDER)}const k=ng((Y,I)=>{const{X:v,Y:b,Z:E}=Y;if(i.eql(E,i.ONE))return{x:v,y:b};const P=Y.is0();I==null&&(I=P?i.ONE:i.inv(E));const C=i.mul(v,I),z=i.mul(b,I),V=i.mul(E,I);if(P)return{x:i.ZERO,y:i.ZERO};if(!i.eql(V,i.ONE))throw new Error("invZ was invalid");return{x:C,y:z}}),R=ng(Y=>{if(Y.is0()){if(e.allowInfinityPoint&&!i.is0(Y.Y))return;throw new Error("bad point: ZERO")}const{x:I,y:v}=Y.toAffine();if(!i.isValid(I)||!i.isValid(v))throw new Error("bad point: x or y not field elements");if(!g(I,v))throw new Error("bad point: equation left != right");if(!Y.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function B(Y,I,v,b,E){return v=new L(i.mul(v.X,Y),v.Y,v.Z),I=ig(b,I),v=ig(E,v),I.add(v)}class L{constructor(I,v,b){this.X=w("x",I),this.Y=w("y",v,!0),this.Z=w("z",b),Object.freeze(this)}static CURVE(){return s}static fromAffine(I){const{x:v,y:b}=I||{};if(!I||!i.isValid(v)||!i.isValid(b))throw new Error("invalid affine point");if(I instanceof L)throw new Error("projective point not allowed");return i.is0(v)&&i.is0(b)?L.ZERO:new L(v,b,i.ONE)}static fromBytes(I){const v=L.fromAffine(x(us(I,void 0,"point")));return v.assertValidity(),v}static fromHex(I){return L.fromBytes(In("pointHex",I))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(I=8,v=!0){return j.createCache(this,I),v||this.multiply(jp),this}assertValidity(){R(this)}hasEvenY(){const{y:I}=this.toAffine();if(!i.isOdd)throw new Error("Field doesn't support isOdd");return!i.isOdd(I)}equals(I){S(I);const{X:v,Y:b,Z:E}=this,{X:P,Y:C,Z:z}=I,V=i.eql(i.mul(v,z),i.mul(P,E)),U=i.eql(i.mul(b,z),i.mul(C,E));return V&&U}negate(){return new L(this.X,i.neg(this.Y),this.Z)}double(){const{a:I,b:v}=s,b=i.mul(v,jp),{X:E,Y:P,Z:C}=this;let z=i.ZERO,V=i.ZERO,U=i.ZERO,T=i.mul(E,E),G=i.mul(P,P),K=i.mul(C,C),ne=i.mul(E,P);return ne=i.add(ne,ne),U=i.mul(E,C),U=i.add(U,U),z=i.mul(I,U),V=i.mul(b,K),V=i.add(z,V),z=i.sub(G,V),V=i.add(G,V),V=i.mul(z,V),z=i.mul(ne,z),U=i.mul(b,U),K=i.mul(I,K),ne=i.sub(T,K),ne=i.mul(I,ne),ne=i.add(ne,U),U=i.add(T,T),T=i.add(U,T),T=i.add(T,K),T=i.mul(T,ne),V=i.add(V,T),K=i.mul(P,C),K=i.add(K,K),T=i.mul(K,ne),z=i.sub(z,T),U=i.mul(K,G),U=i.add(U,U),U=i.add(U,U),new L(z,V,U)}add(I){S(I);const{X:v,Y:b,Z:E}=this,{X:P,Y:C,Z:z}=I;let V=i.ZERO,U=i.ZERO,T=i.ZERO;const G=s.a,K=i.mul(s.b,jp);let ne=i.mul(v,P),Z=i.mul(b,C),ee=i.mul(E,z),me=i.add(v,b),pe=i.add(P,C);me=i.mul(me,pe),pe=i.add(ne,Z),me=i.sub(me,pe),pe=i.add(v,E);let Se=i.add(P,z);return pe=i.mul(pe,Se),Se=i.add(ne,ee),pe=i.sub(pe,Se),Se=i.add(b,E),V=i.add(C,z),Se=i.mul(Se,V),V=i.add(Z,ee),Se=i.sub(Se,V),T=i.mul(G,pe),V=i.mul(K,ee),T=i.add(V,T),V=i.sub(Z,T),T=i.add(Z,T),U=i.mul(V,T),Z=i.add(ne,ne),Z=i.add(Z,ne),ee=i.mul(G,ee),pe=i.mul(K,pe),Z=i.add(Z,ee),ee=i.sub(ne,ee),ee=i.mul(G,ee),pe=i.add(pe,ee),ne=i.mul(Z,pe),U=i.add(U,ne),ne=i.mul(Se,pe),V=i.mul(me,V),V=i.sub(V,ne),ne=i.mul(me,Z),T=i.mul(Se,T),T=i.add(T,ne),new L(V,U,T)}subtract(I){return this.add(I.negate())}is0(){return this.equals(L.ZERO)}multiply(I){const{endo:v}=e;if(!r.isValidNot0(I))throw new Error("invalid scalar: out of range");let b,E;const P=C=>j.cached(this,C,z=>Bl(L,z));if(v){const{k1neg:C,k1:z,k2neg:V,k2:U}=N(I),{p:T,f:G}=P(z),{p:K,f:ne}=P(U);E=G.add(ne),b=B(v.beta,T,K,C,V)}else{const{p:C,f:z}=P(I);b=C,E=z}return Bl(L,[b,E])[0]}multiplyUnsafe(I){const{endo:v}=e,b=this;if(!r.isValid(I))throw new Error("invalid scalar: out of range");if(I===bo||b.is0())return L.ZERO;if(I===Ru)return b;if(j.hasCache(this))return this.multiply(I);if(v){const{k1neg:E,k1:P,k2neg:C,k2:z}=N(I),{p1:V,p2:U}=q7(L,b,P,z);return B(v.beta,V,U,E,C)}else return j.unsafe(b,I)}multiplyAndAddUnsafe(I,v,b){const E=this.multiplyUnsafe(v).add(I.multiplyUnsafe(b));return E.is0()?void 0:E}toAffine(I){return k(this,I)}isTorsionFree(){const{isTorsionFree:I}=e;return o===Ru?!0:I?I(L,this):j.unsafe(this,a).is0()}clearCofactor(){const{clearCofactor:I}=e;return o===Ru?this:I?I(L,this):this.multiplyUnsafe(o)}isSmallOrder(){return this.multiplyUnsafe(o).is0()}toBytes(I=!0){return lc(I,"isCompressed"),this.assertValidity(),p(L,this,I)}toHex(I=!0){return Ql(this.toBytes(I))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(I=!0){return this.toBytes(I)}_setWindowSize(I){this.precompute(I)}static normalizeZ(I){return Bl(L,I)}static msm(I,v){return RI(L,r,I,v)}static fromPrivateKey(I){return L.BASE.multiply(yu(r,I))}}L.BASE=new L(s.Gx,s.Gy,i.ONE),L.ZERO=new L(i.ZERO,i.ONE,i.ZERO),L.Fp=i,L.Fn=r;const D=r.BITS,j=new NI(L,e.endo?Math.ceil(D/2):D);return L.BASE.precompute(8),L}function wk(t){return Uint8Array.of(t?2:3)}function _k(t,e){return{secretKey:e.BYTES,publicKey:1+t.BYTES,publicKeyUncompressed:1+2*t.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function K9(t,e={}){const{Fn:n}=t,i=e.randomBytes||US,r=Object.assign(_k(t.Fp,n),{seed:TI(n.ORDER)});function s(p){try{return!!yu(n,p)}catch{return!1}}function o(p,x){const{publicKey:y,publicKeyUncompressed:g}=r;try{const m=p.length;return x===!0&&m!==y||x===!1&&m!==g?!1:!!t.fromBytes(p)}catch{return!1}}function a(p=i(r.seed)){return $7(us(p,r.seed,"seed"),n.ORDER)}function l(p,x=!0){return t.BASE.multiply(yu(n,p)).toBytes(x)}function c(p){const x=a(p);return{secretKey:x,publicKey:l(x)}}function u(p){if(typeof p=="bigint")return!1;if(p instanceof t)return!0;const{secretKey:x,publicKey:y,publicKeyUncompressed:g}=r;if(n.allowedLengths||x===y)return;const m=In("key",p).length;return m===y||m===g}function h(p,x,y=!0){if(u(p)===!0)throw new Error("first arg must be private key");if(u(x)===!1)throw new Error("second arg must be public key");const g=yu(n,p);return t.fromHex(x).multiply(g).toBytes(y)}return Object.freeze({getPublicKey:l,getSharedSecret:h,keygen:c,Point:t,utils:{isValidSecretKey:s,isValidPublicKey:o,randomSecretKey:a,isValidPrivateKey:s,randomPrivateKey:a,normPrivateKeyToScalar:p=>yu(n,p),precompute(p=8,x=t.BASE){return x.precompute(p,!1)}},lengths:r})}function Z9(t,e,n={}){oI(e),$f(n,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});const i=n.randomBytes||US,r=n.hmac||((v,...b)=>yk(e,v,Ls(...b))),{Fp:s,Fn:o}=t,{ORDER:a,BITS:l}=o,{keygen:c,getPublicKey:u,getSharedSecret:h,utils:f,lengths:p}=K9(t,n),x={prehash:!1,lowS:typeof n.lowS=="boolean"?n.lowS:!1,format:void 0,extraEntropy:!1},y="compact";function g(v){const b=a>>Ru;return v>b}function m(v,b){if(!o.isValidNot0(b))throw new Error(`invalid signature ${v}: out of range 1..Point.Fn.ORDER`);return b}function _(v,b){gw(b);const E=p.signature,P=b==="compact"?E:b==="recovered"?E+1:void 0;return us(v,P,`${b} signature`)}class w{constructor(b,E,P){this.r=m("r",b),this.s=m("s",E),P!=null&&(this.recovery=P),Object.freeze(this)}static fromBytes(b,E=y){_(b,E);let P;if(E==="der"){const{r:U,s:T}=uo.toSig(us(b));return new w(U,T)}E==="recovered"&&(P=b[0],E="compact",b=b.subarray(1));const C=o.BYTES,z=b.subarray(0,C),V=b.subarray(C,C*2);return new w(o.fromBytes(z),o.fromBytes(V),P)}static fromHex(b,E){return this.fromBytes(tg(b),E)}addRecoveryBit(b){return new w(this.r,this.s,b)}recoverPublicKey(b){const E=s.ORDER,{r:P,s:C,recovery:z}=this;if(z==null||![0,1,2,3].includes(z))throw new Error("recovery id invalid");if(a*vk<E&&z>1)throw new Error("recovery id is ambiguous for h>1 curve");const U=z===2||z===3?P+a:P;if(!s.isValid(U))throw new Error("recovery id 2 or 3 invalid");const T=s.toBytes(U),G=t.fromBytes(Ls(wk((z&1)===0),T)),K=o.inv(U),ne=N(In("msgHash",b)),Z=o.create(-ne*K),ee=o.create(C*K),me=t.BASE.multiplyUnsafe(Z).add(G.multiplyUnsafe(ee));if(me.is0())throw new Error("point at infinify");return me.assertValidity(),me}hasHighS(){return g(this.s)}toBytes(b=y){if(gw(b),b==="der")return tg(uo.hexFromSig(this));const E=o.toBytes(this.r),P=o.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Ls(Uint8Array.of(this.recovery),E,P)}return Ls(E,P)}toHex(b){return Ql(this.toBytes(b))}assertValidity(){}static fromCompact(b){return w.fromBytes(In("sig",b),"compact")}static fromDER(b){return w.fromBytes(In("sig",b),"der")}normalizeS(){return this.hasHighS()?new w(this.r,o.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Ql(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Ql(this.toBytes("compact"))}}const S=n.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");const E=nx(b),P=b.length*8-l;return P>0?E>>BigInt(P):E},N=n.bits2int_modN||function(b){return o.create(S(b))},k=Gf(l);function R(v){return fw("num < 2^"+l,v,bo,k),o.toBytes(v)}function B(v,b){return us(v,void 0,"message"),b?us(e(v),void 0,"prehashed message"):v}function L(v,b,E){if(["recovered","canonical"].some(Z=>Z in E))throw new Error("sign() legacy options not supported");const{lowS:P,prehash:C,extraEntropy:z}=Oy(E,x);v=B(v,C);const V=N(v),U=yu(o,b),T=[R(U),R(V)];if(z!=null&&z!==!1){const Z=z===!0?i(p.secretKey):z;T.push(In("extraEntropy",Z))}const G=Ls(...T),K=V;function ne(Z){const ee=S(Z);if(!o.isValidNot0(ee))return;const me=o.inv(ee),pe=t.BASE.multiply(ee).toAffine(),Se=o.create(pe.x);if(Se===bo)return;const Re=o.create(me*o.create(K+Se*U));if(Re===bo)return;let it=(pe.x===Se?0:2)|Number(pe.y&Ru),J=Re;return P&&g(Re)&&(J=o.neg(Re),it^=1),new w(Se,J,it)}return{seed:G,k2sig:ne}}function D(v,b,E={}){v=In("message",v);const{seed:P,k2sig:C}=L(v,b,E);return B7(e.outputLen,o.BYTES,r)(P,C)}function j(v){let b;const E=typeof v=="string"||Hf(v),P=!E&&v!==null&&typeof v=="object"&&typeof v.r=="bigint"&&typeof v.s=="bigint";if(!E&&!P)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(P)b=new w(v.r,v.s);else if(E){try{b=w.fromBytes(In("sig",v),"der")}catch(C){if(!(C instanceof uo.Err))throw C}if(!b)try{b=w.fromBytes(In("sig",v),"compact")}catch{return!1}}return b||!1}function Y(v,b,E,P={}){const{lowS:C,prehash:z,format:V}=Oy(P,x);if(E=In("publicKey",E),b=B(In("message",b),z),"strict"in P)throw new Error("options.strict was renamed to lowS");const U=V===void 0?j(v):w.fromBytes(In("sig",v),V);if(U===!1)return!1;try{const T=t.fromBytes(E);if(C&&U.hasHighS())return!1;const{r:G,s:K}=U,ne=N(b),Z=o.inv(K),ee=o.create(ne*Z),me=o.create(G*Z),pe=t.BASE.multiplyUnsafe(ee).add(T.multiplyUnsafe(me));return pe.is0()?!1:o.create(pe.x)===G}catch{return!1}}function I(v,b,E={}){const{prehash:P}=Oy(E,x);return b=B(b,P),w.fromBytes(v,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:c,getPublicKey:u,getSharedSecret:h,utils:f,lengths:p,Point:t,sign:D,verify:Y,recoverPublicKey:I,Signature:w,hash:e})}function Q9(t){const e={a:t.a,b:t.b,p:t.Fp.ORDER,n:t.n,h:t.h,Gx:t.Gx,Gy:t.Gy},n=t.Fp;let i=t.allowedPrivateKeyLengths?Array.from(new Set(t.allowedPrivateKeyLengths.map(o=>Math.ceil(o/2)))):void 0;const r=xc(e.n,{BITS:t.nBitLength,allowedLengths:i,modFromBytes:t.wrapPrivateKey}),s={Fp:n,Fn:r,allowInfinityPoint:t.allowInfinityPoint,endo:t.endo,isTorsionFree:t.isTorsionFree,clearCofactor:t.clearCofactor,fromBytes:t.fromBytes,toBytes:t.toBytes};return{CURVE:e,curveOpts:s}}function J9(t){const{CURVE:e,curveOpts:n}=Q9(t),i={hmac:t.hmac,randomBytes:t.randomBytes,lowS:t.lowS,bits2int:t.bits2int,bits2int_modN:t.bits2int_modN};return{CURVE:e,curveOpts:n,hash:t.hash,ecdsaOpts:i}}function eW(t,e){const n=e.Point;return Object.assign({},e,{ProjectivePoint:n,CURVE:Object.assign({},t,MI(n.Fn.ORDER,n.Fn.BITS))})}function tW(t){const{CURVE:e,curveOpts:n,hash:i,ecdsaOpts:r}=J9(t),s=q9(e,n),o=Z9(s,i,r);return eW(t,o)}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */function nW(t,e){const n=i=>tW({...t,hash:i});return{...n(e),create:n}}/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const nM={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},iW={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},VT=BigInt(2);function rW(t){const e=nM.p,n=BigInt(3),i=BigInt(6),r=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),l=BigInt(88),c=t*t*t%e,u=c*c*t%e,h=Rn(u,n,e)*u%e,f=Rn(h,n,e)*u%e,p=Rn(f,VT,e)*c%e,x=Rn(p,r,e)*p%e,y=Rn(x,s,e)*x%e,g=Rn(y,a,e)*y%e,m=Rn(g,l,e)*g%e,_=Rn(m,a,e)*y%e,w=Rn(_,n,e)*u%e,S=Rn(w,o,e)*x%e,N=Rn(S,i,e)*c%e,k=Rn(N,VT,e);if(!xw.eql(xw.sqr(k),t))throw new Error("Cannot find square root");return k}const xw=xc(nM.p,{sqrt:rW}),sW=nW({...nM,Fp:xw,lowS:!0,endo:iW},hI);Yf.utils.randomPrivateKey;Yf.getPublicKey;function WT(t){try{return Yf.ExtendedPoint.fromHex(t),!0}catch{return!1}}const bk=(t,e)=>Yf.sign(t,e.slice(0,32)),oW=Yf.verify,Zu=t=>vt.isBuffer(t)?t:t instanceof Uint8Array?vt.from(t.buffer,t.byteOffset,t.byteLength):vt.from(t);class aW{constructor(e){Object.assign(this,e)}encode(){return vt.from(zI($m,this))}static decode(e){return VI($m,this,e)}static decodeUnchecked(e){return BI($m,this,e)}}const $m=new Map;var Sk;const lW=32,ka=32;function cW(t){return t._bn!==void 0}let HT=1;class Xe extends aW{constructor(e){if(super({}),this._bn=void 0,cW(e))this._bn=e._bn;else{if(typeof e=="string"){const n=gi.decode(e);if(n.length!=ka)throw new Error("Invalid public key input");this._bn=new UT(n)}else this._bn=new UT(e);if(this._bn.byteLength()>ka)throw new Error("Invalid public key input")}}static unique(){const e=new Xe(HT);return HT+=1,new Xe(e.toBuffer())}equals(e){return this._bn.eq(e._bn)}toBase58(){return gi.encode(this.toBytes())}toJSON(){return this.toBase58()}toBytes(){const e=this.toBuffer();return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}toBuffer(){const e=this._bn.toArrayLike(vt);if(e.length===ka)return e;const n=vt.alloc(32);return e.copy(n,32-e.length),n}get[Symbol.toStringTag](){return`PublicKey(${this.toString()})`}toString(){return this.toBase58()}static async createWithSeed(e,n,i){const r=vt.concat([e.toBuffer(),vt.from(n),i.toBuffer()]),s=OT(r);return new Xe(s)}static createProgramAddressSync(e,n){let i=vt.alloc(0);e.forEach(function(s){if(s.length>lW)throw new TypeError("Max seed length exceeded");i=vt.concat([i,Zu(s)])}),i=vt.concat([i,n.toBuffer(),vt.from("ProgramDerivedAddress")]);const r=OT(i);if(WT(r))throw new Error("Invalid seeds, address must fall off the curve");return new Xe(r)}static async createProgramAddress(e,n){return this.createProgramAddressSync(e,n)}static findProgramAddressSync(e,n){let i=255,r;for(;i!=0;){try{const s=e.concat(vt.from([i]));r=this.createProgramAddressSync(s,n)}catch(s){if(s instanceof TypeError)throw s;i--;continue}return[r,i]}throw new Error("Unable to find a viable program address nonce")}static async findProgramAddress(e,n){return this.findProgramAddressSync(e,n)}static isOnCurve(e){const n=new Xe(e);return WT(n.toBytes())}}Sk=Xe;Xe.default=new Sk("11111111111111111111111111111111");$m.set(Xe,{kind:"struct",fields:[["_bn","u256"]]});new Xe("BPFLoader1111111111111111111111111111111111");const Lu=1232,iM=127,ug=64;class Mk extends Error{constructor(e){super(`Signature ${e} has expired: block height exceeded.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Mk.prototype,"name",{value:"TransactionExpiredBlockheightExceededError"});class Ek extends Error{constructor(e,n){super(`Transaction was not confirmed in ${n.toFixed(2)} seconds. It is unknown if it succeeded or failed. Check signature ${e} using the Solana Explorer or CLI tools.`),this.signature=void 0,this.signature=e}}Object.defineProperty(Ek.prototype,"name",{value:"TransactionExpiredTimeoutError"});class ah extends Error{constructor(e){super(`Signature ${e} has expired: the nonce is no longer valid.`),this.signature=void 0,this.signature=e}}Object.defineProperty(ah.prototype,"name",{value:"TransactionExpiredNonceInvalidError"});class dg{constructor(e,n){this.staticAccountKeys=void 0,this.accountKeysFromLookups=void 0,this.staticAccountKeys=e,this.accountKeysFromLookups=n}keySegments(){const e=[this.staticAccountKeys];return this.accountKeysFromLookups&&(e.push(this.accountKeysFromLookups.writable),e.push(this.accountKeysFromLookups.readonly)),e}get(e){for(const n of this.keySegments()){if(e<n.length)return n[e];e-=n.length}}get length(){return this.keySegments().flat().length}compileInstructions(e){if(this.length>256)throw new Error("Account index overflow encountered during compilation");const i=new Map;this.keySegments().flat().forEach((s,o)=>{i.set(s.toBase58(),o)});const r=s=>{const o=i.get(s.toBase58());if(o===void 0)throw new Error("Encountered an unknown instruction account key during compilation");return o};return e.map(s=>({programIdIndex:r(s.programId),accountKeyIndexes:s.keys.map(o=>r(o.pubkey)),data:s.data}))}}const Mt=(t="publicKey")=>qt(32,t),uW=(t="signature")=>qt(64,t),vu=(t="string")=>{const e=Qe([rt("length"),rt("lengthPadding"),qt(Jl(rt(),-8),"chars")],t),n=e.decode.bind(e),i=e.encode.bind(e),r=e;return r.decode=(s,o)=>n(s,o).chars.toString(),r.encode=(s,o,a)=>{const l={chars:vt.from(s,"utf8")};return i(l,o,a)},r.alloc=s=>rt().span+rt().span+vt.from(s,"utf8").length,r},dW=(t="authorized")=>Qe([Mt("staker"),Mt("withdrawer")],t),hW=(t="lockup")=>Qe([xr("unixTimestamp"),xr("epoch"),Mt("custodian")],t),fW=(t="voteInit")=>Qe([Mt("nodePubkey"),Mt("authorizedVoter"),Mt("authorizedWithdrawer"),Ct("commission")],t),pW=(t="voteAuthorizeWithSeedArgs")=>Qe([rt("voteAuthorizationType"),Mt("currentAuthorityDerivedKeyOwnerPubkey"),vu("currentAuthorityDerivedKeySeed"),Mt("newAuthorized")],t);function yr(t){let e=0,n=0;for(;;){let i=t.shift();if(e|=(i&127)<<n*7,n+=1,!(i&128))break}return e}function vr(t,e){let n=e;for(;;){let i=n&127;if(n>>=7,n==0){t.push(i);break}else i|=128,t.push(i)}}function un(t,e){if(!t)throw new Error(e||"Assertion failed")}class cx{constructor(e,n){this.payer=void 0,this.keyMetaMap=void 0,this.payer=e,this.keyMetaMap=n}static compile(e,n){const i=new Map,r=o=>{const a=o.toBase58();let l=i.get(a);return l===void 0&&(l={isSigner:!1,isWritable:!1,isInvoked:!1},i.set(a,l)),l},s=r(n);s.isSigner=!0,s.isWritable=!0;for(const o of e){r(o.programId).isInvoked=!0;for(const a of o.keys){const l=r(a.pubkey);l.isSigner||(l.isSigner=a.isSigner),l.isWritable||(l.isWritable=a.isWritable)}}return new cx(n,i)}getMessageComponents(){const e=[...this.keyMetaMap.entries()];un(e.length<=256,"Max static account keys length exceeded");const n=e.filter(([,l])=>l.isSigner&&l.isWritable),i=e.filter(([,l])=>l.isSigner&&!l.isWritable),r=e.filter(([,l])=>!l.isSigner&&l.isWritable),s=e.filter(([,l])=>!l.isSigner&&!l.isWritable),o={numRequiredSignatures:n.length+i.length,numReadonlySignedAccounts:i.length,numReadonlyUnsignedAccounts:s.length};{un(n.length>0,"Expected at least one writable signer key");const[l]=n[0];un(l===this.payer.toBase58(),"Expected first writable signer key to be the fee payer")}const a=[...n.map(([l])=>new Xe(l)),...i.map(([l])=>new Xe(l)),...r.map(([l])=>new Xe(l)),...s.map(([l])=>new Xe(l))];return[o,a]}extractTableLookup(e){const[n,i]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&o.isWritable),[r,s]=this.drainKeysFoundInLookupTable(e.state.addresses,o=>!o.isSigner&&!o.isInvoked&&!o.isWritable);if(!(n.length===0&&r.length===0))return[{accountKey:e.key,writableIndexes:n,readonlyIndexes:r},{writable:i,readonly:s}]}drainKeysFoundInLookupTable(e,n){const i=new Array,r=new Array;for(const[s,o]of this.keyMetaMap.entries())if(n(o)){const a=new Xe(s),l=e.findIndex(c=>c.equals(a));l>=0&&(un(l<256,"Max lookup table index exceeded"),i.push(l),r.push(a),this.keyMetaMap.delete(s))}return[i,r]}}const Tk="Reached end of buffer unexpectedly";function go(t){if(t.length===0)throw new Error(Tk);return t.shift()}function wr(t,...e){const[n]=e;if(e.length===2?n+(e[1]??0)>t.length:n>=t.length)throw new Error(Tk);return t.splice(...e)}class Io{constructor(e){this.header=void 0,this.accountKeys=void 0,this.recentBlockhash=void 0,this.instructions=void 0,this.indexToProgramIds=new Map,this.header=e.header,this.accountKeys=e.accountKeys.map(n=>new Xe(n)),this.recentBlockhash=e.recentBlockhash,this.instructions=e.instructions,this.instructions.forEach(n=>this.indexToProgramIds.set(n.programIdIndex,this.accountKeys[n.programIdIndex]))}get version(){return"legacy"}get staticAccountKeys(){return this.accountKeys}get compiledInstructions(){return this.instructions.map(e=>({programIdIndex:e.programIdIndex,accountKeyIndexes:e.accounts,data:gi.decode(e.data)}))}get addressTableLookups(){return[]}getAccountKeys(){return new dg(this.staticAccountKeys)}static compile(e){const n=cx.compile(e.instructions,e.payerKey),[i,r]=n.getMessageComponents(),o=new dg(r).compileInstructions(e.instructions).map(a=>({programIdIndex:a.programIdIndex,accounts:a.accountKeyIndexes,data:gi.encode(a.data)}));return new Io({header:i,accountKeys:r,recentBlockhash:e.recentBlockhash,instructions:o})}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures;if(e>=this.header.numRequiredSignatures){const i=e-n,s=this.accountKeys.length-n-this.header.numReadonlyUnsignedAccounts;return i<s}else{const i=n-this.header.numReadonlySignedAccounts;return e<i}}isProgramId(e){return this.indexToProgramIds.has(e)}programIds(){return[...this.indexToProgramIds.values()]}nonProgramIds(){return this.accountKeys.filter((e,n)=>!this.isProgramId(n))}serialize(){const e=this.accountKeys.length;let n=[];vr(n,e);const i=this.instructions.map(h=>{const{accounts:f,programIdIndex:p}=h,x=Array.from(gi.decode(h.data));let y=[];vr(y,f.length);let g=[];return vr(g,x.length),{programIdIndex:p,keyIndicesCount:vt.from(y),keyIndices:f,dataLength:vt.from(g),data:x}});let r=[];vr(r,i.length);let s=vt.alloc(Lu);vt.from(r).copy(s);let o=r.length;i.forEach(h=>{const p=Qe([Ct("programIdIndex"),qt(h.keyIndicesCount.length,"keyIndicesCount"),Pi(Ct("keyIndex"),h.keyIndices.length,"keyIndices"),qt(h.dataLength.length,"dataLength"),Pi(Ct("userdatum"),h.data.length,"data")]).encode(h,s,o);o+=p}),s=s.slice(0,o);const a=Qe([qt(1,"numRequiredSignatures"),qt(1,"numReadonlySignedAccounts"),qt(1,"numReadonlyUnsignedAccounts"),qt(n.length,"keyCount"),Pi(Mt("key"),e,"keys"),Mt("recentBlockhash")]),l={numRequiredSignatures:vt.from([this.header.numRequiredSignatures]),numReadonlySignedAccounts:vt.from([this.header.numReadonlySignedAccounts]),numReadonlyUnsignedAccounts:vt.from([this.header.numReadonlyUnsignedAccounts]),keyCount:vt.from(n),keys:this.accountKeys.map(h=>Zu(h.toBytes())),recentBlockhash:gi.decode(this.recentBlockhash)};let c=vt.alloc(2048);const u=a.encode(l,c);return s.copy(c,u),c.slice(0,u+s.length)}static from(e){let n=[...e];const i=go(n);if(i!==(i&iM))throw new Error("Versioned messages must be deserialized with VersionedMessage.deserialize()");const r=go(n),s=go(n),o=yr(n);let a=[];for(let f=0;f<o;f++){const p=wr(n,0,ka);a.push(new Xe(vt.from(p)))}const l=wr(n,0,ka),c=yr(n);let u=[];for(let f=0;f<c;f++){const p=go(n),x=yr(n),y=wr(n,0,x),g=yr(n),m=wr(n,0,g),_=gi.encode(vt.from(m));u.push({programIdIndex:p,accounts:y,data:_})}const h={header:{numRequiredSignatures:i,numReadonlySignedAccounts:r,numReadonlyUnsignedAccounts:s},recentBlockhash:gi.encode(vt.from(l)),accountKeys:a,instructions:u};return new Io(h)}}class mf{constructor(e){this.header=void 0,this.staticAccountKeys=void 0,this.recentBlockhash=void 0,this.compiledInstructions=void 0,this.addressTableLookups=void 0,this.header=e.header,this.staticAccountKeys=e.staticAccountKeys,this.recentBlockhash=e.recentBlockhash,this.compiledInstructions=e.compiledInstructions,this.addressTableLookups=e.addressTableLookups}get version(){return 0}get numAccountKeysFromLookups(){let e=0;for(const n of this.addressTableLookups)e+=n.readonlyIndexes.length+n.writableIndexes.length;return e}getAccountKeys(e){let n;if(e&&"accountKeysFromLookups"in e&&e.accountKeysFromLookups){if(this.numAccountKeysFromLookups!=e.accountKeysFromLookups.writable.length+e.accountKeysFromLookups.readonly.length)throw new Error("Failed to get account keys because of a mismatch in the number of account keys from lookups");n=e.accountKeysFromLookups}else if(e&&"addressLookupTableAccounts"in e&&e.addressLookupTableAccounts)n=this.resolveAddressTableLookups(e.addressLookupTableAccounts);else if(this.addressTableLookups.length>0)throw new Error("Failed to get account keys because address table lookups were not resolved");return new dg(this.staticAccountKeys,n)}isAccountSigner(e){return e<this.header.numRequiredSignatures}isAccountWritable(e){const n=this.header.numRequiredSignatures,i=this.staticAccountKeys.length;if(e>=i){const r=e-i,s=this.addressTableLookups.reduce((o,a)=>o+a.writableIndexes.length,0);return r<s}else if(e>=this.header.numRequiredSignatures){const r=e-n,o=i-n-this.header.numReadonlyUnsignedAccounts;return r<o}else{const r=n-this.header.numReadonlySignedAccounts;return e<r}}resolveAddressTableLookups(e){const n={writable:[],readonly:[]};for(const i of this.addressTableLookups){const r=e.find(s=>s.key.equals(i.accountKey));if(!r)throw new Error(`Failed to find address lookup table account for table key ${i.accountKey.toBase58()}`);for(const s of i.writableIndexes)if(s<r.state.addresses.length)n.writable.push(r.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${i.accountKey.toBase58()}`);for(const s of i.readonlyIndexes)if(s<r.state.addresses.length)n.readonly.push(r.state.addresses[s]);else throw new Error(`Failed to find address for index ${s} in address lookup table ${i.accountKey.toBase58()}`)}return n}static compile(e){const n=cx.compile(e.instructions,e.payerKey),i=new Array,r={writable:new Array,readonly:new Array},s=e.addressLookupTableAccounts||[];for(const u of s){const h=n.extractTableLookup(u);if(h!==void 0){const[f,{writable:p,readonly:x}]=h;i.push(f),r.writable.push(...p),r.readonly.push(...x)}}const[o,a]=n.getMessageComponents(),c=new dg(a,r).compileInstructions(e.instructions);return new mf({header:o,staticAccountKeys:a,recentBlockhash:e.recentBlockhash,compiledInstructions:c,addressTableLookups:i})}serialize(){const e=Array();vr(e,this.staticAccountKeys.length);const n=this.serializeInstructions(),i=Array();vr(i,this.compiledInstructions.length);const r=this.serializeAddressTableLookups(),s=Array();vr(s,this.addressTableLookups.length);const o=Qe([Ct("prefix"),Qe([Ct("numRequiredSignatures"),Ct("numReadonlySignedAccounts"),Ct("numReadonlyUnsignedAccounts")],"header"),qt(e.length,"staticAccountKeysLength"),Pi(Mt(),this.staticAccountKeys.length,"staticAccountKeys"),Mt("recentBlockhash"),qt(i.length,"instructionsLength"),qt(n.length,"serializedInstructions"),qt(s.length,"addressTableLookupsLength"),qt(r.length,"serializedAddressTableLookups")]),a=new Uint8Array(Lu),c=o.encode({prefix:128,header:this.header,staticAccountKeysLength:new Uint8Array(e),staticAccountKeys:this.staticAccountKeys.map(u=>u.toBytes()),recentBlockhash:gi.decode(this.recentBlockhash),instructionsLength:new Uint8Array(i),serializedInstructions:n,addressTableLookupsLength:new Uint8Array(s),serializedAddressTableLookups:r},a);return a.slice(0,c)}serializeInstructions(){let e=0;const n=new Uint8Array(Lu);for(const i of this.compiledInstructions){const r=Array();vr(r,i.accountKeyIndexes.length);const s=Array();vr(s,i.data.length);const o=Qe([Ct("programIdIndex"),qt(r.length,"encodedAccountKeyIndexesLength"),Pi(Ct(),i.accountKeyIndexes.length,"accountKeyIndexes"),qt(s.length,"encodedDataLength"),qt(i.data.length,"data")]);e+=o.encode({programIdIndex:i.programIdIndex,encodedAccountKeyIndexesLength:new Uint8Array(r),accountKeyIndexes:i.accountKeyIndexes,encodedDataLength:new Uint8Array(s),data:i.data},n,e)}return n.slice(0,e)}serializeAddressTableLookups(){let e=0;const n=new Uint8Array(Lu);for(const i of this.addressTableLookups){const r=Array();vr(r,i.writableIndexes.length);const s=Array();vr(s,i.readonlyIndexes.length);const o=Qe([Mt("accountKey"),qt(r.length,"encodedWritableIndexesLength"),Pi(Ct(),i.writableIndexes.length,"writableIndexes"),qt(s.length,"encodedReadonlyIndexesLength"),Pi(Ct(),i.readonlyIndexes.length,"readonlyIndexes")]);e+=o.encode({accountKey:i.accountKey.toBytes(),encodedWritableIndexesLength:new Uint8Array(r),writableIndexes:i.writableIndexes,encodedReadonlyIndexesLength:new Uint8Array(s),readonlyIndexes:i.readonlyIndexes},n,e)}return n.slice(0,e)}static deserialize(e){let n=[...e];const i=go(n),r=i&iM;un(i!==r,"Expected versioned message but received legacy message");const s=r;un(s===0,`Expected versioned message with version 0 but found version ${s}`);const o={numRequiredSignatures:go(n),numReadonlySignedAccounts:go(n),numReadonlyUnsignedAccounts:go(n)},a=[],l=yr(n);for(let x=0;x<l;x++)a.push(new Xe(wr(n,0,ka)));const c=gi.encode(wr(n,0,ka)),u=yr(n),h=[];for(let x=0;x<u;x++){const y=go(n),g=yr(n),m=wr(n,0,g),_=yr(n),w=new Uint8Array(wr(n,0,_));h.push({programIdIndex:y,accountKeyIndexes:m,data:w})}const f=yr(n),p=[];for(let x=0;x<f;x++){const y=new Xe(wr(n,0,ka)),g=yr(n),m=wr(n,0,g),_=yr(n),w=wr(n,0,_);p.push({accountKey:y,writableIndexes:m,readonlyIndexes:w})}return new mf({header:o,staticAccountKeys:a,recentBlockhash:c,compiledInstructions:h,addressTableLookups:p})}}const rM={deserializeMessageVersion(t){const e=t[0],n=e&iM;return n===e?"legacy":n},deserialize:t=>{const e=rM.deserializeMessageVersion(t);if(e==="legacy")return Io.from(t);if(e===0)return mf.deserialize(t);throw new Error(`Transaction message version ${e} deserialization is not supported`)}};let Yo=function(t){return t[t.BLOCKHEIGHT_EXCEEDED=0]="BLOCKHEIGHT_EXCEEDED",t[t.PROCESSED=1]="PROCESSED",t[t.TIMED_OUT=2]="TIMED_OUT",t[t.NONCE_INVALID=3]="NONCE_INVALID",t}({});const mW=vt.alloc(ug).fill(0);class GT{constructor(e){this.keys=void 0,this.programId=void 0,this.data=vt.alloc(0),this.programId=e.programId,this.keys=e.keys,e.data&&(this.data=e.data)}toJSON(){return{keys:this.keys.map(({pubkey:e,isSigner:n,isWritable:i})=>({pubkey:e.toJSON(),isSigner:n,isWritable:i})),programId:this.programId.toJSON(),data:[...this.data]}}}class Vr{get signature(){return this.signatures.length>0?this.signatures[0].signature:null}constructor(e){if(this.signatures=[],this.feePayer=void 0,this.instructions=[],this.recentBlockhash=void 0,this.lastValidBlockHeight=void 0,this.nonceInfo=void 0,this.minNonceContextSlot=void 0,this._message=void 0,this._json=void 0,!!e)if(e.feePayer&&(this.feePayer=e.feePayer),e.signatures&&(this.signatures=e.signatures),Object.prototype.hasOwnProperty.call(e,"nonceInfo")){const{minContextSlot:n,nonceInfo:i}=e;this.minNonceContextSlot=n,this.nonceInfo=i}else if(Object.prototype.hasOwnProperty.call(e,"lastValidBlockHeight")){const{blockhash:n,lastValidBlockHeight:i}=e;this.recentBlockhash=n,this.lastValidBlockHeight=i}else{const{recentBlockhash:n,nonceInfo:i}=e;i&&(this.nonceInfo=i),this.recentBlockhash=n}}toJSON(){return{recentBlockhash:this.recentBlockhash||null,feePayer:this.feePayer?this.feePayer.toJSON():null,nonceInfo:this.nonceInfo?{nonce:this.nonceInfo.nonce,nonceInstruction:this.nonceInfo.nonceInstruction.toJSON()}:null,instructions:this.instructions.map(e=>e.toJSON()),signers:this.signatures.map(({publicKey:e})=>e.toJSON())}}add(...e){if(e.length===0)throw new Error("No instructions");return e.forEach(n=>{"instructions"in n?this.instructions=this.instructions.concat(n.instructions):"data"in n&&"programId"in n&&"keys"in n?this.instructions.push(n):this.instructions.push(new GT(n))}),this}compileMessage(){if(this._message&&JSON.stringify(this.toJSON())===JSON.stringify(this._json))return this._message;let e,n;if(this.nonceInfo?(e=this.nonceInfo.nonce,this.instructions[0]!=this.nonceInfo.nonceInstruction?n=[this.nonceInfo.nonceInstruction,...this.instructions]:n=this.instructions):(e=this.recentBlockhash,n=this.instructions),!e)throw new Error("Transaction recentBlockhash required");n.length<1&&console.warn("No instructions provided");let i;if(this.feePayer)i=this.feePayer;else if(this.signatures.length>0&&this.signatures[0].publicKey)i=this.signatures[0].publicKey;else throw new Error("Transaction fee payer required");for(let y=0;y<n.length;y++)if(n[y].programId===void 0)throw new Error(`Transaction instruction index ${y} has undefined program id`);const r=[],s=[];n.forEach(y=>{y.keys.forEach(m=>{s.push({...m})});const g=y.programId.toString();r.includes(g)||r.push(g)}),r.forEach(y=>{s.push({pubkey:new Xe(y),isSigner:!1,isWritable:!1})});const o=[];s.forEach(y=>{const g=y.pubkey.toString(),m=o.findIndex(_=>_.pubkey.toString()===g);m>-1?(o[m].isWritable=o[m].isWritable||y.isWritable,o[m].isSigner=o[m].isSigner||y.isSigner):o.push(y)}),o.sort(function(y,g){if(y.isSigner!==g.isSigner)return y.isSigner?-1:1;if(y.isWritable!==g.isWritable)return y.isWritable?-1:1;const m={localeMatcher:"best fit",usage:"sort",sensitivity:"variant",ignorePunctuation:!1,numeric:!1,caseFirst:"lower"};return y.pubkey.toBase58().localeCompare(g.pubkey.toBase58(),"en",m)});const a=o.findIndex(y=>y.pubkey.equals(i));if(a>-1){const[y]=o.splice(a,1);y.isSigner=!0,y.isWritable=!0,o.unshift(y)}else o.unshift({pubkey:i,isSigner:!0,isWritable:!0});for(const y of this.signatures){const g=o.findIndex(m=>m.pubkey.equals(y.publicKey));if(g>-1)o[g].isSigner||(o[g].isSigner=!0,console.warn("Transaction references a signature that is unnecessary, only the fee payer and instruction signer accounts should sign a transaction. This behavior is deprecated and will throw an error in the next major version release."));else throw new Error(`unknown signer: ${y.publicKey.toString()}`)}let l=0,c=0,u=0;const h=[],f=[];o.forEach(({pubkey:y,isSigner:g,isWritable:m})=>{g?(h.push(y.toString()),l+=1,m||(c+=1)):(f.push(y.toString()),m||(u+=1))});const p=h.concat(f),x=n.map(y=>{const{data:g,programId:m}=y;return{programIdIndex:p.indexOf(m.toString()),accounts:y.keys.map(_=>p.indexOf(_.pubkey.toString())),data:gi.encode(g)}});return x.forEach(y=>{un(y.programIdIndex>=0),y.accounts.forEach(g=>un(g>=0))}),new Io({header:{numRequiredSignatures:l,numReadonlySignedAccounts:c,numReadonlyUnsignedAccounts:u},accountKeys:p,recentBlockhash:e,instructions:x})}_compile(){const e=this.compileMessage(),n=e.accountKeys.slice(0,e.header.numRequiredSignatures);return this.signatures.length===n.length&&this.signatures.every((r,s)=>n[s].equals(r.publicKey))||(this.signatures=n.map(i=>({signature:null,publicKey:i}))),e}serializeMessage(){return this._compile().serialize()}async getEstimatedFee(e){return(await e.getFeeForMessage(this.compileMessage())).value}setSigners(...e){if(e.length===0)throw new Error("No signers");const n=new Set;this.signatures=e.filter(i=>{const r=i.toString();return n.has(r)?!1:(n.add(r),!0)}).map(i=>({signature:null,publicKey:i}))}sign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,i=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),i.push(s))}this.signatures=i.map(s=>({signature:null,publicKey:s.publicKey}));const r=this._compile();this._partialSign(r,...i)}partialSign(...e){if(e.length===0)throw new Error("No signers");const n=new Set,i=[];for(const s of e){const o=s.publicKey.toString();n.has(o)||(n.add(o),i.push(s))}const r=this._compile();this._partialSign(r,...i)}_partialSign(e,...n){const i=e.serialize();n.forEach(r=>{const s=bk(i,r.secretKey);this._addSignature(r.publicKey,Zu(s))})}addSignature(e,n){this._compile(),this._addSignature(e,n)}_addSignature(e,n){un(n.length===64);const i=this.signatures.findIndex(r=>e.equals(r.publicKey));if(i<0)throw new Error(`unknown signer: ${e.toString()}`);this.signatures[i].signature=vt.from(n)}verifySignatures(e=!0){return!this._getMessageSignednessErrors(this.serializeMessage(),e)}_getMessageSignednessErrors(e,n){const i={};for(const{signature:r,publicKey:s}of this.signatures)r===null?n&&(i.missing||(i.missing=[])).push(s):oW(r,e,s.toBytes())||(i.invalid||(i.invalid=[])).push(s);return i.invalid||i.missing?i:void 0}serialize(e){const{requireAllSignatures:n,verifySignatures:i}=Object.assign({requireAllSignatures:!0,verifySignatures:!0},e),r=this.serializeMessage();if(i){const s=this._getMessageSignednessErrors(r,n);if(s){let o="Signature verification failed.";throw s.invalid&&(o+=`
Invalid signature for public key${s.invalid.length===1?"":"(s)"} [\`${s.invalid.map(a=>a.toBase58()).join("`, `")}\`].`),s.missing&&(o+=`
Missing signature for public key${s.missing.length===1?"":"(s)"} [\`${s.missing.map(a=>a.toBase58()).join("`, `")}\`].`),new Error(o)}}return this._serialize(r)}_serialize(e){const{signatures:n}=this,i=[];vr(i,n.length);const r=i.length+n.length*64+e.length,s=vt.alloc(r);return un(n.length<256),vt.from(i).copy(s,0),n.forEach(({signature:o},a)=>{o!==null&&(un(o.length===64,"signature has invalid length"),vt.from(o).copy(s,i.length+a*64))}),e.copy(s,i.length+n.length*64),un(s.length<=Lu,`Transaction too large: ${s.length} > ${Lu}`),s}get keys(){return un(this.instructions.length===1),this.instructions[0].keys.map(e=>e.pubkey)}get programId(){return un(this.instructions.length===1),this.instructions[0].programId}get data(){return un(this.instructions.length===1),this.instructions[0].data}static from(e){let n=[...e];const i=yr(n);let r=[];for(let s=0;s<i;s++){const o=wr(n,0,ug);r.push(gi.encode(vt.from(o)))}return Vr.populate(Io.from(n),r)}static populate(e,n=[]){const i=new Vr;return i.recentBlockhash=e.recentBlockhash,e.header.numRequiredSignatures>0&&(i.feePayer=e.accountKeys[0]),n.forEach((r,s)=>{const o={signature:r==gi.encode(mW)?null:gi.decode(r),publicKey:e.accountKeys[s]};i.signatures.push(o)}),e.instructions.forEach(r=>{const s=r.accounts.map(o=>{const a=e.accountKeys[o];return{pubkey:a,isSigner:i.signatures.some(l=>l.publicKey.toString()===a.toString())||e.isAccountSigner(o),isWritable:e.isAccountWritable(o)}});i.instructions.push(new GT({keys:s,programId:e.accountKeys[r.programIdIndex],data:gi.decode(r.data)}))}),i._message=e,i._json=i.toJSON(),i}}class gf{get version(){return this.message.version}constructor(e,n){if(this.signatures=void 0,this.message=void 0,n!==void 0)un(n.length===e.header.numRequiredSignatures,"Expected signatures length to be equal to the number of required signatures"),this.signatures=n;else{const i=[];for(let r=0;r<e.header.numRequiredSignatures;r++)i.push(new Uint8Array(ug));this.signatures=i}this.message=e}serialize(){const e=this.message.serialize(),n=Array();vr(n,this.signatures.length);const i=Qe([qt(n.length,"encodedSignaturesLength"),Pi(uW(),this.signatures.length,"signatures"),qt(e.length,"serializedMessage")]),r=new Uint8Array(2048),s=i.encode({encodedSignaturesLength:new Uint8Array(n),signatures:this.signatures,serializedMessage:e},r);return r.slice(0,s)}static deserialize(e){let n=[...e];const i=[],r=yr(n);for(let o=0;o<r;o++)i.push(new Uint8Array(wr(n,0,ug)));const s=rM.deserialize(new Uint8Array(n));return new gf(s,i)}sign(e){const n=this.message.serialize(),i=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures);for(const r of e){const s=i.findIndex(o=>o.equals(r.publicKey));un(s>=0,`Cannot sign with non signer key ${r.publicKey.toBase58()}`),this.signatures[s]=bk(n,r.secretKey)}}addSignature(e,n){un(n.byteLength===64,"Signature must be 64 bytes long");const r=this.message.staticAccountKeys.slice(0,this.message.header.numRequiredSignatures).findIndex(s=>s.equals(e));un(r>=0,`Can not add signature; \`${e.toBase58()}\` is not required to sign this transaction`),this.signatures[r]=n}}const gW=160,xW=64,yW=gW/xW,vW=1e3/yW;new Xe("SysvarC1ock11111111111111111111111111111111");new Xe("SysvarEpochSchedu1e111111111111111111111111");new Xe("Sysvar1nstructions1111111111111111111111111");new Xe("SysvarRecentB1ockHashes11111111111111111111");new Xe("SysvarRent111111111111111111111111111111111");new Xe("SysvarRewards111111111111111111111111111111");new Xe("SysvarS1otHashes111111111111111111111111111");new Xe("SysvarS1otHistory11111111111111111111111111");new Xe("SysvarStakeHistory1111111111111111111111111");class $T extends Error{constructor({action:e,signature:n,transactionMessage:i,logs:r}){const s=r?`Logs: 
${JSON.stringify(r.slice(-10),null,2)}. `:"",o="\nCatch the `SendTransactionError` and call `getLogs()` on it for full details.";let a;switch(e){case"send":a=`Transaction ${n} resulted in an error. 
${i}. `+s+o;break;case"simulate":a=`Simulation failed. 
Message: ${i}. 
`+s+o;break;default:a=`Unknown action '${(l=>l)(e)}'`}super(a),this.signature=void 0,this.transactionMessage=void 0,this.transactionLogs=void 0,this.signature=n,this.transactionMessage=i,this.transactionLogs=r||void 0}get transactionError(){return{message:this.transactionMessage,logs:Array.isArray(this.transactionLogs)?this.transactionLogs:void 0}}get logs(){const e=this.transactionLogs;if(!(e!=null&&typeof e=="object"&&"then"in e))return e}async getLogs(e){return Array.isArray(this.transactionLogs)||(this.transactionLogs=new Promise((n,i)=>{e.getTransaction(this.signature).then(r=>{if(r&&r.meta&&r.meta.logMessages){const s=r.meta.logMessages;this.transactionLogs=s,n(s)}else i(new Error("Log messages not found"))}).catch(i)})),await this.transactionLogs}}class tt extends Error{constructor({code:e,message:n,data:i},r){super(r!=null?`${r}: ${n}`:n),this.code=void 0,this.data=void 0,this.code=e,this.data=i,this.name="SolanaJSONRPCError"}}function Xc(t){return new Promise(e=>setTimeout(e,t))}const wW=di("lamportsPerSignature"),Ak=Qe([rt("version"),rt("state"),Mt("authorizedPubkey"),Mt("nonce"),Qe([wW],"feeCalculator")]);Ak.span;class sM{constructor(e){this.authorizedPubkey=void 0,this.nonce=void 0,this.feeCalculator=void 0,this.authorizedPubkey=e.authorizedPubkey,this.nonce=e.nonce,this.feeCalculator=e.feeCalculator}static fromAccountData(e){const n=Ak.decode(Zu(e),0);return new sM({authorizedPubkey:new Xe(n.authorizedPubkey),nonce:new Xe(n.nonce).toString(),feeCalculator:n.feeCalculator})}}function Qu(t){const e=qt(8,t),n=e.decode.bind(e),i=e.encode.bind(e),r=e,s=o9();return r.decode=(o,a)=>{const l=n(o,a);return s.decode(l)},r.encode=(o,a,l)=>{const c=s.encode(o);return i(c,a,l)},r}Object.freeze({Create:{index:0,layout:Qe([rt("instruction"),xr("lamports"),xr("space"),Mt("programId")])},Assign:{index:1,layout:Qe([rt("instruction"),Mt("programId")])},Transfer:{index:2,layout:Qe([rt("instruction"),Qu("lamports")])},CreateWithSeed:{index:3,layout:Qe([rt("instruction"),Mt("base"),vu("seed"),xr("lamports"),xr("space"),Mt("programId")])},AdvanceNonceAccount:{index:4,layout:Qe([rt("instruction")])},WithdrawNonceAccount:{index:5,layout:Qe([rt("instruction"),xr("lamports")])},InitializeNonceAccount:{index:6,layout:Qe([rt("instruction"),Mt("authorized")])},AuthorizeNonceAccount:{index:7,layout:Qe([rt("instruction"),Mt("authorized")])},Allocate:{index:8,layout:Qe([rt("instruction"),xr("space")])},AllocateWithSeed:{index:9,layout:Qe([rt("instruction"),Mt("base"),vu("seed"),xr("space"),Mt("programId")])},AssignWithSeed:{index:10,layout:Qe([rt("instruction"),Mt("base"),vu("seed"),Mt("programId")])},TransferWithSeed:{index:11,layout:Qe([rt("instruction"),Qu("lamports"),vu("seed"),Mt("programId")])},UpgradeNonceAccount:{index:12,layout:Qe([rt("instruction")])}});new Xe("11111111111111111111111111111111");new Xe("BPFLoader2111111111111111111111111111111111");function _W(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var jy,YT;function bW(){if(YT)return jy;YT=1;var t=Object.prototype.toString,e=Object.keys||function(i){var r=[];for(var s in i)r.push(s);return r};function n(i,r){var s,o,a,l,c,u,h;if(i===!0)return"true";if(i===!1)return"false";switch(typeof i){case"object":if(i===null)return null;if(i.toJSON&&typeof i.toJSON=="function")return n(i.toJSON(),r);if(h=t.call(i),h==="[object Array]"){for(a="[",o=i.length-1,s=0;s<o;s++)a+=n(i[s],!0)+",";return o>-1&&(a+=n(i[s],!0)),a+"]"}else if(h==="[object Object]"){for(l=e(i).sort(),o=l.length,a="",s=0;s<o;)c=l[s],u=n(i[c],!1),u!==void 0&&(a&&(a+=","),a+=JSON.stringify(c)+":"+u),s++;return"{"+a+"}"}else return JSON.stringify(i);case"function":case"undefined":return r?null:void 0;case"string":return JSON.stringify(i);default:return isFinite(i)?i:null}}return jy=function(i){var r=n(i,!1);if(r!==void 0)return""+r},jy}var SW=bW(),XT=_W(SW);const Vd=32;function Fy(t){let e=0;for(;t>1;)t/=2,e++;return e}function MW(t){return t===0?1:(t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,t|=t>>32,t+1)}class EW{constructor(e,n,i,r,s){this.slotsPerEpoch=void 0,this.leaderScheduleSlotOffset=void 0,this.warmup=void 0,this.firstNormalEpoch=void 0,this.firstNormalSlot=void 0,this.slotsPerEpoch=e,this.leaderScheduleSlotOffset=n,this.warmup=i,this.firstNormalEpoch=r,this.firstNormalSlot=s}getEpoch(e){return this.getEpochAndSlotIndex(e)[0]}getEpochAndSlotIndex(e){if(e<this.firstNormalSlot){const n=Fy(MW(e+Vd+1))-Fy(Vd)-1,i=this.getSlotsInEpoch(n),r=e-(i-Vd);return[n,r]}else{const n=e-this.firstNormalSlot,i=Math.floor(n/this.slotsPerEpoch),r=this.firstNormalEpoch+i,s=n%this.slotsPerEpoch;return[r,s]}}getFirstSlotInEpoch(e){return e<=this.firstNormalEpoch?(Math.pow(2,e)-1)*Vd:(e-this.firstNormalEpoch)*this.slotsPerEpoch+this.firstNormalSlot}getLastSlotInEpoch(e){return this.getFirstSlotInEpoch(e)+this.getSlotsInEpoch(e)-1}getSlotsInEpoch(e){return e<this.firstNormalEpoch?Math.pow(2,e+Fy(Vd)):this.slotsPerEpoch}}var TW=globalThis.fetch;class AW extends G9{constructor(e,n,i){const r=s=>{const o=W9(s,{autoconnect:!0,max_reconnects:5,reconnect:!0,reconnect_interval:1e3,...n});return"socket"in o?this.underlyingSocket=o.socket:this.underlyingSocket=o,o};super(r,e,n,i),this.underlyingSocket=void 0}call(...e){var i;const n=(i=this.underlyingSocket)==null?void 0:i.readyState;return n===1?super.call(...e):Promise.reject(new Error("Tried to call a JSON-RPC method `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}notify(...e){var i;const n=(i=this.underlyingSocket)==null?void 0:i.readyState;return n===1?super.notify(...e):Promise.reject(new Error("Tried to send a JSON-RPC notification `"+e[0]+"` but the socket was not `CONNECTING` or `OPEN` (`readyState` was "+n+")"))}}function CW(t,e){let n;try{n=t.layout.decode(e)}catch(i){throw new Error("invalid instruction; "+i)}if(n.typeIndex!==t.index)throw new Error(`invalid account data; account type mismatch ${n.typeIndex} != ${t.index}`);return n}const qT=56;class KT{constructor(e){this.key=void 0,this.state=void 0,this.key=e.key,this.state=e.state}isActive(){const e=BigInt("0xffffffffffffffff");return this.state.deactivationSlot===e}static deserialize(e){const n=CW(NW,e),i=e.length-qT;un(i>=0,"lookup table is invalid"),un(i%32===0,"lookup table is invalid");const r=i/32,{addresses:s}=Qe([Pi(Mt(),r,"addresses")]).decode(e.slice(qT));return{deactivationSlot:n.deactivationSlot,lastExtendedSlot:n.lastExtendedSlot,lastExtendedSlotStartIndex:n.lastExtendedStartIndex,authority:n.authority.length!==0?new Xe(n.authority[0]):void 0,addresses:s.map(o=>new Xe(o))}}}const NW={index:1,layout:Qe([rt("typeIndex"),Qu("deactivationSlot"),di("lastExtendedSlot"),Ct("lastExtendedStartIndex"),Ct(),Pi(Mt(),Jl(Ct(),-1),"authority")])},RW=/^[^:]+:\/\/([^:[]+|\[[^\]]+\])(:\d+)?(.*)/i;function LW(t){const e=t.match(RW);if(e==null)throw TypeError(`Failed to validate endpoint URL \`${t}\``);const[n,i,r,s]=e,o=t.startsWith("https:")?"wss:":"ws:",a=r==null?null:parseInt(r.slice(1),10),l=a==null?"":`:${a+1}`;return`${o}//${i}${l}${s}`}const An=Kf(eM(Xe),ke(),t=>new Xe(t)),Ck=tM([ke(),Sn("base64")]),oM=Kf(eM(vt),Ck,t=>vt.from(t[0],"base64")),IW=30*1e3;function kW(t){if(/^https?:/.test(t)===!1)throw new TypeError("Endpoint URL must start with `http:` or `https:`.");return t}function Zt(t){let e,n;if(typeof t=="string")e=t;else if(t){const{commitment:i,...r}=t;e=i,n=r}return{commitment:e,config:n}}function ZT(t){return t.map(e=>"memcmp"in e?{...e,memcmp:{...e.memcmp,encoding:e.memcmp.encoding??"base58"}}:e)}function Nk(t){return Gi([Me({jsonrpc:Sn("2.0"),id:ke(),result:t}),Me({jsonrpc:Sn("2.0"),id:ke(),error:Me({code:wd(),message:ke(),data:st(f9())})})])}const PW=Nk(wd());function bt(t){return Kf(Nk(t),PW,e=>"error"in e?e:{...e,result:Ue(e.result,t)})}function Bn(t){return bt(Me({context:Me({slot:ae()}),value:t}))}function ux(t){return Me({context:Me({slot:ae()}),value:t})}function zy(t,e){return t===0?new mf({header:e.header,staticAccountKeys:e.accountKeys.map(n=>new Xe(n)),recentBlockhash:e.recentBlockhash,compiledInstructions:e.instructions.map(n=>({programIdIndex:n.programIdIndex,accountKeyIndexes:n.accounts,data:gi.decode(n.data)})),addressTableLookups:e.addressTableLookups}):new Io(e)}const DW=Me({foundation:ae(),foundationTerm:ae(),initial:ae(),taper:ae(),terminal:ae()}),BW=bt(ze(Ve(Me({epoch:ae(),effectiveSlot:ae(),amount:ae(),postBalance:ae(),commission:st(Ve(ae()))})))),UW=ze(Me({slot:ae(),prioritizationFee:ae()})),OW=Me({total:ae(),validator:ae(),foundation:ae(),epoch:ae()}),jW=Me({epoch:ae(),slotIndex:ae(),slotsInEpoch:ae(),absoluteSlot:ae(),blockHeight:st(ae()),transactionCount:st(ae())}),FW=Me({slotsPerEpoch:ae(),leaderScheduleSlotOffset:ae(),warmup:Hs(),firstNormalEpoch:ae(),firstNormalSlot:ae()}),zW=ck(ke(),ze(ae())),wc=Ve(Gi([Me({}),ke()])),VW=Me({err:wc}),WW=Sn("receivedSignature"),HW=Me({"solana-core":ke(),"feature-set":st(ae())}),GW=Me({program:ke(),programId:An,parsed:wd()}),$W=Me({programId:An,accounts:ze(An),data:ke()}),QT=Bn(Me({err:Ve(Gi([Me({}),ke()])),logs:Ve(ze(ke())),accounts:st(Ve(ze(Ve(Me({executable:Hs(),owner:ke(),lamports:ae(),data:ze(ke()),rentEpoch:st(ae())}))))),unitsConsumed:st(ae()),returnData:st(Ve(Me({programId:ke(),data:tM([ke(),Sn("base64")])}))),innerInstructions:st(Ve(ze(Me({index:ae(),instructions:ze(Gi([GW,$W]))}))))})),YW=Bn(Me({byIdentity:ck(ke(),ze(ae())),range:Me({firstSlot:ae(),lastSlot:ae()})}));function XW(t,e,n,i,r,s){const o=n||TW;let a;s!=null&&console.warn("You have supplied an `httpAgent` when creating a `Connection` in a browser environment.It has been ignored; `httpAgent` is only used in Node environments.");let l;return i&&(l=async(u,h)=>{const f=await new Promise((p,x)=>{try{i(u,h,(y,g)=>p([y,g]))}catch(y){x(y)}});return await o(...f)}),new F9(async(u,h)=>{const f={method:"POST",body:u,agent:a,headers:Object.assign({"Content-Type":"application/json"},e||{},XH)};try{let p=5,x,y=500;for(;l?x=await l(t,f):x=await o(t,f),!(x.status!==429||r===!0||(p-=1,p===0));)console.error(`Server responded with ${x.status} ${x.statusText}.  Retrying after ${y}ms delay...`),await Xc(y),y*=2;const g=await x.text();x.ok?h(null,g):h(new Error(`${x.status} ${x.statusText}: ${g}`))}catch(p){p instanceof Error&&h(p)}},{})}function qW(t){return(e,n)=>new Promise((i,r)=>{t.request(e,n,(s,o)=>{if(s){r(s);return}i(o)})})}function KW(t){return e=>new Promise((n,i)=>{e.length===0&&n([]);const r=e.map(s=>t.request(s.methodName,s.args));t.request(r,(s,o)=>{if(s){i(s);return}n(o)})})}const ZW=bt(DW),QW=bt(OW),JW=bt(UW),eH=bt(jW),tH=bt(FW),nH=bt(zW),iH=bt(ae()),rH=Bn(Me({total:ae(),circulating:ae(),nonCirculating:ae(),nonCirculatingAccounts:ze(An)})),yw=Me({amount:ke(),uiAmount:Ve(ae()),decimals:ae(),uiAmountString:st(ke())}),sH=Bn(ze(Me({address:An,amount:ke(),uiAmount:Ve(ae()),decimals:ae(),uiAmountString:st(ke())}))),oH=Bn(ze(Me({pubkey:An,account:Me({executable:Hs(),owner:An,lamports:ae(),data:oM,rentEpoch:ae()})}))),vw=Me({program:ke(),parsed:wd(),space:ae()}),aH=Bn(ze(Me({pubkey:An,account:Me({executable:Hs(),owner:An,lamports:ae(),data:vw,rentEpoch:ae()})}))),lH=Bn(ze(Me({lamports:ae(),address:An}))),xf=Me({executable:Hs(),owner:An,lamports:ae(),data:oM,rentEpoch:ae()}),cH=Me({pubkey:An,account:xf}),uH=Kf(Gi([eM(vt),vw]),Gi([Ck,vw]),t=>Array.isArray(t)?Ue(t,oM):t),ww=Me({executable:Hs(),owner:An,lamports:ae(),data:uH,rentEpoch:ae()}),dH=Me({pubkey:An,account:ww}),hH=Me({state:Gi([Sn("active"),Sn("inactive"),Sn("activating"),Sn("deactivating")]),active:ae(),inactive:ae()}),fH=bt(ze(Me({signature:ke(),slot:ae(),err:wc,memo:Ve(ke()),blockTime:st(Ve(ae()))}))),pH=bt(ze(Me({signature:ke(),slot:ae(),err:wc,memo:Ve(ke()),blockTime:st(Ve(ae()))}))),mH=Me({subscription:ae(),result:ux(xf)}),gH=Me({pubkey:An,account:xf}),xH=Me({subscription:ae(),result:ux(gH)}),yH=Me({parent:ae(),slot:ae(),root:ae()}),vH=Me({subscription:ae(),result:yH}),wH=Gi([Me({type:Gi([Sn("firstShredReceived"),Sn("completed"),Sn("optimisticConfirmation"),Sn("root")]),slot:ae(),timestamp:ae()}),Me({type:Sn("createdBank"),parent:ae(),slot:ae(),timestamp:ae()}),Me({type:Sn("frozen"),slot:ae(),timestamp:ae(),stats:Me({numTransactionEntries:ae(),numSuccessfulTransactions:ae(),numFailedTransactions:ae(),maxTransactionsPerEntry:ae()})}),Me({type:Sn("dead"),slot:ae(),timestamp:ae(),err:ke()})]),_H=Me({subscription:ae(),result:wH}),bH=Me({subscription:ae(),result:ux(Gi([VW,WW]))}),SH=Me({subscription:ae(),result:ae()}),MH=Me({pubkey:ke(),gossip:Ve(ke()),tpu:Ve(ke()),rpc:Ve(ke()),version:Ve(ke())}),JT=Me({votePubkey:ke(),nodePubkey:ke(),activatedStake:ae(),epochVoteAccount:Hs(),epochCredits:ze(tM([ae(),ae(),ae()])),commission:ae(),lastVote:ae(),rootSlot:Ve(ae())}),EH=bt(Me({current:ze(JT),delinquent:ze(JT)})),TH=Gi([Sn("processed"),Sn("confirmed"),Sn("finalized")]),AH=Me({slot:ae(),confirmations:Ve(ae()),err:wc,confirmationStatus:st(TH)}),CH=Bn(ze(Ve(AH))),NH=bt(ae()),Rk=Me({accountKey:An,writableIndexes:ze(ae()),readonlyIndexes:ze(ae())}),aM=Me({signatures:ze(ke()),message:Me({accountKeys:ze(ke()),header:Me({numRequiredSignatures:ae(),numReadonlySignedAccounts:ae(),numReadonlyUnsignedAccounts:ae()}),instructions:ze(Me({accounts:ze(ae()),data:ke(),programIdIndex:ae()})),recentBlockhash:ke(),addressTableLookups:st(ze(Rk))})}),Lk=Me({pubkey:An,signer:Hs(),writable:Hs(),source:st(Gi([Sn("transaction"),Sn("lookupTable")]))}),Ik=Me({accountKeys:ze(Lk),signatures:ze(ke())}),kk=Me({parsed:wd(),program:ke(),programId:An}),Pk=Me({accounts:ze(An),data:ke(),programId:An}),RH=Gi([Pk,kk]),LH=Gi([Me({parsed:wd(),program:ke(),programId:ke()}),Me({accounts:ze(ke()),data:ke(),programId:ke()})]),Dk=Kf(RH,LH,t=>"accounts"in t?Ue(t,Pk):Ue(t,kk)),Bk=Me({signatures:ze(ke()),message:Me({accountKeys:ze(Lk),instructions:ze(Dk),recentBlockhash:ke(),addressTableLookups:st(Ve(ze(Rk)))})}),hg=Me({accountIndex:ae(),mint:ke(),owner:st(ke()),programId:st(ke()),uiTokenAmount:yw}),Uk=Me({writable:ze(An),readonly:ze(An)}),dx=Me({err:wc,fee:ae(),innerInstructions:st(Ve(ze(Me({index:ae(),instructions:ze(Me({accounts:ze(ae()),data:ke(),programIdIndex:ae()}))})))),preBalances:ze(ae()),postBalances:ze(ae()),logMessages:st(Ve(ze(ke()))),preTokenBalances:st(Ve(ze(hg))),postTokenBalances:st(Ve(ze(hg))),loadedAddresses:st(Uk),computeUnitsConsumed:st(ae()),costUnits:st(ae())}),lM=Me({err:wc,fee:ae(),innerInstructions:st(Ve(ze(Me({index:ae(),instructions:ze(Dk)})))),preBalances:ze(ae()),postBalances:ze(ae()),logMessages:st(Ve(ze(ke()))),preTokenBalances:st(Ve(ze(hg))),postTokenBalances:st(Ve(ze(hg))),loadedAddresses:st(Uk),computeUnitsConsumed:st(ae()),costUnits:st(ae())}),_d=Gi([Sn(0),Sn("legacy")]),_c=Me({pubkey:ke(),lamports:ae(),postBalance:Ve(ae()),rewardType:Ve(ke()),commission:st(Ve(ae()))}),IH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),transactions:ze(Me({transaction:aM,meta:Ve(dx),version:st(_d)})),rewards:st(ze(_c)),blockTime:Ve(ae()),blockHeight:Ve(ae())}))),kH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),rewards:st(ze(_c)),blockTime:Ve(ae()),blockHeight:Ve(ae())}))),PH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),transactions:ze(Me({transaction:Ik,meta:Ve(dx),version:st(_d)})),rewards:st(ze(_c)),blockTime:Ve(ae()),blockHeight:Ve(ae())}))),DH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),transactions:ze(Me({transaction:Bk,meta:Ve(lM),version:st(_d)})),rewards:st(ze(_c)),blockTime:Ve(ae()),blockHeight:Ve(ae())}))),BH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),transactions:ze(Me({transaction:Ik,meta:Ve(lM),version:st(_d)})),rewards:st(ze(_c)),blockTime:Ve(ae()),blockHeight:Ve(ae())}))),UH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),rewards:st(ze(_c)),blockTime:Ve(ae()),blockHeight:Ve(ae())}))),OH=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),transactions:ze(Me({transaction:aM,meta:Ve(dx)})),rewards:st(ze(_c)),blockTime:Ve(ae())}))),eA=bt(Ve(Me({blockhash:ke(),previousBlockhash:ke(),parentSlot:ae(),signatures:ze(ke()),blockTime:Ve(ae())}))),Vy=bt(Ve(Me({slot:ae(),meta:Ve(dx),blockTime:st(Ve(ae())),transaction:aM,version:st(_d)}))),Fp=bt(Ve(Me({slot:ae(),transaction:Bk,meta:Ve(lM),blockTime:st(Ve(ae())),version:st(_d)}))),jH=Bn(Me({blockhash:ke(),lastValidBlockHeight:ae()})),FH=Bn(Hs()),zH=Me({slot:ae(),numTransactions:ae(),numSlots:ae(),samplePeriodSecs:ae()}),VH=bt(ze(zH)),WH=Bn(Ve(Me({feeCalculator:Me({lamportsPerSignature:ae()})}))),HH=bt(ke()),GH=bt(ke()),$H=Me({err:wc,logs:ze(ke()),signature:ke()}),YH=Me({result:ux($H),subscription:ae()}),XH={"solana-client":"js/1.0.0-maintenance"};class Ok{constructor(e,n){this._commitment=void 0,this._confirmTransactionInitialTimeout=void 0,this._rpcEndpoint=void 0,this._rpcWsEndpoint=void 0,this._rpcClient=void 0,this._rpcRequest=void 0,this._rpcBatchRequest=void 0,this._rpcWebSocket=void 0,this._rpcWebSocketConnected=!1,this._rpcWebSocketHeartbeat=null,this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketGeneration=0,this._disableBlockhashCaching=!1,this._pollingBlockhash=!1,this._blockhashInfo={latestBlockhash:null,lastFetch:0,transactionSignatures:[],simulatedSignatures:[]},this._nextClientSubscriptionId=0,this._subscriptionDisposeFunctionsByClientSubscriptionId={},this._subscriptionHashByClientSubscriptionId={},this._subscriptionStateChangeCallbacksByHash={},this._subscriptionCallbacksByServerSubscriptionId={},this._subscriptionsByHash={},this._subscriptionsAutoDisposedByRpc=new Set,this.getBlockHeight=(()=>{const c={};return async u=>{const{commitment:h,config:f}=Zt(u),p=this._buildArgs([],h,void 0,f),x=XT(p);return c[x]=c[x]??(async()=>{try{const y=await this._rpcRequest("getBlockHeight",p),g=Ue(y,bt(ae()));if("error"in g)throw new tt(g.error,"failed to get block height information");return g.result}finally{delete c[x]}})(),await c[x]}})();let i,r,s,o,a,l;n&&typeof n=="string"?this._commitment=n:n&&(this._commitment=n.commitment,this._confirmTransactionInitialTimeout=n.confirmTransactionInitialTimeout,i=n.wsEndpoint,r=n.httpHeaders,s=n.fetch,o=n.fetchMiddleware,a=n.disableRetryOnRateLimit,l=n.httpAgent),this._rpcEndpoint=kW(e),this._rpcWsEndpoint=i||LW(e),this._rpcClient=XW(e,r,s,o,a,l),this._rpcRequest=qW(this._rpcClient),this._rpcBatchRequest=KW(this._rpcClient),this._rpcWebSocket=new AW(this._rpcWsEndpoint,{autoconnect:!1,max_reconnects:1/0}),this._rpcWebSocket.on("open",this._wsOnOpen.bind(this)),this._rpcWebSocket.on("error",this._wsOnError.bind(this)),this._rpcWebSocket.on("close",this._wsOnClose.bind(this)),this._rpcWebSocket.on("accountNotification",this._wsOnAccountNotification.bind(this)),this._rpcWebSocket.on("programNotification",this._wsOnProgramAccountNotification.bind(this)),this._rpcWebSocket.on("slotNotification",this._wsOnSlotNotification.bind(this)),this._rpcWebSocket.on("slotsUpdatesNotification",this._wsOnSlotUpdatesNotification.bind(this)),this._rpcWebSocket.on("signatureNotification",this._wsOnSignatureNotification.bind(this)),this._rpcWebSocket.on("rootNotification",this._wsOnRootNotification.bind(this)),this._rpcWebSocket.on("logsNotification",this._wsOnLogsNotification.bind(this))}get commitment(){return this._commitment}get rpcEndpoint(){return this._rpcEndpoint}async getBalanceAndContext(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgs([e.toBase58()],i,void 0,r),o=await this._rpcRequest("getBalance",s),a=Ue(o,Bn(ae()));if("error"in a)throw new tt(a.error,`failed to get balance for ${e.toBase58()}`);return a.result}async getBalance(e,n){return await this.getBalanceAndContext(e,n).then(i=>i.value).catch(i=>{throw new Error("failed to get balance of account "+e.toBase58()+": "+i)})}async getBlockTime(e){const n=await this._rpcRequest("getBlockTime",[e]),i=Ue(n,bt(Ve(ae())));if("error"in i)throw new tt(i.error,`failed to get block time for slot ${e}`);return i.result}async getMinimumLedgerSlot(){const e=await this._rpcRequest("minimumLedgerSlot",[]),n=Ue(e,bt(ae()));if("error"in n)throw new tt(n.error,"failed to get minimum ledger slot");return n.result}async getFirstAvailableBlock(){const e=await this._rpcRequest("getFirstAvailableBlock",[]),n=Ue(e,iH);if("error"in n)throw new tt(n.error,"failed to get first available block");return n.result}async getSupply(e){let n={};typeof e=="string"?n={commitment:e}:e?n={...e,commitment:e&&e.commitment||this.commitment}:n={commitment:this.commitment};const i=await this._rpcRequest("getSupply",[n]),r=Ue(i,rH);if("error"in r)throw new tt(r.error,"failed to get supply");return r.result}async getTokenSupply(e,n){const i=this._buildArgs([e.toBase58()],n),r=await this._rpcRequest("getTokenSupply",i),s=Ue(r,Bn(yw));if("error"in s)throw new tt(s.error,"failed to get token supply");return s.result}async getTokenAccountBalance(e,n){const i=this._buildArgs([e.toBase58()],n),r=await this._rpcRequest("getTokenAccountBalance",i),s=Ue(r,Bn(yw));if("error"in s)throw new tt(s.error,"failed to get token account balance");return s.result}async getTokenAccountsByOwner(e,n,i){const{commitment:r,config:s}=Zt(i);let o=[e.toBase58()];"mint"in n?o.push({mint:n.mint.toBase58()}):o.push({programId:n.programId.toBase58()});const a=this._buildArgs(o,r,"base64",s),l=await this._rpcRequest("getTokenAccountsByOwner",a),c=Ue(l,oH);if("error"in c)throw new tt(c.error,`failed to get token accounts owned by account ${e.toBase58()}`);return c.result}async getParsedTokenAccountsByOwner(e,n,i){let r=[e.toBase58()];"mint"in n?r.push({mint:n.mint.toBase58()}):r.push({programId:n.programId.toBase58()});const s=this._buildArgs(r,i,"jsonParsed"),o=await this._rpcRequest("getTokenAccountsByOwner",s),a=Ue(o,aH);if("error"in a)throw new tt(a.error,`failed to get token accounts owned by account ${e.toBase58()}`);return a.result}async getLargestAccounts(e){const n={...e,commitment:e&&e.commitment||this.commitment},i=n.filter||n.commitment?[n]:[],r=await this._rpcRequest("getLargestAccounts",i),s=Ue(r,lH);if("error"in s)throw new tt(s.error,"failed to get largest accounts");return s.result}async getTokenLargestAccounts(e,n){const i=this._buildArgs([e.toBase58()],n),r=await this._rpcRequest("getTokenLargestAccounts",i),s=Ue(r,sH);if("error"in s)throw new tt(s.error,"failed to get token largest accounts");return s.result}async getAccountInfoAndContext(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgs([e.toBase58()],i,"base64",r),o=await this._rpcRequest("getAccountInfo",s),a=Ue(o,Bn(Ve(xf)));if("error"in a)throw new tt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getParsedAccountInfo(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgs([e.toBase58()],i,"jsonParsed",r),o=await this._rpcRequest("getAccountInfo",s),a=Ue(o,Bn(Ve(ww)));if("error"in a)throw new tt(a.error,`failed to get info about account ${e.toBase58()}`);return a.result}async getAccountInfo(e,n){try{return(await this.getAccountInfoAndContext(e,n)).value}catch(i){throw new Error("failed to get info about account "+e.toBase58()+": "+i)}}async getMultipleParsedAccounts(e,n){const{commitment:i,config:r}=Zt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],i,"jsonParsed",r),a=await this._rpcRequest("getMultipleAccounts",o),l=Ue(a,Bn(ze(Ve(ww))));if("error"in l)throw new tt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfoAndContext(e,n){const{commitment:i,config:r}=Zt(n),s=e.map(c=>c.toBase58()),o=this._buildArgs([s],i,"base64",r),a=await this._rpcRequest("getMultipleAccounts",o),l=Ue(a,Bn(ze(Ve(xf))));if("error"in l)throw new tt(l.error,`failed to get info for accounts ${s}`);return l.result}async getMultipleAccountsInfo(e,n){return(await this.getMultipleAccountsInfoAndContext(e,n)).value}async getStakeActivation(e,n,i){const{commitment:r,config:s}=Zt(n),o=this._buildArgs([e.toBase58()],r,void 0,{...s,epoch:i??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getStakeActivation",o),l=Ue(a,bt(hH));if("error"in l)throw new tt(l.error,`failed to get Stake Activation ${e.toBase58()}`);return l.result}async getProgramAccounts(e,n){const{commitment:i,config:r}=Zt(n),{encoding:s,...o}=r||{},a=this._buildArgs([e.toBase58()],i,s||"base64",{...o,...o.filters?{filters:ZT(o.filters)}:null}),l=await this._rpcRequest("getProgramAccounts",a),c=ze(cH),u=o.withContext===!0?Ue(l,Bn(c)):Ue(l,bt(c));if("error"in u)throw new tt(u.error,`failed to get accounts owned by program ${e.toBase58()}`);return u.result}async getParsedProgramAccounts(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgs([e.toBase58()],i,"jsonParsed",r),o=await this._rpcRequest("getProgramAccounts",s),a=Ue(o,bt(ze(dH)));if("error"in a)throw new tt(a.error,`failed to get accounts owned by program ${e.toBase58()}`);return a.result}async confirmTransaction(e,n){var s;let i;if(typeof e=="string")i=e;else{const o=e;if((s=o.abortSignal)!=null&&s.aborted)return Promise.reject(o.abortSignal.reason);i=o.signature}let r;try{r=gi.decode(i)}catch{throw new Error("signature must be base58 encoded: "+i)}return un(r.length===64,"signature has invalid length"),typeof e=="string"?await this.confirmTransactionUsingLegacyTimeoutStrategy({commitment:n||this.commitment,signature:i}):"lastValidBlockHeight"in e?await this.confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:n||this.commitment,strategy:e}):await this.confirmTransactionUsingDurableNonceStrategy({commitment:n||this.commitment,strategy:e})}getCancellationPromise(e){return new Promise((n,i)=>{e!=null&&(e.aborted?i(e.reason):e.addEventListener("abort",()=>{i(e.reason)}))})}getTransactionConfirmationPromise({commitment:e,signature:n}){let i,r,s=!1;const o=new Promise((l,c)=>{try{i=this.onSignature(n,(h,f)=>{i=void 0;const p={context:f,value:h};l({__type:Yo.PROCESSED,response:p})},e);const u=new Promise(h=>{i==null?h():r=this._onSubscriptionStateChange(i,f=>{f==="subscribed"&&h()})});(async()=>{if(await u,s)return;const h=await this.getSignatureStatus(n);if(s||h==null)return;const{context:f,value:p}=h;if(p!=null)if(p!=null&&p.err)c(p.err);else{switch(e){case"confirmed":case"single":case"singleGossip":{if(p.confirmationStatus==="processed")return;break}case"finalized":case"max":case"root":{if(p.confirmationStatus==="processed"||p.confirmationStatus==="confirmed")return;break}case"processed":case"recent":}s=!0,l({__type:Yo.PROCESSED,response:{context:f,value:p}})}})()}catch(u){c(u)}});return{abortConfirmation:()=>{r&&(r(),r=void 0),i!=null&&(this.removeSignatureListener(i),i=void 0)},confirmationPromise:o}}async confirmTransactionUsingBlockHeightExceedanceStrategy({commitment:e,strategy:{abortSignal:n,lastValidBlockHeight:i,signature:r}}){let s=!1;const o=new Promise(h=>{const f=async()=>{try{return await this.getBlockHeight(e)}catch{return-1}};(async()=>{let p=await f();if(!s){for(;p<=i;)if(await Xc(1e3),s||(p=await f(),s))return;h({__type:Yo.BLOCKHEIGHT_EXCEEDED})}})()}),{abortConfirmation:a,confirmationPromise:l}=this.getTransactionConfirmationPromise({commitment:e,signature:r}),c=this.getCancellationPromise(n);let u;try{const h=await Promise.race([c,l,o]);if(h.__type===Yo.PROCESSED)u=h.response;else throw new Mk(r)}finally{s=!0,a()}return u}async confirmTransactionUsingDurableNonceStrategy({commitment:e,strategy:{abortSignal:n,minContextSlot:i,nonceAccountPubkey:r,nonceValue:s,signature:o}}){let a=!1;const l=new Promise(p=>{let x=s,y=null;const g=async()=>{try{const{context:m,value:_}=await this.getNonceAndContext(r,{commitment:e,minContextSlot:i});return y=m.slot,_==null?void 0:_.nonce}catch{return x}};(async()=>{if(x=await g(),!a)for(;;){if(s!==x){p({__type:Yo.NONCE_INVALID,slotInWhichNonceDidAdvance:y});return}if(await Xc(2e3),a||(x=await g(),a))return}})()}),{abortConfirmation:c,confirmationPromise:u}=this.getTransactionConfirmationPromise({commitment:e,signature:o}),h=this.getCancellationPromise(n);let f;try{const p=await Promise.race([h,u,l]);if(p.__type===Yo.PROCESSED)f=p.response;else{let x;for(;;){const y=await this.getSignatureStatus(o);if(y==null)break;if(y.context.slot<(p.slotInWhichNonceDidAdvance??i)){await Xc(400);continue}x=y;break}if(x!=null&&x.value){const y=e||"finalized",{confirmationStatus:g}=x.value;switch(y){case"processed":case"recent":if(g!=="processed"&&g!=="confirmed"&&g!=="finalized")throw new ah(o);break;case"confirmed":case"single":case"singleGossip":if(g!=="confirmed"&&g!=="finalized")throw new ah(o);break;case"finalized":case"max":case"root":if(g!=="finalized")throw new ah(o);break;default:}f={context:x.context,value:{err:x.value.err}}}else throw new ah(o)}}finally{a=!0,c()}return f}async confirmTransactionUsingLegacyTimeoutStrategy({commitment:e,signature:n}){let i;const r=new Promise(l=>{let c=this._confirmTransactionInitialTimeout||6e4;switch(e){case"processed":case"recent":case"single":case"confirmed":case"singleGossip":{c=this._confirmTransactionInitialTimeout||3e4;break}}i=setTimeout(()=>l({__type:Yo.TIMED_OUT,timeoutMs:c}),c)}),{abortConfirmation:s,confirmationPromise:o}=this.getTransactionConfirmationPromise({commitment:e,signature:n});let a;try{const l=await Promise.race([o,r]);if(l.__type===Yo.PROCESSED)a=l.response;else throw new Ek(n,l.timeoutMs/1e3)}finally{clearTimeout(i),s()}return a}async getClusterNodes(){const e=await this._rpcRequest("getClusterNodes",[]),n=Ue(e,bt(ze(MH)));if("error"in n)throw new tt(n.error,"failed to get cluster nodes");return n.result}async getVoteAccounts(e){const n=this._buildArgs([],e),i=await this._rpcRequest("getVoteAccounts",n),r=Ue(i,EH);if("error"in r)throw new tt(r.error,"failed to get vote accounts");return r.result}async getSlot(e){const{commitment:n,config:i}=Zt(e),r=this._buildArgs([],n,void 0,i),s=await this._rpcRequest("getSlot",r),o=Ue(s,bt(ae()));if("error"in o)throw new tt(o.error,"failed to get slot");return o.result}async getSlotLeader(e){const{commitment:n,config:i}=Zt(e),r=this._buildArgs([],n,void 0,i),s=await this._rpcRequest("getSlotLeader",r),o=Ue(s,bt(ke()));if("error"in o)throw new tt(o.error,"failed to get slot leader");return o.result}async getSlotLeaders(e,n){const i=[e,n],r=await this._rpcRequest("getSlotLeaders",i),s=Ue(r,bt(ze(An)));if("error"in s)throw new tt(s.error,"failed to get slot leaders");return s.result}async getSignatureStatus(e,n){const{context:i,value:r}=await this.getSignatureStatuses([e],n);un(r.length===1);const s=r[0];return{context:i,value:s}}async getSignatureStatuses(e,n){const i=[e];n&&i.push(n);const r=await this._rpcRequest("getSignatureStatuses",i),s=Ue(r,CH);if("error"in s)throw new tt(s.error,"failed to get signature status");return s.result}async getTransactionCount(e){const{commitment:n,config:i}=Zt(e),r=this._buildArgs([],n,void 0,i),s=await this._rpcRequest("getTransactionCount",r),o=Ue(s,bt(ae()));if("error"in o)throw new tt(o.error,"failed to get transaction count");return o.result}async getTotalSupply(e){return(await this.getSupply({commitment:e,excludeNonCirculatingAccountsList:!0})).value.total}async getInflationGovernor(e){const n=this._buildArgs([],e),i=await this._rpcRequest("getInflationGovernor",n),r=Ue(i,ZW);if("error"in r)throw new tt(r.error,"failed to get inflation");return r.result}async getInflationReward(e,n,i){const{commitment:r,config:s}=Zt(i),o=this._buildArgs([e.map(c=>c.toBase58())],r,void 0,{...s,epoch:n??(s==null?void 0:s.epoch)}),a=await this._rpcRequest("getInflationReward",o),l=Ue(a,BW);if("error"in l)throw new tt(l.error,"failed to get inflation reward");return l.result}async getInflationRate(){const e=await this._rpcRequest("getInflationRate",[]),n=Ue(e,QW);if("error"in n)throw new tt(n.error,"failed to get inflation rate");return n.result}async getEpochInfo(e){const{commitment:n,config:i}=Zt(e),r=this._buildArgs([],n,void 0,i),s=await this._rpcRequest("getEpochInfo",r),o=Ue(s,eH);if("error"in o)throw new tt(o.error,"failed to get epoch info");return o.result}async getEpochSchedule(){const e=await this._rpcRequest("getEpochSchedule",[]),n=Ue(e,tH);if("error"in n)throw new tt(n.error,"failed to get epoch schedule");const i=n.result;return new EW(i.slotsPerEpoch,i.leaderScheduleSlotOffset,i.warmup,i.firstNormalEpoch,i.firstNormalSlot)}async getLeaderSchedule(){const e=await this._rpcRequest("getLeaderSchedule",[]),n=Ue(e,nH);if("error"in n)throw new tt(n.error,"failed to get leader schedule");return n.result}async getMinimumBalanceForRentExemption(e,n){const i=this._buildArgs([e],n),r=await this._rpcRequest("getMinimumBalanceForRentExemption",i),s=Ue(r,NH);return"error"in s?(console.warn("Unable to fetch minimum balance for rent exemption"),0):s.result}async getRecentBlockhashAndContext(e){const{context:n,value:{blockhash:i}}=await this.getLatestBlockhashAndContext(e);return{context:n,value:{blockhash:i,feeCalculator:{get lamportsPerSignature(){throw new Error("The capability to fetch `lamportsPerSignature` using the `getRecentBlockhash` API is no longer offered by the network. Use the `getFeeForMessage` API to obtain the fee for a given message.")},toJSON(){return{}}}}}}async getRecentPerformanceSamples(e){const n=await this._rpcRequest("getRecentPerformanceSamples",e?[e]:[]),i=Ue(n,VH);if("error"in i)throw new tt(i.error,"failed to get recent performance samples");return i.result}async getFeeCalculatorForBlockhash(e,n){const i=this._buildArgs([e],n),r=await this._rpcRequest("getFeeCalculatorForBlockhash",i),s=Ue(r,WH);if("error"in s)throw new tt(s.error,"failed to get fee calculator");const{context:o,value:a}=s.result;return{context:o,value:a!==null?a.feeCalculator:null}}async getFeeForMessage(e,n){const i=Zu(e.serialize()).toString("base64"),r=this._buildArgs([i],n),s=await this._rpcRequest("getFeeForMessage",r),o=Ue(s,Bn(Ve(ae())));if("error"in o)throw new tt(o.error,"failed to get fee for message");if(o.result===null)throw new Error("invalid blockhash");return o.result}async getRecentPrioritizationFees(e){var o;const n=(o=e==null?void 0:e.lockedWritableAccounts)==null?void 0:o.map(a=>a.toBase58()),i=n!=null&&n.length?[n]:[],r=await this._rpcRequest("getRecentPrioritizationFees",i),s=Ue(r,JW);if("error"in s)throw new tt(s.error,"failed to get recent prioritization fees");return s.result}async getRecentBlockhash(e){try{return(await this.getRecentBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhash(e){try{return(await this.getLatestBlockhashAndContext(e)).value}catch(n){throw new Error("failed to get recent blockhash: "+n)}}async getLatestBlockhashAndContext(e){const{commitment:n,config:i}=Zt(e),r=this._buildArgs([],n,void 0,i),s=await this._rpcRequest("getLatestBlockhash",r),o=Ue(s,jH);if("error"in o)throw new tt(o.error,"failed to get latest blockhash");return o.result}async isBlockhashValid(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgs([e],i,void 0,r),o=await this._rpcRequest("isBlockhashValid",s),a=Ue(o,FH);if("error"in a)throw new tt(a.error,"failed to determine if the blockhash `"+e+"`is valid");return a.result}async getVersion(){const e=await this._rpcRequest("getVersion",[]),n=Ue(e,bt(HW));if("error"in n)throw new tt(n.error,"failed to get version");return n.result}async getGenesisHash(){const e=await this._rpcRequest("getGenesisHash",[]),n=Ue(e,bt(ke()));if("error"in n)throw new tt(n.error,"failed to get genesis hash");return n.result}async getBlock(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgsAtLeastConfirmed([e],i,void 0,r),o=await this._rpcRequest("getBlock",s);try{switch(r==null?void 0:r.transactionDetails){case"accounts":{const a=Ue(o,PH);if("error"in a)throw a.error;return a.result}case"none":{const a=Ue(o,kH);if("error"in a)throw a.error;return a.result}default:{const a=Ue(o,IH);if("error"in a)throw a.error;const{result:l}=a;return l?{...l,transactions:l.transactions.map(({transaction:c,meta:u,version:h})=>({meta:u,transaction:{...c,message:zy(h,c.message)},version:h}))}:null}}}catch(a){throw new tt(a,"failed to get confirmed block")}}async getParsedBlock(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgsAtLeastConfirmed([e],i,"jsonParsed",r),o=await this._rpcRequest("getBlock",s);try{switch(r==null?void 0:r.transactionDetails){case"accounts":{const a=Ue(o,BH);if("error"in a)throw a.error;return a.result}case"none":{const a=Ue(o,UH);if("error"in a)throw a.error;return a.result}default:{const a=Ue(o,DH);if("error"in a)throw a.error;return a.result}}}catch(a){throw new tt(a,"failed to get block")}}async getBlockProduction(e){let n,i;if(typeof e=="string")i=e;else if(e){const{commitment:a,...l}=e;i=a,n=l}const r=this._buildArgs([],i,"base64",n),s=await this._rpcRequest("getBlockProduction",r),o=Ue(s,YW);if("error"in o)throw new tt(o.error,"failed to get block production information");return o.result}async getTransaction(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgsAtLeastConfirmed([e],i,void 0,r),o=await this._rpcRequest("getTransaction",s),a=Ue(o,Vy);if("error"in a)throw new tt(a.error,"failed to get transaction");const l=a.result;return l&&{...l,transaction:{...l.transaction,message:zy(l.version,l.transaction.message)}}}async getParsedTransaction(e,n){const{commitment:i,config:r}=Zt(n),s=this._buildArgsAtLeastConfirmed([e],i,"jsonParsed",r),o=await this._rpcRequest("getTransaction",s),a=Ue(o,Fp);if("error"in a)throw new tt(a.error,"failed to get transaction");return a.result}async getParsedTransactions(e,n){const{commitment:i,config:r}=Zt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],i,"jsonParsed",r)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=Ue(l,Fp);if("error"in c)throw new tt(c.error,"failed to get transactions");return c.result})}async getTransactions(e,n){const{commitment:i,config:r}=Zt(n),s=e.map(l=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([l],i,void 0,r)}));return(await this._rpcBatchRequest(s)).map(l=>{const c=Ue(l,Vy);if("error"in c)throw new tt(c.error,"failed to get transactions");const u=c.result;return u&&{...u,transaction:{...u.transaction,message:zy(u.version,u.transaction.message)}}})}async getConfirmedBlock(e,n){const i=this._buildArgsAtLeastConfirmed([e],n),r=await this._rpcRequest("getBlock",i),s=Ue(r,OH);if("error"in s)throw new tt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");const a={...o,transactions:o.transactions.map(({transaction:l,meta:c})=>{const u=new Io(l.message);return{meta:c,transaction:{...l,message:u}}})};return{...a,transactions:a.transactions.map(({transaction:l,meta:c})=>({meta:c,transaction:Vr.populate(l.message,l.signatures)}))}}async getBlocks(e,n,i){const r=this._buildArgsAtLeastConfirmed(n!==void 0?[e,n]:[e],i),s=await this._rpcRequest("getBlocks",r),o=Ue(s,bt(ze(ae())));if("error"in o)throw new tt(o.error,"failed to get blocks");return o.result}async getBlockSignatures(e,n){const i=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",i),s=Ue(r,eA);if("error"in s)throw new tt(s.error,"failed to get block");const o=s.result;if(!o)throw new Error("Block "+e+" not found");return o}async getConfirmedBlockSignatures(e,n){const i=this._buildArgsAtLeastConfirmed([e],n,void 0,{transactionDetails:"signatures",rewards:!1}),r=await this._rpcRequest("getBlock",i),s=Ue(r,eA);if("error"in s)throw new tt(s.error,"failed to get confirmed block");const o=s.result;if(!o)throw new Error("Confirmed block "+e+" not found");return o}async getConfirmedTransaction(e,n){const i=this._buildArgsAtLeastConfirmed([e],n),r=await this._rpcRequest("getTransaction",i),s=Ue(r,Vy);if("error"in s)throw new tt(s.error,"failed to get transaction");const o=s.result;if(!o)return o;const a=new Io(o.transaction.message),l=o.transaction.signatures;return{...o,transaction:Vr.populate(a,l)}}async getParsedConfirmedTransaction(e,n){const i=this._buildArgsAtLeastConfirmed([e],n,"jsonParsed"),r=await this._rpcRequest("getTransaction",i),s=Ue(r,Fp);if("error"in s)throw new tt(s.error,"failed to get confirmed transaction");return s.result}async getParsedConfirmedTransactions(e,n){const i=e.map(o=>({methodName:"getTransaction",args:this._buildArgsAtLeastConfirmed([o],n,"jsonParsed")}));return(await this._rpcBatchRequest(i)).map(o=>{const a=Ue(o,Fp);if("error"in a)throw new tt(a.error,"failed to get confirmed transactions");return a.result})}async getConfirmedSignaturesForAddress(e,n,i){let r={},s=await this.getFirstAvailableBlock();for(;!("until"in r)&&(n--,!(n<=0||n<s));)try{const l=await this.getConfirmedBlockSignatures(n,"finalized");l.signatures.length>0&&(r.until=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}let o=await this.getSlot("finalized");for(;!("before"in r)&&(i++,!(i>o));)try{const l=await this.getConfirmedBlockSignatures(i);l.signatures.length>0&&(r.before=l.signatures[l.signatures.length-1].toString())}catch(l){if(l instanceof Error&&l.message.includes("skipped"))continue;throw l}return(await this.getConfirmedSignaturesForAddress2(e,r)).map(l=>l.signature)}async getConfirmedSignaturesForAddress2(e,n,i){const r=this._buildArgsAtLeastConfirmed([e.toBase58()],i,void 0,n),s=await this._rpcRequest("getConfirmedSignaturesForAddress2",r),o=Ue(s,fH);if("error"in o)throw new tt(o.error,"failed to get confirmed signatures for address");return o.result}async getSignaturesForAddress(e,n,i){const r=this._buildArgsAtLeastConfirmed([e.toBase58()],i,void 0,n),s=await this._rpcRequest("getSignaturesForAddress",r),o=Ue(s,pH);if("error"in o)throw new tt(o.error,"failed to get signatures for address");return o.result}async getAddressLookupTable(e,n){const{context:i,value:r}=await this.getAccountInfoAndContext(e,n);let s=null;return r!==null&&(s=new KT({key:e,state:KT.deserialize(r.data)})),{context:i,value:s}}async getNonceAndContext(e,n){const{context:i,value:r}=await this.getAccountInfoAndContext(e,n);let s=null;return r!==null&&(s=sM.fromAccountData(r.data)),{context:i,value:s}}async getNonce(e,n){return await this.getNonceAndContext(e,n).then(i=>i.value).catch(i=>{throw new Error("failed to get nonce for account "+e.toBase58()+": "+i)})}async requestAirdrop(e,n){const i=await this._rpcRequest("requestAirdrop",[e.toBase58(),n]),r=Ue(i,HH);if("error"in r)throw new tt(r.error,`airdrop to ${e.toBase58()} failed`);return r.result}async _blockhashWithExpiryBlockHeight(e){if(!e){for(;this._pollingBlockhash;)await Xc(100);const i=Date.now()-this._blockhashInfo.lastFetch>=IW;if(this._blockhashInfo.latestBlockhash!==null&&!i)return this._blockhashInfo.latestBlockhash}return await this._pollNewBlockhash()}async _pollNewBlockhash(){this._pollingBlockhash=!0;try{const e=Date.now(),n=this._blockhashInfo.latestBlockhash,i=n?n.blockhash:null;for(let r=0;r<50;r++){const s=await this.getLatestBlockhash("finalized");if(i!==s.blockhash)return this._blockhashInfo={latestBlockhash:s,lastFetch:Date.now(),transactionSignatures:[],simulatedSignatures:[]},s;await Xc(vW/2)}throw new Error(`Unable to obtain a new blockhash after ${Date.now()-e}ms`)}finally{this._pollingBlockhash=!1}}async getStakeMinimumDelegation(e){const{commitment:n,config:i}=Zt(e),r=this._buildArgs([],n,"base64",i),s=await this._rpcRequest("getStakeMinimumDelegation",r),o=Ue(s,Bn(ae()));if("error"in o)throw new tt(o.error,"failed to get stake minimum delegation");return o.result}async simulateTransaction(e,n,i){if("message"in e){const y=e.serialize(),g=vt.from(y).toString("base64");if(Array.isArray(n)||i!==void 0)throw new Error("Invalid arguments");const m=n||{};m.encoding="base64","commitment"in m||(m.commitment=this.commitment),n&&typeof n=="object"&&"innerInstructions"in n&&(m.innerInstructions=n.innerInstructions);const _=[g,m],w=await this._rpcRequest("simulateTransaction",_),S=Ue(w,QT);if("error"in S)throw new Error("failed to simulate transaction: "+S.error.message);return S.result}let r;if(e instanceof Vr){let x=e;r=new Vr,r.feePayer=x.feePayer,r.instructions=e.instructions,r.nonceInfo=x.nonceInfo,r.signatures=x.signatures}else r=Vr.populate(e),r._message=r._json=void 0;if(n!==void 0&&!Array.isArray(n))throw new Error("Invalid arguments");const s=n;if(r.nonceInfo&&s)r.sign(...s);else{let x=this._disableBlockhashCaching;for(;;){const y=await this._blockhashWithExpiryBlockHeight(x);if(r.lastValidBlockHeight=y.lastValidBlockHeight,r.recentBlockhash=y.blockhash,!s)break;if(r.sign(...s),!r.signature)throw new Error("!signature");const g=r.signature.toString("base64");if(!this._blockhashInfo.simulatedSignatures.includes(g)&&!this._blockhashInfo.transactionSignatures.includes(g)){this._blockhashInfo.simulatedSignatures.push(g);break}else x=!0}}const o=r._compile(),a=o.serialize(),c=r._serialize(a).toString("base64"),u={encoding:"base64",commitment:this.commitment};if(i){const x=(Array.isArray(i)?i:o.nonProgramIds()).map(y=>y.toBase58());u.accounts={encoding:"base64",addresses:x}}s&&(u.sigVerify=!0),n&&typeof n=="object"&&"innerInstructions"in n&&(u.innerInstructions=n.innerInstructions);const h=[c,u],f=await this._rpcRequest("simulateTransaction",h),p=Ue(f,QT);if("error"in p){let x;if("data"in p.error&&(x=p.error.data.logs,x&&Array.isArray(x))){const y=`
    `,g=y+x.join(y);console.error(p.error.message,g)}throw new $T({action:"simulate",signature:"",transactionMessage:p.error.message,logs:x})}return p.result}async sendTransaction(e,n,i){if("version"in e){if(n&&Array.isArray(n))throw new Error("Invalid arguments");const o=e.serialize();return await this.sendRawTransaction(o,n)}if(n===void 0||!Array.isArray(n))throw new Error("Invalid arguments");const r=n;if(e.nonceInfo)e.sign(...r);else{let o=this._disableBlockhashCaching;for(;;){const a=await this._blockhashWithExpiryBlockHeight(o);if(e.lastValidBlockHeight=a.lastValidBlockHeight,e.recentBlockhash=a.blockhash,e.sign(...r),!e.signature)throw new Error("!signature");const l=e.signature.toString("base64");if(this._blockhashInfo.transactionSignatures.includes(l))o=!0;else{this._blockhashInfo.transactionSignatures.push(l);break}}}const s=e.serialize();return await this.sendRawTransaction(s,i)}async sendRawTransaction(e,n){const i=Zu(e).toString("base64");return await this.sendEncodedTransaction(i,n)}async sendEncodedTransaction(e,n){const i={encoding:"base64"},r=n&&n.skipPreflight,s=r===!0?"processed":n&&n.preflightCommitment||this.commitment;n&&n.maxRetries!=null&&(i.maxRetries=n.maxRetries),n&&n.minContextSlot!=null&&(i.minContextSlot=n.minContextSlot),r&&(i.skipPreflight=r),s&&(i.preflightCommitment=s);const o=[e,i],a=await this._rpcRequest("sendTransaction",o),l=Ue(a,GH);if("error"in l){let c;throw"data"in l.error&&(c=l.error.data.logs),new $T({action:r?"send":"simulate",signature:"",transactionMessage:l.error.message,logs:c})}return l.result}_wsOnOpen(){this._rpcWebSocketConnected=!0,this._rpcWebSocketHeartbeat=setInterval(()=>{(async()=>{try{await this._rpcWebSocket.notify("ping")}catch{}})()},5e3),this._updateSubscriptions()}_wsOnError(e){this._rpcWebSocketConnected=!1,console.error("ws error:",e.message)}_wsOnClose(e){if(this._rpcWebSocketConnected=!1,this._rpcWebSocketGeneration=(this._rpcWebSocketGeneration+1)%Number.MAX_SAFE_INTEGER,this._rpcWebSocketIdleTimeout&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null),this._rpcWebSocketHeartbeat&&(clearInterval(this._rpcWebSocketHeartbeat),this._rpcWebSocketHeartbeat=null),e===1e3){this._updateSubscriptions();return}this._subscriptionCallbacksByServerSubscriptionId={},Object.entries(this._subscriptionsByHash).forEach(([n,i])=>{this._setSubscription(n,{...i,state:"pending"})})}_setSubscription(e,n){var r;const i=(r=this._subscriptionsByHash[e])==null?void 0:r.state;if(this._subscriptionsByHash[e]=n,i!==n.state){const s=this._subscriptionStateChangeCallbacksByHash[e];s&&s.forEach(o=>{try{o(n.state)}catch{}})}}_onSubscriptionStateChange(e,n){var s;const i=this._subscriptionHashByClientSubscriptionId[e];if(i==null)return()=>{};const r=(s=this._subscriptionStateChangeCallbacksByHash)[i]||(s[i]=new Set);return r.add(n),()=>{r.delete(n),r.size===0&&delete this._subscriptionStateChangeCallbacksByHash[i]}}async _updateSubscriptions(){if(Object.keys(this._subscriptionsByHash).length===0){this._rpcWebSocketConnected&&(this._rpcWebSocketConnected=!1,this._rpcWebSocketIdleTimeout=setTimeout(()=>{this._rpcWebSocketIdleTimeout=null;try{this._rpcWebSocket.close()}catch(i){i instanceof Error&&console.log(`Error when closing socket connection: ${i.message}`)}},500));return}if(this._rpcWebSocketIdleTimeout!==null&&(clearTimeout(this._rpcWebSocketIdleTimeout),this._rpcWebSocketIdleTimeout=null,this._rpcWebSocketConnected=!0),!this._rpcWebSocketConnected){this._rpcWebSocket.connect();return}const e=this._rpcWebSocketGeneration,n=()=>e===this._rpcWebSocketGeneration;await Promise.all(Object.keys(this._subscriptionsByHash).map(async i=>{const r=this._subscriptionsByHash[i];if(r!==void 0)switch(r.state){case"pending":case"unsubscribed":if(r.callbacks.size===0){delete this._subscriptionsByHash[i],r.state==="unsubscribed"&&delete this._subscriptionCallbacksByServerSubscriptionId[r.serverSubscriptionId],await this._updateSubscriptions();return}await(async()=>{const{args:s,method:o}=r;try{this._setSubscription(i,{...r,state:"subscribing"});const a=await this._rpcWebSocket.call(o,s);this._setSubscription(i,{...r,serverSubscriptionId:a,state:"subscribed"}),this._subscriptionCallbacksByServerSubscriptionId[a]=r.callbacks,await this._updateSubscriptions()}catch(a){if(console.error(`Received ${a instanceof Error?"":"JSON-RPC "}error calling \`${o}\``,{args:s,error:a}),!n())return;this._setSubscription(i,{...r,state:"pending"}),await this._updateSubscriptions()}})();break;case"subscribed":r.callbacks.size===0&&await(async()=>{const{serverSubscriptionId:s,unsubscribeMethod:o}=r;if(this._subscriptionsAutoDisposedByRpc.has(s))this._subscriptionsAutoDisposedByRpc.delete(s);else{this._setSubscription(i,{...r,state:"unsubscribing"}),this._setSubscription(i,{...r,state:"unsubscribing"});try{await this._rpcWebSocket.call(o,[s])}catch(a){if(a instanceof Error&&console.error(`${o} error:`,a.message),!n())return;this._setSubscription(i,{...r,state:"subscribed"}),await this._updateSubscriptions();return}}this._setSubscription(i,{...r,state:"unsubscribed"}),await this._updateSubscriptions()})();break}}))}_handleServerNotification(e,n){const i=this._subscriptionCallbacksByServerSubscriptionId[e];i!==void 0&&i.forEach(r=>{try{r(...n)}catch(s){console.error(s)}})}_wsOnAccountNotification(e){const{result:n,subscription:i}=Ue(e,mH);this._handleServerNotification(i,[n.value,n.context])}_makeSubscription(e,n){const i=this._nextClientSubscriptionId++,r=XT([e.method,n]),s=this._subscriptionsByHash[r];return s===void 0?this._subscriptionsByHash[r]={...e,args:n,callbacks:new Set([e.callback]),state:"pending"}:s.callbacks.add(e.callback),this._subscriptionHashByClientSubscriptionId[i]=r,this._subscriptionDisposeFunctionsByClientSubscriptionId[i]=async()=>{delete this._subscriptionDisposeFunctionsByClientSubscriptionId[i],delete this._subscriptionHashByClientSubscriptionId[i];const o=this._subscriptionsByHash[r];un(o!==void 0,`Could not find a \`Subscription\` when tearing down client subscription #${i}`),o.callbacks.delete(e.callback),await this._updateSubscriptions()},this._updateSubscriptions(),i}onAccountChange(e,n,i){const{commitment:r,config:s}=Zt(i),o=this._buildArgs([e.toBase58()],r||this._commitment||"finalized","base64",s);return this._makeSubscription({callback:n,method:"accountSubscribe",unsubscribeMethod:"accountUnsubscribe"},o)}async removeAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"account change")}_wsOnProgramAccountNotification(e){const{result:n,subscription:i}=Ue(e,xH);this._handleServerNotification(i,[{accountId:n.value.pubkey,accountInfo:n.value.account},n.context])}onProgramAccountChange(e,n,i,r){const{commitment:s,config:o}=Zt(i),a=this._buildArgs([e.toBase58()],s||this._commitment||"finalized","base64",o||(r?{filters:ZT(r)}:void 0));return this._makeSubscription({callback:n,method:"programSubscribe",unsubscribeMethod:"programUnsubscribe"},a)}async removeProgramAccountChangeListener(e){await this._unsubscribeClientSubscription(e,"program account change")}onLogs(e,n,i){const r=this._buildArgs([typeof e=="object"?{mentions:[e.toString()]}:e],i||this._commitment||"finalized");return this._makeSubscription({callback:n,method:"logsSubscribe",unsubscribeMethod:"logsUnsubscribe"},r)}async removeOnLogsListener(e){await this._unsubscribeClientSubscription(e,"logs")}_wsOnLogsNotification(e){const{result:n,subscription:i}=Ue(e,YH);this._handleServerNotification(i,[n.value,n.context])}_wsOnSlotNotification(e){const{result:n,subscription:i}=Ue(e,vH);this._handleServerNotification(i,[n])}onSlotChange(e){return this._makeSubscription({callback:e,method:"slotSubscribe",unsubscribeMethod:"slotUnsubscribe"},[])}async removeSlotChangeListener(e){await this._unsubscribeClientSubscription(e,"slot change")}_wsOnSlotUpdatesNotification(e){const{result:n,subscription:i}=Ue(e,_H);this._handleServerNotification(i,[n])}onSlotUpdate(e){return this._makeSubscription({callback:e,method:"slotsUpdatesSubscribe",unsubscribeMethod:"slotsUpdatesUnsubscribe"},[])}async removeSlotUpdateListener(e){await this._unsubscribeClientSubscription(e,"slot update")}async _unsubscribeClientSubscription(e,n){const i=this._subscriptionDisposeFunctionsByClientSubscriptionId[e];i?await i():console.warn(`Ignored unsubscribe request because an active subscription with id \`${e}\` for '${n}' events could not be found.`)}_buildArgs(e,n,i,r){const s=n||this._commitment;if(s||i||r){let o={};i&&(o.encoding=i),s&&(o.commitment=s),r&&(o=Object.assign(o,r)),e.push(o)}return e}_buildArgsAtLeastConfirmed(e,n,i,r){const s=n||this._commitment;if(s&&!["confirmed","finalized"].includes(s))throw new Error("Using Connection with default commitment: `"+this._commitment+"`, but method requires at least `confirmed`");return this._buildArgs(e,n,i,r)}_wsOnSignatureNotification(e){const{result:n,subscription:i}=Ue(e,bH);n.value!=="receivedSignature"&&this._subscriptionsAutoDisposedByRpc.add(i),this._handleServerNotification(i,n.value==="receivedSignature"?[{type:"received"},n.context]:[{type:"status",result:n.value},n.context])}onSignature(e,n,i){const r=this._buildArgs([e],i||this._commitment||"finalized"),s=this._makeSubscription({callback:(o,a)=>{if(o.type==="status"){n(o.result,a);try{this.removeSignatureListener(s)}catch{}}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},r);return s}onSignatureWithOptions(e,n,i){const{commitment:r,...s}={...i,commitment:i&&i.commitment||this._commitment||"finalized"},o=this._buildArgs([e],r,void 0,s),a=this._makeSubscription({callback:(l,c)=>{n(l,c);try{this.removeSignatureListener(a)}catch{}},method:"signatureSubscribe",unsubscribeMethod:"signatureUnsubscribe"},o);return a}async removeSignatureListener(e){await this._unsubscribeClientSubscription(e,"signature result")}_wsOnRootNotification(e){const{result:n,subscription:i}=Ue(e,SH);this._handleServerNotification(i,[n])}onRootChange(e){return this._makeSubscription({callback:e,method:"rootSubscribe",unsubscribeMethod:"rootUnsubscribe"},[])}async removeRootChangeListener(e){await this._unsubscribeClientSubscription(e,"root change")}}Object.freeze({CreateLookupTable:{index:0,layout:Qe([rt("instruction"),Qu("recentSlot"),Ct("bumpSeed")])},FreezeLookupTable:{index:1,layout:Qe([rt("instruction")])},ExtendLookupTable:{index:2,layout:Qe([rt("instruction"),Qu(),Pi(Mt(),Jl(rt(),-8),"addresses")])},DeactivateLookupTable:{index:3,layout:Qe([rt("instruction")])},CloseLookupTable:{index:4,layout:Qe([rt("instruction")])}});new Xe("AddressLookupTab1e1111111111111111111111111");Object.freeze({RequestUnits:{index:0,layout:Qe([Ct("instruction"),rt("units"),rt("additionalFee")])},RequestHeapFrame:{index:1,layout:Qe([Ct("instruction"),rt("bytes")])},SetComputeUnitLimit:{index:2,layout:Qe([Ct("instruction"),rt("units")])},SetComputeUnitPrice:{index:3,layout:Qe([Ct("instruction"),Qu("microLamports")])}});new Xe("ComputeBudget111111111111111111111111111111");Qe([Ct("numSignatures"),Ct("padding"),Or("signatureOffset"),Or("signatureInstructionIndex"),Or("publicKeyOffset"),Or("publicKeyInstructionIndex"),Or("messageDataOffset"),Or("messageDataSize"),Or("messageInstructionIndex")]);new Xe("Ed25519SigVerify111111111111111111111111111");sW.utils.isValidPrivateKey;Qe([Ct("numSignatures"),Or("signatureOffset"),Ct("signatureInstructionIndex"),Or("ethAddressOffset"),Ct("ethAddressInstructionIndex"),Or("messageDataOffset"),Or("messageDataSize"),Ct("messageInstructionIndex"),qt(20,"ethAddress"),qt(64,"signature"),Ct("recoveryId")]);new Xe("KeccakSecp256k11111111111111111111111111111");var jk;new Xe("StakeConfig11111111111111111111111111111111");class Fk{constructor(e,n,i){this.unixTimestamp=void 0,this.epoch=void 0,this.custodian=void 0,this.unixTimestamp=e,this.epoch=n,this.custodian=i}}jk=Fk;Fk.default=new jk(0,0,Xe.default);Object.freeze({Initialize:{index:0,layout:Qe([rt("instruction"),dW(),hW()])},Authorize:{index:1,layout:Qe([rt("instruction"),Mt("newAuthorized"),rt("stakeAuthorizationType")])},Delegate:{index:2,layout:Qe([rt("instruction")])},Split:{index:3,layout:Qe([rt("instruction"),xr("lamports")])},Withdraw:{index:4,layout:Qe([rt("instruction"),xr("lamports")])},Deactivate:{index:5,layout:Qe([rt("instruction")])},Merge:{index:7,layout:Qe([rt("instruction")])},AuthorizeWithSeed:{index:8,layout:Qe([rt("instruction"),Mt("newAuthorized"),rt("stakeAuthorizationType"),vu("authoritySeed"),Mt("authorityOwner")])}});new Xe("Stake11111111111111111111111111111111111111");Object.freeze({InitializeAccount:{index:0,layout:Qe([rt("instruction"),fW()])},Authorize:{index:1,layout:Qe([rt("instruction"),Mt("newAuthorized"),rt("voteAuthorizationType")])},Withdraw:{index:3,layout:Qe([rt("instruction"),xr("lamports")])},UpdateValidatorIdentity:{index:4,layout:Qe([rt("instruction")])},AuthorizeWithSeed:{index:10,layout:Qe([rt("instruction"),pW()])}});new Xe("Vote111111111111111111111111111111111111111");new Xe("Va1idator1nfo111111111111111111111111111111");Me({name:ke(),website:st(ke()),details:st(ke()),iconUrl:st(ke()),keybaseUsername:st(ke())});new Xe("Vote111111111111111111111111111111111111111");Qe([Mt("nodePubkey"),Mt("authorizedWithdrawer"),Ct("commission"),di(),Pi(Qe([di("slot"),rt("confirmationCount")]),Jl(rt(),-8),"votes"),Ct("rootSlotValid"),di("rootSlot"),di(),Pi(Qe([di("epoch"),Mt("authorizedVoter")]),Jl(rt(),-8),"authorizedVoters"),Qe([Pi(Qe([Mt("authorizedPubkey"),di("epochOfLastAuthorizedSwitch"),di("targetEpoch")]),32,"buf"),di("idx"),Ct("isEmpty")],"priorVoters"),di(),Pi(Qe([di("epoch"),di("credits"),di("prevCredits")]),Jl(rt(),-8),"epochCredits"),Qe([di("slot"),di("timestamp")],"lastTimestamp")]);const fg=1e9,zk=F.createContext({});function Zf(){return F.useContext(zk)}const qH=({children:t,endpoint:e,config:n={commitment:"confirmed"}})=>{const i=F.useMemo(()=>new Ok(e,n),[e,n]);return Le.createElement(zk.Provider,{value:{connection:i}},t)};var Vk={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(l,c,u){this.fn=l,this.context=c,this.once=u||!1}function s(l,c,u,h,f){if(typeof u!="function")throw new TypeError("The listener must be a function");var p=new r(u,h||l,f),x=n?n+c:c;return l._events[x]?l._events[x].fn?l._events[x]=[l._events[x],p]:l._events[x].push(p):(l._events[x]=p,l._eventsCount++),l}function o(l,c){--l._eventsCount===0?l._events=new i:delete l._events[c]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var c=[],u,h;if(this._eventsCount===0)return c;for(h in u=this._events)e.call(u,h)&&c.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(u)):c},a.prototype.listeners=function(c){var u=n?n+c:c,h=this._events[u];if(!h)return[];if(h.fn)return[h.fn];for(var f=0,p=h.length,x=new Array(p);f<p;f++)x[f]=h[f].fn;return x},a.prototype.listenerCount=function(c){var u=n?n+c:c,h=this._events[u];return h?h.fn?1:h.length:0},a.prototype.emit=function(c,u,h,f,p,x){var y=n?n+c:c;if(!this._events[y])return!1;var g=this._events[y],m=arguments.length,_,w;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,u),!0;case 3:return g.fn.call(g.context,u,h),!0;case 4:return g.fn.call(g.context,u,h,f),!0;case 5:return g.fn.call(g.context,u,h,f,p),!0;case 6:return g.fn.call(g.context,u,h,f,p,x),!0}for(w=1,_=new Array(m-1);w<m;w++)_[w-1]=arguments[w];g.fn.apply(g.context,_)}else{var S=g.length,N;for(w=0;w<S;w++)switch(g[w].once&&this.removeListener(c,g[w].fn,void 0,!0),m){case 1:g[w].fn.call(g[w].context);break;case 2:g[w].fn.call(g[w].context,u);break;case 3:g[w].fn.call(g[w].context,u,h);break;case 4:g[w].fn.call(g[w].context,u,h,f);break;default:if(!_)for(N=1,_=new Array(m-1);N<m;N++)_[N-1]=arguments[N];g[w].fn.apply(g[w].context,_)}}return!0},a.prototype.on=function(c,u,h){return s(this,c,u,h,!1)},a.prototype.once=function(c,u,h){return s(this,c,u,h,!0)},a.prototype.removeListener=function(c,u,h,f){var p=n?n+c:c;if(!this._events[p])return this;if(!u)return o(this,p),this;var x=this._events[p];if(x.fn)x.fn===u&&(!f||x.once)&&(!h||x.context===h)&&o(this,p);else{for(var y=0,g=[],m=x.length;y<m;y++)(x[y].fn!==u||f&&!x[y].once||h&&x[y].context!==h)&&g.push(x[y]);g.length?this._events[p]=g.length===1?g[0]:g:o(this,p)}return this},a.prototype.removeAllListeners=function(c){var u;return c?(u=n?n+c:c,this._events[u]&&o(this,u)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(Vk);var KH=Vk.exports;const ZH=$a(KH);class ii extends Error{constructor(e,n){super(e),this.error=n}}class ko extends ii{constructor(){super(...arguments),this.name="WalletNotReadyError"}}class cM extends ii{constructor(){super(...arguments),this.name="WalletLoadError"}}class Ul extends ii{constructor(){super(...arguments),this.name="WalletConfigError"}}class Po extends ii{constructor(){super(...arguments),this.name="WalletConnectionError"}}class hx extends ii{constructor(){super(...arguments),this.name="WalletDisconnectedError"}}class Qf extends ii{constructor(){super(...arguments),this.name="WalletDisconnectionError"}}class va extends ii{constructor(){super(...arguments),this.name="WalletAccountError"}}class Wa extends ii{constructor(){super(...arguments),this.name="WalletPublicKeyError"}}class en extends ii{constructor(){super(...arguments),this.name="WalletNotConnectedError"}}class Is extends ii{constructor(){super(...arguments),this.name="WalletSendTransactionError"}}class rr extends ii{constructor(){super(...arguments),this.name="WalletSignTransactionError"}}class Jf extends ii{constructor(){super(...arguments),this.name="WalletSignMessageError"}}class tA extends ii{constructor(){super(...arguments),this.name="WalletSignInError"}}var xt;(function(t){t.Installed="Installed",t.NotDetected="NotDetected",t.Loadable="Loadable",t.Unsupported="Unsupported"})(xt||(xt={}));class Wk extends ZH{get connected(){return!!this.publicKey}async autoConnect(){await this.connect()}async prepareTransaction(e,n,i={}){const r=this.publicKey;if(!r)throw new en;return e.feePayer=e.feePayer||r,e.recentBlockhash=e.recentBlockhash||(await n.getLatestBlockhash({commitment:i.preflightCommitment,minContextSlot:i.minContextSlot})).blockhash,e}}function Hk(t){if(typeof window>"u"||typeof document>"u")return;const e=[];function n(){if(t())for(const s of e)s()}const i=setInterval(n,1e3);e.push(()=>clearInterval(i)),document.readyState==="loading"&&(document.addEventListener("DOMContentLoaded",n,{once:!0}),e.push(()=>document.removeEventListener("DOMContentLoaded",n))),document.readyState!=="complete"&&(window.addEventListener("load",n,{once:!0}),e.push(()=>window.removeEventListener("load",n))),n()}function _w(){if(!navigator)return!1;const t=navigator.userAgent.toLowerCase(),e=t.includes("iphone")||t.includes("ipad"),n=t.includes("safari");return e&&n}function ks(t){return"version"in t}class Gk extends Wk{async sendTransaction(e,n,i={}){let r=!0;try{if(ks(e)){if(!this.supportedTransactionVersions)throw new Is("Sending versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(e.version))throw new Is(`Sending transaction version ${e.version} isn't supported by this wallet`);try{e=await this.signTransaction(e);const s=e.serialize();return await n.sendRawTransaction(s,i)}catch(s){throw s instanceof rr?(r=!1,s):new Is(s==null?void 0:s.message,s)}}else try{const{signers:s,...o}=i;e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s),e=await this.signTransaction(e);const a=e.serialize();return await n.sendRawTransaction(a,o)}catch(s){throw s instanceof rr?(r=!1,s):new Is(s==null?void 0:s.message,s)}}catch(s){throw r&&this.emit("error",s),s}}async signAllTransactions(e){for(const i of e)if(ks(i)){if(!this.supportedTransactionVersions)throw new rr("Signing versioned transactions isn't supported by this wallet");if(!this.supportedTransactionVersions.has(i.version))throw new rr(`Signing transaction version ${i.version} isn't supported by this wallet`)}const n=[];for(const i of e)n.push(await this.signTransaction(i));return n}}class fx extends Gk{}class QH extends fx{}const zi="solana:signAndSendTransaction",ec="solana:signIn",xo="solana:signMessage",dn="solana:signTransaction",px="standard:connect",pg="standard:disconnect",mx="standard:events";function JH(t){return px in t.features&&mx in t.features&&(zi in t.features||dn in t.features)}var bw;(function(t){t.Mainnet="mainnet-beta",t.Testnet="testnet",t.Devnet="devnet"})(bw||(bw={}));class nA extends ii{constructor(){super(...arguments),this.name="WalletNotSelectedError"}}const eG=[],gx={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){ss("call","select")},connect(){return Promise.reject(ss("call","connect"))},disconnect(){return Promise.reject(ss("call","disconnect"))},sendTransaction(){return Promise.reject(ss("call","sendTransaction"))},signTransaction(){return Promise.reject(ss("call","signTransaction"))},signAllTransactions(){return Promise.reject(ss("call","signAllTransactions"))},signMessage(){return Promise.reject(ss("call","signMessage"))},signIn(){return Promise.reject(ss("call","signIn"))}};Object.defineProperty(gx,"wallets",{get(){return ss("read","wallets"),eG}});Object.defineProperty(gx,"wallet",{get(){return ss("read","wallet"),null}});Object.defineProperty(gx,"publicKey",{get(){return ss("read","publicKey"),null}});function ss(t,e){const n=new Error(`You have tried to ${t} "${e}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}const $k=F.createContext(gx);function Ui(){return F.useContext($k)}function tG(t,e){const n=F.useState(()=>{try{const s=localStorage.getItem(t);if(s)return JSON.parse(s)}catch(s){typeof window<"u"&&console.error(s)}return e}),i=n[0],r=F.useRef(!0);return F.useEffect(()=>{if(r.current){r.current=!1;return}try{i===null?localStorage.removeItem(t):localStorage.setItem(t,JSON.stringify(i))}catch(s){typeof window<"u"&&console.error(s)}},[i,t]),n}var nG=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then},Yk={},Nr={};let uM;const iG=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];Nr.getSymbolSize=function(e){if(!e)throw new Error('"version" cannot be null or undefined');if(e<1||e>40)throw new Error('"version" should be in range from 1 to 40');return e*4+17};Nr.getSymbolTotalCodewords=function(e){return iG[e]};Nr.getBCHDigit=function(t){let e=0;for(;t!==0;)e++,t>>>=1;return e};Nr.setToSJISFunction=function(e){if(typeof e!="function")throw new Error('"toSJISFunc" is not a valid function.');uM=e};Nr.isKanjiModeEnabled=function(){return typeof uM<"u"};Nr.toSJIS=function(e){return uM(e)};var xx={};(function(t){t.L={bit:1},t.M={bit:0},t.Q={bit:3},t.H={bit:2};function e(n){if(typeof n!="string")throw new Error("Param is not a string");switch(n.toLowerCase()){case"l":case"low":return t.L;case"m":case"medium":return t.M;case"q":case"quartile":return t.Q;case"h":case"high":return t.H;default:throw new Error("Unknown EC Level: "+n)}}t.isValid=function(i){return i&&typeof i.bit<"u"&&i.bit>=0&&i.bit<4},t.from=function(i,r){if(t.isValid(i))return i;try{return e(i)}catch{return r}}})(xx);function Xk(){this.buffer=[],this.length=0}Xk.prototype={get:function(t){const e=Math.floor(t/8);return(this.buffer[e]>>>7-t%8&1)===1},put:function(t,e){for(let n=0;n<e;n++)this.putBit((t>>>e-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var rG=Xk;function ep(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}ep.prototype.set=function(t,e,n,i){const r=t*this.size+e;this.data[r]=n,i&&(this.reservedBit[r]=!0)};ep.prototype.get=function(t,e){return this.data[t*this.size+e]};ep.prototype.xor=function(t,e,n){this.data[t*this.size+e]^=n};ep.prototype.isReserved=function(t,e){return this.reservedBit[t*this.size+e]};var sG=ep,qk={};(function(t){const e=Nr.getSymbolSize;t.getRowColCoords=function(i){if(i===1)return[];const r=Math.floor(i/7)+2,s=e(i),o=s===145?26:Math.ceil((s-13)/(2*r-2))*2,a=[s-7];for(let l=1;l<r-1;l++)a[l]=a[l-1]-o;return a.push(6),a.reverse()},t.getPositions=function(i){const r=[],s=t.getRowColCoords(i),o=s.length;for(let a=0;a<o;a++)for(let l=0;l<o;l++)a===0&&l===0||a===0&&l===o-1||a===o-1&&l===0||r.push([s[a],s[l]]);return r}})(qk);var Kk={};const oG=Nr.getSymbolSize,iA=7;Kk.getPositions=function(e){const n=oG(e);return[[0,0],[n-iA,0],[0,n-iA]]};var Zk={};(function(t){t.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const e={N1:3,N2:3,N3:40,N4:10};t.isValid=function(r){return r!=null&&r!==""&&!isNaN(r)&&r>=0&&r<=7},t.from=function(r){return t.isValid(r)?parseInt(r,10):void 0},t.getPenaltyN1=function(r){const s=r.size;let o=0,a=0,l=0,c=null,u=null;for(let h=0;h<s;h++){a=l=0,c=u=null;for(let f=0;f<s;f++){let p=r.get(h,f);p===c?a++:(a>=5&&(o+=e.N1+(a-5)),c=p,a=1),p=r.get(f,h),p===u?l++:(l>=5&&(o+=e.N1+(l-5)),u=p,l=1)}a>=5&&(o+=e.N1+(a-5)),l>=5&&(o+=e.N1+(l-5))}return o},t.getPenaltyN2=function(r){const s=r.size;let o=0;for(let a=0;a<s-1;a++)for(let l=0;l<s-1;l++){const c=r.get(a,l)+r.get(a,l+1)+r.get(a+1,l)+r.get(a+1,l+1);(c===4||c===0)&&o++}return o*e.N2},t.getPenaltyN3=function(r){const s=r.size;let o=0,a=0,l=0;for(let c=0;c<s;c++){a=l=0;for(let u=0;u<s;u++)a=a<<1&2047|r.get(c,u),u>=10&&(a===1488||a===93)&&o++,l=l<<1&2047|r.get(u,c),u>=10&&(l===1488||l===93)&&o++}return o*e.N3},t.getPenaltyN4=function(r){let s=0;const o=r.data.length;for(let l=0;l<o;l++)s+=r.data[l];return Math.abs(Math.ceil(s*100/o/5)-10)*e.N4};function n(i,r,s){switch(i){case t.Patterns.PATTERN000:return(r+s)%2===0;case t.Patterns.PATTERN001:return r%2===0;case t.Patterns.PATTERN010:return s%3===0;case t.Patterns.PATTERN011:return(r+s)%3===0;case t.Patterns.PATTERN100:return(Math.floor(r/2)+Math.floor(s/3))%2===0;case t.Patterns.PATTERN101:return r*s%2+r*s%3===0;case t.Patterns.PATTERN110:return(r*s%2+r*s%3)%2===0;case t.Patterns.PATTERN111:return(r*s%3+(r+s)%2)%2===0;default:throw new Error("bad maskPattern:"+i)}}t.applyMask=function(r,s){const o=s.size;for(let a=0;a<o;a++)for(let l=0;l<o;l++)s.isReserved(l,a)||s.xor(l,a,n(r,l,a))},t.getBestMask=function(r,s){const o=Object.keys(t.Patterns).length;let a=0,l=1/0;for(let c=0;c<o;c++){s(c),t.applyMask(c,r);const u=t.getPenaltyN1(r)+t.getPenaltyN2(r)+t.getPenaltyN3(r)+t.getPenaltyN4(r);t.applyMask(c,r),u<l&&(l=u,a=c)}return a}})(Zk);var yx={};const wa=xx,zp=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],Vp=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];yx.getBlocksCount=function(e,n){switch(n){case wa.L:return zp[(e-1)*4+0];case wa.M:return zp[(e-1)*4+1];case wa.Q:return zp[(e-1)*4+2];case wa.H:return zp[(e-1)*4+3];default:return}};yx.getTotalCodewordsCount=function(e,n){switch(n){case wa.L:return Vp[(e-1)*4+0];case wa.M:return Vp[(e-1)*4+1];case wa.Q:return Vp[(e-1)*4+2];case wa.H:return Vp[(e-1)*4+3];default:return}};var Qk={},vx={};const kh=new Uint8Array(512),mg=new Uint8Array(256);(function(){let e=1;for(let n=0;n<255;n++)kh[n]=e,mg[e]=n,e<<=1,e&256&&(e^=285);for(let n=255;n<512;n++)kh[n]=kh[n-255]})();vx.log=function(e){if(e<1)throw new Error("log("+e+")");return mg[e]};vx.exp=function(e){return kh[e]};vx.mul=function(e,n){return e===0||n===0?0:kh[mg[e]+mg[n]]};(function(t){const e=vx;t.mul=function(i,r){const s=new Uint8Array(i.length+r.length-1);for(let o=0;o<i.length;o++)for(let a=0;a<r.length;a++)s[o+a]^=e.mul(i[o],r[a]);return s},t.mod=function(i,r){let s=new Uint8Array(i);for(;s.length-r.length>=0;){const o=s[0];for(let l=0;l<r.length;l++)s[l]^=e.mul(r[l],o);let a=0;for(;a<s.length&&s[a]===0;)a++;s=s.slice(a)}return s},t.generateECPolynomial=function(i){let r=new Uint8Array([1]);for(let s=0;s<i;s++)r=t.mul(r,new Uint8Array([1,e.exp(s)]));return r}})(Qk);const Jk=Qk;function dM(t){this.genPoly=void 0,this.degree=t,this.degree&&this.initialize(this.degree)}dM.prototype.initialize=function(e){this.degree=e,this.genPoly=Jk.generateECPolynomial(this.degree)};dM.prototype.encode=function(e){if(!this.genPoly)throw new Error("Encoder not initialized");const n=new Uint8Array(e.length+this.degree);n.set(e);const i=Jk.mod(n,this.genPoly),r=this.degree-i.length;if(r>0){const s=new Uint8Array(this.degree);return s.set(i,r),s}return i};var aG=dM,eP={},Qa={},hM={};hM.isValid=function(e){return!isNaN(e)&&e>=1&&e<=40};var Xs={};const tP="[0-9]+",lG="[A-Z $%*+\\-./:]+";let yf="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";yf=yf.replace(/u/g,"\\u");const cG="(?:(?![A-Z0-9 $%*+\\-./:]|"+yf+`)(?:.|[\r
]))+`;Xs.KANJI=new RegExp(yf,"g");Xs.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g");Xs.BYTE=new RegExp(cG,"g");Xs.NUMERIC=new RegExp(tP,"g");Xs.ALPHANUMERIC=new RegExp(lG,"g");const uG=new RegExp("^"+yf+"$"),dG=new RegExp("^"+tP+"$"),hG=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");Xs.testKanji=function(e){return uG.test(e)};Xs.testNumeric=function(e){return dG.test(e)};Xs.testAlphanumeric=function(e){return hG.test(e)};(function(t){const e=hM,n=Xs;t.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},t.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},t.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},t.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},t.MIXED={bit:-1},t.getCharCountIndicator=function(s,o){if(!s.ccBits)throw new Error("Invalid mode: "+s);if(!e.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?s.ccBits[0]:o<27?s.ccBits[1]:s.ccBits[2]},t.getBestModeForData=function(s){return n.testNumeric(s)?t.NUMERIC:n.testAlphanumeric(s)?t.ALPHANUMERIC:n.testKanji(s)?t.KANJI:t.BYTE},t.toString=function(s){if(s&&s.id)return s.id;throw new Error("Invalid mode")},t.isValid=function(s){return s&&s.bit&&s.ccBits};function i(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"numeric":return t.NUMERIC;case"alphanumeric":return t.ALPHANUMERIC;case"kanji":return t.KANJI;case"byte":return t.BYTE;default:throw new Error("Unknown mode: "+r)}}t.from=function(s,o){if(t.isValid(s))return s;try{return i(s)}catch{return o}}})(Qa);(function(t){const e=Nr,n=yx,i=xx,r=Qa,s=hM,o=7973,a=e.getBCHDigit(o);function l(f,p,x){for(let y=1;y<=40;y++)if(p<=t.getCapacity(y,x,f))return y}function c(f,p){return r.getCharCountIndicator(f,p)+4}function u(f,p){let x=0;return f.forEach(function(y){const g=c(y.mode,p);x+=g+y.getBitsLength()}),x}function h(f,p){for(let x=1;x<=40;x++)if(u(f,x)<=t.getCapacity(x,p,r.MIXED))return x}t.from=function(p,x){return s.isValid(p)?parseInt(p,10):x},t.getCapacity=function(p,x,y){if(!s.isValid(p))throw new Error("Invalid QR Code version");typeof y>"u"&&(y=r.BYTE);const g=e.getSymbolTotalCodewords(p),m=n.getTotalCodewordsCount(p,x),_=(g-m)*8;if(y===r.MIXED)return _;const w=_-c(y,p);switch(y){case r.NUMERIC:return Math.floor(w/10*3);case r.ALPHANUMERIC:return Math.floor(w/11*2);case r.KANJI:return Math.floor(w/13);case r.BYTE:default:return Math.floor(w/8)}},t.getBestVersionForData=function(p,x){let y;const g=i.from(x,i.M);if(Array.isArray(p)){if(p.length>1)return h(p,g);if(p.length===0)return 1;y=p[0]}else y=p;return l(y.mode,y.getLength(),g)},t.getEncodedBits=function(p){if(!s.isValid(p)||p<7)throw new Error("Invalid QR Code version");let x=p<<12;for(;e.getBCHDigit(x)-a>=0;)x^=o<<e.getBCHDigit(x)-a;return p<<12|x}})(eP);var nP={};const Sw=Nr,iP=1335,fG=21522,rA=Sw.getBCHDigit(iP);nP.getEncodedBits=function(e,n){const i=e.bit<<3|n;let r=i<<10;for(;Sw.getBCHDigit(r)-rA>=0;)r^=iP<<Sw.getBCHDigit(r)-rA;return(i<<10|r)^fG};var rP={};const pG=Qa;function Ju(t){this.mode=pG.NUMERIC,this.data=t.toString()}Ju.getBitsLength=function(e){return 10*Math.floor(e/3)+(e%3?e%3*3+1:0)};Ju.prototype.getLength=function(){return this.data.length};Ju.prototype.getBitsLength=function(){return Ju.getBitsLength(this.data.length)};Ju.prototype.write=function(e){let n,i,r;for(n=0;n+3<=this.data.length;n+=3)i=this.data.substr(n,3),r=parseInt(i,10),e.put(r,10);const s=this.data.length-n;s>0&&(i=this.data.substr(n),r=parseInt(i,10),e.put(r,s*3+1))};var mG=Ju;const gG=Qa,Wy=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function ed(t){this.mode=gG.ALPHANUMERIC,this.data=t}ed.getBitsLength=function(e){return 11*Math.floor(e/2)+6*(e%2)};ed.prototype.getLength=function(){return this.data.length};ed.prototype.getBitsLength=function(){return ed.getBitsLength(this.data.length)};ed.prototype.write=function(e){let n;for(n=0;n+2<=this.data.length;n+=2){let i=Wy.indexOf(this.data[n])*45;i+=Wy.indexOf(this.data[n+1]),e.put(i,11)}this.data.length%2&&e.put(Wy.indexOf(this.data[n]),6)};var xG=ed;const yG=Qa;function td(t){this.mode=yG.BYTE,typeof t=="string"?this.data=new TextEncoder().encode(t):this.data=new Uint8Array(t)}td.getBitsLength=function(e){return e*8};td.prototype.getLength=function(){return this.data.length};td.prototype.getBitsLength=function(){return td.getBitsLength(this.data.length)};td.prototype.write=function(t){for(let e=0,n=this.data.length;e<n;e++)t.put(this.data[e],8)};var vG=td;const wG=Qa,_G=Nr;function nd(t){this.mode=wG.KANJI,this.data=t}nd.getBitsLength=function(e){return e*13};nd.prototype.getLength=function(){return this.data.length};nd.prototype.getBitsLength=function(){return nd.getBitsLength(this.data.length)};nd.prototype.write=function(t){let e;for(e=0;e<this.data.length;e++){let n=_G.toSJIS(this.data[e]);if(n>=33088&&n<=40956)n-=33088;else if(n>=57408&&n<=60351)n-=49472;else throw new Error("Invalid SJIS character: "+this.data[e]+`
Make sure your charset is UTF-8`);n=(n>>>8&255)*192+(n&255),t.put(n,13)}};var bG=nd,sP={exports:{}};(function(t){var e={single_source_shortest_paths:function(n,i,r){var s={},o={};o[i]=0;var a=e.PriorityQueue.make();a.push(i,0);for(var l,c,u,h,f,p,x,y,g;!a.empty();){l=a.pop(),c=l.value,h=l.cost,f=n[c]||{};for(u in f)f.hasOwnProperty(u)&&(p=f[u],x=h+p,y=o[u],g=typeof o[u]>"u",(g||y>x)&&(o[u]=x,a.push(u,x),s[u]=c))}if(typeof r<"u"&&typeof o[r]>"u"){var m=["Could not find a path from ",i," to ",r,"."].join("");throw new Error(m)}return s},extract_shortest_path_from_predecessor_list:function(n,i){for(var r=[],s=i;s;)r.push(s),n[s],s=n[s];return r.reverse(),r},find_path:function(n,i,r){var s=e.single_source_shortest_paths(n,i,r);return e.extract_shortest_path_from_predecessor_list(s,r)},PriorityQueue:{make:function(n){var i=e.PriorityQueue,r={},s;n=n||{};for(s in i)i.hasOwnProperty(s)&&(r[s]=i[s]);return r.queue=[],r.sorter=n.sorter||i.default_sorter,r},default_sorter:function(n,i){return n.cost-i.cost},push:function(n,i){var r={value:n,cost:i};this.queue.push(r),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};t.exports=e})(sP);var SG=sP.exports;(function(t){const e=Qa,n=mG,i=xG,r=vG,s=bG,o=Xs,a=Nr,l=SG;function c(m){return unescape(encodeURIComponent(m)).length}function u(m,_,w){const S=[];let N;for(;(N=m.exec(w))!==null;)S.push({data:N[0],index:N.index,mode:_,length:N[0].length});return S}function h(m){const _=u(o.NUMERIC,e.NUMERIC,m),w=u(o.ALPHANUMERIC,e.ALPHANUMERIC,m);let S,N;return a.isKanjiModeEnabled()?(S=u(o.BYTE,e.BYTE,m),N=u(o.KANJI,e.KANJI,m)):(S=u(o.BYTE_KANJI,e.BYTE,m),N=[]),_.concat(w,S,N).sort(function(R,B){return R.index-B.index}).map(function(R){return{data:R.data,mode:R.mode,length:R.length}})}function f(m,_){switch(_){case e.NUMERIC:return n.getBitsLength(m);case e.ALPHANUMERIC:return i.getBitsLength(m);case e.KANJI:return s.getBitsLength(m);case e.BYTE:return r.getBitsLength(m)}}function p(m){return m.reduce(function(_,w){const S=_.length-1>=0?_[_.length-1]:null;return S&&S.mode===w.mode?(_[_.length-1].data+=w.data,_):(_.push(w),_)},[])}function x(m){const _=[];for(let w=0;w<m.length;w++){const S=m[w];switch(S.mode){case e.NUMERIC:_.push([S,{data:S.data,mode:e.ALPHANUMERIC,length:S.length},{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.ALPHANUMERIC:_.push([S,{data:S.data,mode:e.BYTE,length:S.length}]);break;case e.KANJI:_.push([S,{data:S.data,mode:e.BYTE,length:c(S.data)}]);break;case e.BYTE:_.push([{data:S.data,mode:e.BYTE,length:c(S.data)}])}}return _}function y(m,_){const w={},S={start:{}};let N=["start"];for(let k=0;k<m.length;k++){const R=m[k],B=[];for(let L=0;L<R.length;L++){const D=R[L],j=""+k+L;B.push(j),w[j]={node:D,lastCount:0},S[j]={};for(let Y=0;Y<N.length;Y++){const I=N[Y];w[I]&&w[I].node.mode===D.mode?(S[I][j]=f(w[I].lastCount+D.length,D.mode)-f(w[I].lastCount,D.mode),w[I].lastCount+=D.length):(w[I]&&(w[I].lastCount=D.length),S[I][j]=f(D.length,D.mode)+4+e.getCharCountIndicator(D.mode,_))}}N=B}for(let k=0;k<N.length;k++)S[N[k]].end=0;return{map:S,table:w}}function g(m,_){let w;const S=e.getBestModeForData(m);if(w=e.from(_,S),w!==e.BYTE&&w.bit<S.bit)throw new Error('"'+m+'" cannot be encoded with mode '+e.toString(w)+`.
 Suggested mode is: `+e.toString(S));switch(w===e.KANJI&&!a.isKanjiModeEnabled()&&(w=e.BYTE),w){case e.NUMERIC:return new n(m);case e.ALPHANUMERIC:return new i(m);case e.KANJI:return new s(m);case e.BYTE:return new r(m)}}t.fromArray=function(_){return _.reduce(function(w,S){return typeof S=="string"?w.push(g(S,null)):S.data&&w.push(g(S.data,S.mode)),w},[])},t.fromString=function(_,w){const S=h(_,a.isKanjiModeEnabled()),N=x(S),k=y(N,w),R=l.find_path(k.map,"start","end"),B=[];for(let L=1;L<R.length-1;L++)B.push(k.table[R[L]].node);return t.fromArray(p(B))},t.rawSplit=function(_){return t.fromArray(h(_,a.isKanjiModeEnabled()))}})(rP);const wx=Nr,Hy=xx,MG=rG,EG=sG,TG=qk,AG=Kk,Mw=Zk,Ew=yx,CG=aG,gg=eP,NG=nP,RG=Qa,Gy=rP;function LG(t,e){const n=t.size,i=AG.getPositions(e);for(let r=0;r<i.length;r++){const s=i[r][0],o=i[r][1];for(let a=-1;a<=7;a++)if(!(s+a<=-1||n<=s+a))for(let l=-1;l<=7;l++)o+l<=-1||n<=o+l||(a>=0&&a<=6&&(l===0||l===6)||l>=0&&l<=6&&(a===0||a===6)||a>=2&&a<=4&&l>=2&&l<=4?t.set(s+a,o+l,!0,!0):t.set(s+a,o+l,!1,!0))}}function IG(t){const e=t.size;for(let n=8;n<e-8;n++){const i=n%2===0;t.set(n,6,i,!0),t.set(6,n,i,!0)}}function kG(t,e){const n=TG.getPositions(e);for(let i=0;i<n.length;i++){const r=n[i][0],s=n[i][1];for(let o=-2;o<=2;o++)for(let a=-2;a<=2;a++)o===-2||o===2||a===-2||a===2||o===0&&a===0?t.set(r+o,s+a,!0,!0):t.set(r+o,s+a,!1,!0)}}function PG(t,e){const n=t.size,i=gg.getEncodedBits(e);let r,s,o;for(let a=0;a<18;a++)r=Math.floor(a/3),s=a%3+n-8-3,o=(i>>a&1)===1,t.set(r,s,o,!0),t.set(s,r,o,!0)}function $y(t,e,n){const i=t.size,r=NG.getEncodedBits(e,n);let s,o;for(s=0;s<15;s++)o=(r>>s&1)===1,s<6?t.set(s,8,o,!0):s<8?t.set(s+1,8,o,!0):t.set(i-15+s,8,o,!0),s<8?t.set(8,i-s-1,o,!0):s<9?t.set(8,15-s-1+1,o,!0):t.set(8,15-s-1,o,!0);t.set(i-8,8,1,!0)}function DG(t,e){const n=t.size;let i=-1,r=n-1,s=7,o=0;for(let a=n-1;a>0;a-=2)for(a===6&&a--;;){for(let l=0;l<2;l++)if(!t.isReserved(r,a-l)){let c=!1;o<e.length&&(c=(e[o]>>>s&1)===1),t.set(r,a-l,c),s--,s===-1&&(o++,s=7)}if(r+=i,r<0||n<=r){r-=i,i=-i;break}}}function BG(t,e,n){const i=new MG;n.forEach(function(l){i.put(l.mode.bit,4),i.put(l.getLength(),RG.getCharCountIndicator(l.mode,t)),l.write(i)});const r=wx.getSymbolTotalCodewords(t),s=Ew.getTotalCodewordsCount(t,e),o=(r-s)*8;for(i.getLengthInBits()+4<=o&&i.put(0,4);i.getLengthInBits()%8!==0;)i.putBit(0);const a=(o-i.getLengthInBits())/8;for(let l=0;l<a;l++)i.put(l%2?17:236,8);return UG(i,t,e)}function UG(t,e,n){const i=wx.getSymbolTotalCodewords(e),r=Ew.getTotalCodewordsCount(e,n),s=i-r,o=Ew.getBlocksCount(e,n),a=i%o,l=o-a,c=Math.floor(i/o),u=Math.floor(s/o),h=u+1,f=c-u,p=new CG(f);let x=0;const y=new Array(o),g=new Array(o);let m=0;const _=new Uint8Array(t.buffer);for(let R=0;R<o;R++){const B=R<l?u:h;y[R]=_.slice(x,x+B),g[R]=p.encode(y[R]),x+=B,m=Math.max(m,B)}const w=new Uint8Array(i);let S=0,N,k;for(N=0;N<m;N++)for(k=0;k<o;k++)N<y[k].length&&(w[S++]=y[k][N]);for(N=0;N<f;N++)for(k=0;k<o;k++)w[S++]=g[k][N];return w}function OG(t,e,n,i){let r;if(Array.isArray(t))r=Gy.fromArray(t);else if(typeof t=="string"){let c=e;if(!c){const u=Gy.rawSplit(t);c=gg.getBestVersionForData(u,n)}r=Gy.fromString(t,c||40)}else throw new Error("Invalid data");const s=gg.getBestVersionForData(r,n);if(!s)throw new Error("The amount of data is too big to be stored in a QR Code");if(!e)e=s;else if(e<s)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+s+`.
`);const o=BG(e,n,r),a=wx.getSymbolSize(e),l=new EG(a);return LG(l,e),IG(l),kG(l,e),$y(l,n,0),e>=7&&PG(l,e),DG(l,o),isNaN(i)&&(i=Mw.getBestMask(l,$y.bind(null,l,n))),Mw.applyMask(i,l),$y(l,n,i),{modules:l,version:e,errorCorrectionLevel:n,maskPattern:i,segments:r}}Yk.create=function(e,n){if(typeof e>"u"||e==="")throw new Error("No input text");let i=Hy.M,r,s;return typeof n<"u"&&(i=Hy.from(n.errorCorrectionLevel,Hy.M),r=gg.from(n.version),s=Mw.from(n.maskPattern),n.toSJISFunc&&wx.setToSJISFunction(n.toSJISFunc)),OG(e,r,i,s)};var oP={},fM={};(function(t){function e(n){if(typeof n=="number"&&(n=n.toString()),typeof n!="string")throw new Error("Color should be defined as hex string");let i=n.slice().replace("#","").split("");if(i.length<3||i.length===5||i.length>8)throw new Error("Invalid hex color: "+n);(i.length===3||i.length===4)&&(i=Array.prototype.concat.apply([],i.map(function(s){return[s,s]}))),i.length===6&&i.push("F","F");const r=parseInt(i.join(""),16);return{r:r>>24&255,g:r>>16&255,b:r>>8&255,a:r&255,hex:"#"+i.slice(0,6).join("")}}t.getOptions=function(i){i||(i={}),i.color||(i.color={});const r=typeof i.margin>"u"||i.margin===null||i.margin<0?4:i.margin,s=i.width&&i.width>=21?i.width:void 0,o=i.scale||4;return{width:s,scale:s?4:o,margin:r,color:{dark:e(i.color.dark||"#000000ff"),light:e(i.color.light||"#ffffffff")},type:i.type,rendererOpts:i.rendererOpts||{}}},t.getScale=function(i,r){return r.width&&r.width>=i+r.margin*2?r.width/(i+r.margin*2):r.scale},t.getImageWidth=function(i,r){const s=t.getScale(i,r);return Math.floor((i+r.margin*2)*s)},t.qrToImageData=function(i,r,s){const o=r.modules.size,a=r.modules.data,l=t.getScale(o,s),c=Math.floor((o+s.margin*2)*l),u=s.margin*l,h=[s.color.light,s.color.dark];for(let f=0;f<c;f++)for(let p=0;p<c;p++){let x=(f*c+p)*4,y=s.color.light;if(f>=u&&p>=u&&f<c-u&&p<c-u){const g=Math.floor((f-u)/l),m=Math.floor((p-u)/l);y=h[a[g*o+m]?1:0]}i[x++]=y.r,i[x++]=y.g,i[x++]=y.b,i[x]=y.a}}})(fM);(function(t){const e=fM;function n(r,s,o){r.clearRect(0,0,s.width,s.height),s.style||(s.style={}),s.height=o,s.width=o,s.style.height=o+"px",s.style.width=o+"px"}function i(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}t.render=function(s,o,a){let l=a,c=o;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),o||(c=i()),l=e.getOptions(l);const u=e.getImageWidth(s.modules.size,l),h=c.getContext("2d"),f=h.createImageData(u,u);return e.qrToImageData(f.data,s,l),n(h,c,u),h.putImageData(f,0,0),c},t.renderToDataURL=function(s,o,a){let l=a;typeof l>"u"&&(!o||!o.getContext)&&(l=o,o=void 0),l||(l={});const c=t.render(s,o,l),u=l.type||"image/png",h=l.rendererOpts||{};return c.toDataURL(u,h.quality)}})(oP);var aP={};const jG=fM;function sA(t,e){const n=t.a/255,i=e+'="'+t.hex+'"';return n<1?i+" "+e+'-opacity="'+n.toFixed(2).slice(1)+'"':i}function Yy(t,e,n){let i=t+e;return typeof n<"u"&&(i+=" "+n),i}function FG(t,e,n){let i="",r=0,s=!1,o=0;for(let a=0;a<t.length;a++){const l=Math.floor(a%e),c=Math.floor(a/e);!l&&!s&&(s=!0),t[a]?(o++,a>0&&l>0&&t[a-1]||(i+=s?Yy("M",l+n,.5+c+n):Yy("m",r,0),r=0,s=!1),l+1<e&&t[a+1]||(i+=Yy("h",o),o=0)):r++}return i}aP.render=function(e,n,i){const r=jG.getOptions(n),s=e.modules.size,o=e.modules.data,a=s+r.margin*2,l=r.color.light.a?"<path "+sA(r.color.light,"fill")+' d="M0 0h'+a+"v"+a+'H0z"/>':"",c="<path "+sA(r.color.dark,"stroke")+' d="'+FG(o,s,r.margin)+'"/>',u='viewBox="0 0 '+a+" "+a+'"',f='<svg xmlns="http://www.w3.org/2000/svg" '+(r.width?'width="'+r.width+'" height="'+r.width+'" ':"")+u+' shape-rendering="crispEdges">'+l+c+`</svg>
`;return typeof i=="function"&&i(null,f),f};const zG=nG,Tw=Yk,lP=oP,VG=aP;function pM(t,e,n,i,r){const s=[].slice.call(arguments,1),o=s.length,a=typeof s[o-1]=="function";if(!a&&!zG())throw new Error("Callback required as last argument");if(a){if(o<2)throw new Error("Too few arguments provided");o===2?(r=n,n=e,e=i=void 0):o===3&&(e.getContext&&typeof r>"u"?(r=i,i=void 0):(r=i,i=n,n=e,e=void 0))}else{if(o<1)throw new Error("Too few arguments provided");return o===1?(n=e,e=i=void 0):o===2&&!e.getContext&&(i=n,n=e,e=void 0),new Promise(function(l,c){try{const u=Tw.create(n,i);l(t(u,e,i))}catch(u){c(u)}})}try{const l=Tw.create(n,i);r(null,t(l,e,i))}catch(l){r(l)}}Tw.create;pM.bind(null,lP.render);pM.bind(null,lP.renderToDataURL);pM.bind(null,function(t,e,n){return VG.render(t,n)});function Xy(t){switch(t){case"processed":case"confirmed":case"finalized":case void 0:return t;case"recent":return"processed";case"single":case"singleGossip":return"confirmed";case"max":case"root":return"finalized";default:return}}const vf="solana:mainnet",cP="solana:devnet",uP="solana:testnet",WG="solana:localnet",HG="https://api.mainnet-beta.solana.com";function GG(t){return t.includes(HG)?vf:/\bdevnet\b/i.test(t)?cP:/\btestnet\b/i.test(t)?uP:/\blocalhost\b/i.test(t)||/\b127\.0\.0\.1\b/.test(t)?WG:vf}function $G(t){let e=`${t.domain} wants you to sign in with your Solana account:
`;e+=`${t.address}`,t.statement&&(e+=`

${t.statement}`);const n=[];if(t.uri&&n.push(`URI: ${t.uri}`),t.version&&n.push(`Version: ${t.version}`),t.chainId&&n.push(`Chain ID: ${t.chainId}`),t.nonce&&n.push(`Nonce: ${t.nonce}`),t.issuedAt&&n.push(`Issued At: ${t.issuedAt}`),t.expirationTime&&n.push(`Expiration Time: ${t.expirationTime}`),t.notBefore&&n.push(`Not Before: ${t.notBefore}`),t.requestId&&n.push(`Request ID: ${t.requestId}`),t.resources){n.push("Resources:");for(const i of t.resources)n.push(`- ${i}`)}return n.length&&(e+=`

${n.join(`
`)}`),e}function YG(t){return Object.freeze({...t,decode:(e,n=0)=>t.read(e,n)[0]})}var XG=t=>YG({read(e,n){const i=n===0?e:e.slice(n);if(i.length===0)return["",0];let r=i.findIndex(l=>l!==0);r=r===-1?i.length:r;const s=t[0].repeat(r);if(r===i.length)return[s,e.length];const o=i.slice(r).reduce((l,c)=>l*256n+BigInt(c),0n),a=qG(o,t);return[s+a,e.length]}});function qG(t,e){const n=BigInt(e.length),i=[];for(;t>0n;)i.unshift(e[Number(t%n)]),t/=n;return i.join("")}var KG="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",ZG=()=>XG(KG);const Do={ERROR_ASSOCIATION_PORT_OUT_OF_RANGE:"ERROR_ASSOCIATION_PORT_OUT_OF_RANGE",ERROR_FORBIDDEN_WALLET_BASE_URL:"ERROR_FORBIDDEN_WALLET_BASE_URL",ERROR_SECURE_CONTEXT_REQUIRED:"ERROR_SECURE_CONTEXT_REQUIRED",ERROR_SESSION_CLOSED:"ERROR_SESSION_CLOSED",ERROR_SESSION_TIMEOUT:"ERROR_SESSION_TIMEOUT",ERROR_WALLET_NOT_FOUND:"ERROR_WALLET_NOT_FOUND",ERROR_INVALID_PROTOCOL_VERSION:"ERROR_INVALID_PROTOCOL_VERSION"};class Bo extends Error{constructor(...e){const[n,i,r]=e;super(i),this.code=n,this.data=r,this.name="SolanaMobileWalletAdapterError"}}class dP extends Error{constructor(...e){const[n,i,r,s]=e;super(r),this.code=i,this.data=s,this.jsonRpcMessageId=n,this.name="SolanaMobileWalletAdapterProtocolError"}}function Gn(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,[])).next())})}function QG(t){return window.btoa(t)}function oA(t,e){return window.btoa(String.fromCharCode.call(null,...t))}function hP(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}function qy(t,e){return Gn(this,void 0,void 0,function*(){const n=yield crypto.subtle.exportKey("raw",t),i=yield crypto.subtle.sign({hash:"SHA-256",name:"ECDSA"},e,n),r=new Uint8Array(n.byteLength+i.byteLength);return r.set(new Uint8Array(n),0),r.set(new Uint8Array(i),n.byteLength),r})}function JG(t){return $G(t)}function e$(t){return QG(JG(t)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}const t$="solana:signTransactions",aA="solana:cloneAuthorization";function n$(t){return ZG().decode(t)}function i$(t){return n$(hP(t))}function r$(t,e){return new Proxy({},{get(n,i){return i==="then"?null:(n[i]==null&&(n[i]=function(r){return Gn(this,void 0,void 0,function*(){const{method:s,params:o}=s$(i,r,t),a=yield e(s,o);return s==="authorize"&&o.sign_in_payload&&!a.sign_in_result&&(a.sign_in_result=yield a$(o.sign_in_payload,a,e)),o$(i,a,t)})}),n[i])},defineProperty(){return!1},deleteProperty(){return!1}})}function s$(t,e,n){let i=e,r=t.toString().replace(/[A-Z]/g,s=>`_${s.toLowerCase()}`).toLowerCase();switch(t){case"authorize":{let{chain:s}=i;if(n==="legacy"){switch(s){case"solana:testnet":{s="testnet";break}case"solana:devnet":{s="devnet";break}case"solana:mainnet":{s="mainnet-beta";break}default:s=i.cluster}i.cluster=s}else{switch(s){case"testnet":case"devnet":{s=`solana:${s}`;break}case"mainnet-beta":{s="solana:mainnet";break}}i.chain=s}}case"reauthorize":{const{auth_token:s,identity:o}=i;if(s)switch(n){case"legacy":{r="reauthorize",i={auth_token:s,identity:o};break}default:{r="authorize";break}}break}}return{method:r,params:i}}function o$(t,e,n){switch(t){case"getCapabilities":{const i=e;switch(n){case"legacy":{const r=[t$];return i.supports_clone_authorization===!0&&r.push(aA),Object.assign(Object.assign({},i),{features:r})}case"v1":return Object.assign(Object.assign({},i),{supports_sign_and_send_transactions:!0,supports_clone_authorization:i.features.includes(aA)})}}}return e}function a$(t,e,n){var i;return Gn(this,void 0,void 0,function*(){const r=(i=t.domain)!==null&&i!==void 0?i:window.location.host,s=e.accounts[0].address,o=e$(Object.assign(Object.assign({},t),{domain:r,address:i$(s)})),a=yield n("sign_messages",{addresses:[s],payloads:[o]}),l=hP(a.signed_payloads[0]),c=oA(l.slice(0,l.length-64)),u=oA(l.slice(l.length-64));return{address:s,signed_message:c.length==0?o:c,signature:u}})}const Ol=4;function l$(t){if(t>=4294967296)throw new Error("Outbound sequence number overflow. The maximum sequence number is 32-bytes.");const e=new ArrayBuffer(Ol);return new DataView(e).setUint32(0,t,!1),new Uint8Array(e)}const Aw=12,fP=65;function c$(t,e,n){return Gn(this,void 0,void 0,function*(){const i=l$(e),r=new Uint8Array(Aw);crypto.getRandomValues(r);const s=yield crypto.subtle.encrypt(mP(i,r),n,new TextEncoder().encode(t)),o=new Uint8Array(i.byteLength+r.byteLength+s.byteLength);return o.set(new Uint8Array(i),0),o.set(new Uint8Array(r),i.byteLength),o.set(new Uint8Array(s),i.byteLength+r.byteLength),o})}function pP(t,e){return Gn(this,void 0,void 0,function*(){const n=t.slice(0,Ol),i=t.slice(Ol,Ol+Aw),r=t.slice(Ol+Aw),s=yield crypto.subtle.decrypt(mP(n,i),e,r);return u$().decode(s)})}function mP(t,e){return{additionalData:t,iv:e,name:"AES-GCM",tagLength:128}}let Ky;function u$(){return Ky===void 0&&(Ky=new TextDecoder("utf-8")),Ky}function d$(){return Gn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDSA",namedCurve:"P-256"},!1,["sign"])})}function Zy(){return Gn(this,void 0,void 0,function*(){return yield crypto.subtle.generateKey({name:"ECDH",namedCurve:"P-256"},!1,["deriveKey","deriveBits"])})}function h$(t){let e="";const n=new Uint8Array(t),i=n.byteLength;for(let r=0;r<i;r++)e+=String.fromCharCode(n[r]);return window.btoa(e)}function f$(){return gP(49152+Math.floor(Math.random()*16384))}function gP(t){if(t<49152||t>65535)throw new Bo(Do.ERROR_ASSOCIATION_PORT_OUT_OF_RANGE,`Association port number must be between 49152 and 65535. ${t} given.`,{port:t});return t}function p$(t){return t.replace(/[/+=]/g,e=>({"/":"_","+":"-","=":"."})[e])}const m$="solana-wallet";function lA(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function g$(t,e){let n=null;if(e){try{n=new URL(e)}catch{}if((n==null?void 0:n.protocol)!=="https:")throw new Bo(Do.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}n||(n=new URL(`${m$}:/`));const i=t.startsWith("/")?t:[...lA(n.pathname),...lA(t)].join("/");return new URL(i,n)}function x$(t,e,n,i=["v1"]){return Gn(this,void 0,void 0,function*(){const r=gP(e),s=yield crypto.subtle.exportKey("raw",t),o=h$(s),a=g$("v1/associate/local",n);return a.searchParams.set("association",p$(o)),a.searchParams.set("port",`${r}`),i.forEach(l=>{a.searchParams.set("v",l)}),a})}function y$(t,e){return Gn(this,void 0,void 0,function*(){const n=JSON.stringify(t),i=t.id;return c$(n,i,e)})}function v$(t,e){return Gn(this,void 0,void 0,function*(){const n=yield pP(t,e),i=JSON.parse(n);if(Object.hasOwnProperty.call(i,"error"))throw new dP(i.id,i.error.code,i.error.message);return i})}function w$(t,e,n){return Gn(this,void 0,void 0,function*(){const[i,r]=yield Promise.all([crypto.subtle.exportKey("raw",e),crypto.subtle.importKey("raw",t.slice(0,fP),{name:"ECDH",namedCurve:"P-256"},!1,[])]),s=yield crypto.subtle.deriveBits({name:"ECDH",public:r},n,256),o=yield crypto.subtle.importKey("raw",s,"HKDF",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"HKDF",hash:"SHA-256",salt:new Uint8Array(i),info:new Uint8Array},o,{name:"AES-GCM",length:128},!1,["encrypt","decrypt"])})}function _$(t,e){return Gn(this,void 0,void 0,function*(){const n=yield pP(t,e),i=JSON.parse(n);let r="legacy";if(Object.hasOwnProperty.call(i,"v"))switch(i.v){case 1:case"1":case"v1":r="v1";break;case"legacy":r="legacy";break;default:throw new Bo(Do.ERROR_INVALID_PROTOCOL_VERSION,`Unknown/unsupported protocol version: ${i.v}`)}return{protocol_version:r}})}const xg={Firefox:0,Other:1};function b$(){return navigator.userAgent.indexOf("Firefox/")!==-1?xg.Firefox:xg.Other}function S$(){return new Promise((t,e)=>{function n(){clearTimeout(r),window.removeEventListener("blur",i)}function i(){n(),t()}window.addEventListener("blur",i);const r=setTimeout(()=>{n(),e()},3e3)})}let Wd=null;function M$(t){Wd==null&&(Wd=document.createElement("iframe"),Wd.style.display="none",document.body.appendChild(Wd)),Wd.contentWindow.location.href=t.toString()}function E$(t){return Gn(this,void 0,void 0,function*(){if(t.protocol==="https:")window.location.assign(t);else try{const e=b$();switch(e){case xg.Firefox:M$(t);break;case xg.Other:{const n=S$();window.location.assign(t),yield n;break}default:}}catch{throw new Bo(Do.ERROR_WALLET_NOT_FOUND,"Found no installed wallet that supports the mobile wallet protocol.")}})}function T$(t,e){return Gn(this,void 0,void 0,function*(){const n=f$(),i=yield x$(t,n,e);return yield E$(i),n})}const cA={retryDelayScheduleMs:[150,150,200,500,500,750,750,1e3],timeoutMs:3e4},A$="com.solana.mobilewalletadapter.v1";function C$(){if(typeof window>"u"||window.isSecureContext!==!0)throw new Bo(Do.ERROR_SECURE_CONTEXT_REQUIRED,"The mobile wallet adapter protocol must be used in a secure context (`https`).")}function N$(t){let e;try{e=new URL(t)}catch{throw new Bo(Do.ERROR_FORBIDDEN_WALLET_BASE_URL,"Invalid base URL supplied by wallet")}if(e.protocol!=="https:")throw new Bo(Do.ERROR_FORBIDDEN_WALLET_BASE_URL,"Base URLs supplied by wallets must be valid `https` URLs")}function uA(t){return new DataView(t).getUint32(0,!1)}function R$(t,e){return Gn(this,void 0,void 0,function*(){C$();const n=yield d$(),r=`ws://localhost:${yield T$(n.publicKey,e==null?void 0:e.baseUri)}/solana-wallet`;let s;const o=(()=>{const u=[...cA.retryDelayScheduleMs];return()=>u.length>1?u.shift():u[0]})();let a=1,l=0,c={__type:"disconnected"};return new Promise((u,h)=>{let f;const p={},x=()=>Gn(this,void 0,void 0,function*(){if(c.__type!=="connecting"){console.warn(`Expected adapter state to be \`connecting\` at the moment the websocket opens. Got \`${c.__type}\`.`);return}f.removeEventListener("open",x);const{associationKeypair:N}=c,k=yield Zy();f.send(yield qy(k.publicKey,N.privateKey)),c={__type:"hello_req_sent",associationPublicKey:N.publicKey,ecdhPrivateKey:k.privateKey}}),y=N=>{N.wasClean?c={__type:"disconnected"}:h(new Bo(Do.ERROR_SESSION_CLOSED,`The wallet session dropped unexpectedly (${N.code}: ${N.reason}).`,{closeEvent:N})),_()},g=N=>Gn(this,void 0,void 0,function*(){_(),Date.now()-s>=cA.timeoutMs?h(new Bo(Do.ERROR_SESSION_TIMEOUT,`Failed to connect to the wallet websocket at ${r}.`)):(yield new Promise(k=>{const R=o();w=window.setTimeout(k,R)}),S())}),m=N=>Gn(this,void 0,void 0,function*(){const k=yield N.data.arrayBuffer();switch(c.__type){case"connecting":if(k.byteLength!==0)throw new Error("Encountered unexpected message while connecting");const R=yield Zy();f.send(yield qy(R.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:R.privateKey};break;case"connected":try{const B=k.slice(0,Ol),L=uA(B);if(L!==l+1)throw new Error("Encrypted message has invalid sequence number");l=L;const D=yield v$(k,c.sharedSecret),j=p[D.id];delete p[D.id],j.resolve(D.result)}catch(B){if(B instanceof dP){const L=p[B.jsonRpcMessageId];delete p[B.jsonRpcMessageId],L.reject(B)}else throw B}break;case"hello_req_sent":{if(k.byteLength===0){const Y=yield Zy();f.send(yield qy(Y.publicKey,n.privateKey)),c={__type:"hello_req_sent",associationPublicKey:n.publicKey,ecdhPrivateKey:Y.privateKey};break}const B=yield w$(k,c.associationPublicKey,c.ecdhPrivateKey),L=k.slice(fP),D=L.byteLength!==0?yield Gn(this,void 0,void 0,function*(){const Y=L.slice(0,Ol),I=uA(Y);if(I!==l+1)throw new Error("Encrypted message has invalid sequence number");return l=I,_$(L,B)}):{protocol_version:"legacy"};c={__type:"connected",sharedSecret:B,sessionProperties:D};const j=r$(D.protocol_version,(Y,I)=>Gn(this,void 0,void 0,function*(){const v=a++;return f.send(yield y$({id:v,jsonrpc:"2.0",method:Y,params:I??{}},B)),new Promise((b,E)=>{p[v]={resolve(P){switch(Y){case"authorize":case"reauthorize":{const{wallet_uri_base:C}=P;if(C!=null)try{N$(C)}catch(z){E(z);return}break}}b(P)},reject:E}})}));try{u(yield t(j))}catch(Y){h(Y)}finally{_(),f.close()}break}}});let _,w;const S=()=>{_&&_(),c={__type:"connecting",associationKeypair:n},s===void 0&&(s=Date.now()),f=new WebSocket(r,[A$]),f.addEventListener("open",x),f.addEventListener("close",y),f.addEventListener("error",g),f.addEventListener("message",m),_=()=>{window.clearTimeout(w),f.removeEventListener("open",x),f.removeEventListener("close",y),f.removeEventListener("error",g),f.removeEventListener("message",m)}};S()})})}function L$(t){if(t.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),n=0;n<e.length;n++)e[n]=255;for(var i=0;i<t.length;i++){var r=t.charAt(i),s=r.charCodeAt(0);if(e[s]!==255)throw new TypeError(r+" is ambiguous");e[s]=i}var o=t.length,a=t.charAt(0),l=Math.log(o)/Math.log(256),c=Math.log(256)/Math.log(o);function u(p){if(p instanceof Uint8Array||(ArrayBuffer.isView(p)?p=new Uint8Array(p.buffer,p.byteOffset,p.byteLength):Array.isArray(p)&&(p=Uint8Array.from(p))),!(p instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(p.length===0)return"";for(var x=0,y=0,g=0,m=p.length;g!==m&&p[g]===0;)g++,x++;for(var _=(m-g)*c+1>>>0,w=new Uint8Array(_);g!==m;){for(var S=p[g],N=0,k=_-1;(S!==0||N<y)&&k!==-1;k--,N++)S+=256*w[k]>>>0,w[k]=S%o>>>0,S=S/o>>>0;if(S!==0)throw new Error("Non-zero carry");y=N,g++}for(var R=_-y;R!==_&&w[R]===0;)R++;for(var B=a.repeat(x);R<_;++R)B+=t.charAt(w[R]);return B}function h(p){if(typeof p!="string")throw new TypeError("Expected String");if(p.length===0)return new Uint8Array;for(var x=0,y=0,g=0;p[x]===a;)y++,x++;for(var m=(p.length-x)*l+1>>>0,_=new Uint8Array(m);p[x];){var w=p.charCodeAt(x);if(w>255)return;var S=e[w];if(S===255)return;for(var N=0,k=m-1;(S!==0||N<g)&&k!==-1;k--,N++)S+=o*_[k]>>>0,_[k]=S%256>>>0,S=S/256>>>0;if(S!==0)throw new Error("Non-zero carry");g=N,x++}for(var R=m-g;R!==m&&_[R]===0;)R++;for(var B=new Uint8Array(y+(m-R)),L=y;R!==m;)B[L++]=_[R++];return B}function f(p){var x=h(p);if(x)return x;throw new Error("Non-base"+o+" character")}return{encode:u,decodeUnsafe:h,decode:f}}var I$=L$;const k$=I$,P$="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";var D$=k$(P$);const Cw=$a(D$);function ln(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,[])).next())})}function be(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function zn(t,e,n,i,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}var lh,qn,xl,qc,xP,yP,vP,Ym;const B$=`
<div class="mobile-wallet-adapter-embedded-modal-container" role="dialog" aria-modal="true" aria-labelledby="modal-title">
    <div data-modal-close style="position: absolute; width: 100%; height: 100%;"></div>
	<div class="mobile-wallet-adapter-embedded-modal-card">
		<div>
			<button data-modal-close class="mobile-wallet-adapter-embedded-modal-close">
				<svg width="14" height="14">
					<path d="M 6.7125,8.3036995 1.9082,13.108199 c -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 C 0.1056,12.896899 0,12.631699 0,12.312499 c 0,-0.3192 0.1056,-0.5844 0.3167,-0.7958 L 5.1212,6.7124995 0.3167,1.9082 C 0.1056,1.6969 0,1.4317 0,1.1125 0,0.7933 0.1056,0.5281 0.3167,0.3167 0.5281,0.1056 0.7933,0 1.1125,0 1.4317,0 1.6969,0.1056 1.9082,0.3167 L 6.7125,5.1212 11.5167,0.3167 C 11.7281,0.1056 11.9933,0 12.3125,0 c 0.3192,0 0.5844,0.1056 0.7957,0.3167 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 L 8.3037001,6.7124995 13.1082,11.516699 c 0.2112,0.2114 0.3168,0.4766 0.3168,0.7958 0,0.3192 -0.1056,0.5844 -0.3168,0.7957 -0.2113,0.2112 -0.4765,0.3168 -0.7957,0.3168 -0.3192,0 -0.5844,-0.1056 -0.7958,-0.3168 z" />
				</svg>
			</button>
		</div>
		<div class="mobile-wallet-adapter-embedded-modal-content"></div>
	</div>
</div>
`,U$=`
.mobile-wallet-adapter-embedded-modal-container {
    display: flex; /* Use flexbox to center content */
    justify-content: center; /* Center horizontally */
    align-items: center; /* Center vertically */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
    overflow-y: auto; /* enable scrolling */
}

.mobile-wallet-adapter-embedded-modal-card {
    display: flex;
    flex-direction: column;
    margin: auto 20px;
    max-width: 780px;
    padding: 20px;
    border-radius: 24px;
    background: #ffffff;
    font-family: "Inter Tight", "PT Sans", Calibri, sans-serif;
    transform: translateY(-200%);
    animation: slide-in 0.5s forwards;
}

@keyframes slide-in {
    100% { transform: translateY(0%); }
}

.mobile-wallet-adapter-embedded-modal-close {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    cursor: pointer;
    background: #e4e9e9;
    border: none;
    border-radius: 50%;
}

.mobile-wallet-adapter-embedded-modal-close:focus-visible {
    outline-color: red;
}

.mobile-wallet-adapter-embedded-modal-close svg {
    fill: #546266;
    transition: fill 200ms ease 0s;
}

.mobile-wallet-adapter-embedded-modal-close:hover svg {
    fill: #fff;
}
`,O$=`
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter+Tight:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
`;class j${constructor(){lh.add(this),qn.set(this,null),xl.set(this,{}),qc.set(this,!1),this.dom=null,this.open=()=>{console.debug("Modal open"),be(this,lh,"m",yP).call(this),be(this,qn,"f")&&(be(this,qn,"f").style.display="flex")},this.close=(e=void 0)=>{var n;console.debug("Modal close"),be(this,lh,"m",vP).call(this),be(this,qn,"f")&&(be(this,qn,"f").style.display="none"),(n=be(this,xl,"f").close)===null||n===void 0||n.forEach(i=>i(e))},Ym.set(this,e=>{e.key==="Escape"&&this.close(e)}),this.init=this.init.bind(this),zn(this,qn,document.getElementById("mobile-wallet-adapter-embedded-root-ui"))}init(){return ln(this,void 0,void 0,function*(){console.log("Injecting modal"),be(this,lh,"m",xP).call(this)})}addEventListener(e,n){var i;return!((i=be(this,xl,"f")[e])===null||i===void 0)&&i.push(n)||(be(this,xl,"f")[e]=[n]),()=>this.removeEventListener(e,n)}removeEventListener(e,n){var i;be(this,xl,"f")[e]=(i=be(this,xl,"f")[e])===null||i===void 0?void 0:i.filter(r=>n!==r)}}qn=new WeakMap,xl=new WeakMap,qc=new WeakMap,Ym=new WeakMap,lh=new WeakSet,xP=function(){if(document.getElementById("mobile-wallet-adapter-embedded-root-ui")){be(this,qn,"f")||zn(this,qn,document.getElementById("mobile-wallet-adapter-embedded-root-ui"));return}zn(this,qn,document.createElement("div")),be(this,qn,"f").id="mobile-wallet-adapter-embedded-root-ui",be(this,qn,"f").innerHTML=B$,be(this,qn,"f").style.display="none";const e=be(this,qn,"f").querySelector(".mobile-wallet-adapter-embedded-modal-content");e&&(e.innerHTML=this.contentHtml);const n=document.createElement("style");n.id="mobile-wallet-adapter-embedded-modal-styles",n.textContent=U$+this.contentStyles;const i=document.createElement("div");i.innerHTML=O$,this.dom=i.attachShadow({mode:"closed"}),this.dom.appendChild(n),this.dom.appendChild(be(this,qn,"f")),document.body.appendChild(i)},yP=function(){if(!be(this,qn,"f")||be(this,qc,"f"))return;[...be(this,qn,"f").querySelectorAll("[data-modal-close]")].forEach(n=>n==null?void 0:n.addEventListener("click",this.close)),window.addEventListener("load",this.close),document.addEventListener("keydown",be(this,Ym,"f")),zn(this,qc,!0)},vP=function(){if(!be(this,qc,"f")||(window.removeEventListener("load",this.close),document.removeEventListener("keydown",be(this,Ym,"f")),!be(this,qn,"f")))return;[...be(this,qn,"f").querySelectorAll("[data-modal-close]")].forEach(n=>n==null?void 0:n.removeEventListener("click",this.close)),zn(this,qc,!1)};const F$="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDIuNUgxN0MxNy44Mjg0IDIuNSAxOC41IDMuMTcxNTcgMTguNSA0VjIwQzE4LjUgMjAuODI4NCAxNy44Mjg0IDIxLjUgMTcgMjEuNUg3QzYuMTcxNTcgMjEuNSA1LjUgMjAuODI4NCA1LjUgMjBWNEM1LjUgMy4xNzE1NyA2LjE3MTU3IDIuNSA3IDIuNVpNMyA0QzMgMS43OTA4NiA0Ljc5MDg2IDAgNyAwSDE3QzE5LjIwOTEgMCAyMSAxLjc5MDg2IDIxIDRWMjBDMjEgMjIuMjA5MSAxOS4yMDkxIDI0IDE3IDI0SDdDNC43OTA4NiAyNCAzIDIyLjIwOTEgMyAyMFY0Wk0xMSA0LjYxNTM4QzEwLjQ0NzcgNC42MTUzOCAxMCA1LjA2MzEgMTAgNS42MTUzOFY2LjM4NDYyQzEwIDYuOTM2OSAxMC40NDc3IDcuMzg0NjIgMTEgNy4zODQ2MkgxM0MxMy41NTIzIDcuMzg0NjIgMTQgNi45MzY5IDE0IDYuMzg0NjJWNS42MTUzOEMxNCA1LjA2MzEgMTMuNTUyMyA0LjYxNTM4IDEzIDQuNjE1MzhIMTFaIiBmaWxsPSIjRENCOEZGIi8+Cjwvc3ZnPgo=";function Wp(t){return window.btoa(String.fromCharCode.call(null,...t))}function Xo(t){return new Uint8Array(window.atob(t).split("").map(e=>e.charCodeAt(0)))}var Kc,jl,Nw,Rw,Lw,Iw,ch,Ni,ro,ra,Zc,yl,Xm,uh,qm,kw,Km,wP,Pw,Zm,Qc,Qm,dh,Jm,Jc,hh,e0,Dw,Bw,t0,n0,Uw,Ow,i0;const _P="Mobile Wallet Adapter",z$=64,V$=[zi,dn,xo,ec];class W${constructor(e){Kc.add(this),jl.set(this,{}),Nw.set(this,"1.0.0"),Rw.set(this,_P),Lw.set(this,"https://solanamobile.com/wallets"),Iw.set(this,F$),ch.set(this,void 0),Ni.set(this,void 0),ro.set(this,void 0),ra.set(this,!1),Zc.set(this,0),yl.set(this,[]),Xm.set(this,void 0),uh.set(this,void 0),qm.set(this,void 0),kw.set(this,(n,i)=>{var r;return!((r=be(this,jl,"f")[n])===null||r===void 0)&&r.push(i)||(be(this,jl,"f")[n]=[i]),()=>be(this,Kc,"m",wP).call(this,n,i)}),Pw.set(this,({silent:n}={})=>ln(this,void 0,void 0,function*(){if(be(this,ra,"f")||this.connected)return{accounts:this.accounts};zn(this,ra,!0);try{if(n){const i=yield be(this,ro,"f").get();if(i)yield be(this,Qm,"f").call(this,i.capabilities),yield be(this,Qc,"f").call(this,i);else return{accounts:this.accounts}}else yield be(this,Zm,"f").call(this)}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}finally{zn(this,ra,!1)}return{accounts:this.accounts}})),Zm.set(this,n=>ln(this,void 0,void 0,function*(){try{const i=yield be(this,ro,"f").get();if(i)return be(this,Qc,"f").call(this,i),i;const r=yield be(this,Xm,"f").select(be(this,yl,"f"));return yield be(this,Jc,"f").call(this,s=>ln(this,void 0,void 0,function*(){const[o,a]=yield Promise.all([s.getCapabilities(),s.authorize({chain:r,identity:be(this,ch,"f"),sign_in_payload:n})]),l=be(this,e0,"f").call(this,a.accounts),c=Object.assign(Object.assign({},a),{accounts:l,chain:r,capabilities:o});return Promise.all([be(this,Qm,"f").call(this,o),be(this,ro,"f").set(c),be(this,Qc,"f").call(this,c)]),c}))}catch(i){throw new Error(i instanceof Error&&i.message||"Unknown error")}})),Qc.set(this,n=>ln(this,void 0,void 0,function*(){var i;const r=be(this,Ni,"f")==null||((i=be(this,Ni,"f"))===null||i===void 0?void 0:i.accounts.length)!==n.accounts.length||be(this,Ni,"f").accounts.some((s,o)=>s.address!==n.accounts[o].address);zn(this,Ni,n),r&&be(this,Kc,"m",Km).call(this,"change",{accounts:this.accounts})})),Qm.set(this,n=>ln(this,void 0,void 0,function*(){const i=n.features.includes("solana:signTransactions"),r=n.supports_sign_and_send_transactions,s=zi in this.features!==r||dn in this.features!==i;zn(this,uh,Object.assign(Object.assign({},(r||!r&&!i)&&{[zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:be(this,t0,"f")}}),i&&{[dn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:be(this,n0,"f")}})),s&&be(this,Kc,"m",Km).call(this,"change",{features:this.features})})),dh.set(this,(n,i,r)=>ln(this,void 0,void 0,function*(){var s,o;try{const[a,l]=yield Promise.all([(o=(s=be(this,Ni,"f"))===null||s===void 0?void 0:s.capabilities)!==null&&o!==void 0?o:yield n.getCapabilities(),n.authorize({auth_token:i,identity:be(this,ch,"f"),chain:r})]),c=be(this,e0,"f").call(this,l.accounts),u=Object.assign(Object.assign({},l),{accounts:c,chain:r,capabilities:a});Promise.all([be(this,ro,"f").set(u),be(this,Qc,"f").call(this,u)])}catch(a){throw be(this,Jm,"f").call(this),new Error(a instanceof Error&&a.message||"Unknown error")}})),Jm.set(this,()=>ln(this,void 0,void 0,function*(){var n;be(this,ro,"f").clear(),zn(this,ra,!1),zn(this,Zc,(n=be(this,Zc,"f"),n++,n)),zn(this,Ni,void 0),be(this,Kc,"m",Km).call(this,"change",{accounts:this.accounts})})),Jc.set(this,n=>ln(this,void 0,void 0,function*(){var i;const r=(i=be(this,Ni,"f"))===null||i===void 0?void 0:i.wallet_uri_base,s=r?{baseUri:r}:void 0,o=be(this,Zc,"f");try{return yield R$(n,s)}catch(a){throw be(this,Zc,"f")!==o&&(yield new Promise(()=>{})),a instanceof Error&&a.name==="SolanaMobileWalletAdapterError"&&a.code==="ERROR_WALLET_NOT_FOUND"&&(yield be(this,qm,"f").call(this,this)),a}})),hh.set(this,()=>{if(!be(this,Ni,"f"))throw new Error("Wallet not connected");return{authToken:be(this,Ni,"f").auth_token,chain:be(this,Ni,"f").chain}}),e0.set(this,n=>n.map(i=>{var r,s;const o=Xo(i.address);return{address:Cw.encode(o),publicKey:o,label:i.label,icon:i.icon,chains:(r=i.chains)!==null&&r!==void 0?r:be(this,yl,"f"),features:(s=i.features)!==null&&s!==void 0?s:V$}})),Dw.set(this,n=>ln(this,void 0,void 0,function*(){const{authToken:i,chain:r}=be(this,hh,"f").call(this);try{const s=n.map(o=>Wp(o));return yield be(this,Jc,"f").call(this,o=>ln(this,void 0,void 0,function*(){return yield be(this,dh,"f").call(this,o,i,r),(yield o.signTransactions({payloads:s})).signed_payloads.map(Xo)}))}catch(s){throw new Error(s instanceof Error&&s.message||"Unknown error")}})),Bw.set(this,(n,i)=>ln(this,void 0,void 0,function*(){const{authToken:r,chain:s}=be(this,hh,"f").call(this);try{return yield be(this,Jc,"f").call(this,o=>ln(this,void 0,void 0,function*(){const[a,l]=yield Promise.all([o.getCapabilities(),be(this,dh,"f").call(this,o,r,s)]);if(a.supports_sign_and_send_transactions){const c=Wp(n);return(yield o.signAndSendTransactions(Object.assign(Object.assign({},i),{payloads:[c]}))).signatures.map(Xo)[0]}else throw new Error("connected wallet does not support signAndSendTransaction")}))}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}})),t0.set(this,(...n)=>ln(this,void 0,void 0,function*(){const i=[];for(const r of n){const s=yield be(this,Bw,"f").call(this,r.transaction,r.options);i.push({signature:s})}return i})),n0.set(this,(...n)=>ln(this,void 0,void 0,function*(){return(yield be(this,Dw,"f").call(this,n.map(({transaction:i})=>i))).map(i=>({signedTransaction:i}))})),Uw.set(this,(...n)=>ln(this,void 0,void 0,function*(){const{authToken:i,chain:r}=be(this,hh,"f").call(this),s=n.map(({account:a})=>Wp(a.publicKey)),o=n.map(({message:a})=>Wp(a));try{return yield be(this,Jc,"f").call(this,a=>ln(this,void 0,void 0,function*(){return yield be(this,dh,"f").call(this,a,i,r),(yield a.signMessages({addresses:s,payloads:o})).signed_payloads.map(Xo).map(c=>({signedMessage:c,signature:c.slice(-z$)}))}))}catch(a){throw new Error(a instanceof Error&&a.message||"Unknown error")}})),Ow.set(this,(...n)=>ln(this,void 0,void 0,function*(){const i=[];if(n.length>1)for(const r of n)i.push(yield be(this,i0,"f").call(this,r));else return[yield be(this,i0,"f").call(this,n[0])];return i})),i0.set(this,n=>ln(this,void 0,void 0,function*(){var i,r,s;zn(this,ra,!0);try{const o=yield be(this,Zm,"f").call(this,Object.assign(Object.assign({},n),{domain:(i=n==null?void 0:n.domain)!==null&&i!==void 0?i:window.location.host}));if(!o.sign_in_result)throw new Error("Sign in failed, no sign in result returned by wallet");const a=o.sign_in_result.address,l=o.accounts.find(c=>c.address==a);return{account:Object.assign(Object.assign({},l??{address:Cw.encode(Xo(a))}),{publicKey:Xo(a),chains:(r=l==null?void 0:l.chains)!==null&&r!==void 0?r:be(this,yl,"f"),features:(s=l==null?void 0:l.features)!==null&&s!==void 0?s:o.capabilities.features}),signedMessage:Xo(o.sign_in_result.signed_message),signature:Xo(o.sign_in_result.signature)}}catch(o){throw new Error(o instanceof Error&&o.message||"Unknown error")}finally{zn(this,ra,!1)}})),zn(this,ro,e.authorizationCache),zn(this,ch,e.appIdentity),zn(this,yl,e.chains),zn(this,Xm,e.chainSelector),zn(this,qm,e.onWalletNotFound),zn(this,uh,{[zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:be(this,t0,"f")},[dn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:be(this,n0,"f")}})}get version(){return be(this,Nw,"f")}get name(){return be(this,Rw,"f")}get url(){return be(this,Lw,"f")}get icon(){return be(this,Iw,"f")}get chains(){return be(this,yl,"f")}get features(){return Object.assign({[px]:{version:"1.0.0",connect:be(this,Pw,"f")},[pg]:{version:"1.0.0",disconnect:be(this,Jm,"f")},[mx]:{version:"1.0.0",on:be(this,kw,"f")},[xo]:{version:"1.0.0",signMessage:be(this,Uw,"f")},[ec]:{version:"1.0.0",signIn:be(this,Ow,"f")}},be(this,uh,"f"))}get accounts(){var e,n;return(n=(e=be(this,Ni,"f"))===null||e===void 0?void 0:e.accounts)!==null&&n!==void 0?n:[]}get connected(){return!!be(this,Ni,"f")}get isAuthorized(){return!!be(this,Ni,"f")}get currentAuthorization(){return be(this,Ni,"f")}get cachedAuthorizationResult(){return be(this,ro,"f").get()}}jl=new WeakMap,Nw=new WeakMap,Rw=new WeakMap,Lw=new WeakMap,Iw=new WeakMap,ch=new WeakMap,Ni=new WeakMap,ro=new WeakMap,ra=new WeakMap,Zc=new WeakMap,yl=new WeakMap,Xm=new WeakMap,uh=new WeakMap,qm=new WeakMap,kw=new WeakMap,Pw=new WeakMap,Zm=new WeakMap,Qc=new WeakMap,Qm=new WeakMap,dh=new WeakMap,Jm=new WeakMap,Jc=new WeakMap,hh=new WeakMap,e0=new WeakMap,Dw=new WeakMap,Bw=new WeakMap,t0=new WeakMap,n0=new WeakMap,Uw=new WeakMap,Ow=new WeakMap,i0=new WeakMap,Kc=new WeakSet,Km=function(e,...n){var i;(i=be(this,jl,"f")[e])===null||i===void 0||i.forEach(r=>r.apply(null,n))},wP=function(e,n){var i;be(this,jl,"f")[e]=(i=be(this,jl,"f")[e])===null||i===void 0?void 0:i.filter(r=>n!==r)};const H$="To use mobile wallet adapter, you must have a compatible mobile wallet application installed on your device.",G$="This browser appears to be incompatible with mobile wallet adapter. Open this page in a compatible mobile browser app and try again.";class $$ extends j${constructor(){super(...arguments),this.contentStyles=X$,this.contentHtml=Y$}initWithError(e){super.init(),this.populateError(e)}populateError(e){var n,i;const r=(n=this.dom)===null||n===void 0?void 0:n.getElementById("mobile-wallet-adapter-error-message"),s=(i=this.dom)===null||i===void 0?void 0:i.getElementById("mobile-wallet-adapter-error-action");if(r){if(e.name==="SolanaMobileWalletAdapterError")switch(e.code){case"ERROR_WALLET_NOT_FOUND":r.innerHTML=H$,s&&s.addEventListener("click",()=>{window.location.href="https://solanamobile.com/wallets"});return;case"ERROR_BROWSER_NOT_SUPPORTED":r.innerHTML=G$,s&&(s.style.display="none");return}r.innerHTML=`An unexpected error occurred: ${e.message}`}else console.log("Failed to locate error dialog element")}}const Y$=`
<svg class="mobile-wallet-adapter-embedded-modal-error-icon" xmlns="http://www.w3.org/2000/svg" height="50px" viewBox="0 -960 960 960" width="50px" fill="#000000"><path d="M 280,-80 Q 197,-80 138.5,-138.5 80,-197 80,-280 80,-363 138.5,-421.5 197,-480 280,-480 q 83,0 141.5,58.5 58.5,58.5 58.5,141.5 0,83 -58.5,141.5 Q 363,-80 280,-80 Z M 824,-120 568,-376 Q 556,-389 542.5,-402.5 529,-416 516,-428 q 38,-24 61,-64 23,-40 23,-88 0,-75 -52.5,-127.5 Q 495,-760 420,-760 345,-760 292.5,-707.5 240,-655 240,-580 q 0,6 0.5,11.5 0.5,5.5 1.5,11.5 -18,2 -39.5,8 -21.5,6 -38.5,14 -2,-11 -3,-22 -1,-11 -1,-23 0,-109 75.5,-184.5 Q 311,-840 420,-840 q 109,0 184.5,75.5 75.5,75.5 75.5,184.5 0,43 -13.5,81.5 Q 653,-460 629,-428 l 251,252 z m -615,-61 71,-71 70,71 29,-28 -71,-71 71,-71 -28,-28 -71,71 -71,-71 -28,28 71,71 -71,71 z"/></svg>
<div class="mobile-wallet-adapter-embedded-modal-title">We can't find a wallet.</div>
<div id="mobile-wallet-adapter-error-message" class="mobile-wallet-adapter-embedded-modal-subtitle"></div>
<div>
    <button data-error-action id="mobile-wallet-adapter-error-action" class="mobile-wallet-adapter-embedded-modal-error-action">
        Find a wallet
    </button>
</div>
`,X$=`
.mobile-wallet-adapter-embedded-modal-content {
    text-align: center;
}

.mobile-wallet-adapter-embedded-modal-error-icon {
    margin-top: 24px;
}

.mobile-wallet-adapter-embedded-modal-title {
    margin: 18px 100px auto 100px;
    color: #000000;
    font-size: 2.75em;
    font-weight: 600;
}

.mobile-wallet-adapter-embedded-modal-subtitle {
    margin: 30px 60px 40px 60px;
    color: #000000;
    font-size: 1.25em;
    font-weight: 400;
}

.mobile-wallet-adapter-embedded-modal-error-action {
    display: block;
    width: 100%;
    height: 56px;
    /*margin-top: 40px;*/
    font-size: 1.25em;
    /*line-height: 24px;*/
    /*letter-spacing: -1%;*/
    background: #000000;
    color: #FFFFFF;
    border-radius: 18px;
}

/* Smaller screens */
@media all and (max-width: 600px) {
    .mobile-wallet-adapter-embedded-modal-title {
        font-size: 1.5em;
        margin-right: 12px;
        margin-left: 12px;
    }
    .mobile-wallet-adapter-embedded-modal-subtitle {
        margin-right: 12px;
        margin-left: 12px;
    }
}
`;function q$(){return ln(this,void 0,void 0,function*(){if(typeof window<"u"){const t=window.navigator.userAgent.toLowerCase(),e=new $$;t.includes("wv")?e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_BROWSER_NOT_SUPPORTED",message:""}):e.initWithError({name:"SolanaMobileWalletAdapterError",code:"ERROR_WALLET_NOT_FOUND",message:""}),e.open()}})}const Qy="SolanaMobileWalletAdapterDefaultAuthorizationCache";function K$(){let t;try{t=window.localStorage}catch{}return{clear(){return ln(this,void 0,void 0,function*(){if(t)try{t.removeItem(Qy)}catch{}})},get(){return ln(this,void 0,void 0,function*(){if(t)try{const e=JSON.parse(t.getItem(Qy));if(e&&e.accounts){const n=e.accounts.map(i=>Object.assign(Object.assign({},i),{publicKey:"publicKey"in i?new Uint8Array(Object.values(i.publicKey)):Cw.decode(i.address)}));return Object.assign(Object.assign({},e),{accounts:n})}else return e||void 0}catch{}})},set(e){return ln(this,void 0,void 0,function*(){if(t)try{t.setItem(Qy,JSON.stringify(e))}catch{}})}}}function Z$(){return{select(t){return ln(this,void 0,void 0,function*(){return t.length===1?t[0]:t.includes(vf)?vf:t[0]})}}}function Qt(t,e,n,i){function r(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(u){try{c(i.next(u))}catch(h){o(h)}}function l(u){try{c(i.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):r(u.value).then(a,l)}c((i=i.apply(t,[])).next())})}function ct(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)}function pr(t,e,n,i,r){if(typeof e=="function"?t!==e||!0:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return e.set(t,n),n}const jw="standard:connect",Q$="standard:disconnect",J$="standard:events";function Jy(t){return window.btoa(String.fromCharCode.call(null,...t))}function eY(){return typeof window<"u"&&window.isSecureContext&&typeof document<"u"&&/android/i.test(navigator.userAgent)}var si,_n,ha,yo,r0,ho,vl,Fw,zw,bP,yg,s0,la;const o0=_P,tY=64;function nY(t){return"version"in t}function SP(t){switch(t){case"mainnet-beta":return"solana:mainnet";case"testnet":return"solana:testnet";case"devnet":return"solana:devnet";default:return t}}class iY extends QH{constructor(e,n){super(),si.add(this),this.supportedTransactionVersions=new Set(["legacy",0]),_n.set(this,void 0),ha.set(this,!1),yo.set(this,eY()?xt.Loadable:xt.Unsupported),r0.set(this,void 0),ho.set(this,void 0),vl.set(this,void 0),Fw.set(this,i=>Qt(this,void 0,void 0,function*(){if(i.accounts&&i.accounts.length>0){ct(this,si,"m",bP).call(this);const r=yield ct(this,r0,"f").call(this,i.accounts);r!==ct(this,ho,"f")&&(pr(this,ho,r),pr(this,vl,void 0),this.emit("connect",this.publicKey))}})),pr(this,r0,i=>Qt(this,void 0,void 0,function*(){var r;const s=yield n.addressSelector.select(i.map(({publicKey:o})=>Jy(o)));return(r=i.find(({publicKey:o})=>Jy(o)===s))!==null&&r!==void 0?r:i[0]})),pr(this,_n,e),ct(this,_n,"f").features[J$].on("change",ct(this,Fw,"f")),this.name=ct(this,_n,"f").name,this.icon=ct(this,_n,"f").icon,this.url=ct(this,_n,"f").url}get publicKey(){var e;if(!ct(this,vl,"f")&&ct(this,ho,"f"))try{pr(this,vl,new Xe(ct(this,ho,"f").publicKey),"f")}catch(n){throw new Wa(n instanceof Error&&(n==null?void 0:n.message)||"Unknown error",n)}return(e=ct(this,vl,"f"))!==null&&e!==void 0?e:null}get connected(){return ct(this,_n,"f").connected}get connecting(){return ct(this,ha,"f")}get readyState(){return ct(this,yo,"f")}autoConnect_DO_NOT_USE_OR_YOU_WILL_BE_FIRED(){return Qt(this,void 0,void 0,function*(){return yield this.autoConnect()})}autoConnect(){return Qt(this,void 0,void 0,function*(){ct(this,si,"m",zw).call(this,!0)})}connect(){return Qt(this,void 0,void 0,function*(){ct(this,si,"m",zw).call(this)})}performAuthorization(e){return Qt(this,void 0,void 0,function*(){try{const n=yield ct(this,_n,"f").cachedAuthorizationResult;return n?(yield ct(this,_n,"f").features[jw].connect({silent:!0}),n):(e?yield ct(this,_n,"f").features[ec].signIn(e):yield ct(this,_n,"f").features[jw].connect(),yield yield ct(this,_n,"f").cachedAuthorizationResult)}catch(n){throw new Po(n instanceof Error&&n.message||"Unknown error",n)}})}disconnect(){return Qt(this,void 0,void 0,function*(){return yield ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){pr(this,ha,!1),pr(this,vl,void 0),pr(this,ho,void 0),yield ct(this,_n,"f").features[Q$].disconnect(),this.emit("disconnect")}))})}signIn(e){return Qt(this,void 0,void 0,function*(){return ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){var n;if(ct(this,yo,"f")!==xt.Installed&&ct(this,yo,"f")!==xt.Loadable)throw new ko;pr(this,ha,!0);try{const i=yield ct(this,_n,"f").features[ec].signIn(Object.assign(Object.assign({},e),{domain:(n=e==null?void 0:e.domain)!==null&&n!==void 0?n:window.location.host}));if(i.length>0)return i[0];throw new Error("Sign in failed, no sign in result returned by wallet")}catch(i){throw new Po(i instanceof Error&&i.message||"Unknown error",i)}finally{pr(this,ha,!1)}}))})}signMessage(e){return Qt(this,void 0,void 0,function*(){return yield ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){const n=ct(this,si,"m",yg).call(this);try{return(yield ct(this,_n,"f").features[xo].signMessage({account:n,message:e}))[0].signature}catch(i){throw new Jf(i==null?void 0:i.message,i)}}))})}sendTransaction(e,n,i){return Qt(this,void 0,void 0,function*(){return yield ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){const r=ct(this,si,"m",yg).call(this);try{let s=function(){let o;switch(n.commitment){case"confirmed":case"finalized":case"processed":o=n.commitment;break;default:o="finalized"}let a;switch(i==null?void 0:i.preflightCommitment){case"confirmed":case"finalized":case"processed":a=i.preflightCommitment;break;case void 0:a=o;break;default:a="finalized"}return(a==="finalized"?2:a==="confirmed"?1:0)<(o==="finalized"?2:o==="confirmed"?1:0)?a:o};if(zi in ct(this,_n,"f").features){const o=SP(ct(this,_n,"f").currentAuthorization.chain),[a]=(yield ct(this,_n,"f").features[zi].signAndSendTransaction({account:r,transaction:e.serialize(),chain:o,options:i?{skipPreflight:i.skipPreflight,maxRetries:i.maxRetries}:void 0})).map(l=>Jy(l.signature));return a}else{const[o]=yield ct(this,si,"m",s0).call(this,[e]);if(nY(o))return yield n.sendTransaction(o);{const a=o.serialize();return yield n.sendRawTransaction(a,Object.assign(Object.assign({},i),{preflightCommitment:s()}))}}}catch(s){throw new Is(s==null?void 0:s.message,s)}}))})}signTransaction(e){return Qt(this,void 0,void 0,function*(){return yield ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){const[n]=yield ct(this,si,"m",s0).call(this,[e]);return n}))})}signAllTransactions(e){return Qt(this,void 0,void 0,function*(){return yield ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){return yield ct(this,si,"m",s0).call(this,e)}))})}}_n=new WeakMap,ha=new WeakMap,yo=new WeakMap,r0=new WeakMap,ho=new WeakMap,vl=new WeakMap,Fw=new WeakMap,si=new WeakSet,zw=function(e=!1){return Qt(this,void 0,void 0,function*(){if(!(this.connecting||this.connected))return yield ct(this,si,"m",la).call(this,()=>Qt(this,void 0,void 0,function*(){if(ct(this,yo,"f")!==xt.Installed&&ct(this,yo,"f")!==xt.Loadable)throw new ko;pr(this,ha,!0);try{yield ct(this,_n,"f").features[jw].connect({silent:e})}catch(n){throw new Po(n instanceof Error&&n.message||"Unknown error",n)}finally{pr(this,ha,!1)}}))})},bP=function(){ct(this,yo,"f")!==xt.Installed&&this.emit("readyStateChange",pr(this,yo,xt.Installed))},yg=function(){if(!ct(this,_n,"f").isAuthorized||!ct(this,ho,"f"))throw new en;return ct(this,ho,"f")},s0=function(e){return Qt(this,void 0,void 0,function*(){const n=ct(this,si,"m",yg).call(this);try{if(dn in ct(this,_n,"f").features)return ct(this,_n,"f").features[dn].signTransaction(...e.map(i=>({account:n,transaction:i.serialize()}))).then(i=>i.map(r=>{const s=r.signedTransaction,a=s[0]*tY+1;return rM.deserializeMessageVersion(s.slice(a,s.length))==="legacy"?Vr.from(s):gf.deserialize(s)}));throw new Error("Connected wallet does not support signing transactions")}catch(i){throw new rr(i==null?void 0:i.message,i)}})},la=function(e){return Qt(this,void 0,void 0,function*(){try{return yield e()}catch(n){throw this.emit("error",n),n}})};class rY extends iY{constructor(e){var n;const i=SP((n=e.chain)!==null&&n!==void 0?n:e.cluster);super(new W$({appIdentity:e.appIdentity,authorizationCache:{set:e.authorizationResultCache.set,get:()=>Qt(this,void 0,void 0,function*(){return yield e.authorizationResultCache.get()}),clear:e.authorizationResultCache.clear},chains:[i],chainSelector:Z$(),onWalletNotFound:()=>Qt(this,void 0,void 0,function*(){e.onWalletNotFound(this)})}),{addressSelector:e.addressSelector,chain:i})}}class sY extends rY{}function oY(){return{select(t){return Qt(this,void 0,void 0,function*(){return t[0]})}}}function aY(){return K$()}function lY(t){return Qt(this,void 0,void 0,function*(){return q$()})}function cY(){return lY}var uY=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},dY=function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},a0;function hY(t){const e=({register:n})=>n(t);try{window.dispatchEvent(new fY(e))}catch(n){console.error(`wallet-standard:register-wallet event could not be dispatched
`,n)}try{window.addEventListener("wallet-standard:app-ready",({detail:n})=>e(n))}catch(n){console.error(`wallet-standard:app-ready event listener could not be added
`,n)}}class fY extends Event{get detail(){return uY(this,a0,"f")}get type(){return"wallet-standard:register-wallet"}constructor(e){super("wallet-standard:register-wallet",{bubbles:!1,cancelable:!1,composed:!1}),a0.set(this,void 0),dY(this,a0,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}a0=new WeakMap;function pY(t,e){if(t===e)return!0;const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function mY(t){if(t.length>=255)throw new TypeError("Alphabet too long");const e=new Uint8Array(256);for(let c=0;c<e.length;c++)e[c]=255;for(let c=0;c<t.length;c++){const u=t.charAt(c),h=u.charCodeAt(0);if(e[h]!==255)throw new TypeError(u+" is ambiguous");e[h]=c}const n=t.length,i=t.charAt(0),r=Math.log(n)/Math.log(256),s=Math.log(256)/Math.log(n);function o(c){if(c instanceof Uint8Array||(ArrayBuffer.isView(c)?c=new Uint8Array(c.buffer,c.byteOffset,c.byteLength):Array.isArray(c)&&(c=Uint8Array.from(c))),!(c instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(c.length===0)return"";let u=0,h=0,f=0;const p=c.length;for(;f!==p&&c[f]===0;)f++,u++;const x=(p-f)*s+1>>>0,y=new Uint8Array(x);for(;f!==p;){let _=c[f],w=0;for(let S=x-1;(_!==0||w<h)&&S!==-1;S--,w++)_+=256*y[S]>>>0,y[S]=_%n>>>0,_=_/n>>>0;if(_!==0)throw new Error("Non-zero carry");h=w,f++}let g=x-h;for(;g!==x&&y[g]===0;)g++;let m=i.repeat(u);for(;g<x;++g)m+=t.charAt(y[g]);return m}function a(c){if(typeof c!="string")throw new TypeError("Expected String");if(c.length===0)return new Uint8Array;let u=0,h=0,f=0;for(;c[u]===i;)h++,u++;const p=(c.length-u)*r+1>>>0,x=new Uint8Array(p);for(;u<c.length;){const _=c.charCodeAt(u);if(_>255)return;let w=e[_];if(w===255)return;let S=0;for(let N=p-1;(w!==0||S<f)&&N!==-1;N--,S++)w+=n*x[N]>>>0,x[N]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");f=S,u++}let y=p-f;for(;y!==p&&x[y]===0;)y++;const g=new Uint8Array(h+(p-y));let m=h;for(;y!==p;)g[m++]=x[y++];return g}function l(c){const u=a(c);if(u)return u;throw new Error("Non-base"+n+" character")}return{encode:o,decodeUnsafe:a,decode:l}}var gY="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";const xY=mY(gY);var Je=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},Vn=function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},pi,Zi,Fl,zl,wl,fh,vg,It,wg,Vw,l0,Ww,Ph,Hw,dA,hA,fA,pA;class yY extends Wk{get name(){return Je(this,It,"f").name}get url(){return"https://github.com/solana-labs/wallet-standard"}get icon(){return Je(this,It,"f").icon}get readyState(){return Je(this,wg,"f")}get publicKey(){return Je(this,Fl,"f")}get connecting(){return Je(this,zl,"f")}get supportedTransactionVersions(){return Je(this,vg,"f")}get wallet(){return Je(this,It,"f")}get standard(){return!0}constructor({wallet:e}){super(),pi.add(this),Zi.set(this,void 0),Fl.set(this,void 0),zl.set(this,void 0),wl.set(this,void 0),fh.set(this,void 0),vg.set(this,void 0),It.set(this,void 0),wg.set(this,typeof window>"u"||typeof document>"u"?xt.Unsupported:xt.Installed),Hw.set(this,n=>{if("accounts"in n){const i=Je(this,It,"f").accounts[0];Je(this,Zi,"f")&&!Je(this,wl,"f")&&i!==Je(this,Zi,"f")&&(i?Je(this,pi,"m",l0).call(this,i):(this.emit("error",new hx),Je(this,pi,"m",Ww).call(this)))}"features"in n&&Je(this,pi,"m",Ph).call(this)}),Vn(this,It,e,"f"),Vn(this,Zi,null,"f"),Vn(this,Fl,null,"f"),Vn(this,zl,!1,"f"),Vn(this,wl,!1,"f"),Vn(this,fh,Je(this,It,"f").features[mx].on("change",Je(this,Hw,"f")),"f"),Je(this,pi,"m",Ph).call(this)}destroy(){Vn(this,Zi,null,"f"),Vn(this,Fl,null,"f"),Vn(this,zl,!1,"f"),Vn(this,wl,!1,"f");const e=Je(this,fh,"f");e&&(Vn(this,fh,null,"f"),e())}async autoConnect(){return Je(this,pi,"m",Vw).call(this,{silent:!0})}async connect(){return Je(this,pi,"m",Vw).call(this)}async disconnect(){if(pg in Je(this,It,"f").features)try{Vn(this,wl,!0,"f"),await Je(this,It,"f").features[pg].disconnect()}catch(e){this.emit("error",new Qf(e==null?void 0:e.message,e))}finally{Vn(this,wl,!1,"f")}Je(this,pi,"m",Ww).call(this)}async sendTransaction(e,n,i={}){try{const r=Je(this,Zi,"f");if(!r)throw new en;let s;if(zi in Je(this,It,"f").features)if(r.features.includes(zi))s=zi;else if(dn in Je(this,It,"f").features&&r.features.includes(dn))s=dn;else throw new va;else if(dn in Je(this,It,"f").features){if(!r.features.includes(dn))throw new va;s=dn}else throw new Ul;const o=GG(n.rpcEndpoint);if(!r.chains.includes(o))throw new Is;try{const{signers:a,...l}=i;let c;if(ks(e)?(a!=null&&a.length&&e.sign(a),c=e.serialize()):(e=await this.prepareTransaction(e,n,l),a!=null&&a.length&&e.partialSign(...a),c=new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))),s===zi){const[u]=await Je(this,It,"f").features[zi].signAndSendTransaction({account:r,chain:o,transaction:c,options:{preflightCommitment:Xy(l.preflightCommitment||n.commitment),skipPreflight:l.skipPreflight,maxRetries:l.maxRetries,minContextSlot:l.minContextSlot}});return xY.encode(u.signature)}else{const[u]=await Je(this,It,"f").features[dn].signTransaction({account:r,chain:o,transaction:c,options:{preflightCommitment:Xy(l.preflightCommitment||n.commitment),minContextSlot:l.minContextSlot}});return await n.sendRawTransaction(u.signedTransaction,{...l,preflightCommitment:Xy(l.preflightCommitment||n.commitment)})}}catch(a){throw a instanceof ii?a:new Is(a==null?void 0:a.message,a)}}catch(r){throw this.emit("error",r),r}}}Zi=new WeakMap,Fl=new WeakMap,zl=new WeakMap,wl=new WeakMap,fh=new WeakMap,vg=new WeakMap,It=new WeakMap,wg=new WeakMap,Hw=new WeakMap,pi=new WeakSet,Vw=async function(e){try{if(this.connected||this.connecting)return;if(Je(this,wg,"f")!==xt.Installed)throw new ko;if(Vn(this,zl,!0,"f"),!Je(this,It,"f").accounts.length)try{await Je(this,It,"f").features[px].connect(e)}catch(i){throw new Po(i==null?void 0:i.message,i)}const n=Je(this,It,"f").accounts[0];if(!n)throw new va;Je(this,pi,"m",l0).call(this,n)}catch(n){throw this.emit("error",n),n}finally{Vn(this,zl,!1,"f")}},l0=function(e){let n;try{n=new Xe(e.address)}catch(i){throw new Wa(i==null?void 0:i.message,i)}Vn(this,Zi,e,"f"),Vn(this,Fl,n,"f"),Je(this,pi,"m",Ph).call(this),this.emit("connect",n)},Ww=function(){Vn(this,Zi,null,"f"),Vn(this,Fl,null,"f"),Je(this,pi,"m",Ph).call(this),this.emit("disconnect")},Ph=function(){var n,i;const e=zi in Je(this,It,"f").features?Je(this,It,"f").features[zi].supportedTransactionVersions:Je(this,It,"f").features[dn].supportedTransactionVersions;Vn(this,vg,pY(e,["legacy"])?null:new Set(e),"f"),dn in Je(this,It,"f").features&&((n=Je(this,Zi,"f"))!=null&&n.features.includes(dn))?(this.signTransaction=Je(this,pi,"m",dA),this.signAllTransactions=Je(this,pi,"m",hA)):(delete this.signTransaction,delete this.signAllTransactions),xo in Je(this,It,"f").features&&((i=Je(this,Zi,"f"))!=null&&i.features.includes(xo))?this.signMessage=Je(this,pi,"m",fA):delete this.signMessage,ec in Je(this,It,"f").features?this.signIn=Je(this,pi,"m",pA):delete this.signIn},dA=async function(e){try{const n=Je(this,Zi,"f");if(!n)throw new en;if(!(dn in Je(this,It,"f").features))throw new Ul;if(!n.features.includes(dn))throw new va;try{const r=(await Je(this,It,"f").features[dn].signTransaction({account:n,transaction:ks(e)?e.serialize():new Uint8Array(e.serialize({requireAllSignatures:!1,verifySignatures:!1}))}))[0].signedTransaction;return ks(e)?gf.deserialize(r):Vr.from(r)}catch(i){throw i instanceof ii?i:new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}},hA=async function(e){try{const n=Je(this,Zi,"f");if(!n)throw new en;if(!(dn in Je(this,It,"f").features))throw new Ul;if(!n.features.includes(dn))throw new va;try{const i=await Je(this,It,"f").features[dn].signTransaction(...e.map(r=>({account:n,transaction:ks(r)?r.serialize():new Uint8Array(r.serialize({requireAllSignatures:!1,verifySignatures:!1}))})));return e.map((r,s)=>{const o=i[s].signedTransaction;return ks(r)?gf.deserialize(o):Vr.from(o)})}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}},fA=async function(e){try{const n=Je(this,Zi,"f");if(!n)throw new en;if(!(xo in Je(this,It,"f").features))throw new Ul;if(!n.features.includes(xo))throw new va;try{return(await Je(this,It,"f").features[xo].signMessage({account:n,message:e}))[0].signature}catch(i){throw new Jf(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}},pA=async function(e={}){try{if(!(ec in Je(this,It,"f").features))throw new Ul;let n;try{[n]=await Je(this,It,"f").features[ec].signIn(e)}catch(i){throw new tA(i==null?void 0:i.message,i)}if(!n)throw new tA;return Je(this,pi,"m",l0).call(this,n.account),n}catch(n){throw this.emit("error",n),n}};const vY=JH;var wY=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},_Y=function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},c0;let gr;const _x=new Set;function bY(t){Dh=void 0,_x.add(t)}function SY(t){Dh=void 0,_x.delete(t)}const wu={};function MY(){if(gr||(gr=Object.freeze({register:mA,get:EY,on:TY}),typeof window>"u"))return gr;const t=Object.freeze({register:mA});try{window.addEventListener("wallet-standard:register-wallet",({detail:e})=>e(t))}catch(e){console.error(`wallet-standard:register-wallet event listener could not be added
`,e)}try{window.dispatchEvent(new AY(t))}catch(e){console.error(`wallet-standard:app-ready event could not be dispatched
`,e)}return gr}function mA(...t){var e;return t=t.filter(n=>!_x.has(n)),t.length?(t.forEach(n=>bY(n)),(e=wu.register)==null||e.forEach(n=>Gw(()=>n(...t))),function(){var i;t.forEach(r=>SY(r)),(i=wu.unregister)==null||i.forEach(r=>Gw(()=>r(...t)))}):()=>{}}let Dh;function EY(){return Dh||(Dh=[..._x]),Dh}function TY(t,e){var n;return(n=wu[t])!=null&&n.push(e)||(wu[t]=[e]),function(){var r;wu[t]=(r=wu[t])==null?void 0:r.filter(s=>e!==s)}}function Gw(t){try{t()}catch(e){console.error(e)}}class AY extends Event{get detail(){return wY(this,c0,"f")}get type(){return"wallet-standard:app-ready"}constructor(e){super("wallet-standard:app-ready",{bubbles:!1,cancelable:!1,composed:!1}),c0.set(this,void 0),_Y(this,c0,e,"f")}preventDefault(){throw new Error("preventDefault cannot be called")}stopImmediatePropagation(){throw new Error("stopImmediatePropagation cannot be called")}stopPropagation(){throw new Error("stopPropagation cannot be called")}}c0=new WeakMap;function CY(){if(gr||(gr=MY(),typeof window>"u"))return gr;const t=window.navigator.wallets||[];if(!Array.isArray(t))return console.error("window.navigator.wallets is not an array"),gr;const{register:e}=gr,n=(...i)=>i.forEach(r=>Gw(()=>r({register:e})));try{Object.defineProperty(window.navigator,"wallets",{value:Object.freeze({push:n})})}catch{return console.error("window.navigator.wallets could not be set"),gr}return n(...t),gr}function NY(t){const e=gA(()=>new Set),{get:n,on:i}=gA(()=>CY()),[r,s]=F.useState(()=>xA(n()));F.useEffect(()=>{const a=[i("register",(...l)=>s(c=>[...c,...xA(l)])),i("unregister",(...l)=>s(c=>c.filter(u=>l.some(h=>h===u.wallet))))];return()=>a.forEach(l=>l())},[i]);const o=RY(r);return F.useEffect(()=>{if(!o)return;const a=new Set(r);new Set(o.filter(c=>!a.has(c))).forEach(c=>c.destroy())},[o,r]),F.useEffect(()=>()=>r.forEach(a=>a.destroy()),[]),F.useMemo(()=>[...r,...t.filter(({name:a})=>r.some(l=>l.name===a)?(e.has(a)||(e.add(a),console.warn(`${a} was registered as a Standard Wallet. The Wallet Adapter for ${a} can be removed from your app.`)),!1):!0)],[r,t,e])}function gA(t){const e=F.useRef(void 0);return e.current===void 0&&(e.current={value:t()}),e.current.value}function RY(t){const e=F.useRef(void 0);return F.useEffect(()=>{e.current=t}),e.current}function xA(t){return t.filter(vY).map(e=>new yY({wallet:e}))}var Iu;(function(t){t[t.DESKTOP_WEB=0]="DESKTOP_WEB",t[t.MOBILE_WEB=1]="MOBILE_WEB"})(Iu||(Iu={}));function LY(t){return/(WebView|Version\/.+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+)|; wv\).+(Chrome)\/(\d+)\.(\d+)\.(\d+)\.(\d+))/i.test(t)}function IY({adapters:t,userAgentString:e}){return t.some(n=>n.name!==o0&&n.readyState===xt.Installed)?Iu.DESKTOP_WEB:e&&/android/i.test(e)&&!LY(e)?Iu.MOBILE_WEB:Iu.DESKTOP_WEB}function kY(t){return t?/devnet/i.test(t)?"devnet":/testnet/i.test(t)?"testnet":"mainnet-beta":"mainnet-beta"}function PY({children:t,wallets:e,adapter:n,isUnloadingRef:i,onAutoConnectRequest:r,onConnectError:s,onError:o,onSelectWallet:a}){const l=F.useRef(!1),[c,u]=F.useState(!1),h=F.useRef(!1),[f,p]=F.useState(!1),[x,y]=F.useState(()=>(n==null?void 0:n.publicKey)??null),[g,m]=F.useState(()=>(n==null?void 0:n.connected)??!1),_=F.useRef(o);F.useEffect(()=>(_.current=o,()=>{_.current=void 0}),[o]);const w=F.useRef((b,E)=>(i.current||(_.current?_.current(b,E):(console.error(b,E),b instanceof ko&&typeof window<"u"&&E&&window.open(E.url,"_blank"))),b)),[S,N]=F.useState(()=>e.map(b=>({adapter:b,readyState:b.readyState})).filter(({readyState:b})=>b!==xt.Unsupported));F.useEffect(()=>{N(E=>e.map((P,C)=>{const z=E[C];return z&&z.adapter===P&&z.readyState===P.readyState?z:{adapter:P,readyState:P.readyState}}).filter(({readyState:P})=>P!==xt.Unsupported));function b(E){N(P=>{const C=P.findIndex(({adapter:V})=>V===this);if(C===-1)return P;const{adapter:z}=P[C];return[...P.slice(0,C),{adapter:z,readyState:E},...P.slice(C+1)].filter(({readyState:V})=>V!==xt.Unsupported)})}return e.forEach(E=>E.on("readyStateChange",b,E)),()=>{e.forEach(E=>E.off("readyStateChange",b,E))}},[n,e]);const k=F.useMemo(()=>S.find(b=>b.adapter===n)??null,[n,S]);F.useEffect(()=>{if(!n)return;const b=C=>{y(C),l.current=!1,u(!1),m(!0),h.current=!1,p(!1)},E=()=>{i.current||(y(null),l.current=!1,u(!1),m(!1),h.current=!1,p(!1))},P=C=>{w.current(C,n)};return n.on("connect",b),n.on("disconnect",E),n.on("error",P),()=>{n.off("connect",b),n.off("disconnect",E),n.off("error",P),E()}},[n,i]);const R=F.useRef(!1);F.useEffect(()=>()=>{R.current=!1},[n]),F.useEffect(()=>{R.current||l.current||g||!r||!((k==null?void 0:k.readyState)===xt.Installed||(k==null?void 0:k.readyState)===xt.Loadable)||(l.current=!0,u(!0),R.current=!0,async function(){try{await r()}catch{s()}finally{u(!1),l.current=!1}}())},[g,r,s,k]);const B=F.useCallback(async(b,E,P)=>{if(!n)throw w.current(new nA);if(!g)throw w.current(new en,n);return await n.sendTransaction(b,E,P)},[n,g]),L=F.useMemo(()=>n&&"signTransaction"in n?async b=>{if(!g)throw w.current(new en,n);return await n.signTransaction(b)}:void 0,[n,g]),D=F.useMemo(()=>n&&"signAllTransactions"in n?async b=>{if(!g)throw w.current(new en,n);return await n.signAllTransactions(b)}:void 0,[n,g]),j=F.useMemo(()=>n&&"signMessage"in n?async b=>{if(!g)throw w.current(new en,n);return await n.signMessage(b)}:void 0,[n,g]),Y=F.useMemo(()=>n&&"signIn"in n?async b=>await n.signIn(b):void 0,[n]),I=F.useCallback(async()=>{if(l.current||h.current||k!=null&&k.adapter.connected)return;if(!k)throw w.current(new nA);const{adapter:b,readyState:E}=k;if(!(E===xt.Installed||E===xt.Loadable))throw w.current(new ko,b);l.current=!0,u(!0);try{await b.connect()}catch(P){throw s(),P}finally{u(!1),l.current=!1}},[s,k]),v=F.useCallback(async()=>{if(!h.current&&n){h.current=!0,p(!0);try{await n.disconnect()}finally{p(!1),h.current=!1}}},[n]);return Le.createElement($k.Provider,{value:{autoConnect:!!r,wallets:S,wallet:k,publicKey:x,connected:g,connecting:c,disconnecting:f,select:a,connect:I,disconnect:v,sendTransaction:B,signTransaction:L,signAllTransactions:D,signMessage:j,signIn:Y}},t)}let ev;function DY(){var t;return ev===void 0&&(ev=((t=globalThis.navigator)==null?void 0:t.userAgent)??null),ev}function yA(t){const e=DY();return IY({adapters:t,userAgentString:e})===Iu.MOBILE_WEB}function BY(){const t=globalThis.location;if(t)return`${t.protocol}//${t.host}`}function UY({children:t,wallets:e,autoConnect:n,localStorageKey:i="walletName",onError:r}){const{connection:s}=Zf(),o=NY(e),a=F.useMemo(()=>{if(!yA(o))return null;const _=o.find(w=>w.name===o0);return _||new sY({addressSelector:oY(),appIdentity:{uri:BY()},authorizationResultCache:aY(),cluster:kY(s==null?void 0:s.rpcEndpoint),onWalletNotFound:cY()})},[o,s==null?void 0:s.rpcEndpoint]),l=F.useMemo(()=>a==null||o.indexOf(a)!==-1?o:[a,...o],[o,a]),[c,u]=tG(i,null),h=F.useMemo(()=>l.find(_=>_.name===c)??null,[l,c]),f=F.useCallback(_=>{c!==_&&(h&&h.name!==o0&&h.disconnect(),u(_))},[h,u,c]);F.useEffect(()=>{if(!h)return;function _(){y.current||u(null)}return h.on("disconnect",_),()=>{h.off("disconnect",_)}},[h,o,u,c]);const p=F.useRef(!1),x=F.useMemo(()=>{if(!(!n||!h))return async()=>{(n===!0||await n(h))&&(p.current?await h.connect():await h.autoConnect())}},[n,h]),y=F.useRef(!1);F.useEffect(()=>{if(c===o0&&yA(o)){y.current=!1;return}function _(){y.current=!0}return window.addEventListener("beforeunload",_),()=>{window.removeEventListener("beforeunload",_)}},[o,c]);const g=F.useCallback(()=>{h&&f(null)},[h,f]),m=F.useCallback(_=>{p.current=!0,f(_)},[f]);return Le.createElement(PY,{wallets:l,adapter:h,isUnloadingRef:y,onAutoConnectRequest:x,onConnectError:g,onError:r,onSelectWallet:m},t)}const MP={setVisible(t){console.error(EP("call","setVisible"))},visible:!1};Object.defineProperty(MP,"visible",{get(){return console.error(EP("read","visible")),!1}});function EP(t,e){return`You have tried to  ${t} "${e}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}const TP=F.createContext(MP);function Ja(){return F.useContext(TP)}const OY=t=>Le.createElement("button",{className:`wallet-adapter-button ${t.className||""}`,disabled:t.disabled,style:t.style,onClick:t.onClick,tabIndex:t.tabIndex||0,type:"button"},t.startIcon&&Le.createElement("i",{className:"wallet-adapter-button-start-icon"},t.startIcon),t.children,t.endIcon&&Le.createElement("i",{className:"wallet-adapter-button-end-icon"},t.endIcon)),jY=({wallet:t,...e})=>t&&Le.createElement("img",{src:t.adapter.icon,alt:`${t.adapter.name} icon`,...e}),vA=({id:t,children:e,expanded:n=!1})=>{const i=F.useRef(null),r=F.useRef(!0),s="height 250ms ease-out",o=()=>{const l=i.current;l&&requestAnimationFrame(()=>{l.style.height=l.scrollHeight+"px"})},a=()=>{const l=i.current;l&&requestAnimationFrame(()=>{l.style.height=l.offsetHeight+"px",l.style.overflow="hidden",requestAnimationFrame(()=>{l.style.height="0"})})};return F.useLayoutEffect(()=>{n?o():a()},[n]),F.useLayoutEffect(()=>{const l=i.current;if(!l)return;function c(){l&&(l.style.overflow=n?"initial":"hidden",n&&(l.style.height="auto"))}function u(h){l&&h.target===l&&h.propertyName==="height"&&c()}return r.current&&(c(),r.current=!1),l.addEventListener("transitionend",u),()=>l.removeEventListener("transitionend",u)},[n]),Le.createElement("div",{className:"wallet-adapter-collapse",id:t,ref:i,role:"region",style:{height:0,transition:r.current?void 0:s}},e)},tv=({handleClick:t,tabIndex:e,wallet:n})=>Le.createElement("li",null,Le.createElement(OY,{onClick:t,startIcon:Le.createElement(jY,{wallet:n}),tabIndex:e},n.adapter.name,n.readyState===xt.Installed&&Le.createElement("span",null,"Detected"))),FY=()=>Le.createElement("svg",{width:"97",height:"96",viewBox:"0 0 97 96",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Le.createElement("circle",{cx:"48.5",cy:"48",r:"48",fill:"url(#paint0_linear_880_5115)",fillOpacity:"0.1"}),Le.createElement("circle",{cx:"48.5",cy:"48",r:"47",stroke:"url(#paint1_linear_880_5115)",strokeOpacity:"0.4",strokeWidth:"2"}),Le.createElement("g",{clipPath:"url(#clip0_880_5115)"},Le.createElement("path",{d:"M65.5769 28.1523H31.4231C27.6057 28.1523 24.5 31.258 24.5 35.0754V60.9215C24.5 64.7389 27.6057 67.8446 31.4231 67.8446H65.5769C69.3943 67.8446 72.5 64.7389 72.5 60.9215V35.0754C72.5 31.258 69.3943 28.1523 65.5769 28.1523ZM69.7308 52.1523H59.5769C57.2865 52.1523 55.4231 50.289 55.4231 47.9985C55.4231 45.708 57.2864 43.8446 59.5769 43.8446H69.7308V52.1523ZM69.7308 41.0754H59.5769C55.7595 41.0754 52.6539 44.1811 52.6539 47.9985C52.6539 51.8159 55.7595 54.9215 59.5769 54.9215H69.7308V60.9215C69.7308 63.2119 67.8674 65.0754 65.5769 65.0754H31.4231C29.1327 65.0754 27.2692 63.212 27.2692 60.9215V35.0754C27.2692 32.785 29.1326 30.9215 31.4231 30.9215H65.5769C67.8673 30.9215 69.7308 32.7849 69.7308 35.0754V41.0754Z",fill:"url(#paint2_linear_880_5115)"}),Le.createElement("path",{d:"M61.4231 46.6172H59.577C58.8123 46.6172 58.1924 47.2371 58.1924 48.0018C58.1924 48.7665 58.8123 49.3863 59.577 49.3863H61.4231C62.1878 49.3863 62.8077 48.7664 62.8077 48.0018C62.8077 47.2371 62.1878 46.6172 61.4231 46.6172Z",fill:"url(#paint3_linear_880_5115)"})),Le.createElement("defs",null,Le.createElement("linearGradient",{id:"paint0_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Le.createElement("stop",{stopColor:"#9945FF"}),Le.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Le.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Le.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Le.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Le.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Le.createElement("linearGradient",{id:"paint1_linear_880_5115",x1:"3.41664",y1:"98.0933",x2:"103.05",y2:"8.42498",gradientUnits:"userSpaceOnUse"},Le.createElement("stop",{stopColor:"#9945FF"}),Le.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Le.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Le.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Le.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Le.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Le.createElement("linearGradient",{id:"paint2_linear_880_5115",x1:"25.9583",y1:"68.7101",x2:"67.2337",y2:"23.7879",gradientUnits:"userSpaceOnUse"},Le.createElement("stop",{stopColor:"#9945FF"}),Le.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Le.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Le.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Le.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Le.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Le.createElement("linearGradient",{id:"paint3_linear_880_5115",x1:"58.3326",y1:"49.4467",x2:"61.0002",y2:"45.4453",gradientUnits:"userSpaceOnUse"},Le.createElement("stop",{stopColor:"#9945FF"}),Le.createElement("stop",{offset:"0.14",stopColor:"#8A53F4"}),Le.createElement("stop",{offset:"0.42",stopColor:"#6377D6"}),Le.createElement("stop",{offset:"0.79",stopColor:"#24B0A7"}),Le.createElement("stop",{offset:"0.99",stopColor:"#00D18C"}),Le.createElement("stop",{offset:"1",stopColor:"#00D18C"})),Le.createElement("clipPath",{id:"clip0_880_5115"},Le.createElement("rect",{width:"48",height:"48",fill:"white",transform:"translate(24.5 24)"})))),zY=({className:t="",container:e="body"})=>{const n=F.useRef(null),{wallets:i,select:r}=Ui(),{setVisible:s}=Ja(),[o,a]=F.useState(!1),[l,c]=F.useState(!1),[u,h]=F.useState(null),[f,p]=F.useMemo(()=>{const w=[],S=[];for(const N of i)N.readyState===xt.Installed?w.push(N):S.push(N);return w.length?[w,S]:[S,[]]},[i]),x=F.useCallback(()=>{c(!1),setTimeout(()=>s(!1),150)},[s]),y=F.useCallback(w=>{w.preventDefault(),x()},[x]),g=F.useCallback((w,S)=>{r(S),y(w)},[r,y]),m=F.useCallback(()=>a(!o),[o]),_=F.useCallback(w=>{const S=n.current;if(!S)return;const N=S.querySelectorAll("button"),k=N[0],R=N[N.length-1];w.shiftKey?document.activeElement===k&&(R.focus(),w.preventDefault()):document.activeElement===R&&(k.focus(),w.preventDefault())},[n]);return F.useLayoutEffect(()=>{const w=N=>{N.key==="Escape"?x():N.key==="Tab"&&_(N)},{overflow:S}=window.getComputedStyle(document.body);return setTimeout(()=>c(!0),0),document.body.style.overflow="hidden",window.addEventListener("keydown",w,!1),()=>{document.body.style.overflow=S,window.removeEventListener("keydown",w,!1)}},[x,_]),F.useLayoutEffect(()=>h(document.querySelector(e)),[e]),u&&Zb.createPortal(Le.createElement("div",{"aria-labelledby":"wallet-adapter-modal-title","aria-modal":"true",className:`wallet-adapter-modal ${l&&"wallet-adapter-modal-fade-in"} ${t}`,ref:n,role:"dialog"},Le.createElement("div",{className:"wallet-adapter-modal-container"},Le.createElement("div",{className:"wallet-adapter-modal-wrapper"},Le.createElement("button",{onClick:y,className:"wallet-adapter-modal-button-close"},Le.createElement("svg",{width:"14",height:"14"},Le.createElement("path",{d:"M14 12.461 8.3 6.772l5.234-5.233L12.006 0 6.772 5.234 1.54 0 0 1.539l5.234 5.233L0 12.006l1.539 1.528L6.772 8.3l5.69 5.7L14 12.461z"}))),f.length?Le.createElement(Le.Fragment,null,Le.createElement("h1",{className:"wallet-adapter-modal-title"},"Connect a wallet on Solana to continue"),Le.createElement("ul",{className:"wallet-adapter-modal-list"},f.map(w=>Le.createElement(tv,{key:w.adapter.name,handleClick:S=>g(S,w.adapter.name),wallet:w})),p.length?Le.createElement(vA,{expanded:o,id:"wallet-adapter-modal-collapse"},p.map(w=>Le.createElement(tv,{key:w.adapter.name,handleClick:S=>g(S,w.adapter.name),tabIndex:o?0:-1,wallet:w}))):null),p.length?Le.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:m,tabIndex:0},Le.createElement("span",null,o?"Less ":"More ","options"),Le.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Le.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))):null):Le.createElement(Le.Fragment,null,Le.createElement("h1",{className:"wallet-adapter-modal-title"},"You'll need a wallet on Solana to continue"),Le.createElement("div",{className:"wallet-adapter-modal-middle"},Le.createElement(FY,null)),p.length?Le.createElement(Le.Fragment,null,Le.createElement("button",{className:"wallet-adapter-modal-list-more",onClick:m,tabIndex:0},Le.createElement("span",null,o?"Hide ":"Already have a wallet? View ","options"),Le.createElement("svg",{width:"13",height:"7",viewBox:"0 0 13 7",xmlns:"http://www.w3.org/2000/svg",className:`${o?"wallet-adapter-modal-list-more-icon-rotate":""}`},Le.createElement("path",{d:"M0.71418 1.626L5.83323 6.26188C5.91574 6.33657 6.0181 6.39652 6.13327 6.43762C6.24844 6.47872 6.37371 6.5 6.50048 6.5C6.62725 6.5 6.75252 6.47872 6.8677 6.43762C6.98287 6.39652 7.08523 6.33657 7.16774 6.26188L12.2868 1.626C12.7753 1.1835 12.3703 0.5 11.6195 0.5H1.37997C0.629216 0.5 0.224175 1.1835 0.71418 1.626Z"}))),Le.createElement(vA,{expanded:o,id:"wallet-adapter-modal-collapse"},Le.createElement("ul",{className:"wallet-adapter-modal-list"},p.map(w=>Le.createElement(tv,{key:w.adapter.name,handleClick:S=>g(S,w.adapter.name),tabIndex:o?0:-1,wallet:w}))))):null))),Le.createElement("div",{className:"wallet-adapter-modal-overlay",onMouseDown:y})),u)},VY=({children:t,...e})=>{const[n,i]=F.useState(!1);return Le.createElement(TP.Provider,{value:{visible:n,setVisible:i}},t,n&&Le.createElement(zY,{...e}))},WY="modulepreload",HY=function(t){return"/"+t},wA={},bx=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(l=>{if(l=HY(l),l in wA)return;wA[l]=!0;const c=l.endsWith(".css"),u=c?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=c?"stylesheet":WY,c||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),c)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return r.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};var mM={exports:{}},ku=typeof Reflect=="object"?Reflect:null,_A=ku&&typeof ku.apply=="function"?ku.apply:function(e,n,i){return Function.prototype.apply.call(e,n,i)},u0;ku&&typeof ku.ownKeys=="function"?u0=ku.ownKeys:Object.getOwnPropertySymbols?u0=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:u0=function(e){return Object.getOwnPropertyNames(e)};function GY(t){console&&console.warn&&console.warn(t)}var AP=Number.isNaN||function(e){return e!==e};function $t(){$t.init.call(this)}mM.exports=$t;mM.exports.once=qY;$t.EventEmitter=$t;$t.prototype._events=void 0;$t.prototype._eventsCount=0;$t.prototype._maxListeners=void 0;var bA=10;function Sx(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty($t,"defaultMaxListeners",{enumerable:!0,get:function(){return bA},set:function(t){if(typeof t!="number"||t<0||AP(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");bA=t}});$t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};$t.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||AP(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function CP(t){return t._maxListeners===void 0?$t.defaultMaxListeners:t._maxListeners}$t.prototype.getMaxListeners=function(){return CP(this)};$t.prototype.emit=function(e){for(var n=[],i=1;i<arguments.length;i++)n.push(arguments[i]);var r=e==="error",s=this._events;if(s!==void 0)r=r&&s.error===void 0;else if(!r)return!1;if(r){var o;if(n.length>0&&(o=n[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var l=s[e];if(l===void 0)return!1;if(typeof l=="function")_A(l,this,n);else for(var c=l.length,u=kP(l,c),i=0;i<c;++i)_A(u[i],this,n);return!0};function NP(t,e,n,i){var r,s,o;if(Sx(n),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,n.listener?n.listener:n),s=t._events),o=s[e]),o===void 0)o=s[e]=n,++t._eventsCount;else if(typeof o=="function"?o=s[e]=i?[n,o]:[o,n]:i?o.unshift(n):o.push(n),r=CP(t),r>0&&o.length>r&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,GY(a)}return t}$t.prototype.addListener=function(e,n){return NP(this,e,n,!1)};$t.prototype.on=$t.prototype.addListener;$t.prototype.prependListener=function(e,n){return NP(this,e,n,!0)};function $Y(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function RP(t,e,n){var i={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},r=$Y.bind(i);return r.listener=n,i.wrapFn=r,r}$t.prototype.once=function(e,n){return Sx(n),this.on(e,RP(this,e,n)),this};$t.prototype.prependOnceListener=function(e,n){return Sx(n),this.prependListener(e,RP(this,e,n)),this};$t.prototype.removeListener=function(e,n){var i,r,s,o,a;if(Sx(n),r=this._events,r===void 0)return this;if(i=r[e],i===void 0)return this;if(i===n||i.listener===n)--this._eventsCount===0?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,i.listener||n));else if(typeof i!="function"){for(s=-1,o=i.length-1;o>=0;o--)if(i[o]===n||i[o].listener===n){a=i[o].listener,s=o;break}if(s<0)return this;s===0?i.shift():YY(i,s),i.length===1&&(r[e]=i[0]),r.removeListener!==void 0&&this.emit("removeListener",e,a||n)}return this};$t.prototype.off=$t.prototype.removeListener;$t.prototype.removeAllListeners=function(e){var n,i,r;if(i=this._events,i===void 0)return this;if(i.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):i[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete i[e]),this;if(arguments.length===0){var s=Object.keys(i),o;for(r=0;r<s.length;++r)o=s[r],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(n=i[e],typeof n=="function")this.removeListener(e,n);else if(n!==void 0)for(r=n.length-1;r>=0;r--)this.removeListener(e,n[r]);return this};function LP(t,e,n){var i=t._events;if(i===void 0)return[];var r=i[e];return r===void 0?[]:typeof r=="function"?n?[r.listener||r]:[r]:n?XY(r):kP(r,r.length)}$t.prototype.listeners=function(e){return LP(this,e,!0)};$t.prototype.rawListeners=function(e){return LP(this,e,!1)};$t.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):IP.call(t,e)};$t.prototype.listenerCount=IP;function IP(t){var e=this._events;if(e!==void 0){var n=e[t];if(typeof n=="function")return 1;if(n!==void 0)return n.length}return 0}$t.prototype.eventNames=function(){return this._eventsCount>0?u0(this._events):[]};function kP(t,e){for(var n=new Array(e),i=0;i<e;++i)n[i]=t[i];return n}function YY(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function XY(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}function qY(t,e){return new Promise(function(n,i){function r(o){t.removeListener(e,s),i(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",r),n([].slice.call(arguments))}PP(t,e,s,{once:!0}),e!=="error"&&KY(t,r,{once:!0})})}function KY(t,e,n){typeof t.on=="function"&&PP(t,"error",e,n)}function PP(t,e,n,i){if(typeof t.on=="function")i.once?t.once(e,n):t.on(e,n);else if(typeof t.addEventListener=="function")t.addEventListener(e,function r(s){i.once&&t.removeEventListener(e,r),n(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}var ZY=mM.exports;const sae=$a(ZY),QY={},DP=(t,e)=>{QY[t]=e},Mx=t=>{class e extends Error{constructor(r,s,o){super(r||t,o);Oe(this,"cause");if(Object.setPrototypeOf(this,e.prototype),this.name=t,s)for(const a in s)this[a]=s[a];if(o&&JY(o)&&"cause"in o&&!this.cause){const a=o.cause;this.cause=a,"stack"in a&&(this.stack=this.stack+`
CAUSE: `+a.stack)}}}return e};function JY(t){return typeof t=="object"}const oae=Mx("DisconnectedDevice"),aae=Mx("DisconnectedDeviceDuringOperation"),lae=Mx("TransportOpenUserCancelled"),cae=Mx("TransportRaceCondition");var SA;(function(t){t.Unknown="Unknown",t.LocationServicesDisabled="LocationServicesDisabled",t.LocationServicesUnauthorized="LocationServicesUnauthorized",t.BluetoothScanStartFailed="BluetoothScanStartFailed"})(SA||(SA={}));class eX extends Error{constructor(n,i){const r="TransportError";super(n||r);Oe(this,"id");this.name=r,this.message=n,this.stack=new Error(n).stack,this.id=i}}DP("TransportError",t=>new eX(t.message,t.id));const Bh={ACCESS_CONDITION_NOT_FULFILLED:38916,ALGORITHM_NOT_SUPPORTED:38020,CLA_NOT_SUPPORTED:28160,CODE_BLOCKED:38976,CODE_NOT_INITIALIZED:38914,COMMAND_INCOMPATIBLE_FILE_STRUCTURE:27009,CONDITIONS_OF_USE_NOT_SATISFIED:27013,CONTRADICTION_INVALIDATION:38928,CONTRADICTION_SECRET_CODE_STATUS:38920,DEVICE_IN_RECOVERY_MODE:26159,CUSTOM_IMAGE_EMPTY:26158,FILE_ALREADY_EXISTS:27273,FILE_NOT_FOUND:37892,GP_AUTH_FAILED:25344,HALTED:28586,INCONSISTENT_FILE:37896,INCORRECT_DATA:27264,INCORRECT_LENGTH:26368,INCORRECT_P1_P2:27392,INS_NOT_SUPPORTED:27904,DEVICE_NOT_ONBOARDED:27911,DEVICE_NOT_ONBOARDED_2:26129,INVALID_KCV:38021,INVALID_OFFSET:37890,LICENSING:28482,LOCKED_DEVICE:21781,MAX_VALUE_REACHED:38992,MEMORY_PROBLEM:37440,MISSING_CRITICAL_PARAMETER:26624,NO_EF_SELECTED:37888,NOT_ENOUGH_MEMORY_SPACE:27268,OK:36864,PIN_REMAINING_ATTEMPTS:25536,REFERENCED_DATA_NOT_FOUND:27272,SECURITY_STATUS_NOT_SATISFIED:27010,TECHNICAL_PROBLEM:28416,UNKNOWN_APDU:27906,USER_REFUSED_ON_DEVICE:21761,NOT_ENOUGH_SPACE:20738,APP_NOT_FOUND_OR_INVALID_CONTEXT:20771,INVALID_APP_NAME_LENGTH:26378,GEN_AES_KEY_FAILED:21529,INTERNAL_CRYPTO_OPERATION_FAILED:21530,INTERNAL_COMPUTE_AES_CMAC_FAILED:21531,ENCRYPT_APP_STORAGE_FAILED:21532,INVALID_BACKUP_STATE:26178,PIN_NOT_SET:21762,INVALID_BACKUP_LENGTH:26419,INVALID_RESTORE_STATE:26179,INVALID_CHUNK_LENGTH:26420,INVALID_BACKUP_HEADER:26698,TRUSTCHAIN_WRONG_SEED:45063};function tX(t){switch(t){case 26368:return"Incorrect length";case 26624:return"Missing critical parameter";case 27010:return"Security not satisfied (dongle locked or have invalid access rights)";case 27013:return"Condition of use not satisfied (denied by the user?)";case 27264:return"Invalid data received";case 27392:return"Invalid parameter received";case 21781:return"Locked device"}if(28416<=t&&t<=28671)return"Internal error, please report"}class tp extends Error{constructor(n,{canBeMappedToChildError:i=!0}={}){const r=Object.keys(Bh).find(l=>Bh[l]===n)||"UNKNOWN_ERROR",s=tX(n)||r,o=n.toString(16),a=`Ledger device: ${s} (0x${o})`;super(a);Oe(this,"statusCode");Oe(this,"statusText");if(this.name="TransportStatusError",this.statusCode=n,this.statusText=r,Object.setPrototypeOf(this,tp.prototype),i&&n===Bh.LOCKED_DEVICE)return new gM(a)}}class gM extends tp{constructor(e){super(Bh.LOCKED_DEVICE,{canBeMappedToChildError:!1}),e&&(this.message=e),this.name="LockedDeviceError",Object.setPrototypeOf(this,gM.prototype)}}DP("TransportStatusError",t=>new tp(t.statusCode));let BP=0;const ca=[],uae=(t,e,n)=>{const i={type:t,id:String(++BP),date:new Date};e&&(i.message=e),UP(i)},nX=({type:t,message:e,data:n,context:i})=>{const r={type:t,id:String(++BP),date:new Date};e&&(r.message=e),n&&(r.data=n),i&&(r.context=i),UP(r)};class d0{constructor(e,n){Oe(this,"type");Oe(this,"context");this.type=e,this.context=n}trace(e,n){nX({type:this.type,message:e,data:n,context:this.context})}getContext(){return this.context}setContext(e){this.context=e}updateContext(e){this.context={...this.context,...e}}getType(){return this.type}setType(e){this.type=e}withType(e){return new d0(e,this.context)}withContext(e){return new d0(this.type,e)}withUpdatedContext(e){return new d0(this.type,{...this.context,...e})}}const iX=t=>(ca.push(t),()=>{const e=ca.indexOf(t);e!==-1&&(ca[e]=ca[ca.length-1],ca.pop())});function UP(t){for(let e=0;e<ca.length;e++)try{ca[e](t)}catch(n){console.error(n)}}typeof window<"u"&&(window.__ledgerLogsListen=iX);function rX(t,e){const i=cn.alloc(17);let r=i.writeUInt8(4,0);return r=i.writeUInt32BE(Hp(44),r),r=i.writeUInt32BE(Hp(501),r),r=i.writeUInt32BE(Hp(t),r),i.writeUInt32BE(Hp(e),r),i}const sX=1<<31>>>0;function Hp(t){return(t|sX)>>>0}const oX=5,aX=6,lX=0,cX=1,uX=1,dX=2,Gp=255,MA=224;async function hX(t,e){const n=await OP(t,oX,lX,e);return new Xe(n)}async function fX(t,e,n){const i=cn.alloc(1);i.writeUInt8(1,0);const r=ks(e)?e.message.serialize():e.serializeMessage(),s=cn.concat([i,n,r]);return await OP(t,aX,cX,s)}async function OP(t,e,n,i){let r=0,s=0;if(i.length>Gp)for(;i.length-s>Gp;){const l=i.slice(s,s+Gp);if((await t.send(MA,e,n,r|dX,l)).length!==2)throw new tp(Bh.INCORRECT_DATA);r|=uX,s+=Gp}const o=i.slice(s),a=await t.send(MA,e,n,r,o);return a.slice(0,a.length-2)}const pX="Ledger";class mX extends Gk{constructor(e={}){super(),this.name=pX,this.url="https://ledger.com",this.icon="data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMzUgMzUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGcgZmlsbD0iI2ZmZiI+PHBhdGggZD0ibTIzLjU4OCAwaC0xNnYyMS41ODNoMjEuNnYtMTZhNS41ODUgNS41ODUgMCAwIDAgLTUuNi01LjU4M3oiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5KSIvPjxwYXRoIGQ9Im04LjM0MiAwaC0yLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCAtNS41ODUgNS41ODV2Mi43NTdoOC4zNDJ6Ii8+PHBhdGggZD0ibTAgNy41OWg4LjM0MnY4LjM0MmgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDUuNzM5KSIvPjxwYXRoIGQ9Im0xNS4xOCAyMy40NTFoMi43NTdhNS41ODUgNS41ODUgMCAwIDAgNS41ODUtNS42di0yLjY3MWgtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMS40NzggMTEuNDc4KSIvPjxwYXRoIGQ9Im03LjU5IDE1LjE4aDguMzQydjguMzQyaC04LjM0MnoiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDUuNzM5IDExLjQ3OCkiLz48cGF0aCBkPSJtMCAxNS4xOHYyLjc1N2E1LjU4NSA1LjU4NSAwIDAgMCA1LjU4NSA1LjU4NWgyLjc1N3YtOC4zNDJ6IiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwIDExLjQ3OCkiLz48L2c+PC9zdmc+",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"||typeof navigator>"u"||!navigator.hid?xt.Unsupported:xt.Loadable,this._disconnected=()=>{const n=this._transport;n&&(n.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null,this.emit("error",new hx),this.emit("disconnect"))},this._derivationPath=e.derivationPath||rX(0,0),this._connecting=!1,this._transport=null,this._publicKey=null}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==xt.Loadable)throw new ko;this._connecting=!0;let e;try{e=(await bx(async()=>{const{default:r}=await import("./TransportWebHID-CFtm41yv.js");return{default:r}},__vite__mapDeps([0,1]))).default}catch(r){throw new cM(r==null?void 0:r.message,r)}let n;try{n=await e.create()}catch(r){throw new Po(r==null?void 0:r.message,r)}let i;try{i=await hX(n,this._derivationPath)}catch(r){throw new Wa(r==null?void 0:r.message,r)}n.on("disconnect",this._disconnected),this._transport=n,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._transport;if(e){e.off("disconnect",this._disconnected),this._transport=null,this._publicKey=null;try{await e.close()}catch(n){this.emit("error",new Qf(n==null?void 0:n.message,n))}}this.emit("disconnect")}async signTransaction(e){try{const n=this._transport,i=this._publicKey;if(!n||!i)throw new en;try{const r=await fX(n,e,this._derivationPath);e.addSignature(i,r)}catch(r){throw new rr(r==null?void 0:r.message,r)}return e}catch(n){throw this.emit("error",n),n}}}const gX="Phantom";class xX extends fx{constructor(e={}){super(),this.name=gX,this.url="https://phantom.app",this.icon="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiB2aWV3Qm94PSIwIDAgMTA4IDEwOCIgZmlsbD0ibm9uZSI+CjxyZWN0IHdpZHRoPSIxMDgiIGhlaWdodD0iMTA4IiByeD0iMjYiIGZpbGw9IiNBQjlGRjIiLz4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00Ni41MjY3IDY5LjkyMjlDNDIuMDA1NCA3Ni44NTA5IDM0LjQyOTIgODUuNjE4MiAyNC4zNDggODUuNjE4MkMxOS41ODI0IDg1LjYxODIgMTUgODMuNjU2MyAxNSA3NS4xMzQyQzE1IDUzLjQzMDUgNDQuNjMyNiAxOS44MzI3IDcyLjEyNjggMTkuODMyN0M4Ny43NjggMTkuODMyNyA5NCAzMC42ODQ2IDk0IDQzLjAwNzlDOTQgNTguODI1OCA4My43MzU1IDc2LjkxMjIgNzMuNTMyMSA3Ni45MTIyQzcwLjI5MzkgNzYuOTEyMiA2OC43MDUzIDc1LjEzNDIgNjguNzA1MyA3Mi4zMTRDNjguNzA1MyA3MS41NzgzIDY4LjgyNzUgNzAuNzgxMiA2OS4wNzE5IDY5LjkyMjlDNjUuNTg5MyA3NS44Njk5IDU4Ljg2ODUgODEuMzg3OCA1Mi41NzU0IDgxLjM4NzhDNDcuOTkzIDgxLjM4NzggNDUuNjcxMyA3OC41MDYzIDQ1LjY3MTMgNzQuNDU5OEM0NS42NzEzIDcyLjk4ODQgNDUuOTc2OCA3MS40NTU2IDQ2LjUyNjcgNjkuOTIyOVpNODMuNjc2MSA0Mi41Nzk0QzgzLjY3NjEgNDYuMTcwNCA4MS41NTc1IDQ3Ljk2NTggNzkuMTg3NSA0Ny45NjU4Qzc2Ljc4MTYgNDcuOTY1OCA3NC42OTg5IDQ2LjE3MDQgNzQuNjk4OSA0Mi41Nzk0Qzc0LjY5ODkgMzguOTg4NSA3Ni43ODE2IDM3LjE5MzEgNzkuMTg3NSAzNy4xOTMxQzgxLjU1NzUgMzcuMTkzMSA4My42NzYxIDM4Ljk4ODUgODMuNjc2MSA0Mi41Nzk0Wk03MC4yMTAzIDQyLjU3OTVDNzAuMjEwMyA0Ni4xNzA0IDY4LjA5MTYgNDcuOTY1OCA2NS43MjE2IDQ3Ljk2NThDNjMuMzE1NyA0Ny45NjU4IDYxLjIzMyA0Ni4xNzA0IDYxLjIzMyA0Mi41Nzk1QzYxLjIzMyAzOC45ODg1IDYzLjMxNTcgMzcuMTkzMSA2NS43MjE2IDM3LjE5MzFDNjguMDkxNiAzNy4xOTMxIDcwLjIxMDMgMzguOTg4NSA3MC4yMTAzIDQyLjU3OTVaIiBmaWxsPSIjRkZGREY4Ii8+Cjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?xt.Unsupported:xt.NotDetected,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),n.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null,this.emit("error",new hx),this.emit("disconnect"))},this._accountChanged=n=>{const i=this._publicKey;if(i){try{n=new Xe(n.toBytes())}catch(r){this.emit("error",new Wa(r==null?void 0:r.message,r));return}i.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._wallet=null,this._publicKey=null,this._readyState!==xt.Unsupported&&(_w()?(this._readyState=xt.Loadable,this.emit("readyStateChange",this._readyState)):Hk(()=>{var n,i,r;return(i=(n=window.phantom)==null?void 0:n.solana)!=null&&i.isPhantom||(r=window.solana)!=null&&r.isPhantom?(this._readyState=xt.Installed,this.emit("readyStateChange",this._readyState),!0):!1}))}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get readyState(){return this._readyState}async autoConnect(){this.readyState===xt.Installed&&await this.connect()}async connect(){var e;try{if(this.connected||this.connecting)return;if(this.readyState===xt.Loadable){const r=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://phantom.app/ul/browse/${r}?ref=${s}`;return}if(this.readyState!==xt.Installed)throw new ko;this._connecting=!0;const n=((e=window.phantom)==null?void 0:e.solana)||window.solana;if(!n.isConnected)try{await n.connect()}catch(r){throw new Po(r==null?void 0:r.message,r)}if(!n.publicKey)throw new va;let i;try{i=new Xe(n.publicKey.toBytes())}catch(r){throw new Wa(r==null?void 0:r.message,r)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=i,this.emit("connect",i)}catch(n){throw this.emit("error",n),n}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new Qf(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,i={}){try{const r=this._wallet;if(!r)throw new en;try{const{signers:s,...o}=i;ks(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||n.commitment;const{signature:a}=await r.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof ii?s:new Is(s==null?void 0:s.message,s)}}catch(r){throw this.emit("error",r),r}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signTransaction(e)||e}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signAllTransactions(e)||e}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new en;try{const{signature:i}=await n.signMessage(e);return i}catch(i){throw new Jf(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}}const yX="data:image/svg+xml;base64,PHN2ZyBmaWxsPSJub25lIiBoZWlnaHQ9IjMxIiB2aWV3Qm94PSIwIDAgMzEgMzEiIHdpZHRoPSIzMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+PGxpbmVhckdyYWRpZW50IGlkPSJhIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjIwLjI1IiB4Mj0iMjYuNTcxIiB5MT0iMjcuMTczIiB5Mj0iMTkuODU4Ij48c3RvcCBvZmZzZXQ9Ii4wOCIgc3RvcC1jb2xvcj0iIzk5NDVmZiIvPjxzdG9wIG9mZnNldD0iLjMiIHN0b3AtY29sb3I9IiM4NzUyZjMiLz48c3RvcCBvZmZzZXQ9Ii41IiBzdG9wLWNvbG9yPSIjNTQ5N2Q1Ii8+PHN0b3Agb2Zmc2V0PSIuNiIgc3RvcC1jb2xvcj0iIzQzYjRjYSIvPjxzdG9wIG9mZnNldD0iLjcyIiBzdG9wLWNvbG9yPSIjMjhlMGI5Ii8+PHN0b3Agb2Zmc2V0PSIuOTciIHN0b3AtY29sb3I9IiMxOWZiOWIiLz48L2xpbmVhckdyYWRpZW50PjxnIHN0cm9rZS1saW5lam9pbj0icm91bmQiIHN0cm9rZS13aWR0aD0iLjA5NCI+PHBhdGggZD0ibTI2LjEwOSAzLjY0My05LjM2OSA2Ljk1OSAxLjczMy00LjEwNSA3LjYzNy0yLjg1M3oiIGZpbGw9IiNlMjc2MWIiIHN0cm9rZT0iI2UyNzYxYiIvPjxnIGZpbGw9IiNlNDc2MWIiIHN0cm9rZT0iI2U0NzYxYiI+PHBhdGggZD0ibTQuNDgxIDMuNjQzIDkuMjk0IDcuMDI0LTEuNjQ4LTQuMTcxem0xOC4yNTggMTYuMTMtMi40OTUgMy44MjMgNS4zMzkgMS40NjkgMS41MzUtNS4yMDctNC4zNzgtLjA4NXptLTE5LjI0Ny4wODUgMS41MjUgNS4yMDcgNS4zMzktMS40NjktMi40OTUtMy44MjN6Ii8+PHBhdGggZD0ibTEwLjA1NSAxMy4zMTMtMS40ODggMi4yNTEgNS4zMDEuMjM1LS4xODgtNS42OTd6bTEwLjQ4IDAtMy42NzItMy4yNzctLjEyMiA1Ljc2MyA1LjI5Mi0uMjM1LTEuNDk3LTIuMjUxem0tMTAuMTc4IDEwLjI4MyAzLjE4My0xLjU1NC0yLjc0OS0yLjE0Ny0uNDMzIDMuNzAxem02LjY5NS0xLjU1NCAzLjE5MiAxLjU1NC0uNDQzLTMuNzAxeiIvPjwvZz48cGF0aCBkPSJtMjAuMjQ0IDIzLjU5Ni0zLjE5Mi0xLjU1NC4yNTQgMi4wODEtLjAyOC44NzZ6bS05Ljg4NyAwIDIuOTY2IDEuNDAzLS4wMTktLjg3Ni4yMzUtMi4wODEtMy4xODMgMS41NTR6IiBmaWxsPSIjZDdjMWIzIiBzdHJva2U9IiNkN2MxYjMiLz48cGF0aCBkPSJtMTMuMzY5IDE4LjUyMS0yLjY1NS0uNzgxIDEuODc0LS44NTd6bTMuODUxIDAgLjc4MS0xLjYzOCAxLjg4My44NTctMi42NjUuNzgxeiIgZmlsbD0iIzIzMzQ0NyIgc3Ryb2tlPSIjMjMzNDQ3Ii8+PHBhdGggZD0ibTEwLjM1NyAyMy41OTYuNDUyLTMuODIzLTIuOTQ3LjA4NXptOS40MzUtMy44MjMuNDUyIDMuODIzIDIuNDk1LTMuNzM4em0yLjI0MS00LjIwOS01LjI5Mi4yMzUuNDkgMi43MjEuNzgyLTEuNjM4IDEuODgzLjg1N3ptLTExLjMxOCAyLjE3NSAxLjg4My0uODU3Ljc3MiAxLjYzOC40OTktMi43MjEtNS4zMDEtLjIzNXoiIGZpbGw9IiNjZDYxMTYiIHN0cm9rZT0iI2NkNjExNiIvPjxwYXRoIGQ9Im04LjU2NyAxNS41NjQgMi4yMjIgNC4zMzEtLjA3NS0yLjE1NnptMTEuMzI4IDIuMTc1LS4wOTQgMi4xNTYgMi4yMzItNC4zMzEtMi4xMzcgMi4xNzV6bS02LjAyNi0xLjk0LS40OTkgMi43MjEuNjIxIDMuMjExLjE0MS00LjIyOC0uMjY0LTEuNzA0em0yLjg3MiAwLS4yNTQgMS42OTUuMTEzIDQuMjM3LjYzMS0zLjIxMXoiIGZpbGw9IiNlNDc1MWYiIHN0cm9rZT0iI2U0NzUxZiIvPjxwYXRoIGQ9Im0xNy4yMyAxOC41Mi0uNjMxIDMuMjExLjQ1Mi4zMTEgMi43NS0yLjE0Ny4wOTQtMi4xNTZ6bS02LjUxNi0uNzgxLjA3NSAyLjE1NiAyLjc1IDIuMTQ3LjQ1Mi0uMzExLS42MjItMy4yMTF6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48cGF0aCBkPSJtMTcuMjc3IDI0Ljk5OS4wMjgtLjg3Ni0uMjM1LS4yMDdoLTMuNTVsLS4yMTcuMjA3LjAxOS44NzYtMi45NjYtMS40MDMgMS4wMzYuODQ4IDIuMSAxLjQ1OWgzLjYwNmwyLjEwOS0xLjQ1OSAxLjAzNi0uODQ4eiIgZmlsbD0iI2MwYWQ5ZSIgc3Ryb2tlPSIjYzBhZDllIi8+PHBhdGggZD0ibTE3LjA1MSAyMi4wNDItLjQ1Mi0uMzExaC0yLjYwOGwtLjQ1Mi4zMTEtLjIzNSAyLjA4MS4yMTctLjIwN2gzLjU1bC4yMzUuMjA3LS4yNTQtMi4wODF6IiBmaWxsPSIjMTYxNjE2IiBzdHJva2U9IiMxNjE2MTYiLz48cGF0aCBkPSJtMjYuNTA1IDExLjA1My44LTMuODQyLTEuMTk2LTMuNTY5LTkuMDU4IDYuNzIzIDMuNDg0IDIuOTQ3IDQuOTI1IDEuNDQxIDEuMDkyLTEuMjcxLS40NzEtLjMzOS43NTMtLjY4Ny0uNTg0LS40NTIuNzUzLS41NzQtLjQ5OS0uMzc3em0tMjMuMjExLTMuODQxLjggMy44NDItLjUwOC4zNzcuNzUzLjU3NC0uNTc0LjQ1Mi43NTMuNjg3LS40NzEuMzM5IDEuMDgzIDEuMjcxIDQuOTI1LTEuNDQxIDMuNDg0LTIuOTQ3LTkuMDU5LTYuNzIzeiIgZmlsbD0iIzc2M2QxNiIgc3Ryb2tlPSIjNzYzZDE2Ii8+PHBhdGggZD0ibTI1LjQ2IDE0Ljc1NC00LjkyNS0xLjQ0MSAxLjQ5NyAyLjI1MS0yLjIzMiA0LjMzMSAyLjkzOC0uMDM4aDQuMzc4bC0xLjY1Ny01LjEwNHptLTE1LjQwNS0xLjQ0MS00LjkyNSAxLjQ0MS0xLjYzOCA1LjEwNGg0LjM2OWwyLjkyOC4wMzgtMi4yMjItNC4zMzEgMS40ODgtMi4yNTF6bTYuNjg1IDIuNDg2LjMxMS01LjQzMyAxLjQzMS0zLjg3aC02LjM1NmwxLjQxMyAzLjg3LjMyOSA1LjQzMy4xMTMgMS43MTQuMDA5IDQuMjE5aDIuNjFsLjAxOS00LjIxOS4xMjItMS43MTR6IiBmaWxsPSIjZjY4NTFiIiBzdHJva2U9IiNmNjg1MWIiLz48L2c+PGNpcmNsZSBjeD0iMjMuNSIgY3k9IjIzLjUiIGZpbGw9IiMwMDAiIHI9IjYuNSIvPjxwYXRoIGQ9Im0yNy40NzMgMjUuNTQ1LTEuMzEgMS4zNjhjLS4wMjkuMDMtLjA2My4wNTMtLjEwMS4wN2EuMzEuMzEgMCAwIDEgLS4xMjEuMDI0aC02LjIwOWMtLjAzIDAtLjA1OS0uMDA4LS4wODMtLjAyNGEuMTUuMTUgMCAwIDEgLS4wNTYtLjA2NWMtLjAxMi0uMDI2LS4wMTUtLjA1Ni0uMDEtLjA4NHMuMDE4LS4wNTUuMDM5LS4wNzZsMS4zMTEtMS4zNjhjLjAyOC0uMDMuMDYzLS4wNTMuMTAxLS4wNjlhLjMxLjMxIDAgMCAxIC4xMjEtLjAyNWg2LjIwOGMuMDMgMCAuMDU5LjAwOC4wODMuMDI0YS4xNS4xNSAwIDAgMSAuMDU2LjA2NWMuMDEyLjAyNi4wMTUuMDU2LjAxLjA4NHMtLjAxOC4wNTUtLjAzOS4wNzZ6bS0xLjMxLTIuNzU2Yy0uMDI5LS4wMy0uMDYzLS4wNTMtLjEwMS0uMDdhLjMxLjMxIDAgMCAwIC0uMTIxLS4wMjRoLTYuMjA5Yy0uMDMgMC0uMDU5LjAwOC0uMDgzLjAyNHMtLjA0NC4wMzgtLjA1Ni4wNjUtLjAxNS4wNTYtLjAxLjA4NC4wMTguMDU1LjAzOS4wNzZsMS4zMTEgMS4zNjhjLjAyOC4wMy4wNjMuMDUzLjEwMS4wNjlhLjMxLjMxIDAgMCAwIC4xMjEuMDI1aDYuMjA4Yy4wMyAwIC4wNTktLjAwOC4wODMtLjAyNGEuMTUuMTUgMCAwIDAgLjA1Ni0uMDY1Yy4wMTItLjAyNi4wMTUtLjA1Ni4wMS0uMDg0cy0uMDE4LS4wNTUtLjAzOS0uMDc2em0tNi40MzEtLjk4M2g2LjIwOWEuMzEuMzEgMCAwIDAgLjEyMS0uMDI0Yy4wMzgtLjAxNi4wNzMtLjA0LjEwMS0uMDdsMS4zMS0xLjM2OGMuMDItLjAyMS4wMzQtLjA0Ny4wMzktLjA3NnMuMDAxLS4wNTgtLjAxLS4wODRhLjE1LjE1IDAgMCAwIC0uMDU2LS4wNjVjLS4wMjUtLjAxNi0uMDU0LS4wMjQtLjA4My0uMDI0aC02LjIwOGEuMzEuMzEgMCAwIDAgLS4xMjEuMDI1Yy0uMDM4LjAxNi0uMDcyLjA0LS4xMDEuMDY5bC0xLjMxIDEuMzY4Yy0uMDIuMDIxLS4wMzQuMDQ3LS4wMzkuMDc2cy0uMDAxLjA1OC4wMS4wODQuMDMxLjA0OS4wNTYuMDY1LjA1NC4wMjQuMDgzLjAyNHoiIGZpbGw9InVybCgjYSkiLz48L3N2Zz4=";var jt=function(t,e,n,i){if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?i:n==="a"?i.call(t):i?i.value:e.get(t)},vX=function(t,e,n,i,r){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?r.call(t,n):r?r.value=n:e.set(t,n),n},h0,Vl,$w,Yw,Xw,Ri,qw,jP,FP,Kw,Zw,Qw,Jw,e_;class wX{constructor(){h0.add(this),Vl.set(this,{}),$w.set(this,"1.0.0"),Yw.set(this,"MetaMask"),Xw.set(this,yX),Ri.set(this,null),qw.set(this,(e,n)=>{var i;return(i=jt(this,Vl,"f")[e])!=null&&i.push(n)||(jt(this,Vl,"f")[e]=[n]),()=>jt(this,h0,"m",FP).call(this,e,n)}),Kw.set(this,async()=>{if(!jt(this,Ri,"f")){let e;try{e=(await bx(async()=>{const{default:n}=await import("./index-BRHuTiBx.js");return{default:n}},__vite__mapDeps([2,3]))).default}catch{throw new Error("Unable to load Solflare MetaMask SDK")}vX(this,Ri,new e,"f"),jt(this,Ri,"f").on("standard_change",n=>jt(this,h0,"m",jP).call(this,"change",n))}return this.accounts.length||await jt(this,Ri,"f").connect(),{accounts:this.accounts}}),Zw.set(this,async()=>{jt(this,Ri,"f")&&await jt(this,Ri,"f").disconnect()}),Qw.set(this,async(...e)=>{if(!jt(this,Ri,"f"))throw new en;return await jt(this,Ri,"f").standardSignAndSendTransaction(...e)}),Jw.set(this,async(...e)=>{if(!jt(this,Ri,"f"))throw new en;return await jt(this,Ri,"f").standardSignTransaction(...e)}),e_.set(this,async(...e)=>{if(!jt(this,Ri,"f"))throw new en;return await jt(this,Ri,"f").standardSignMessage(...e)})}get version(){return jt(this,$w,"f")}get name(){return jt(this,Yw,"f")}get icon(){return jt(this,Xw,"f")}get chains(){return[vf,cP,uP]}get features(){return{[px]:{version:"1.0.0",connect:jt(this,Kw,"f")},[pg]:{version:"1.0.0",disconnect:jt(this,Zw,"f")},[mx]:{version:"1.0.0",on:jt(this,qw,"f")},[zi]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signAndSendTransaction:jt(this,Qw,"f")},[dn]:{version:"1.0.0",supportedTransactionVersions:["legacy",0],signTransaction:jt(this,Jw,"f")},[xo]:{version:"1.0.0",signMessage:jt(this,e_,"f")}}}get accounts(){return jt(this,Ri,"f")?jt(this,Ri,"f").standardAccounts:[]}}Vl=new WeakMap,$w=new WeakMap,Yw=new WeakMap,Xw=new WeakMap,Ri=new WeakMap,qw=new WeakMap,Kw=new WeakMap,Zw=new WeakMap,Qw=new WeakMap,Jw=new WeakMap,e_=new WeakMap,h0=new WeakSet,jP=function(e,...n){var i;(i=jt(this,Vl,"f")[e])==null||i.forEach(r=>r.apply(null,n))},FP=function(e,n){var i;jt(this,Vl,"f")[e]=(i=jt(this,Vl,"f")[e])==null?void 0:i.filter(r=>n!==r)};let EA=!1;function _X(){EA||(hY(new wX),EA=!0)}async function bX(){const t="solflare-detect-metamask";function e(){window.postMessage({target:"metamask-contentscript",data:{name:"metamask-provider",data:{id:t,jsonrpc:"2.0",method:"wallet_getSnaps"}}},window.location.origin)}function n(i){var s,o;const r=i.data;(r==null?void 0:r.target)==="metamask-inpage"&&((s=r.data)==null?void 0:s.name)==="metamask-provider"&&(((o=r.data.data)==null?void 0:o.id)===t?(window.removeEventListener("message",n),r.data.data.error||_X()):e())}window.addEventListener("message",n),window.setTimeout(()=>window.removeEventListener("message",n),5e3),e()}const SX="Solflare";class MX extends fx{constructor(e={}){super(),this.name=SX,this.url="https://solflare.com",this.icon="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48c3ZnIGlkPSJTIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1MCA1MCI+PGRlZnM+PHN0eWxlPi5jbHMtMXtmaWxsOiMwMjA1MGE7c3Ryb2tlOiNmZmVmNDY7c3Ryb2tlLW1pdGVybGltaXQ6MTA7c3Ryb2tlLXdpZHRoOi41cHg7fS5jbHMtMntmaWxsOiNmZmVmNDY7fTwvc3R5bGU+PC9kZWZzPjxyZWN0IGNsYXNzPSJjbHMtMiIgeD0iMCIgd2lkdGg9IjUwIiBoZWlnaHQ9IjUwIiByeD0iMTIiIHJ5PSIxMiIvPjxwYXRoIGNsYXNzPSJjbHMtMSIgZD0iTTI0LjIzLDI2LjQybDIuNDYtMi4zOCw0LjU5LDEuNWMzLjAxLDEsNC41MSwyLjg0LDQuNTEsNS40MywwLDEuOTYtLjc1LDMuMjYtMi4yNSw0LjkzbC0uNDYuNS4xNy0xLjE3Yy42Ny00LjI2LS41OC02LjA5LTQuNzItNy40M2wtNC4zLTEuMzhoMFpNMTguMDUsMTEuODVsMTIuNTIsNC4xNy0yLjcxLDIuNTktNi41MS0yLjE3Yy0yLjI1LS43NS0zLjAxLTEuOTYtMy4zLTQuNTF2LS4wOGgwWk0xNy4zLDMzLjA2bDIuODQtMi43MSw1LjM0LDEuNzVjMi44LjkyLDMuNzYsMi4xMywzLjQ2LDUuMThsLTExLjY1LTQuMjJoMFpNMTMuNzEsMjAuOTVjMC0uNzkuNDItMS41NCwxLjEzLTIuMTcuNzUsMS4wOSwyLjA1LDIuMDUsNC4wOSwyLjcxbDQuNDIsMS40Ni0yLjQ2LDIuMzgtNC4zNC0xLjQyYy0yLS42Ny0yLjg0LTEuNjctMi44NC0yLjk2TTI2LjgyLDQyLjg3YzkuMTgtNi4wOSwxNC4xMS0xMC4yMywxNC4xMS0xNS4zMiwwLTMuMzgtMi01LjI2LTYuNDMtNi43MmwtMy4zNC0xLjEzLDkuMTQtOC43Ny0xLjg0LTEuOTYtMi43MSwyLjM4LTEyLjgxLTQuMjJjLTMuOTcsMS4yOS04Ljk3LDUuMDktOC45Nyw4Ljg5LDAsLjQyLjA0LjgzLjE3LDEuMjktMy4zLDEuODgtNC42MywzLjYzLTQuNjMsNS44LDAsMi4wNSwxLjA5LDQuMDksNC41NSw1LjIybDIuNzUuOTItOS41Miw5LjE0LDEuODQsMS45NiwyLjk2LTIuNzEsMTQuNzMsNS4yMmgwWiIvPjwvc3ZnPg==",this.supportedTransactionVersions=new Set(["legacy",0]),this._readyState=typeof window>"u"||typeof document>"u"?xt.Unsupported:xt.Loadable,this._disconnected=()=>{const n=this._wallet;n&&(n.off("disconnect",this._disconnected),this._wallet=null,this._publicKey=null,this.emit("error",new hx),this.emit("disconnect"))},this._accountChanged=n=>{if(!n)return;const i=this._publicKey;if(i){try{n=new Xe(n.toBytes())}catch(r){this.emit("error",new Wa(r==null?void 0:r.message,r));return}i.equals(n)||(this._publicKey=n,this.emit("connect",n))}},this._connecting=!1,this._publicKey=null,this._wallet=null,this._config=e,this._readyState!==xt.Unsupported&&(Hk(()=>{var n;return(n=window.solflare)!=null&&n.isSolflare||window.SolflareApp?(this._readyState=xt.Installed,this.emit("readyStateChange",this._readyState),!0):!1}),bX())}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.connected)}get readyState(){return this._readyState}async autoConnect(){this.readyState===xt.Loadable&&_w()||await this.connect()}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==xt.Loadable&&this._readyState!==xt.Installed)throw new ko;if(this.readyState===xt.Loadable&&_w()){const r=encodeURIComponent(window.location.href),s=encodeURIComponent(window.location.origin);window.location.href=`https://solflare.com/ul/v1/browse/${r}?ref=${s}`;return}let e;try{e=(await bx(async()=>{const{default:r}=await import("./index-Coj7gpoU.js");return{default:r}},__vite__mapDeps([4,3]))).default}catch(r){throw new cM(r==null?void 0:r.message,r)}let n;try{n=new e({network:this._config.network})}catch(r){throw new Ul(r==null?void 0:r.message,r)}if(this._connecting=!0,!n.connected)try{await n.connect()}catch(r){throw new Po(r==null?void 0:r.message,r)}if(!n.publicKey)throw new Po;let i;try{i=new Xe(n.publicKey.toBytes())}catch(r){throw new Wa(r==null?void 0:r.message,r)}n.on("disconnect",this._disconnected),n.on("accountChanged",this._accountChanged),this._wallet=n,this._publicKey=i,this.emit("connect",i)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){e.off("disconnect",this._disconnected),e.off("accountChanged",this._accountChanged),this._wallet=null,this._publicKey=null;try{await e.disconnect()}catch(n){this.emit("error",new Qf(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,i={}){try{const r=this._wallet;if(!r)throw new en;try{const{signers:s,...o}=i;return ks(e)?s!=null&&s.length&&e.sign(s):(e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s)),o.preflightCommitment=o.preflightCommitment||n.commitment,await r.signAndSendTransaction(e,o)}catch(s){throw s instanceof ii?s:new Is(s==null?void 0:s.message,s)}}catch(r){throw this.emit("error",r),r}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signTransaction(e)||e}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signAllTransactions(e)||e}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signMessage(e,"utf8")}catch(i){throw new Jf(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}}const EX="Torus";class TX extends fx{constructor({params:e={showTorusButton:!1}}={params:{showTorusButton:!1}}){super(),this.name=EX,this.url="https://tor.us",this.icon="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzMiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMyAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZSBjeD0iMTYuNSIgY3k9IjE2IiByPSIxNiIgZmlsbD0iIzAzNjRGRiIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTExLjIxODYgOS40OTIxOUMxMC40NTM5IDkuNDkyMTkgOS44MzM5OCAxMC4xMTIxIDkuODMzOTggMTAuODc2OFYxMi40ODk4QzkuODMzOTggMTMuMjU0NSAxMC40NTM5IDEzLjg3NDQgMTEuMjE4NiAxMy44NzQ0SDEzLjY2ODRWMjIuODk3NkMxMy42Njg0IDIzLjY2MjMgMTQuMjg4MyAyNC4yODIyIDE1LjA1MyAyNC4yODIySDE2LjY2NkMxNy40MzA3IDI0LjI4MjIgMTguMDUwNiAyMy42NjIzIDE4LjA1MDYgMjIuODk3NlYxMi41MDE1QzE4LjA1MDYgMTIuNDk3NiAxOC4wNTA2IDEyLjQ5MzcgMTguMDUwNiAxMi40ODk4VjEwLjg3NjhDMTguMDUwNiAxMC4xMTIxIDE3LjQzMDcgOS40OTIxOSAxNi42NjYgOS40OTIxOUgxNS4wNTNIMTEuMjE4NloiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGQ9Ik0yMS4zMzc2IDEzLjg3NDRDMjIuNTQ3NyAxMy44NzQ0IDIzLjUyODcgMTIuODkzNCAyMy41Mjg3IDExLjY4MzNDMjMuNTI4NyAxMC40NzMyIDIyLjU0NzcgOS40OTIxOSAyMS4zMzc2IDkuNDkyMTlDMjAuMTI3NSA5LjQ5MjE5IDE5LjE0NjUgMTAuNDczMiAxOS4xNDY1IDExLjY4MzNDMTkuMTQ2NSAxMi44OTM0IDIwLjEyNzUgMTMuODc0NCAyMS4zMzc2IDEzLjg3NDRaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K",this.supportedTransactionVersions=null,this._readyState=typeof window>"u"||typeof document>"u"?xt.Unsupported:xt.Loadable,this._connecting=!1,this._wallet=null,this._publicKey=null,this._params=e}get publicKey(){return this._publicKey}get connecting(){return this._connecting}get connected(){var e;return!!((e=this._wallet)!=null&&e.isLoggedIn)}get readyState(){return this._readyState}async connect(){try{if(this.connected||this.connecting)return;if(this._readyState!==xt.Loadable)throw new ko;this._connecting=!0;let e;try{e=(await bx(async()=>{const{default:s}=await import("./solanaEmbed.esm-DajA3GtM.js");return{default:s}},__vite__mapDeps([5,1]))).default}catch(s){throw new cM(s==null?void 0:s.message,s)}let n;try{n=window.torus||new e}catch(s){throw new Ul(s==null?void 0:s.message,s)}if(!n.isInitialized)try{await n.init(this._params)}catch(s){throw new Po(s==null?void 0:s.message,s)}let i;try{i=await n.login()}catch(s){throw new va(s==null?void 0:s.message,s)}let r;try{r=new Xe(i[0])}catch(s){throw new Wa(s==null?void 0:s.message,s)}this._wallet=n,this._publicKey=r,this.emit("connect",r)}catch(e){throw this.emit("error",e),e}finally{this._connecting=!1}}async disconnect(){const e=this._wallet;if(e){this._wallet=null,this._publicKey=null;try{e.isLoggedIn&&await e.cleanUp()}catch(n){this.emit("error",new Qf(n==null?void 0:n.message,n))}}this.emit("disconnect")}async sendTransaction(e,n,i={}){try{const r=this._wallet;if(!r)throw new en;try{const{signers:s,...o}=i;e=await this.prepareTransaction(e,n,o),s!=null&&s.length&&e.partialSign(...s),o.preflightCommitment=o.preflightCommitment||n.commitment;const{signature:a}=await r.signAndSendTransaction(e,o);return a}catch(s){throw s instanceof ii?s:new Is(s==null?void 0:s.message,s)}}catch(r){throw this.emit("error",r),r}}async signTransaction(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signTransaction(e)||e}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signAllTransactions(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signAllTransactions(e)||e}catch(i){throw new rr(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}async signMessage(e){try{const n=this._wallet;if(!n)throw new en;try{return await n.signMessage(e)}catch(i){throw new Jf(i==null?void 0:i.message,i)}}catch(n){throw this.emit("error",n),n}}}function AX({children:t}){const e=bw.Devnet,n=F.useMemo(()=>"https://api.devnet.solana.com",[e]),i=F.useMemo(()=>[new xX,new MX({network:e}),new TX,new mX],[e]);return d.jsx(qH,{endpoint:n,children:d.jsx(UY,{wallets:i,autoConnect:!0,children:d.jsx(VY,{children:t})})})}function CX(){console.log(" Clearing all app state..."),["flix_auth_token","flix_user","flix_session_balance","flix_last_deposit_check","flix_session_id","flix_active_session"].forEach(n=>{localStorage.removeItem(n),console.log(`    Removed ${n}`)}),Object.keys(localStorage).forEach(n=>{n.startsWith("flix_")&&localStorage.removeItem(n)}),sessionStorage.clear(),console.log("    All app state cleared")}const zP=F.createContext(void 0);function NX({children:t}){const{publicKey:e,connected:n,connecting:i,disconnect:r}=Ui(),s=eS(),o=mc(),[a,l]=F.useState(null),[c,u]=F.useState(null),[h,f]=F.useState(!1),[p,x]=F.useState(!1),y=F.useRef(null),g=F.useRef(!1),m=(e==null?void 0:e.toBase58())||null;F.useEffect(()=>{i||(async()=>{x(!0);const k=localStorage.getItem("flix_auth_token"),R=localStorage.getItem("flix_user");if(k&&R)try{const B=JSON.parse(R);if(m&&B.walletAddress!==m){console.log(" Wallet mismatch detected on mount!"),console.log(`   Saved user wallet: ${B.walletAddress.slice(0,8)}...`),console.log(`   Connected wallet: ${m.slice(0,8)}...`),console.log("   Clearing stale auth state..."),localStorage.removeItem("flix_auth_token"),localStorage.removeItem("flix_user"),x(!1);return}(await fetch("/api/auth/me",{headers:{Authorization:`Bearer ${k}`}})).ok?(u(k),l(B),console.log(" Restored valid auth session")):(console.log(" Invalid token detected - clearing auth state"),localStorage.removeItem("flix_auth_token"),localStorage.removeItem("flix_user"))}catch{console.log(" Token validation failed - clearing auth state"),localStorage.removeItem("flix_auth_token"),localStorage.removeItem("flix_user")}x(!1)})()},[m,i]),F.useEffect(()=>{const N=y.current;if(N!==m){if(!N&&m){console.log(" Initial wallet detected:",m.slice(0,8)+"..."),y.current=m;return}N&&m&&N!==m&&(console.log(" Wallet changed detected, resetting everything..."),console.log(`   From: ${N.slice(0,8)}...`),console.log(`   To: ${m.slice(0,8)}...`),CX(),l(null),u(null),g.current=!1,o.pathname!=="/"&&(console.log("   Navigating to home page..."),s("/",{replace:!0})),setTimeout(()=>{console.log("    Logging in with new wallet..."),_()},150),y.current=m),N&&!m&&(console.log(" Wallet disconnected"),y.current=null)}},[m]),F.useEffect(()=>{if(console.log(" Auto-login check:",{connected:n,connecting:i,currentWallet:m,hasUser:!!a,isLoading:h,isValidatingToken:p,loginInProgress:g.current}),i){console.log(" Wallet connecting...");return}if(p){console.log(" Waiting for token validation to complete...");return}if(g.current){console.log(" Login already in progress, skipping duplicate attempt...");return}n&&m&&!a&&!h?(console.log(" Conditions met - triggering auto-login"),g.current=!0,_().catch(N=>{console.error(" Auto-login failed:",N)}).finally(()=>{g.current=!1})):n&&m&&a?console.log(" Already logged in:",a):n?m?h&&console.log(" Login in progress..."):console.log(" No wallet address available"):console.log(" Wallet not connected")},[n,i,m,a,h,p]);const _=async(N=0)=>{if(!m)throw new Error("Wallet not connected");f(!0);try{const k=m;console.log(` Attempting login for wallet: ${k.slice(0,8)}... (attempt ${N+1})`);const R=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({walletAddress:k})});if(console.log(` Login response status: ${R.status}`),!R.ok){const j=await R.json().catch(()=>({}));throw console.error(" Login failed:",j),new Error(j.error||"Login failed")}const B=await R.json();console.log(" Login response data:",B);const{token:L,user:D}=B;if(!L||!D)throw new Error("Invalid login response - missing token or user data");u(L),l(D),localStorage.setItem("flix_auth_token",L),localStorage.setItem("flix_user",JSON.stringify(D)),console.log(" Logged in successfully:",D),console.log("   - User ID:",D.id),console.log("   - Is Creator:",D.isCreator),console.log("   - Username:",D.username)}catch(k){if(console.error(" Login error:",k),N<2){const R=Math.pow(2,N)*500;return console.log(` Retrying login in ${R}ms...`),await new Promise(B=>setTimeout(B,R)),_(N+1)}throw k}finally{f(!1)}},w=()=>{l(null),u(null),localStorage.removeItem("flix_auth_token"),localStorage.removeItem("flix_user"),r()},S=async()=>{if(!m||!a)throw new Error("Must be logged in to become a creator");f(!0);try{const N=m;console.log(" Sending become creator request for wallet:",N);const k=await fetch("/api/users/become-creator",{method:"POST",headers:{"Content-Type":"application/json","x-wallet-address":N}});if(console.log(" Become creator response status:",k.status),!k.ok){const B=await k.json().catch(()=>({}));throw console.error(" Become creator error data:",B),new Error(B.error||"Failed to become creator")}const{user:R}=await k.json();console.log(" Received updated user:",R),l(R),localStorage.setItem("flix_user",JSON.stringify(R)),console.log(" You are now a creator!")}catch(N){throw console.error("Become creator error:",N),N}finally{f(!1)}};return d.jsx(zP.Provider,{value:{user:a,token:c,isLoading:h,login:_,logout:w,becomeCreator:S},children:t})}function Ex(){const t=F.useContext(zP);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t}const RX={success:"from-emerald-500/40 to-cyan-500/40 border-emerald-400/40",error:"from-rose-500/40 to-orange-500/40 border-rose-400/40",info:"from-purple-500/40 to-blue-500/40 border-purple-400/40"};function LX({message:t,onDismiss:e,duration:n=4500}){return F.useEffect(()=>{if(!t)return;const i=setTimeout(()=>e(t.id),n);return()=>clearTimeout(i)},[t,e,n]),d.jsx("div",{className:"pointer-events-none fixed inset-x-0 top-4 z-[120] flex w-full justify-center px-4",children:d.jsx(po,{initial:!1,children:t&&d.jsx(et.div,{initial:{opacity:0,y:-12,scale:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-12},transition:{duration:.18,ease:"easeOut"},className:"pointer-events-auto w-full max-w-md",children:d.jsxs("div",{className:"relative overflow-hidden rounded-2xl border backdrop-blur-xl shadow-lg shadow-black/30",children:[d.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${RX[t.variant??"success"]} opacity-80`}),d.jsxs("div",{className:"relative z-10 flex items-start gap-4 p-5",children:[d.jsxs("div",{className:"mt-1 flex h-10 w-10 items-center justify-center rounded-xl border border-white/10 bg-white/10 text-white/80",children:[t.variant==="success"&&d.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:1.6,viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),t.variant==="error"&&d.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:1.6,viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m0 3.75h.008v.008H12v-.008zm9-3.75a9 9 0 11-18 0 9 9 0 0118 0z"})}),t.variant==="info"&&d.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",strokeWidth:1.6,viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11.25 11.25h1.5v5.25h-1.5v-5.25zM12 9.75a.75.75 0 100-1.5.75.75 0 000 1.5zM21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})]}),d.jsxs("div",{className:"flex-1 text-left",children:[d.jsx("p",{className:"text-base font-semibold text-white",children:t.title}),t.description&&d.jsx("p",{className:"mt-1 text-sm text-white/80",children:t.description}),t.actionLabel&&t.onAction&&d.jsxs("button",{type:"button",onClick:()=>{var i;(i=t.onAction)==null||i.call(t),e(t.id)},className:"mt-3 inline-flex items-center gap-1 rounded-lg border border-white/20 bg-white/20 px-4 py-1.5 text-sm font-medium text-white transition hover:border-white/40 hover:bg-white/30",children:[t.actionLabel,d.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.6,viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 5l7 7-7 7"})})]})]}),d.jsx("button",{type:"button",onClick:()=>e(t.id),className:"rounded-full bg-white/10 p-1 text-white/70 transition hover:bg-white/20 hover:text-white","aria-label":"Dismiss toast",children:d.jsx("svg",{className:"h-4 w-4",fill:"none",stroke:"currentColor",strokeWidth:1.6,viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})})]})]})},t.id)})})}function IX(){const[t,e]=F.useState(null),n=F.useCallback(r=>{const s=Math.random().toString(36).slice(2);e({id:s,...r})},[]),i=F.useCallback(r=>{e(s=>s&&s.id===r?null:s)},[]);return{toast:t,showToast:n,dismissToast:i}}const VP=F.createContext({showToast:()=>{},dismissToast:()=>{}});function kX({children:t}){const{toast:e,showToast:n,dismissToast:i}=IX(),r=F.useCallback(()=>{e&&i(e.id)},[e,i]);return d.jsxs(VP.Provider,{value:{showToast:n,dismissToast:r},children:[t,d.jsx(LX,{message:e,onDismiss:i})]})}function bd(){const t=F.useContext(VP);if(!t)throw new Error("useToastContext must be used within a ToastProvider");return t}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const xM="180",PX=0,TA=1,DX=2,WP=1,BX=2,so=3,Ha=0,lr=1,vo=2,Pa=0,Pu=1,AA=2,CA=3,NA=4,UX=5,Al=100,OX=101,jX=102,FX=103,zX=104,VX=200,WX=201,HX=202,GX=203,t_=204,n_=205,$X=206,YX=207,XX=208,qX=209,KX=210,ZX=211,QX=212,JX=213,eq=214,i_=0,r_=1,s_=2,id=3,o_=4,a_=5,l_=6,c_=7,HP=0,tq=1,nq=2,Da=0,iq=1,rq=2,sq=3,oq=4,aq=5,lq=6,cq=7,GP=300,rd=301,sd=302,u_=303,d_=304,Tx=306,h_=1e3,Wl=1001,f_=1002,gs=1003,uq=1004,$p=1005,Ps=1006,nv=1007,Hl=1008,Uo=1009,$P=1010,YP=1011,wf=1012,yM=1013,cc=1014,So=1015,np=1016,vM=1017,wM=1018,_f=1020,XP=35902,qP=35899,KP=1021,ZP=1022,ds=1023,bf=1026,Sf=1027,QP=1028,_M=1029,JP=1030,bM=1031,SM=1033,f0=33776,p0=33777,m0=33778,g0=33779,p_=35840,m_=35841,g_=35842,x_=35843,y_=36196,v_=37492,w_=37496,__=37808,b_=37809,S_=37810,M_=37811,E_=37812,T_=37813,A_=37814,C_=37815,N_=37816,R_=37817,L_=37818,I_=37819,k_=37820,P_=37821,D_=36492,B_=36494,U_=36495,O_=36283,j_=36284,F_=36285,z_=36286,dq=3200,hq=3201,fq=0,pq=1,fa="",jr="srgb",od="srgb-linear",_g="linear",Ht="srgb",Lc=7680,RA=519,mq=512,gq=513,xq=514,e5=515,yq=516,vq=517,wq=518,_q=519,LA=35044,IA="300 es",Ds=2e3,bg=2001;class Sd{addEventListener(e,n){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(n)===-1&&i[e].push(n)}hasEventListener(e,n){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(n)!==-1}removeEventListener(e,n){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(n);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const n=this._listeners;if(n===void 0)return;const i=n[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Ai=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],iv=Math.PI/180,V_=180/Math.PI;function ip(){const t=Math.random()*4294967295|0,e=Math.random()*4294967295|0,n=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ai[t&255]+Ai[t>>8&255]+Ai[t>>16&255]+Ai[t>>24&255]+"-"+Ai[e&255]+Ai[e>>8&255]+"-"+Ai[e>>16&15|64]+Ai[e>>24&255]+"-"+Ai[n&63|128]+Ai[n>>8&255]+"-"+Ai[n>>16&255]+Ai[n>>24&255]+Ai[i&255]+Ai[i>>8&255]+Ai[i>>16&255]+Ai[i>>24&255]).toLowerCase()}function At(t,e,n){return Math.max(e,Math.min(n,t))}function bq(t,e){return(t%e+e)%e}function rv(t,e,n){return(1-n)*t+n*e}function Hd(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function qi(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(t*4294967295);case Uint16Array:return Math.round(t*65535);case Uint8Array:return Math.round(t*255);case Int32Array:return Math.round(t*2147483647);case Int16Array:return Math.round(t*32767);case Int8Array:return Math.round(t*127);default:throw new Error("Invalid component type.")}}class Vt{constructor(e=0,n=0){Vt.prototype.isVector2=!0,this.x=e,this.y=n}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,n){return this.x=e,this.y=n,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const n=this.x,i=this.y,r=e.elements;return this.x=r[0]*n+r[3]*i+r[6],this.y=r[1]*n+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,n){return this.x=At(this.x,e.x,n.x),this.y=At(this.y,e.y,n.y),this}clampScalar(e,n){return this.x=At(this.x,e,n),this.y=At(this.y,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(At(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(At(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y;return n*n+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this}rotateAround(e,n){const i=Math.cos(n),r=Math.sin(n),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class rp{constructor(e=0,n=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=n,this._z=i,this._w=r}static slerpFlat(e,n,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],h=i[r+3];const f=s[o+0],p=s[o+1],x=s[o+2],y=s[o+3];if(a===0){e[n+0]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h;return}if(a===1){e[n+0]=f,e[n+1]=p,e[n+2]=x,e[n+3]=y;return}if(h!==y||l!==f||c!==p||u!==x){let g=1-a;const m=l*f+c*p+u*x+h*y,_=m>=0?1:-1,w=1-m*m;if(w>Number.EPSILON){const N=Math.sqrt(w),k=Math.atan2(N,m*_);g=Math.sin(g*k)/N,a=Math.sin(a*k)/N}const S=a*_;if(l=l*g+f*S,c=c*g+p*S,u=u*g+x*S,h=h*g+y*S,g===1-a){const N=1/Math.sqrt(l*l+c*c+u*u+h*h);l*=N,c*=N,u*=N,h*=N}}e[n]=l,e[n+1]=c,e[n+2]=u,e[n+3]=h}static multiplyQuaternionsFlat(e,n,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],h=s[o],f=s[o+1],p=s[o+2],x=s[o+3];return e[n]=a*x+u*h+l*p-c*f,e[n+1]=l*x+u*f+c*h-a*p,e[n+2]=c*x+u*p+a*f-l*h,e[n+3]=u*x-a*h-l*f-c*p,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,n,i,r){return this._x=e,this._y=n,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,n=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),h=a(s/2),f=l(i/2),p=l(r/2),x=l(s/2);switch(o){case"XYZ":this._x=f*u*h+c*p*x,this._y=c*p*h-f*u*x,this._z=c*u*x+f*p*h,this._w=c*u*h-f*p*x;break;case"YXZ":this._x=f*u*h+c*p*x,this._y=c*p*h-f*u*x,this._z=c*u*x-f*p*h,this._w=c*u*h+f*p*x;break;case"ZXY":this._x=f*u*h-c*p*x,this._y=c*p*h+f*u*x,this._z=c*u*x+f*p*h,this._w=c*u*h-f*p*x;break;case"ZYX":this._x=f*u*h-c*p*x,this._y=c*p*h+f*u*x,this._z=c*u*x-f*p*h,this._w=c*u*h+f*p*x;break;case"YZX":this._x=f*u*h+c*p*x,this._y=c*p*h+f*u*x,this._z=c*u*x-f*p*h,this._w=c*u*h-f*p*x;break;case"XZY":this._x=f*u*h-c*p*x,this._y=c*p*h-f*u*x,this._z=c*u*x+f*p*h,this._w=c*u*h+f*p*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return n===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,n){const i=n/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const n=e.elements,i=n[0],r=n[4],s=n[8],o=n[1],a=n[5],l=n[9],c=n[2],u=n[6],h=n[10],f=i+a+h;if(f>0){const p=.5/Math.sqrt(f+1);this._w=.25/p,this._x=(u-l)*p,this._y=(s-c)*p,this._z=(o-r)*p}else if(i>a&&i>h){const p=2*Math.sqrt(1+i-a-h);this._w=(u-l)/p,this._x=.25*p,this._y=(r+o)/p,this._z=(s+c)/p}else if(a>h){const p=2*Math.sqrt(1+a-i-h);this._w=(s-c)/p,this._x=(r+o)/p,this._y=.25*p,this._z=(l+u)/p}else{const p=2*Math.sqrt(1+h-i-a);this._w=(o-r)/p,this._x=(s+c)/p,this._y=(l+u)/p,this._z=.25*p}return this._onChangeCallback(),this}setFromUnitVectors(e,n){let i=e.dot(n)+1;return i<1e-8?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*n.z-e.z*n.y,this._y=e.z*n.x-e.x*n.z,this._z=e.x*n.y-e.y*n.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(At(this.dot(e),-1,1)))}rotateTowards(e,n){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,n/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,n){const i=e._x,r=e._y,s=e._z,o=e._w,a=n._x,l=n._y,c=n._z,u=n._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,n){if(n===0)return this;if(n===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const p=1-n;return this._w=p*o+n*this._w,this._x=p*i+n*this._x,this._y=p*r+n*this._y,this._z=p*s+n*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),h=Math.sin((1-n)*u)/c,f=Math.sin(n*u)/c;return this._w=o*h+this._w*f,this._x=i*h+this._x*f,this._y=r*h+this._y*f,this._z=s*h+this._z*f,this._onChangeCallback(),this}slerpQuaternions(e,n,i){return this.copy(e).slerp(n,i)}random(){const e=2*Math.PI*Math.random(),n=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(n),s*Math.cos(n))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,n=0){return this._x=e[n],this._y=e[n+1],this._z=e[n+2],this._w=e[n+3],this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._w,e}fromBufferAttribute(e,n){return this._x=e.getX(n),this._y=e.getY(n),this._z=e.getZ(n),this._w=e.getW(n),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class he{constructor(e=0,n=0,i=0){he.prototype.isVector3=!0,this.x=e,this.y=n,this.z=i}set(e,n,i){return i===void 0&&(i=this.z),this.x=e,this.y=n,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,n){return this.x=e.x*n.x,this.y=e.y*n.y,this.z=e.z*n.z,this}applyEuler(e){return this.applyQuaternion(kA.setFromEuler(e))}applyAxisAngle(e,n){return this.applyQuaternion(kA.setFromAxisAngle(e,n))}applyMatrix3(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[3]*i+s[6]*r,this.y=s[1]*n+s[4]*i+s[7]*r,this.z=s[2]*n+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*n+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*n+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*n+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*n+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const n=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*n-s*r),h=2*(s*i-o*n);return this.x=n+l*c+o*h-a*u,this.y=i+l*u+a*c-s*h,this.z=r+l*h+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const n=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*n+s[4]*i+s[8]*r,this.y=s[1]*n+s[5]*i+s[9]*r,this.z=s[2]*n+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,n){return this.x=At(this.x,e.x,n.x),this.y=At(this.y,e.y,n.y),this.z=At(this.z,e.z,n.z),this}clampScalar(e,n){return this.x=At(this.x,e,n),this.y=At(this.y,e,n),this.z=At(this.z,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(At(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,n){const i=e.x,r=e.y,s=e.z,o=n.x,a=n.y,l=n.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const n=e.lengthSq();if(n===0)return this.set(0,0,0);const i=e.dot(this)/n;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return sv.copy(this).projectOnVector(e),this.sub(sv)}reflect(e){return this.sub(sv.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const n=Math.sqrt(this.lengthSq()*e.lengthSq());if(n===0)return Math.PI/2;const i=this.dot(e)/n;return Math.acos(At(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const n=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return n*n+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,n,i){const r=Math.sin(n)*e;return this.x=r*Math.sin(i),this.y=Math.cos(n)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,n,i){return this.x=e*Math.sin(n),this.y=i,this.z=e*Math.cos(n),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this}setFromMatrixScale(e){const n=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=n,this.y=i,this.z=r,this}setFromMatrixColumn(e,n){return this.fromArray(e.elements,n*4)}setFromMatrix3Column(e,n){return this.fromArray(e.elements,n*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,n=Math.random()*2-1,i=Math.sqrt(1-n*n);return this.x=i*Math.cos(e),this.y=n,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const sv=new he,kA=new rp;class yt{constructor(e,n,i,r,s,o,a,l,c){yt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,c)}set(e,n,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=n,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],this}extractBasis(e,n,i){return e.setFromMatrix3Column(this,0),n.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const n=e.elements;return this.set(n[0],n[4],n[8],n[1],n[5],n[9],n[2],n[6],n[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],h=i[7],f=i[2],p=i[5],x=i[8],y=r[0],g=r[3],m=r[6],_=r[1],w=r[4],S=r[7],N=r[2],k=r[5],R=r[8];return s[0]=o*y+a*_+l*N,s[3]=o*g+a*w+l*k,s[6]=o*m+a*S+l*R,s[1]=c*y+u*_+h*N,s[4]=c*g+u*w+h*k,s[7]=c*m+u*S+h*R,s[2]=f*y+p*_+x*N,s[5]=f*g+p*w+x*k,s[8]=f*m+p*S+x*R,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[3]*=e,n[6]*=e,n[1]*=e,n[4]*=e,n[7]*=e,n[2]*=e,n[5]*=e,n[8]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return n*o*u-n*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=u*o-a*c,f=a*l-u*s,p=c*s-o*l,x=n*h+i*f+r*p;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const y=1/x;return e[0]=h*y,e[1]=(r*c-u*i)*y,e[2]=(a*i-r*o)*y,e[3]=f*y,e[4]=(u*n-r*l)*y,e[5]=(r*s-a*n)*y,e[6]=p*y,e[7]=(i*l-c*n)*y,e[8]=(o*n-i*s)*y,this}transpose(){let e;const n=this.elements;return e=n[1],n[1]=n[3],n[3]=e,e=n[2],n[2]=n[6],n[6]=e,e=n[5],n[5]=n[7],n[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const n=this.elements;return e[0]=n[0],e[1]=n[3],e[2]=n[6],e[3]=n[1],e[4]=n[4],e[5]=n[7],e[6]=n[2],e[7]=n[5],e[8]=n[8],this}setUvTransform(e,n,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+n,0,0,1),this}scale(e,n){return this.premultiply(ov.makeScale(e,n)),this}rotate(e){return this.premultiply(ov.makeRotation(-e)),this}translate(e,n){return this.premultiply(ov.makeTranslation(e,n)),this}makeTranslation(e,n){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,n,0,0,1),this}makeRotation(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,i,n,0,0,0,1),this}makeScale(e,n){return this.set(e,0,0,0,n,0,0,0,1),this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<9;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<9;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const ov=new yt;function t5(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function Sg(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function Sq(){const t=Sg("canvas");return t.style.display="block",t}const PA={};function Mf(t){t in PA||(PA[t]=!0,console.warn(t))}function Mq(t,e,n){return new Promise(function(i,r){function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:r();break;case t.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:i()}}setTimeout(s,n)})}const DA=new yt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),BA=new yt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function Eq(){const t={enabled:!0,workingColorSpace:od,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Ht&&(r.r=Eo(r.r),r.g=Eo(r.g),r.b=Eo(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Ht&&(r.r=Du(r.r),r.g=Du(r.g),r.b=Du(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===fa?_g:this.spaces[r].transfer},getToneMappingMode:function(r){return this.spaces[r].outputColorSpaceConfig.toneMappingMode||"standard"},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return Mf("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),t.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return Mf("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),t.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],n=[.2126,.7152,.0722],i=[.3127,.329];return t.define({[od]:{primaries:e,whitePoint:i,transfer:_g,toXYZ:DA,fromXYZ:BA,luminanceCoefficients:n,workingColorSpaceConfig:{unpackColorSpace:jr},outputColorSpaceConfig:{drawingBufferColorSpace:jr}},[jr]:{primaries:e,whitePoint:i,transfer:Ht,toXYZ:DA,fromXYZ:BA,luminanceCoefficients:n,outputColorSpaceConfig:{drawingBufferColorSpace:jr}}}),t}const kt=Eq();function Eo(t){return t<.04045?t*.0773993808:Math.pow(t*.9478672986+.0521327014,2.4)}function Du(t){return t<.0031308?t*12.92:1.055*Math.pow(t,.41666)-.055}let Ic;class Tq{static getDataURL(e,n="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let i;if(e instanceof HTMLCanvasElement)i=e;else{Ic===void 0&&(Ic=Sg("canvas")),Ic.width=e.width,Ic.height=e.height;const r=Ic.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),i=Ic}return i.toDataURL(n)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const n=Sg("canvas");n.width=e.width,n.height=e.height;const i=n.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Eo(s[o]/255)*255;return i.putImageData(r,0,0),n}else if(e.data){const n=e.data.slice(0);for(let i=0;i<n.length;i++)n instanceof Uint8Array||n instanceof Uint8ClampedArray?n[i]=Math.floor(Eo(n[i]/255)*255):n[i]=Eo(n[i]);return{data:n,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let Aq=0;class MM{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:Aq++}),this.uuid=ip(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const n=this.data;return typeof HTMLVideoElement<"u"&&n instanceof HTMLVideoElement?e.set(n.videoWidth,n.videoHeight,0):n instanceof VideoFrame?e.set(n.displayHeight,n.displayWidth,0):n!==null?e.set(n.width,n.height,n.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(av(r[o].image)):s.push(av(r[o]))}else s=av(r);i.url=s}return n||(e.images[this.uuid]=i),i}}function av(t){return typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&t instanceof ImageBitmap?Tq.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let Cq=0;const lv=new he;class cr extends Sd{constructor(e=cr.DEFAULT_IMAGE,n=cr.DEFAULT_MAPPING,i=Wl,r=Wl,s=Ps,o=Hl,a=ds,l=Uo,c=cr.DEFAULT_ANISOTROPY,u=fa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:Cq++}),this.uuid=ip(),this.name="",this.source=new MM(e),this.mipmaps=[],this.mapping=n,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Vt(0,0),this.repeat=new Vt(1,1),this.center=new Vt(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new yt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(lv).x}get height(){return this.source.getSize(lv).y}get depth(){return this.source.getSize(lv).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Texture.setValues(): parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${n}' does not exist.`);continue}r&&i&&r.isVector2&&i.isVector2||r&&i&&r.isVector3&&i.isVector3||r&&i&&r.isMatrix3&&i.isMatrix3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";if(!n&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),n||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==GP)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case h_:e.x=e.x-Math.floor(e.x);break;case Wl:e.x=e.x<0?0:1;break;case f_:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case h_:e.y=e.y-Math.floor(e.y);break;case Wl:e.y=e.y<0?0:1;break;case f_:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}cr.DEFAULT_IMAGE=null;cr.DEFAULT_MAPPING=GP;cr.DEFAULT_ANISOTROPY=1;class On{constructor(e=0,n=0,i=0,r=1){On.prototype.isVector4=!0,this.x=e,this.y=n,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,n,i,r){return this.x=e,this.y=n,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,n){switch(e){case 0:this.x=n;break;case 1:this.y=n;break;case 2:this.z=n;break;case 3:this.w=n;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,n){return this.x=e.x+n.x,this.y=e.y+n.y,this.z=e.z+n.z,this.w=e.w+n.w,this}addScaledVector(e,n){return this.x+=e.x*n,this.y+=e.y*n,this.z+=e.z*n,this.w+=e.w*n,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,n){return this.x=e.x-n.x,this.y=e.y-n.y,this.z=e.z-n.z,this.w=e.w-n.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const n=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*n+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*n+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*n+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*n+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const n=Math.sqrt(1-e.w*e.w);return n<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/n,this.y=e.y/n,this.z=e.z/n),this}setAxisAngleFromRotationMatrix(e){let n,i,r,s;const l=e.elements,c=l[0],u=l[4],h=l[8],f=l[1],p=l[5],x=l[9],y=l[2],g=l[6],m=l[10];if(Math.abs(u-f)<.01&&Math.abs(h-y)<.01&&Math.abs(x-g)<.01){if(Math.abs(u+f)<.1&&Math.abs(h+y)<.1&&Math.abs(x+g)<.1&&Math.abs(c+p+m-3)<.1)return this.set(1,0,0,0),this;n=Math.PI;const w=(c+1)/2,S=(p+1)/2,N=(m+1)/2,k=(u+f)/4,R=(h+y)/4,B=(x+g)/4;return w>S&&w>N?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=k/i,s=R/i):S>N?S<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(S),i=k/r,s=B/r):N<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(N),i=R/s,r=B/s),this.set(i,r,s,n),this}let _=Math.sqrt((g-x)*(g-x)+(h-y)*(h-y)+(f-u)*(f-u));return Math.abs(_)<.001&&(_=1),this.x=(g-x)/_,this.y=(h-y)/_,this.z=(f-u)/_,this.w=Math.acos((c+p+m-1)/2),this}setFromMatrixPosition(e){const n=e.elements;return this.x=n[12],this.y=n[13],this.z=n[14],this.w=n[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,n){return this.x=At(this.x,e.x,n.x),this.y=At(this.y,e.y,n.y),this.z=At(this.z,e.z,n.z),this.w=At(this.w,e.w,n.w),this}clampScalar(e,n){return this.x=At(this.x,e,n),this.y=At(this.y,e,n),this.z=At(this.z,e,n),this.w=At(this.w,e,n),this}clampLength(e,n){const i=this.length();return this.divideScalar(i||1).multiplyScalar(At(i,e,n))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,n){return this.x+=(e.x-this.x)*n,this.y+=(e.y-this.y)*n,this.z+=(e.z-this.z)*n,this.w+=(e.w-this.w)*n,this}lerpVectors(e,n,i){return this.x=e.x+(n.x-e.x)*i,this.y=e.y+(n.y-e.y)*i,this.z=e.z+(n.z-e.z)*i,this.w=e.w+(n.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,n=0){return this.x=e[n],this.y=e[n+1],this.z=e[n+2],this.w=e[n+3],this}toArray(e=[],n=0){return e[n]=this.x,e[n+1]=this.y,e[n+2]=this.z,e[n+3]=this.w,e}fromBufferAttribute(e,n){return this.x=e.getX(n),this.y=e.getY(n),this.z=e.getZ(n),this.w=e.getW(n),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Nq extends Sd{constructor(e=1,n=1,i={}){super(),i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ps,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},i),this.isRenderTarget=!0,this.width=e,this.height=n,this.depth=i.depth,this.scissor=new On(0,0,e,n),this.scissorTest=!1,this.viewport=new On(0,0,e,n);const r={width:e,height:n,depth:i.depth},s=new cr(r);this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(i),this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples,this.multiview=i.multiview}_setTextureOptions(e={}){const n={minFilter:Ps,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(n.mapping=e.mapping),e.wrapS!==void 0&&(n.wrapS=e.wrapS),e.wrapT!==void 0&&(n.wrapT=e.wrapT),e.wrapR!==void 0&&(n.wrapR=e.wrapR),e.magFilter!==void 0&&(n.magFilter=e.magFilter),e.minFilter!==void 0&&(n.minFilter=e.minFilter),e.format!==void 0&&(n.format=e.format),e.type!==void 0&&(n.type=e.type),e.anisotropy!==void 0&&(n.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(n.colorSpace=e.colorSpace),e.flipY!==void 0&&(n.flipY=e.flipY),e.generateMipmaps!==void 0&&(n.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(n.internalFormat=e.internalFormat);for(let i=0;i<this.textures.length;i++)this.textures[i].setValues(n)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,n,i=1){if(this.width!==e||this.height!==n||this.depth!==i){this.width=e,this.height=n,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=n,this.textures[r].image.depth=i,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,n),this.scissor.set(0,0,e,n)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let n=0,i=e.textures.length;n<i;n++){this.textures[n]=e.textures[n].clone(),this.textures[n].isRenderTargetTexture=!0,this.textures[n].renderTarget=this;const r=Object.assign({},e.textures[n].image);this.textures[n].source=new MM(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class uc extends Nq{constructor(e=1,n=1,i={}){super(e,n,i),this.isWebGLRenderTarget=!0}}class n5 extends cr{constructor(e=null,n=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=gs,this.minFilter=gs,this.wrapR=Wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Rq extends cr{constructor(e=null,n=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:n,height:i,depth:r},this.magFilter=gs,this.minFilter=gs,this.wrapR=Wl,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sp{constructor(e=new he(1/0,1/0,1/0),n=new he(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=n}set(e,n){return this.min.copy(e),this.max.copy(n),this}setFromArray(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n+=3)this.expandByPoint(es.fromArray(e,n));return this}setFromBufferAttribute(e){this.makeEmpty();for(let n=0,i=e.count;n<i;n++)this.expandByPoint(es.fromBufferAttribute(e,n));return this}setFromPoints(e){this.makeEmpty();for(let n=0,i=e.length;n<i;n++)this.expandByPoint(e[n]);return this}setFromCenterAndSize(e,n){const i=es.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,n=!1){return this.makeEmpty(),this.expandByObject(e,n)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,n=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(n===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,es):es.fromBufferAttribute(s,o),es.applyMatrix4(e.matrixWorld),this.expandByPoint(es);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),Yp.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),Yp.copy(i.boundingBox)),Yp.applyMatrix4(e.matrixWorld),this.union(Yp)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],n);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,n){return n.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,es),es.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let n,i;return e.normal.x>0?(n=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(n=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(n+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(n+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(n+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(n+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),n<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Gd),Xp.subVectors(this.max,Gd),kc.subVectors(e.a,Gd),Pc.subVectors(e.b,Gd),Dc.subVectors(e.c,Gd),qo.subVectors(Pc,kc),Ko.subVectors(Dc,Pc),rl.subVectors(kc,Dc);let n=[0,-qo.z,qo.y,0,-Ko.z,Ko.y,0,-rl.z,rl.y,qo.z,0,-qo.x,Ko.z,0,-Ko.x,rl.z,0,-rl.x,-qo.y,qo.x,0,-Ko.y,Ko.x,0,-rl.y,rl.x,0];return!cv(n,kc,Pc,Dc,Xp)||(n=[1,0,0,0,1,0,0,0,1],!cv(n,kc,Pc,Dc,Xp))?!1:(qp.crossVectors(qo,Ko),n=[qp.x,qp.y,qp.z],cv(n,kc,Pc,Dc,Xp))}clampPoint(e,n){return n.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,es).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(es).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zs[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zs[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zs[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zs[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zs[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zs[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zs[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zs[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zs),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Zs=[new he,new he,new he,new he,new he,new he,new he,new he],es=new he,Yp=new sp,kc=new he,Pc=new he,Dc=new he,qo=new he,Ko=new he,rl=new he,Gd=new he,Xp=new he,qp=new he,sl=new he;function cv(t,e,n,i,r){for(let s=0,o=t.length-3;s<=o;s+=3){sl.fromArray(t,s);const a=r.x*Math.abs(sl.x)+r.y*Math.abs(sl.y)+r.z*Math.abs(sl.z),l=e.dot(sl),c=n.dot(sl),u=i.dot(sl);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Lq=new sp,$d=new he,uv=new he;class EM{constructor(e=new he,n=-1){this.isSphere=!0,this.center=e,this.radius=n}set(e,n){return this.center.copy(e),this.radius=n,this}setFromPoints(e,n){const i=this.center;n!==void 0?i.copy(n):Lq.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const n=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=n*n}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,n){const i=this.center.distanceToSquared(e);return n.copy(e),i>this.radius*this.radius&&(n.sub(this.center).normalize(),n.multiplyScalar(this.radius).add(this.center)),n}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;$d.subVectors(e,this.center);const n=$d.lengthSq();if(n>this.radius*this.radius){const i=Math.sqrt(n),r=(i-this.radius)*.5;this.center.addScaledVector($d,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(uv.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint($d.copy(e.center).add(uv)),this.expandByPoint($d.copy(e.center).sub(uv))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Qs=new he,dv=new he,Kp=new he,Zo=new he,hv=new he,Zp=new he,fv=new he;class Iq{constructor(e=new he,n=new he(0,0,-1)){this.origin=e,this.direction=n}set(e,n){return this.origin.copy(e),this.direction.copy(n),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,n){return n.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qs)),this}closestPointToPoint(e,n){n.subVectors(e,this.origin);const i=n.dot(this.direction);return i<0?n.copy(this.origin):n.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const n=Qs.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(Qs.copy(this.origin).addScaledVector(this.direction,n),Qs.distanceToSquared(e))}distanceSqToSegment(e,n,i,r){dv.copy(e).add(n).multiplyScalar(.5),Kp.copy(n).sub(e).normalize(),Zo.copy(this.origin).sub(dv);const s=e.distanceTo(n)*.5,o=-this.direction.dot(Kp),a=Zo.dot(this.direction),l=-Zo.dot(Kp),c=Zo.lengthSq(),u=Math.abs(1-o*o);let h,f,p,x;if(u>0)if(h=o*l-a,f=o*a-l,x=s*u,h>=0)if(f>=-x)if(f<=x){const y=1/u;h*=y,f*=y,p=h*(h+o*f+2*a)+f*(o*h+f+2*l)+c}else f=s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+c;else f=-s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+c;else f<=-x?(h=Math.max(0,-(-o*s+a)),f=h>0?-s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+c):f<=x?(h=0,f=Math.min(Math.max(-s,-l),s),p=f*(f+2*l)+c):(h=Math.max(0,-(o*s+a)),f=h>0?s:Math.min(Math.max(-s,-l),s),p=-h*h+f*(f+2*l)+c);else f=o>0?-s:s,h=Math.max(0,-(o*f+a)),p=-h*h+f*(f+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,h),r&&r.copy(dv).addScaledVector(Kp,f),p}intersectSphere(e,n){Qs.subVectors(e.center,this.origin);const i=Qs.dot(this.direction),r=Qs.dot(Qs)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,n):this.at(a,n)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const n=e.normal.dot(this.direction);if(n===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/n;return i>=0?i:null}intersectPlane(e,n){const i=this.distanceToPlane(e);return i===null?null:this.at(i,n)}intersectsPlane(e){const n=e.distanceToPoint(this.origin);return n===0||e.normal.dot(this.direction)*n<0}intersectBox(e,n){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,h=1/this.direction.z,f=this.origin;return c>=0?(i=(e.min.x-f.x)*c,r=(e.max.x-f.x)*c):(i=(e.max.x-f.x)*c,r=(e.min.x-f.x)*c),u>=0?(s=(e.min.y-f.y)*u,o=(e.max.y-f.y)*u):(s=(e.max.y-f.y)*u,o=(e.min.y-f.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),h>=0?(a=(e.min.z-f.z)*h,l=(e.max.z-f.z)*h):(a=(e.max.z-f.z)*h,l=(e.min.z-f.z)*h),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,n)}intersectsBox(e){return this.intersectBox(e,Qs)!==null}intersectTriangle(e,n,i,r,s){hv.subVectors(n,e),Zp.subVectors(i,e),fv.crossVectors(hv,Zp);let o=this.direction.dot(fv),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;Zo.subVectors(this.origin,e);const l=a*this.direction.dot(Zp.crossVectors(Zo,Zp));if(l<0)return null;const c=a*this.direction.dot(hv.cross(Zo));if(c<0||l+c>o)return null;const u=-a*Zo.dot(fv);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Jn{constructor(e,n,i,r,s,o,a,l,c,u,h,f,p,x,y,g){Jn.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,n,i,r,s,o,a,l,c,u,h,f,p,x,y,g)}set(e,n,i,r,s,o,a,l,c,u,h,f,p,x,y,g){const m=this.elements;return m[0]=e,m[4]=n,m[8]=i,m[12]=r,m[1]=s,m[5]=o,m[9]=a,m[13]=l,m[2]=c,m[6]=u,m[10]=h,m[14]=f,m[3]=p,m[7]=x,m[11]=y,m[15]=g,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Jn().fromArray(this.elements)}copy(e){const n=this.elements,i=e.elements;return n[0]=i[0],n[1]=i[1],n[2]=i[2],n[3]=i[3],n[4]=i[4],n[5]=i[5],n[6]=i[6],n[7]=i[7],n[8]=i[8],n[9]=i[9],n[10]=i[10],n[11]=i[11],n[12]=i[12],n[13]=i[13],n[14]=i[14],n[15]=i[15],this}copyPosition(e){const n=this.elements,i=e.elements;return n[12]=i[12],n[13]=i[13],n[14]=i[14],this}setFromMatrix3(e){const n=e.elements;return this.set(n[0],n[3],n[6],0,n[1],n[4],n[7],0,n[2],n[5],n[8],0,0,0,0,1),this}extractBasis(e,n,i){return e.setFromMatrixColumn(this,0),n.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,n,i){return this.set(e.x,n.x,i.x,0,e.y,n.y,i.y,0,e.z,n.z,i.z,0,0,0,0,1),this}extractRotation(e){const n=this.elements,i=e.elements,r=1/Bc.setFromMatrixColumn(e,0).length(),s=1/Bc.setFromMatrixColumn(e,1).length(),o=1/Bc.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*s,n[5]=i[5]*s,n[6]=i[6]*s,n[7]=0,n[8]=i[8]*o,n[9]=i[9]*o,n[10]=i[10]*o,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromEuler(e){const n=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),h=Math.sin(s);if(e.order==="XYZ"){const f=o*u,p=o*h,x=a*u,y=a*h;n[0]=l*u,n[4]=-l*h,n[8]=c,n[1]=p+x*c,n[5]=f-y*c,n[9]=-a*l,n[2]=y-f*c,n[6]=x+p*c,n[10]=o*l}else if(e.order==="YXZ"){const f=l*u,p=l*h,x=c*u,y=c*h;n[0]=f+y*a,n[4]=x*a-p,n[8]=o*c,n[1]=o*h,n[5]=o*u,n[9]=-a,n[2]=p*a-x,n[6]=y+f*a,n[10]=o*l}else if(e.order==="ZXY"){const f=l*u,p=l*h,x=c*u,y=c*h;n[0]=f-y*a,n[4]=-o*h,n[8]=x+p*a,n[1]=p+x*a,n[5]=o*u,n[9]=y-f*a,n[2]=-o*c,n[6]=a,n[10]=o*l}else if(e.order==="ZYX"){const f=o*u,p=o*h,x=a*u,y=a*h;n[0]=l*u,n[4]=x*c-p,n[8]=f*c+y,n[1]=l*h,n[5]=y*c+f,n[9]=p*c-x,n[2]=-c,n[6]=a*l,n[10]=o*l}else if(e.order==="YZX"){const f=o*l,p=o*c,x=a*l,y=a*c;n[0]=l*u,n[4]=y-f*h,n[8]=x*h+p,n[1]=h,n[5]=o*u,n[9]=-a*u,n[2]=-c*u,n[6]=p*h+x,n[10]=f-y*h}else if(e.order==="XZY"){const f=o*l,p=o*c,x=a*l,y=a*c;n[0]=l*u,n[4]=-h,n[8]=c*u,n[1]=f*h+y,n[5]=o*u,n[9]=p*h-x,n[2]=x*h-p,n[6]=a*u,n[10]=y*h+f}return n[3]=0,n[7]=0,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}makeRotationFromQuaternion(e){return this.compose(kq,e,Pq)}lookAt(e,n,i){const r=this.elements;return hr.subVectors(e,n),hr.lengthSq()===0&&(hr.z=1),hr.normalize(),Qo.crossVectors(i,hr),Qo.lengthSq()===0&&(Math.abs(i.z)===1?hr.x+=1e-4:hr.z+=1e-4,hr.normalize(),Qo.crossVectors(i,hr)),Qo.normalize(),Qp.crossVectors(hr,Qo),r[0]=Qo.x,r[4]=Qp.x,r[8]=hr.x,r[1]=Qo.y,r[5]=Qp.y,r[9]=hr.y,r[2]=Qo.z,r[6]=Qp.z,r[10]=hr.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,n){const i=e.elements,r=n.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],h=i[5],f=i[9],p=i[13],x=i[2],y=i[6],g=i[10],m=i[14],_=i[3],w=i[7],S=i[11],N=i[15],k=r[0],R=r[4],B=r[8],L=r[12],D=r[1],j=r[5],Y=r[9],I=r[13],v=r[2],b=r[6],E=r[10],P=r[14],C=r[3],z=r[7],V=r[11],U=r[15];return s[0]=o*k+a*D+l*v+c*C,s[4]=o*R+a*j+l*b+c*z,s[8]=o*B+a*Y+l*E+c*V,s[12]=o*L+a*I+l*P+c*U,s[1]=u*k+h*D+f*v+p*C,s[5]=u*R+h*j+f*b+p*z,s[9]=u*B+h*Y+f*E+p*V,s[13]=u*L+h*I+f*P+p*U,s[2]=x*k+y*D+g*v+m*C,s[6]=x*R+y*j+g*b+m*z,s[10]=x*B+y*Y+g*E+m*V,s[14]=x*L+y*I+g*P+m*U,s[3]=_*k+w*D+S*v+N*C,s[7]=_*R+w*j+S*b+N*z,s[11]=_*B+w*Y+S*E+N*V,s[15]=_*L+w*I+S*P+N*U,this}multiplyScalar(e){const n=this.elements;return n[0]*=e,n[4]*=e,n[8]*=e,n[12]*=e,n[1]*=e,n[5]*=e,n[9]*=e,n[13]*=e,n[2]*=e,n[6]*=e,n[10]*=e,n[14]*=e,n[3]*=e,n[7]*=e,n[11]*=e,n[15]*=e,this}determinant(){const e=this.elements,n=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],h=e[6],f=e[10],p=e[14],x=e[3],y=e[7],g=e[11],m=e[15];return x*(+s*l*h-r*c*h-s*a*f+i*c*f+r*a*p-i*l*p)+y*(+n*l*p-n*c*f+s*o*f-r*o*p+r*c*u-s*l*u)+g*(+n*c*h-n*a*p-s*o*h+i*o*p+s*a*u-i*c*u)+m*(-r*a*u-n*l*h+n*a*f+r*o*h-i*o*f+i*l*u)}transpose(){const e=this.elements;let n;return n=e[1],e[1]=e[4],e[4]=n,n=e[2],e[2]=e[8],e[8]=n,n=e[6],e[6]=e[9],e[9]=n,n=e[3],e[3]=e[12],e[12]=n,n=e[7],e[7]=e[13],e[13]=n,n=e[11],e[11]=e[14],e[14]=n,this}setPosition(e,n,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=n,r[14]=i),this}invert(){const e=this.elements,n=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],h=e[9],f=e[10],p=e[11],x=e[12],y=e[13],g=e[14],m=e[15],_=h*g*c-y*f*c+y*l*p-a*g*p-h*l*m+a*f*m,w=x*f*c-u*g*c-x*l*p+o*g*p+u*l*m-o*f*m,S=u*y*c-x*h*c+x*a*p-o*y*p-u*a*m+o*h*m,N=x*h*l-u*y*l-x*a*f+o*y*f+u*a*g-o*h*g,k=n*_+i*w+r*S+s*N;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const R=1/k;return e[0]=_*R,e[1]=(y*f*s-h*g*s-y*r*p+i*g*p+h*r*m-i*f*m)*R,e[2]=(a*g*s-y*l*s+y*r*c-i*g*c-a*r*m+i*l*m)*R,e[3]=(h*l*s-a*f*s-h*r*c+i*f*c+a*r*p-i*l*p)*R,e[4]=w*R,e[5]=(u*g*s-x*f*s+x*r*p-n*g*p-u*r*m+n*f*m)*R,e[6]=(x*l*s-o*g*s-x*r*c+n*g*c+o*r*m-n*l*m)*R,e[7]=(o*f*s-u*l*s+u*r*c-n*f*c-o*r*p+n*l*p)*R,e[8]=S*R,e[9]=(x*h*s-u*y*s-x*i*p+n*y*p+u*i*m-n*h*m)*R,e[10]=(o*y*s-x*a*s+x*i*c-n*y*c-o*i*m+n*a*m)*R,e[11]=(u*a*s-o*h*s-u*i*c+n*h*c+o*i*p-n*a*p)*R,e[12]=N*R,e[13]=(u*y*r-x*h*r+x*i*f-n*y*f-u*i*g+n*h*g)*R,e[14]=(x*a*r-o*y*r-x*i*l+n*y*l+o*i*g-n*a*g)*R,e[15]=(o*h*r-u*a*r+u*i*l-n*h*l-o*i*f+n*a*f)*R,this}scale(e){const n=this.elements,i=e.x,r=e.y,s=e.z;return n[0]*=i,n[4]*=r,n[8]*=s,n[1]*=i,n[5]*=r,n[9]*=s,n[2]*=i,n[6]*=r,n[10]*=s,n[3]*=i,n[7]*=r,n[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,n=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(n,i,r))}makeTranslation(e,n,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,n,0,0,1,i,0,0,0,1),this}makeRotationX(e){const n=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,n,-i,0,0,i,n,0,0,0,0,1),this}makeRotationY(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,0,i,0,0,1,0,0,-i,0,n,0,0,0,0,1),this}makeRotationZ(e){const n=Math.cos(e),i=Math.sin(e);return this.set(n,-i,0,0,i,n,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,n){const i=Math.cos(n),r=Math.sin(n),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,n,i){return this.set(e,0,0,0,0,n,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,n,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,n,r,1,0,0,0,0,1),this}compose(e,n,i){const r=this.elements,s=n._x,o=n._y,a=n._z,l=n._w,c=s+s,u=o+o,h=a+a,f=s*c,p=s*u,x=s*h,y=o*u,g=o*h,m=a*h,_=l*c,w=l*u,S=l*h,N=i.x,k=i.y,R=i.z;return r[0]=(1-(y+m))*N,r[1]=(p+S)*N,r[2]=(x-w)*N,r[3]=0,r[4]=(p-S)*k,r[5]=(1-(f+m))*k,r[6]=(g+_)*k,r[7]=0,r[8]=(x+w)*R,r[9]=(g-_)*R,r[10]=(1-(f+y))*R,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,n,i){const r=this.elements;let s=Bc.set(r[0],r[1],r[2]).length();const o=Bc.set(r[4],r[5],r[6]).length(),a=Bc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],ts.copy(this);const c=1/s,u=1/o,h=1/a;return ts.elements[0]*=c,ts.elements[1]*=c,ts.elements[2]*=c,ts.elements[4]*=u,ts.elements[5]*=u,ts.elements[6]*=u,ts.elements[8]*=h,ts.elements[9]*=h,ts.elements[10]*=h,n.setFromRotationMatrix(ts),i.x=s,i.y=o,i.z=a,this}makePerspective(e,n,i,r,s,o,a=Ds,l=!1){const c=this.elements,u=2*s/(n-e),h=2*s/(i-r),f=(n+e)/(n-e),p=(i+r)/(i-r);let x,y;if(l)x=s/(o-s),y=o*s/(o-s);else if(a===Ds)x=-(o+s)/(o-s),y=-2*o*s/(o-s);else if(a===bg)x=-o/(o-s),y=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=f,c[12]=0,c[1]=0,c[5]=h,c[9]=p,c[13]=0,c[2]=0,c[6]=0,c[10]=x,c[14]=y,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,n,i,r,s,o,a=Ds,l=!1){const c=this.elements,u=2/(n-e),h=2/(i-r),f=-(n+e)/(n-e),p=-(i+r)/(i-r);let x,y;if(l)x=1/(o-s),y=o/(o-s);else if(a===Ds)x=-2/(o-s),y=-(o+s)/(o-s);else if(a===bg)x=-1/(o-s),y=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return c[0]=u,c[4]=0,c[8]=0,c[12]=f,c[1]=0,c[5]=h,c[9]=0,c[13]=p,c[2]=0,c[6]=0,c[10]=x,c[14]=y,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const n=this.elements,i=e.elements;for(let r=0;r<16;r++)if(n[r]!==i[r])return!1;return!0}fromArray(e,n=0){for(let i=0;i<16;i++)this.elements[i]=e[i+n];return this}toArray(e=[],n=0){const i=this.elements;return e[n]=i[0],e[n+1]=i[1],e[n+2]=i[2],e[n+3]=i[3],e[n+4]=i[4],e[n+5]=i[5],e[n+6]=i[6],e[n+7]=i[7],e[n+8]=i[8],e[n+9]=i[9],e[n+10]=i[10],e[n+11]=i[11],e[n+12]=i[12],e[n+13]=i[13],e[n+14]=i[14],e[n+15]=i[15],e}}const Bc=new he,ts=new Jn,kq=new he(0,0,0),Pq=new he(1,1,1),Qo=new he,Qp=new he,hr=new he,UA=new Jn,OA=new rp;class Oo{constructor(e=0,n=0,i=0,r=Oo.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=n,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,n,i,r=this._order){return this._x=e,this._y=n,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,n=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],h=r[2],f=r[6],p=r[10];switch(n){case"XYZ":this._y=Math.asin(At(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(f,c),this._z=0);break;case"YXZ":this._x=Math.asin(-At(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,s),this._z=0);break;case"ZXY":this._x=Math.asin(At(f,-1,1)),Math.abs(f)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-At(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(f,p),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(At(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,s)):(this._x=0,this._y=Math.atan2(a,p));break;case"XZY":this._z=Math.asin(-At(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(f,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+n)}return this._order=n,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,n,i){return UA.makeRotationFromQuaternion(e),this.setFromRotationMatrix(UA,n,i)}setFromVector3(e,n=this._order){return this.set(e.x,e.y,e.z,n)}reorder(e){return OA.setFromEuler(this),this.setFromQuaternion(OA,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],n=0){return e[n]=this._x,e[n+1]=this._y,e[n+2]=this._z,e[n+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Oo.DEFAULT_ORDER="XYZ";class i5{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Dq=0;const jA=new he,Uc=new rp,Js=new Jn,Jp=new he,Yd=new he,Bq=new he,Uq=new rp,FA=new he(1,0,0),zA=new he(0,1,0),VA=new he(0,0,1),WA={type:"added"},Oq={type:"removed"},Oc={type:"childadded",child:null},pv={type:"childremoved",child:null};class Mr extends Sd{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Dq++}),this.uuid=ip(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mr.DEFAULT_UP.clone();const e=new he,n=new Oo,i=new rp,r=new he(1,1,1);function s(){i.setFromEuler(n,!1)}function o(){n.setFromQuaternion(i,void 0,!1)}n._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:n},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Jn},normalMatrix:{value:new yt}}),this.matrix=new Jn,this.matrixWorld=new Jn,this.matrixAutoUpdate=Mr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new i5,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,n){this.quaternion.setFromAxisAngle(e,n)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,n){return Uc.setFromAxisAngle(e,n),this.quaternion.multiply(Uc),this}rotateOnWorldAxis(e,n){return Uc.setFromAxisAngle(e,n),this.quaternion.premultiply(Uc),this}rotateX(e){return this.rotateOnAxis(FA,e)}rotateY(e){return this.rotateOnAxis(zA,e)}rotateZ(e){return this.rotateOnAxis(VA,e)}translateOnAxis(e,n){return jA.copy(e).applyQuaternion(this.quaternion),this.position.add(jA.multiplyScalar(n)),this}translateX(e){return this.translateOnAxis(FA,e)}translateY(e){return this.translateOnAxis(zA,e)}translateZ(e){return this.translateOnAxis(VA,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Js.copy(this.matrixWorld).invert())}lookAt(e,n,i){e.isVector3?Jp.copy(e):Jp.set(e,n,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Yd.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Js.lookAt(Yd,Jp,this.up):Js.lookAt(Jp,Yd,this.up),this.quaternion.setFromRotationMatrix(Js),r&&(Js.extractRotation(r.matrixWorld),Uc.setFromRotationMatrix(Js),this.quaternion.premultiply(Uc.invert()))}add(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.add(arguments[n]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(WA),Oc.child=e,this.dispatchEvent(Oc),Oc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const n=this.children.indexOf(e);return n!==-1&&(e.parent=null,this.children.splice(n,1),e.dispatchEvent(Oq),pv.child=e,this.dispatchEvent(pv),pv.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Js.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Js.multiply(e.parent.matrixWorld)),e.applyMatrix4(Js),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(WA),Oc.child=e,this.dispatchEvent(Oc),Oc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,n){if(this[e]===n)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,n);if(o!==void 0)return o}}getObjectsByProperty(e,n,i=[]){this[e]===n&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,n,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yd,e,Bq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yd,Uq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const n=this.matrixWorld.elements;return e.set(n[8],n[9],n[10]).normalize()}raycast(){}traverse(e){e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].traverseVisible(e)}traverseAncestors(e){const n=this.parent;n!==null&&(e(n),n.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const n=this.children;for(let i=0,r=n.length;i<r;i++)n[i].updateMatrixWorld(e)}updateWorldMatrix(e,n){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),n===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const n=e===void 0||typeof e=="string",i={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const h=l[c];s(e.shapes,h)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(n){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),h=o(e.shapes),f=o(e.skeletons),p=o(e.animations),x=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),h.length>0&&(i.shapes=h),f.length>0&&(i.skeletons=f),p.length>0&&(i.animations=p),x.length>0&&(i.nodes=x)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,n=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),n===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Mr.DEFAULT_UP=new he(0,1,0);Mr.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const ns=new he,eo=new he,mv=new he,to=new he,jc=new he,Fc=new he,HA=new he,gv=new he,xv=new he,yv=new he,vv=new On,wv=new On,_v=new On;class cs{constructor(e=new he,n=new he,i=new he){this.a=e,this.b=n,this.c=i}static getNormal(e,n,i,r){r.subVectors(i,n),ns.subVectors(e,n),r.cross(ns);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,n,i,r,s){ns.subVectors(r,n),eo.subVectors(i,n),mv.subVectors(e,n);const o=ns.dot(ns),a=ns.dot(eo),l=ns.dot(mv),c=eo.dot(eo),u=eo.dot(mv),h=o*c-a*a;if(h===0)return s.set(0,0,0),null;const f=1/h,p=(c*l-a*u)*f,x=(o*u-a*l)*f;return s.set(1-p-x,x,p)}static containsPoint(e,n,i,r){return this.getBarycoord(e,n,i,r,to)===null?!1:to.x>=0&&to.y>=0&&to.x+to.y<=1}static getInterpolation(e,n,i,r,s,o,a,l){return this.getBarycoord(e,n,i,r,to)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,to.x),l.addScaledVector(o,to.y),l.addScaledVector(a,to.z),l)}static getInterpolatedAttribute(e,n,i,r,s,o){return vv.setScalar(0),wv.setScalar(0),_v.setScalar(0),vv.fromBufferAttribute(e,n),wv.fromBufferAttribute(e,i),_v.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(vv,s.x),o.addScaledVector(wv,s.y),o.addScaledVector(_v,s.z),o}static isFrontFacing(e,n,i,r){return ns.subVectors(i,n),eo.subVectors(e,n),ns.cross(eo).dot(r)<0}set(e,n,i){return this.a.copy(e),this.b.copy(n),this.c.copy(i),this}setFromPointsAndIndices(e,n,i,r){return this.a.copy(e[n]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,n,i,r){return this.a.fromBufferAttribute(e,n),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return ns.subVectors(this.c,this.b),eo.subVectors(this.a,this.b),ns.cross(eo).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,n){return cs.getBarycoord(e,this.a,this.b,this.c,n)}getInterpolation(e,n,i,r,s){return cs.getInterpolation(e,this.a,this.b,this.c,n,i,r,s)}containsPoint(e){return cs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,n){const i=this.a,r=this.b,s=this.c;let o,a;jc.subVectors(r,i),Fc.subVectors(s,i),gv.subVectors(e,i);const l=jc.dot(gv),c=Fc.dot(gv);if(l<=0&&c<=0)return n.copy(i);xv.subVectors(e,r);const u=jc.dot(xv),h=Fc.dot(xv);if(u>=0&&h<=u)return n.copy(r);const f=l*h-u*c;if(f<=0&&l>=0&&u<=0)return o=l/(l-u),n.copy(i).addScaledVector(jc,o);yv.subVectors(e,s);const p=jc.dot(yv),x=Fc.dot(yv);if(x>=0&&p<=x)return n.copy(s);const y=p*c-l*x;if(y<=0&&c>=0&&x<=0)return a=c/(c-x),n.copy(i).addScaledVector(Fc,a);const g=u*x-p*h;if(g<=0&&h-u>=0&&p-x>=0)return HA.subVectors(s,r),a=(h-u)/(h-u+(p-x)),n.copy(r).addScaledVector(HA,a);const m=1/(g+y+f);return o=y*m,a=f*m,n.copy(i).addScaledVector(jc,o).addScaledVector(Fc,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const r5={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Jo={h:0,s:0,l:0},em={h:0,s:0,l:0};function bv(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*6*(2/3-n):t}let Gt=class{constructor(e,n,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,n,i)}set(e,n,i){if(n===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,n,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,n=jr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,kt.colorSpaceToWorking(this,n),this}setRGB(e,n,i,r=kt.workingColorSpace){return this.r=e,this.g=n,this.b=i,kt.colorSpaceToWorking(this,r),this}setHSL(e,n,i,r=kt.workingColorSpace){if(e=bq(e,1),n=At(n,0,1),i=At(i,0,1),n===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+n):i+n-i*n,o=2*i-s;this.r=bv(o,s,e+1/3),this.g=bv(o,s,e),this.b=bv(o,s,e-1/3)}return kt.colorSpaceToWorking(this,r),this}setStyle(e,n=jr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,n);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,n);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,n);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,n);if(o===6)return this.setHex(parseInt(s,16),n);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,n);return this}setColorName(e,n=jr){const i=r5[e.toLowerCase()];return i!==void 0?this.setHex(i,n):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Eo(e.r),this.g=Eo(e.g),this.b=Eo(e.b),this}copyLinearToSRGB(e){return this.r=Du(e.r),this.g=Du(e.g),this.b=Du(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=jr){return kt.workingToColorSpace(Ci.copy(this),e),Math.round(At(Ci.r*255,0,255))*65536+Math.round(At(Ci.g*255,0,255))*256+Math.round(At(Ci.b*255,0,255))}getHexString(e=jr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,n=kt.workingColorSpace){kt.workingToColorSpace(Ci.copy(this),n);const i=Ci.r,r=Ci.g,s=Ci.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const h=o-a;switch(c=u<=.5?h/(o+a):h/(2-o-a),o){case i:l=(r-s)/h+(r<s?6:0);break;case r:l=(s-i)/h+2;break;case s:l=(i-r)/h+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,n=kt.workingColorSpace){return kt.workingToColorSpace(Ci.copy(this),n),e.r=Ci.r,e.g=Ci.g,e.b=Ci.b,e}getStyle(e=jr){kt.workingToColorSpace(Ci.copy(this),e);const n=Ci.r,i=Ci.g,r=Ci.b;return e!==jr?`color(${e} ${n.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(n*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,n,i){return this.getHSL(Jo),this.setHSL(Jo.h+e,Jo.s+n,Jo.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,n){return this.r=e.r+n.r,this.g=e.g+n.g,this.b=e.b+n.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,n){return this.r+=(e.r-this.r)*n,this.g+=(e.g-this.g)*n,this.b+=(e.b-this.b)*n,this}lerpColors(e,n,i){return this.r=e.r+(n.r-e.r)*i,this.g=e.g+(n.g-e.g)*i,this.b=e.b+(n.b-e.b)*i,this}lerpHSL(e,n){this.getHSL(Jo),e.getHSL(em);const i=rv(Jo.h,em.h,n),r=rv(Jo.s,em.s,n),s=rv(Jo.l,em.l,n);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const n=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*n+s[3]*i+s[6]*r,this.g=s[1]*n+s[4]*i+s[7]*r,this.b=s[2]*n+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,n=0){return this.r=e[n],this.g=e[n+1],this.b=e[n+2],this}toArray(e=[],n=0){return e[n]=this.r,e[n+1]=this.g,e[n+2]=this.b,e}fromBufferAttribute(e,n){return this.r=e.getX(n),this.g=e.getY(n),this.b=e.getZ(n),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const Ci=new Gt;Gt.NAMES=r5;let jq=0;class Ax extends Sd{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:jq++}),this.uuid=ip(),this.name="",this.type="Material",this.blending=Pu,this.side=Ha,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=t_,this.blendDst=n_,this.blendEquation=Al,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Gt(0,0,0),this.blendAlpha=0,this.depthFunc=id,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=RA,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Lc,this.stencilZFail=Lc,this.stencilZPass=Lc,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const n in e){const i=e[n];if(i===void 0){console.warn(`THREE.Material: parameter '${n}' has value of undefined.`);continue}const r=this[n];if(r===void 0){console.warn(`THREE.Material: '${n}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[n]=i}}toJSON(e){const n=e===void 0||typeof e=="string";n&&(e={textures:{},images:{}});const i={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.sheenColorMap&&this.sheenColorMap.isTexture&&(i.sheenColorMap=this.sheenColorMap.toJSON(e).uuid),this.sheenRoughnessMap&&this.sheenRoughnessMap.isTexture&&(i.sheenRoughnessMap=this.sheenRoughnessMap.toJSON(e).uuid),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Pu&&(i.blending=this.blending),this.side!==Ha&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==t_&&(i.blendSrc=this.blendSrc),this.blendDst!==n_&&(i.blendDst=this.blendDst),this.blendEquation!==Al&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==id&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==RA&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Lc&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Lc&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Lc&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(n){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const n=e.clippingPlanes;let i=null;if(n!==null){const r=n.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=n[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class s5 extends Ax{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Gt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Oo,this.combine=HP,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Fn=new he,tm=new Vt;let Fq=0;class zs{constructor(e,n,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Fq++}),this.name="",this.array=e,this.itemSize=n,this.count=e!==void 0?e.length/n:0,this.normalized=i,this.usage=LA,this.updateRanges=[],this.gpuType=So,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,n){this.updateRanges.push({start:e,count:n})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,n,i){e*=this.itemSize,i*=n.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=n.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let n=0,i=this.count;n<i;n++)tm.fromBufferAttribute(this,n),tm.applyMatrix3(e),this.setXY(n,tm.x,tm.y);else if(this.itemSize===3)for(let n=0,i=this.count;n<i;n++)Fn.fromBufferAttribute(this,n),Fn.applyMatrix3(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}applyMatrix4(e){for(let n=0,i=this.count;n<i;n++)Fn.fromBufferAttribute(this,n),Fn.applyMatrix4(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}applyNormalMatrix(e){for(let n=0,i=this.count;n<i;n++)Fn.fromBufferAttribute(this,n),Fn.applyNormalMatrix(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}transformDirection(e){for(let n=0,i=this.count;n<i;n++)Fn.fromBufferAttribute(this,n),Fn.transformDirection(e),this.setXYZ(n,Fn.x,Fn.y,Fn.z);return this}set(e,n=0){return this.array.set(e,n),this}getComponent(e,n){let i=this.array[e*this.itemSize+n];return this.normalized&&(i=Hd(i,this.array)),i}setComponent(e,n,i){return this.normalized&&(i=qi(i,this.array)),this.array[e*this.itemSize+n]=i,this}getX(e){let n=this.array[e*this.itemSize];return this.normalized&&(n=Hd(n,this.array)),n}setX(e,n){return this.normalized&&(n=qi(n,this.array)),this.array[e*this.itemSize]=n,this}getY(e){let n=this.array[e*this.itemSize+1];return this.normalized&&(n=Hd(n,this.array)),n}setY(e,n){return this.normalized&&(n=qi(n,this.array)),this.array[e*this.itemSize+1]=n,this}getZ(e){let n=this.array[e*this.itemSize+2];return this.normalized&&(n=Hd(n,this.array)),n}setZ(e,n){return this.normalized&&(n=qi(n,this.array)),this.array[e*this.itemSize+2]=n,this}getW(e){let n=this.array[e*this.itemSize+3];return this.normalized&&(n=Hd(n,this.array)),n}setW(e,n){return this.normalized&&(n=qi(n,this.array)),this.array[e*this.itemSize+3]=n,this}setXY(e,n,i){return e*=this.itemSize,this.normalized&&(n=qi(n,this.array),i=qi(i,this.array)),this.array[e+0]=n,this.array[e+1]=i,this}setXYZ(e,n,i,r){return e*=this.itemSize,this.normalized&&(n=qi(n,this.array),i=qi(i,this.array),r=qi(r,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,n,i,r,s){return e*=this.itemSize,this.normalized&&(n=qi(n,this.array),i=qi(i,this.array),r=qi(r,this.array),s=qi(s,this.array)),this.array[e+0]=n,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==LA&&(e.usage=this.usage),e}}class o5 extends zs{constructor(e,n,i){super(new Uint16Array(e),n,i)}}class a5 extends zs{constructor(e,n,i){super(new Uint32Array(e),n,i)}}class tc extends zs{constructor(e,n,i){super(new Float32Array(e),n,i)}}let zq=0;const Pr=new Jn,Sv=new Mr,zc=new he,fr=new sp,Xd=new sp,ri=new he;class bc extends Sd{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zq++}),this.uuid=ip(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(t5(e)?a5:o5)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,n){return this.attributes[e]=n,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,n,i=0){this.groups.push({start:e,count:n,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,n){this.drawRange.start=e,this.drawRange.count=n}applyMatrix4(e){const n=this.attributes.position;n!==void 0&&(n.applyMatrix4(e),n.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new yt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Pr.makeRotationFromQuaternion(e),this.applyMatrix4(Pr),this}rotateX(e){return Pr.makeRotationX(e),this.applyMatrix4(Pr),this}rotateY(e){return Pr.makeRotationY(e),this.applyMatrix4(Pr),this}rotateZ(e){return Pr.makeRotationZ(e),this.applyMatrix4(Pr),this}translate(e,n,i){return Pr.makeTranslation(e,n,i),this.applyMatrix4(Pr),this}scale(e,n,i){return Pr.makeScale(e,n,i),this.applyMatrix4(Pr),this}lookAt(e){return Sv.lookAt(e),Sv.updateMatrix(),this.applyMatrix4(Sv.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(zc).negate(),this.translate(zc.x,zc.y,zc.z),this}setFromPoints(e){const n=this.getAttribute("position");if(n===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new tc(i,3))}else{const i=Math.min(e.length,n.count);for(let r=0;r<i;r++){const s=e[r];n.setXYZ(r,s.x,s.y,s.z||0)}e.length>n.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),n.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new sp);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new he(-1/0,-1/0,-1/0),new he(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),n)for(let i=0,r=n.length;i<r;i++){const s=n[i];fr.setFromBufferAttribute(s),this.morphTargetsRelative?(ri.addVectors(this.boundingBox.min,fr.min),this.boundingBox.expandByPoint(ri),ri.addVectors(this.boundingBox.max,fr.max),this.boundingBox.expandByPoint(ri)):(this.boundingBox.expandByPoint(fr.min),this.boundingBox.expandByPoint(fr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new EM);const e=this.attributes.position,n=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new he,1/0);return}if(e){const i=this.boundingSphere.center;if(fr.setFromBufferAttribute(e),n)for(let s=0,o=n.length;s<o;s++){const a=n[s];Xd.setFromBufferAttribute(a),this.morphTargetsRelative?(ri.addVectors(fr.min,Xd.min),fr.expandByPoint(ri),ri.addVectors(fr.max,Xd.max),fr.expandByPoint(ri)):(fr.expandByPoint(Xd.min),fr.expandByPoint(Xd.max))}fr.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ri.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ri));if(n)for(let s=0,o=n.length;s<o;s++){const a=n[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ri.fromBufferAttribute(a,c),l&&(zc.fromBufferAttribute(e,c),ri.add(zc)),r=Math.max(r,i.distanceToSquared(ri))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,n=this.attributes;if(e===null||n.position===void 0||n.normal===void 0||n.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=n.position,r=n.normal,s=n.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new zs(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let B=0;B<i.count;B++)a[B]=new he,l[B]=new he;const c=new he,u=new he,h=new he,f=new Vt,p=new Vt,x=new Vt,y=new he,g=new he;function m(B,L,D){c.fromBufferAttribute(i,B),u.fromBufferAttribute(i,L),h.fromBufferAttribute(i,D),f.fromBufferAttribute(s,B),p.fromBufferAttribute(s,L),x.fromBufferAttribute(s,D),u.sub(c),h.sub(c),p.sub(f),x.sub(f);const j=1/(p.x*x.y-x.x*p.y);isFinite(j)&&(y.copy(u).multiplyScalar(x.y).addScaledVector(h,-p.y).multiplyScalar(j),g.copy(h).multiplyScalar(p.x).addScaledVector(u,-x.x).multiplyScalar(j),a[B].add(y),a[L].add(y),a[D].add(y),l[B].add(g),l[L].add(g),l[D].add(g))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let B=0,L=_.length;B<L;++B){const D=_[B],j=D.start,Y=D.count;for(let I=j,v=j+Y;I<v;I+=3)m(e.getX(I+0),e.getX(I+1),e.getX(I+2))}const w=new he,S=new he,N=new he,k=new he;function R(B){N.fromBufferAttribute(r,B),k.copy(N);const L=a[B];w.copy(L),w.sub(N.multiplyScalar(N.dot(L))).normalize(),S.crossVectors(k,L);const j=S.dot(l[B])<0?-1:1;o.setXYZW(B,w.x,w.y,w.z,j)}for(let B=0,L=_.length;B<L;++B){const D=_[B],j=D.start,Y=D.count;for(let I=j,v=j+Y;I<v;I+=3)R(e.getX(I+0)),R(e.getX(I+1)),R(e.getX(I+2))}}computeVertexNormals(){const e=this.index,n=this.getAttribute("position");if(n!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new zs(new Float32Array(n.count*3),3),this.setAttribute("normal",i);else for(let f=0,p=i.count;f<p;f++)i.setXYZ(f,0,0,0);const r=new he,s=new he,o=new he,a=new he,l=new he,c=new he,u=new he,h=new he;if(e)for(let f=0,p=e.count;f<p;f+=3){const x=e.getX(f+0),y=e.getX(f+1),g=e.getX(f+2);r.fromBufferAttribute(n,x),s.fromBufferAttribute(n,y),o.fromBufferAttribute(n,g),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),a.fromBufferAttribute(i,x),l.fromBufferAttribute(i,y),c.fromBufferAttribute(i,g),a.add(u),l.add(u),c.add(u),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(y,l.x,l.y,l.z),i.setXYZ(g,c.x,c.y,c.z)}else for(let f=0,p=n.count;f<p;f+=3)r.fromBufferAttribute(n,f+0),s.fromBufferAttribute(n,f+1),o.fromBufferAttribute(n,f+2),u.subVectors(o,s),h.subVectors(r,s),u.cross(h),i.setXYZ(f+0,u.x,u.y,u.z),i.setXYZ(f+1,u.x,u.y,u.z),i.setXYZ(f+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let n=0,i=e.count;n<i;n++)ri.fromBufferAttribute(e,n),ri.normalize(),e.setXYZ(n,ri.x,ri.y,ri.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,h=a.normalized,f=new c.constructor(l.length*u);let p=0,x=0;for(let y=0,g=l.length;y<g;y++){a.isInterleavedBufferAttribute?p=l[y]*a.data.stride+a.offset:p=l[y]*u;for(let m=0;m<u;m++)f[x++]=c[p++]}return new zs(f,u,h)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const n=new bc,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);n.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,h=c.length;u<h;u++){const f=c[u],p=e(f,i);l.push(p)}n.morphAttributes[a]=l}n.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];n.addGroup(c.start,c.count,c.materialIndex)}return n}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const n=this.index;n!==null&&(e.data.index={type:n.array.constructor.name,array:Array.prototype.slice.call(n.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let h=0,f=c.length;h<f;h++){const p=c[h];u.push(p.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const n={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone());const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(n))}const s=e.morphAttributes;for(const c in s){const u=[],h=s[c];for(let f=0,p=h.length;f<p;f++)u.push(h[f].clone(n));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const h=o[c];this.addGroup(h.start,h.count,h.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const GA=new Jn,ol=new Iq,nm=new EM,$A=new he,im=new he,rm=new he,sm=new he,Mv=new he,om=new he,YA=new he,am=new he;class Bs extends Mr{constructor(e=new bc,n=new s5){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=n,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,n){return super.copy(e,n),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const n=this.geometry.morphAttributes,i=Object.keys(n);if(i.length>0){const r=n[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,n){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;n.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){om.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],h=s[l];u!==0&&(Mv.fromBufferAttribute(h,e),o?om.addScaledVector(Mv,u):om.addScaledVector(Mv.sub(n),u))}n.add(om)}return n}raycast(e,n){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),nm.copy(i.boundingSphere),nm.applyMatrix4(s),ol.copy(e.ray).recast(e.near),!(nm.containsPoint(ol.origin)===!1&&(ol.intersectSphere(nm,$A)===null||ol.origin.distanceToSquared($A)>(e.far-e.near)**2))&&(GA.copy(s).invert(),ol.copy(e.ray).applyMatrix4(GA),!(i.boundingBox!==null&&ol.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,n,ol)))}_computeIntersections(e,n,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,h=s.attributes.normal,f=s.groups,p=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,y=f.length;x<y;x++){const g=f[x],m=o[g.materialIndex],_=Math.max(g.start,p.start),w=Math.min(a.count,Math.min(g.start+g.count,p.start+p.count));for(let S=_,N=w;S<N;S+=3){const k=a.getX(S),R=a.getX(S+1),B=a.getX(S+2);r=lm(this,m,e,i,c,u,h,k,R,B),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=g.materialIndex,n.push(r))}}else{const x=Math.max(0,p.start),y=Math.min(a.count,p.start+p.count);for(let g=x,m=y;g<m;g+=3){const _=a.getX(g),w=a.getX(g+1),S=a.getX(g+2);r=lm(this,o,e,i,c,u,h,_,w,S),r&&(r.faceIndex=Math.floor(g/3),n.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,y=f.length;x<y;x++){const g=f[x],m=o[g.materialIndex],_=Math.max(g.start,p.start),w=Math.min(l.count,Math.min(g.start+g.count,p.start+p.count));for(let S=_,N=w;S<N;S+=3){const k=S,R=S+1,B=S+2;r=lm(this,m,e,i,c,u,h,k,R,B),r&&(r.faceIndex=Math.floor(S/3),r.face.materialIndex=g.materialIndex,n.push(r))}}else{const x=Math.max(0,p.start),y=Math.min(l.count,p.start+p.count);for(let g=x,m=y;g<m;g+=3){const _=g,w=g+1,S=g+2;r=lm(this,o,e,i,c,u,h,_,w,S),r&&(r.faceIndex=Math.floor(g/3),n.push(r))}}}}function Vq(t,e,n,i,r,s,o,a){let l;if(e.side===lr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ha,a),l===null)return null;am.copy(a),am.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(am);return c<n.near||c>n.far?null:{distance:c,point:am.clone(),object:t}}function lm(t,e,n,i,r,s,o,a,l,c){t.getVertexPosition(a,im),t.getVertexPosition(l,rm),t.getVertexPosition(c,sm);const u=Vq(t,e,n,i,im,rm,sm,YA);if(u){const h=new he;cs.getBarycoord(YA,im,rm,sm,h),r&&(u.uv=cs.getInterpolatedAttribute(r,a,l,c,h,new Vt)),s&&(u.uv1=cs.getInterpolatedAttribute(s,a,l,c,h,new Vt)),o&&(u.normal=cs.getInterpolatedAttribute(o,a,l,c,h,new he),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const f={a,b:l,c,normal:new he,materialIndex:0};cs.getNormal(im,rm,sm,f.normal),u.face=f,u.barycoord=h}return u}class op extends bc{constructor(e=1,n=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:n,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],h=[];let f=0,p=0;x("z","y","x",-1,-1,i,n,e,o,s,0),x("z","y","x",1,-1,i,n,-e,o,s,1),x("x","z","y",1,1,e,i,n,r,o,2),x("x","z","y",1,-1,e,i,-n,r,o,3),x("x","y","z",1,-1,e,n,i,r,s,4),x("x","y","z",-1,-1,e,n,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new tc(c,3)),this.setAttribute("normal",new tc(u,3)),this.setAttribute("uv",new tc(h,2));function x(y,g,m,_,w,S,N,k,R,B,L){const D=S/R,j=N/B,Y=S/2,I=N/2,v=k/2,b=R+1,E=B+1;let P=0,C=0;const z=new he;for(let V=0;V<E;V++){const U=V*j-I;for(let T=0;T<b;T++){const G=T*D-Y;z[y]=G*_,z[g]=U*w,z[m]=v,c.push(z.x,z.y,z.z),z[y]=0,z[g]=0,z[m]=k>0?1:-1,u.push(z.x,z.y,z.z),h.push(T/R),h.push(1-V/B),P+=1}}for(let V=0;V<B;V++)for(let U=0;U<R;U++){const T=f+U+b*V,G=f+U+b*(V+1),K=f+(U+1)+b*(V+1),ne=f+(U+1)+b*V;l.push(T,G,ne),l.push(G,K,ne),C+=6}a.addGroup(p,C,L),p+=C,f+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new op(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function ad(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[n][i]=null):e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function ji(t){const e={};for(let n=0;n<t.length;n++){const i=ad(t[n]);for(const r in i)e[r]=i[r]}return e}function Wq(t){const e=[];for(let n=0;n<t.length;n++)e.push(t[n].clone());return e}function l5(t){const e=t.getRenderTarget();return e===null?t.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:kt.workingColorSpace}const Hq={clone:ad,merge:ji};var Gq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,$q=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class jo extends Ax{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Gq,this.fragmentShader=$q,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=ad(e.uniforms),this.uniformsGroups=Wq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const n=super.toJSON(e);n.glslVersion=this.glslVersion,n.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?n.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?n.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?n.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?n.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?n.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?n.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?n.uniforms[r]={type:"m4",value:o.toArray()}:n.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(n.defines=this.defines),n.vertexShader=this.vertexShader,n.fragmentShader=this.fragmentShader,n.lights=this.lights,n.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(n.extensions=i),n}}class c5 extends Mr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Jn,this.projectionMatrix=new Jn,this.projectionMatrixInverse=new Jn,this.coordinateSystem=Ds,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,n){return super.copy(e,n),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,n){super.updateWorldMatrix(e,n),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ea=new he,XA=new Vt,qA=new Vt;class ls extends c5{constructor(e=50,n=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=n,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const n=.5*this.getFilmHeight()/e;this.fov=V_*2*Math.atan(n),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(iv*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return V_*2*Math.atan(Math.tan(iv*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,n,i){ea.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(ea.x,ea.y).multiplyScalar(-e/ea.z),ea.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ea.x,ea.y).multiplyScalar(-e/ea.z)}getViewSize(e,n){return this.getViewBounds(e,XA,qA),n.subVectors(qA,XA)}setViewOffset(e,n,i,r,s,o){this.aspect=e/n,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let n=e*Math.tan(iv*.5*this.fov)/this.zoom,i=2*n,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,n-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,n,n-i,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.fov=this.fov,n.object.zoom=this.zoom,n.object.near=this.near,n.object.far=this.far,n.object.focus=this.focus,n.object.aspect=this.aspect,this.view!==null&&(n.object.view=Object.assign({},this.view)),n.object.filmGauge=this.filmGauge,n.object.filmOffset=this.filmOffset,n}}const Vc=-90,Wc=1;class Yq extends Mr{constructor(e,n,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new ls(Vc,Wc,e,n);r.layers=this.layers,this.add(r);const s=new ls(Vc,Wc,e,n);s.layers=this.layers,this.add(s);const o=new ls(Vc,Wc,e,n);o.layers=this.layers,this.add(o);const a=new ls(Vc,Wc,e,n);a.layers=this.layers,this.add(a);const l=new ls(Vc,Wc,e,n);l.layers=this.layers,this.add(l);const c=new ls(Vc,Wc,e,n);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,n=this.children.concat(),[i,r,s,o,a,l]=n;for(const c of n)this.remove(c);if(e===Ds)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===bg)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of n)this.add(c),c.updateMatrixWorld()}update(e,n){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,h=e.getRenderTarget(),f=e.getActiveCubeFace(),p=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const y=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(n,s),e.setRenderTarget(i,1,r),e.render(n,o),e.setRenderTarget(i,2,r),e.render(n,a),e.setRenderTarget(i,3,r),e.render(n,l),e.setRenderTarget(i,4,r),e.render(n,c),i.texture.generateMipmaps=y,e.setRenderTarget(i,5,r),e.render(n,u),e.setRenderTarget(h,f,p),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class u5 extends cr{constructor(e=[],n=rd,i,r,s,o,a,l,c,u){super(e,n,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class Xq extends uc{constructor(e=1,n={}){super(e,e,n),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new u5(r),this._setTextureOptions(n),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,n){this.texture.type=n.type,this.texture.colorSpace=n.colorSpace,this.texture.generateMipmaps=n.generateMipmaps,this.texture.minFilter=n.minFilter,this.texture.magFilter=n.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new op(5,5,5),s=new jo({name:"CubemapFromEquirect",uniforms:ad(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:lr,blending:Pa});s.uniforms.tEquirect.value=n;const o=new Bs(r,s),a=n.minFilter;return n.minFilter===Hl&&(n.minFilter=Ps),new Yq(1,10,this).update(e,o),n.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,n=!0,i=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(n,i,r);e.setRenderTarget(s)}}class cm extends Mr{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qq={type:"move"};class Ev{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new cm,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new cm,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new he,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new he),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new cm,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new he,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new he),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const n=this._hand;if(n)for(const i of e.hand.values())this._getHandJoint(n,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,n,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&n.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const y of e.hand.values()){const g=n.getJointPose(y,i),m=this._getHandJoint(c,y);g!==null&&(m.matrix.fromArray(g.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.matrixWorldNeedsUpdate=!0,m.jointRadius=g.radius),m.visible=g!==null}const u=c.joints["index-finger-tip"],h=c.joints["thumb-tip"],f=u.position.distanceTo(h.position),p=.02,x=.005;c.inputState.pinching&&f>p+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&f<=p-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=n.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=n.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(qq)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,n){if(e.joints[n.jointName]===void 0){const i=new cm;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[n.jointName]=i,e.add(i)}return e.joints[n.jointName]}}class Kq extends Mr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Oo,this.environmentIntensity=1,this.environmentRotation=new Oo,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,n){return super.copy(e,n),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const n=super.toJSON(e);return this.fog!==null&&(n.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(n.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(n.object.backgroundIntensity=this.backgroundIntensity),n.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(n.object.environmentIntensity=this.environmentIntensity),n.object.environmentRotation=this.environmentRotation.toArray(),n}}const Tv=new he,Zq=new he,Qq=new yt;class _l{constructor(e=new he(1,0,0),n=0){this.isPlane=!0,this.normal=e,this.constant=n}set(e,n){return this.normal.copy(e),this.constant=n,this}setComponents(e,n,i,r){return this.normal.set(e,n,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,n){return this.normal.copy(e),this.constant=-n.dot(this.normal),this}setFromCoplanarPoints(e,n,i){const r=Tv.subVectors(i,n).cross(Zq.subVectors(e,n)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,n){return n.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,n){const i=e.delta(Tv),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?n.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:n.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const n=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return n<0&&i>0||i<0&&n>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,n){const i=n||Qq.getNormalMatrix(e),r=this.coplanarPoint(Tv).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const al=new EM,Jq=new Vt(.5,.5),um=new he;class d5{constructor(e=new _l,n=new _l,i=new _l,r=new _l,s=new _l,o=new _l){this.planes=[e,n,i,r,s,o]}set(e,n,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(n),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const n=this.planes;for(let i=0;i<6;i++)n[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,n=Ds,i=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],c=s[3],u=s[4],h=s[5],f=s[6],p=s[7],x=s[8],y=s[9],g=s[10],m=s[11],_=s[12],w=s[13],S=s[14],N=s[15];if(r[0].setComponents(c-o,p-u,m-x,N-_).normalize(),r[1].setComponents(c+o,p+u,m+x,N+_).normalize(),r[2].setComponents(c+a,p+h,m+y,N+w).normalize(),r[3].setComponents(c-a,p-h,m-y,N-w).normalize(),i)r[4].setComponents(l,f,g,S).normalize(),r[5].setComponents(c-l,p-f,m-g,N-S).normalize();else if(r[4].setComponents(c-l,p-f,m-g,N-S).normalize(),n===Ds)r[5].setComponents(c+l,p+f,m+g,N+S).normalize();else if(n===bg)r[5].setComponents(l,f,g,S).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+n);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),al.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const n=e.geometry;n.boundingSphere===null&&n.computeBoundingSphere(),al.copy(n.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(al)}intersectsSprite(e){al.center.set(0,0,0);const n=Jq.distanceTo(e.center);return al.radius=.7071067811865476+n,al.applyMatrix4(e.matrixWorld),this.intersectsSphere(al)}intersectsSphere(e){const n=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(n[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const n=this.planes;for(let i=0;i<6;i++){const r=n[i];if(um.x=r.normal.x>0?e.max.x:e.min.x,um.y=r.normal.y>0?e.max.y:e.min.y,um.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(um)<0)return!1}return!0}containsPoint(e){const n=this.planes;for(let i=0;i<6;i++)if(n[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}class h5 extends cr{constructor(e,n,i=cc,r,s,o,a=gs,l=gs,c,u=bf,h=1){if(u!==bf&&u!==Sf)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const f={width:e,height:n,depth:h};super(f,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new MM(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const n=super.toJSON(e);return this.compareFunction!==null&&(n.compareFunction=this.compareFunction),n}}class f5 extends cr{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}copy(e){return super.copy(e),this.sourceTexture=e.sourceTexture,this}}class ap extends bc{constructor(e=1,n=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:n,widthSegments:i,heightSegments:r};const s=e/2,o=n/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,h=e/a,f=n/l,p=[],x=[],y=[],g=[];for(let m=0;m<u;m++){const _=m*f-o;for(let w=0;w<c;w++){const S=w*h-s;x.push(S,-_,0),y.push(0,0,1),g.push(w/a),g.push(1-m/l)}}for(let m=0;m<l;m++)for(let _=0;_<a;_++){const w=_+c*m,S=_+c*(m+1),N=_+1+c*(m+1),k=_+1+c*m;p.push(w,S,k),p.push(S,N,k)}this.setIndex(p),this.setAttribute("position",new tc(x,3)),this.setAttribute("normal",new tc(y,3)),this.setAttribute("uv",new tc(g,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ap(e.width,e.height,e.widthSegments,e.heightSegments)}}class eK extends Ax{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=dq,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class tK extends Ax{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class p5 extends c5{constructor(e=-1,n=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=n,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,n){return super.copy(e,n),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,n,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),n=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+n,l=r-n;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const n=super.toJSON(e);return n.object.zoom=this.zoom,n.object.left=this.left,n.object.right=this.right,n.object.top=this.top,n.object.bottom=this.bottom,n.object.near=this.near,n.object.far=this.far,this.view!==null&&(n.object.view=Object.assign({},this.view)),n}}class nK extends ls{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}function KA(t,e,n,i){const r=iK(i);switch(n){case KP:return t*e;case QP:return t*e/r.components*r.byteLength;case _M:return t*e/r.components*r.byteLength;case JP:return t*e*2/r.components*r.byteLength;case bM:return t*e*2/r.components*r.byteLength;case ZP:return t*e*3/r.components*r.byteLength;case ds:return t*e*4/r.components*r.byteLength;case SM:return t*e*4/r.components*r.byteLength;case f0:case p0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case m0:case g0:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case m_:case x_:return Math.max(t,16)*Math.max(e,8)/4;case p_:case g_:return Math.max(t,8)*Math.max(e,8)/2;case y_:case v_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case w_:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case __:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case b_:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case S_:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case M_:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case E_:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case T_:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case A_:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case C_:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case N_:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case R_:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case L_:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case I_:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case k_:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case P_:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case D_:case B_:case U_:return Math.ceil(t/4)*Math.ceil(e/4)*16;case O_:case j_:return Math.ceil(t/4)*Math.ceil(e/4)*8;case F_:case z_:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${n} format.`)}function iK(t){switch(t){case Uo:case $P:return{byteLength:1,components:1};case wf:case YP:case np:return{byteLength:2,components:1};case vM:case wM:return{byteLength:2,components:4};case cc:case yM:case So:return{byteLength:4,components:1};case XP:case qP:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:xM}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=xM);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function m5(){let t=null,e=!1,n=null,i=null;function r(s,o){n(s,o),i=t.requestAnimationFrame(r)}return{start:function(){e!==!0&&n!==null&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){n=s},setContext:function(s){t=s}}}function rK(t){const e=new WeakMap;function n(a,l){const c=a.array,u=a.usage,h=c.byteLength,f=t.createBuffer();t.bindBuffer(l,f),t.bufferData(l,c,u),a.onUploadCallback();let p;if(c instanceof Float32Array)p=t.FLOAT;else if(typeof Float16Array<"u"&&c instanceof Float16Array)p=t.HALF_FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?p=t.HALF_FLOAT:p=t.UNSIGNED_SHORT;else if(c instanceof Int16Array)p=t.SHORT;else if(c instanceof Uint32Array)p=t.UNSIGNED_INT;else if(c instanceof Int32Array)p=t.INT;else if(c instanceof Int8Array)p=t.BYTE;else if(c instanceof Uint8Array)p=t.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)p=t.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:f,type:p,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:h}}function i(a,l,c){const u=l.array,h=l.updateRanges;if(t.bindBuffer(c,a),h.length===0)t.bufferSubData(c,0,u);else{h.sort((p,x)=>p.start-x.start);let f=0;for(let p=1;p<h.length;p++){const x=h[f],y=h[p];y.start<=x.start+x.count+1?x.count=Math.max(x.count,y.start+y.count-x.start):(++f,h[f]=y)}h.length=f+1;for(let p=0,x=h.length;p<x;p++){const y=h[p];t.bufferSubData(c,y.start*u.BYTES_PER_ELEMENT,u,y.start,y.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(t.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,n(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var sK=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,oK=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,aK=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,lK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,cK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,uK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,dK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,hK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,fK=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,pK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,mK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,gK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,xK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,yK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,vK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,wK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,_K=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,bK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,SK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,MK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,EK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,TK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,AK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,CK=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,NK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,RK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,LK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,IK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,kK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,PK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,DK="gl_FragColor = linearToOutputTexel( gl_FragColor );",BK=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,UK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,OK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,jK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,FK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,zK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,VK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,WK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,HK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,GK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,$K=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,YK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,XK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,qK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,KK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,ZK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,QK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,JK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,eZ=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,tZ=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,nZ=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,iZ=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,rZ=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,sZ=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,oZ=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,aZ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,lZ=`#if defined( USE_LOGARITHMIC_DEPTH_BUFFER )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,cZ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,uZ=`#ifdef USE_LOGARITHMIC_DEPTH_BUFFER
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,dZ=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,hZ=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,fZ=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,pZ=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,mZ=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,gZ=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,xZ=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,yZ=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,vZ=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,wZ=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,_Z=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,bZ=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,SZ=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,MZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,EZ=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,TZ=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,AZ=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,CZ=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,NZ=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,RZ=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,LZ=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,IZ=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,kZ=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,PZ=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,DZ=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,BZ=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,UZ=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,OZ=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,jZ=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,FZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow( sampler2D shadow, vec2 uv, float compare ) {
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSED_DEPTH_BUFFER
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare, distribution.x );
		#endif
		if ( hard_shadow != 1.0 ) {
			float distance = compare - distribution.x;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,zZ=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,VZ=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,WZ=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,HZ=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,GZ=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,$Z=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,YZ=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,XZ=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,qZ=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,KZ=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,ZZ=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,QZ=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,JZ=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,eQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,tQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,nQ=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,iQ=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const rQ=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,sQ=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,oQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,aQ=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,cQ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,uQ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,dQ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSED_DEPTH_BUFFER
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,hQ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,fQ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,pQ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,mQ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,gQ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,xQ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,yQ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,vQ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,wQ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,_Q=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bQ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,SQ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,MQ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,EQ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,TQ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AQ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,CQ=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,NQ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,RQ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,LQ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,IQ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,kQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,PQ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,DQ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,BQ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,UQ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_t={alphahash_fragment:sK,alphahash_pars_fragment:oK,alphamap_fragment:aK,alphamap_pars_fragment:lK,alphatest_fragment:cK,alphatest_pars_fragment:uK,aomap_fragment:dK,aomap_pars_fragment:hK,batching_pars_vertex:fK,batching_vertex:pK,begin_vertex:mK,beginnormal_vertex:gK,bsdfs:xK,iridescence_fragment:yK,bumpmap_pars_fragment:vK,clipping_planes_fragment:wK,clipping_planes_pars_fragment:_K,clipping_planes_pars_vertex:bK,clipping_planes_vertex:SK,color_fragment:MK,color_pars_fragment:EK,color_pars_vertex:TK,color_vertex:AK,common:CK,cube_uv_reflection_fragment:NK,defaultnormal_vertex:RK,displacementmap_pars_vertex:LK,displacementmap_vertex:IK,emissivemap_fragment:kK,emissivemap_pars_fragment:PK,colorspace_fragment:DK,colorspace_pars_fragment:BK,envmap_fragment:UK,envmap_common_pars_fragment:OK,envmap_pars_fragment:jK,envmap_pars_vertex:FK,envmap_physical_pars_fragment:ZK,envmap_vertex:zK,fog_vertex:VK,fog_pars_vertex:WK,fog_fragment:HK,fog_pars_fragment:GK,gradientmap_pars_fragment:$K,lightmap_pars_fragment:YK,lights_lambert_fragment:XK,lights_lambert_pars_fragment:qK,lights_pars_begin:KK,lights_toon_fragment:QK,lights_toon_pars_fragment:JK,lights_phong_fragment:eZ,lights_phong_pars_fragment:tZ,lights_physical_fragment:nZ,lights_physical_pars_fragment:iZ,lights_fragment_begin:rZ,lights_fragment_maps:sZ,lights_fragment_end:oZ,logdepthbuf_fragment:aZ,logdepthbuf_pars_fragment:lZ,logdepthbuf_pars_vertex:cZ,logdepthbuf_vertex:uZ,map_fragment:dZ,map_pars_fragment:hZ,map_particle_fragment:fZ,map_particle_pars_fragment:pZ,metalnessmap_fragment:mZ,metalnessmap_pars_fragment:gZ,morphinstance_vertex:xZ,morphcolor_vertex:yZ,morphnormal_vertex:vZ,morphtarget_pars_vertex:wZ,morphtarget_vertex:_Z,normal_fragment_begin:bZ,normal_fragment_maps:SZ,normal_pars_fragment:MZ,normal_pars_vertex:EZ,normal_vertex:TZ,normalmap_pars_fragment:AZ,clearcoat_normal_fragment_begin:CZ,clearcoat_normal_fragment_maps:NZ,clearcoat_pars_fragment:RZ,iridescence_pars_fragment:LZ,opaque_fragment:IZ,packing:kZ,premultiplied_alpha_fragment:PZ,project_vertex:DZ,dithering_fragment:BZ,dithering_pars_fragment:UZ,roughnessmap_fragment:OZ,roughnessmap_pars_fragment:jZ,shadowmap_pars_fragment:FZ,shadowmap_pars_vertex:zZ,shadowmap_vertex:VZ,shadowmask_pars_fragment:WZ,skinbase_vertex:HZ,skinning_pars_vertex:GZ,skinning_vertex:$Z,skinnormal_vertex:YZ,specularmap_fragment:XZ,specularmap_pars_fragment:qZ,tonemapping_fragment:KZ,tonemapping_pars_fragment:ZZ,transmission_fragment:QZ,transmission_pars_fragment:JZ,uv_pars_fragment:eQ,uv_pars_vertex:tQ,uv_vertex:nQ,worldpos_vertex:iQ,background_vert:rQ,background_frag:sQ,backgroundCube_vert:oQ,backgroundCube_frag:aQ,cube_vert:lQ,cube_frag:cQ,depth_vert:uQ,depth_frag:dQ,distanceRGBA_vert:hQ,distanceRGBA_frag:fQ,equirect_vert:pQ,equirect_frag:mQ,linedashed_vert:gQ,linedashed_frag:xQ,meshbasic_vert:yQ,meshbasic_frag:vQ,meshlambert_vert:wQ,meshlambert_frag:_Q,meshmatcap_vert:bQ,meshmatcap_frag:SQ,meshnormal_vert:MQ,meshnormal_frag:EQ,meshphong_vert:TQ,meshphong_frag:AQ,meshphysical_vert:CQ,meshphysical_frag:NQ,meshtoon_vert:RQ,meshtoon_frag:LQ,points_vert:IQ,points_frag:kQ,shadow_vert:PQ,shadow_frag:DQ,sprite_vert:BQ,sprite_frag:UQ},Fe={common:{diffuse:{value:new Gt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new yt},alphaMap:{value:null},alphaMapTransform:{value:new yt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new yt}},envmap:{envMap:{value:null},envMapRotation:{value:new yt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new yt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new yt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new yt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new yt},normalScale:{value:new Vt(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new yt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new yt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new yt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new yt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Gt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Gt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new yt},alphaTest:{value:0},uvTransform:{value:new yt}},sprite:{diffuse:{value:new Gt(16777215)},opacity:{value:1},center:{value:new Vt(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new yt},alphaMap:{value:null},alphaMapTransform:{value:new yt},alphaTest:{value:0}}},Cs={basic:{uniforms:ji([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.fog]),vertexShader:_t.meshbasic_vert,fragmentShader:_t.meshbasic_frag},lambert:{uniforms:ji([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new Gt(0)}}]),vertexShader:_t.meshlambert_vert,fragmentShader:_t.meshlambert_frag},phong:{uniforms:ji([Fe.common,Fe.specularmap,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,Fe.lights,{emissive:{value:new Gt(0)},specular:{value:new Gt(1118481)},shininess:{value:30}}]),vertexShader:_t.meshphong_vert,fragmentShader:_t.meshphong_frag},standard:{uniforms:ji([Fe.common,Fe.envmap,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.roughnessmap,Fe.metalnessmap,Fe.fog,Fe.lights,{emissive:{value:new Gt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag},toon:{uniforms:ji([Fe.common,Fe.aomap,Fe.lightmap,Fe.emissivemap,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.gradientmap,Fe.fog,Fe.lights,{emissive:{value:new Gt(0)}}]),vertexShader:_t.meshtoon_vert,fragmentShader:_t.meshtoon_frag},matcap:{uniforms:ji([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,Fe.fog,{matcap:{value:null}}]),vertexShader:_t.meshmatcap_vert,fragmentShader:_t.meshmatcap_frag},points:{uniforms:ji([Fe.points,Fe.fog]),vertexShader:_t.points_vert,fragmentShader:_t.points_frag},dashed:{uniforms:ji([Fe.common,Fe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:_t.linedashed_vert,fragmentShader:_t.linedashed_frag},depth:{uniforms:ji([Fe.common,Fe.displacementmap]),vertexShader:_t.depth_vert,fragmentShader:_t.depth_frag},normal:{uniforms:ji([Fe.common,Fe.bumpmap,Fe.normalmap,Fe.displacementmap,{opacity:{value:1}}]),vertexShader:_t.meshnormal_vert,fragmentShader:_t.meshnormal_frag},sprite:{uniforms:ji([Fe.sprite,Fe.fog]),vertexShader:_t.sprite_vert,fragmentShader:_t.sprite_frag},background:{uniforms:{uvTransform:{value:new yt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:_t.background_vert,fragmentShader:_t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new yt}},vertexShader:_t.backgroundCube_vert,fragmentShader:_t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:_t.cube_vert,fragmentShader:_t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:_t.equirect_vert,fragmentShader:_t.equirect_frag},distanceRGBA:{uniforms:ji([Fe.common,Fe.displacementmap,{referencePosition:{value:new he},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:_t.distanceRGBA_vert,fragmentShader:_t.distanceRGBA_frag},shadow:{uniforms:ji([Fe.lights,Fe.fog,{color:{value:new Gt(0)},opacity:{value:1}}]),vertexShader:_t.shadow_vert,fragmentShader:_t.shadow_frag}};Cs.physical={uniforms:ji([Cs.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new yt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new yt},clearcoatNormalScale:{value:new Vt(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new yt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new yt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new yt},sheen:{value:0},sheenColor:{value:new Gt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new yt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new yt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new yt},transmissionSamplerSize:{value:new Vt},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new yt},attenuationDistance:{value:0},attenuationColor:{value:new Gt(0)},specularColor:{value:new Gt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new yt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new yt},anisotropyVector:{value:new Vt},anisotropyMap:{value:null},anisotropyMapTransform:{value:new yt}}]),vertexShader:_t.meshphysical_vert,fragmentShader:_t.meshphysical_frag};const dm={r:0,b:0,g:0},ll=new Oo,OQ=new Jn;function jQ(t,e,n,i,r,s,o){const a=new Gt(0);let l=s===!0?0:1,c,u,h=null,f=0,p=null;function x(w){let S=w.isScene===!0?w.background:null;return S&&S.isTexture&&(S=(w.backgroundBlurriness>0?n:e).get(S)),S}function y(w){let S=!1;const N=x(w);N===null?m(a,l):N&&N.isColor&&(m(N,1),S=!0);const k=t.xr.getEnvironmentBlendMode();k==="additive"?i.buffers.color.setClear(0,0,0,1,o):k==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(t.autoClear||S)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))}function g(w,S){const N=x(S);N&&(N.isCubeTexture||N.mapping===Tx)?(u===void 0&&(u=new Bs(new op(1,1,1),new jo({name:"BackgroundCubeMaterial",uniforms:ad(Cs.backgroundCube.uniforms),vertexShader:Cs.backgroundCube.vertexShader,fragmentShader:Cs.backgroundCube.fragmentShader,side:lr,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(k,R,B){this.matrixWorld.copyPosition(B.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),ll.copy(S.backgroundRotation),ll.x*=-1,ll.y*=-1,ll.z*=-1,N.isCubeTexture&&N.isRenderTargetTexture===!1&&(ll.y*=-1,ll.z*=-1),u.material.uniforms.envMap.value=N,u.material.uniforms.flipEnvMap.value=N.isCubeTexture&&N.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=S.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(OQ.makeRotationFromEuler(ll)),u.material.toneMapped=kt.getTransfer(N.colorSpace)!==Ht,(h!==N||f!==N.version||p!==t.toneMapping)&&(u.material.needsUpdate=!0,h=N,f=N.version,p=t.toneMapping),u.layers.enableAll(),w.unshift(u,u.geometry,u.material,0,0,null)):N&&N.isTexture&&(c===void 0&&(c=new Bs(new ap(2,2),new jo({name:"BackgroundMaterial",uniforms:ad(Cs.background.uniforms),vertexShader:Cs.background.vertexShader,fragmentShader:Cs.background.fragmentShader,side:Ha,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=N,c.material.uniforms.backgroundIntensity.value=S.backgroundIntensity,c.material.toneMapped=kt.getTransfer(N.colorSpace)!==Ht,N.matrixAutoUpdate===!0&&N.updateMatrix(),c.material.uniforms.uvTransform.value.copy(N.matrix),(h!==N||f!==N.version||p!==t.toneMapping)&&(c.material.needsUpdate=!0,h=N,f=N.version,p=t.toneMapping),c.layers.enableAll(),w.unshift(c,c.geometry,c.material,0,0,null))}function m(w,S){w.getRGB(dm,l5(t)),i.buffers.color.setClear(dm.r,dm.g,dm.b,S,o)}function _(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(w,S=1){a.set(w),l=S,m(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(w){l=w,m(a,l)},render:y,addToRenderList:g,dispose:_}}function FQ(t,e){const n=t.getParameter(t.MAX_VERTEX_ATTRIBS),i={},r=f(null);let s=r,o=!1;function a(D,j,Y,I,v){let b=!1;const E=h(I,Y,j);s!==E&&(s=E,c(s.object)),b=p(D,I,Y,v),b&&x(D,I,Y,v),v!==null&&e.update(v,t.ELEMENT_ARRAY_BUFFER),(b||o)&&(o=!1,S(D,j,Y,I),v!==null&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(v).buffer))}function l(){return t.createVertexArray()}function c(D){return t.bindVertexArray(D)}function u(D){return t.deleteVertexArray(D)}function h(D,j,Y){const I=Y.wireframe===!0;let v=i[D.id];v===void 0&&(v={},i[D.id]=v);let b=v[j.id];b===void 0&&(b={},v[j.id]=b);let E=b[I];return E===void 0&&(E=f(l()),b[I]=E),E}function f(D){const j=[],Y=[],I=[];for(let v=0;v<n;v++)j[v]=0,Y[v]=0,I[v]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:j,enabledAttributes:Y,attributeDivisors:I,object:D,attributes:{},index:null}}function p(D,j,Y,I){const v=s.attributes,b=j.attributes;let E=0;const P=Y.getAttributes();for(const C in P)if(P[C].location>=0){const V=v[C];let U=b[C];if(U===void 0&&(C==="instanceMatrix"&&D.instanceMatrix&&(U=D.instanceMatrix),C==="instanceColor"&&D.instanceColor&&(U=D.instanceColor)),V===void 0||V.attribute!==U||U&&V.data!==U.data)return!0;E++}return s.attributesNum!==E||s.index!==I}function x(D,j,Y,I){const v={},b=j.attributes;let E=0;const P=Y.getAttributes();for(const C in P)if(P[C].location>=0){let V=b[C];V===void 0&&(C==="instanceMatrix"&&D.instanceMatrix&&(V=D.instanceMatrix),C==="instanceColor"&&D.instanceColor&&(V=D.instanceColor));const U={};U.attribute=V,V&&V.data&&(U.data=V.data),v[C]=U,E++}s.attributes=v,s.attributesNum=E,s.index=I}function y(){const D=s.newAttributes;for(let j=0,Y=D.length;j<Y;j++)D[j]=0}function g(D){m(D,0)}function m(D,j){const Y=s.newAttributes,I=s.enabledAttributes,v=s.attributeDivisors;Y[D]=1,I[D]===0&&(t.enableVertexAttribArray(D),I[D]=1),v[D]!==j&&(t.vertexAttribDivisor(D,j),v[D]=j)}function _(){const D=s.newAttributes,j=s.enabledAttributes;for(let Y=0,I=j.length;Y<I;Y++)j[Y]!==D[Y]&&(t.disableVertexAttribArray(Y),j[Y]=0)}function w(D,j,Y,I,v,b,E){E===!0?t.vertexAttribIPointer(D,j,Y,v,b):t.vertexAttribPointer(D,j,Y,I,v,b)}function S(D,j,Y,I){y();const v=I.attributes,b=Y.getAttributes(),E=j.defaultAttributeValues;for(const P in b){const C=b[P];if(C.location>=0){let z=v[P];if(z===void 0&&(P==="instanceMatrix"&&D.instanceMatrix&&(z=D.instanceMatrix),P==="instanceColor"&&D.instanceColor&&(z=D.instanceColor)),z!==void 0){const V=z.normalized,U=z.itemSize,T=e.get(z);if(T===void 0)continue;const G=T.buffer,K=T.type,ne=T.bytesPerElement,Z=K===t.INT||K===t.UNSIGNED_INT||z.gpuType===yM;if(z.isInterleavedBufferAttribute){const ee=z.data,me=ee.stride,pe=z.offset;if(ee.isInstancedInterleavedBuffer){for(let Se=0;Se<C.locationSize;Se++)m(C.location+Se,ee.meshPerAttribute);D.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=ee.meshPerAttribute*ee.count)}else for(let Se=0;Se<C.locationSize;Se++)g(C.location+Se);t.bindBuffer(t.ARRAY_BUFFER,G);for(let Se=0;Se<C.locationSize;Se++)w(C.location+Se,U/C.locationSize,K,V,me*ne,(pe+U/C.locationSize*Se)*ne,Z)}else{if(z.isInstancedBufferAttribute){for(let ee=0;ee<C.locationSize;ee++)m(C.location+ee,z.meshPerAttribute);D.isInstancedMesh!==!0&&I._maxInstanceCount===void 0&&(I._maxInstanceCount=z.meshPerAttribute*z.count)}else for(let ee=0;ee<C.locationSize;ee++)g(C.location+ee);t.bindBuffer(t.ARRAY_BUFFER,G);for(let ee=0;ee<C.locationSize;ee++)w(C.location+ee,U/C.locationSize,K,V,U*ne,U/C.locationSize*ee*ne,Z)}}else if(E!==void 0){const V=E[P];if(V!==void 0)switch(V.length){case 2:t.vertexAttrib2fv(C.location,V);break;case 3:t.vertexAttrib3fv(C.location,V);break;case 4:t.vertexAttrib4fv(C.location,V);break;default:t.vertexAttrib1fv(C.location,V)}}}}_()}function N(){B();for(const D in i){const j=i[D];for(const Y in j){const I=j[Y];for(const v in I)u(I[v].object),delete I[v];delete j[Y]}delete i[D]}}function k(D){if(i[D.id]===void 0)return;const j=i[D.id];for(const Y in j){const I=j[Y];for(const v in I)u(I[v].object),delete I[v];delete j[Y]}delete i[D.id]}function R(D){for(const j in i){const Y=i[j];if(Y[D.id]===void 0)continue;const I=Y[D.id];for(const v in I)u(I[v].object),delete I[v];delete Y[D.id]}}function B(){L(),o=!0,s!==r&&(s=r,c(s.object))}function L(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:B,resetDefaultState:L,dispose:N,releaseStatesOfGeometry:k,releaseStatesOfProgram:R,initAttributes:y,enableAttribute:g,disableUnusedAttributes:_}}function zQ(t,e,n){let i;function r(c){i=c}function s(c,u){t.drawArrays(i,c,u),n.update(u,i,1)}function o(c,u,h){h!==0&&(t.drawArraysInstanced(i,c,u,h),n.update(u,i,h))}function a(c,u,h){if(h===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,h);let p=0;for(let x=0;x<h;x++)p+=u[x];n.update(p,i,1)}function l(c,u,h,f){if(h===0)return;const p=e.get("WEBGL_multi_draw");if(p===null)for(let x=0;x<c.length;x++)o(c[x],u[x],f[x]);else{p.multiDrawArraysInstancedWEBGL(i,c,0,u,0,f,0,h);let x=0;for(let y=0;y<h;y++)x+=u[y]*f[y];n.update(x,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function VQ(t,e,n,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const R=e.get("EXT_texture_filter_anisotropic");r=t.getParameter(R.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(R){return!(R!==ds&&i.convert(R)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(R){const B=R===np&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(R!==Uo&&i.convert(R)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&R!==So&&!B)}function l(R){if(R==="highp"){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";R="mediump"}return R==="mediump"&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=n.precision!==void 0?n.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const h=n.logarithmicDepthBuffer===!0,f=n.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),p=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),x=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=t.getParameter(t.MAX_TEXTURE_SIZE),g=t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),m=t.getParameter(t.MAX_VERTEX_ATTRIBS),_=t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),w=t.getParameter(t.MAX_VARYING_VECTORS),S=t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),N=x>0,k=t.getParameter(t.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:h,reversedDepthBuffer:f,maxTextures:p,maxVertexTextures:x,maxTextureSize:y,maxCubemapSize:g,maxAttributes:m,maxVertexUniforms:_,maxVaryings:w,maxFragmentUniforms:S,vertexTextures:N,maxSamples:k}}function WQ(t){const e=this;let n=null,i=0,r=!1,s=!1;const o=new _l,a=new yt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(h,f){const p=h.length!==0||f||i!==0||r;return r=f,i=h.length,p},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(h,f){n=u(h,f,0)},this.setState=function(h,f,p){const x=h.clippingPlanes,y=h.clipIntersection,g=h.clipShadows,m=t.get(h);if(!r||x===null||x.length===0||s&&!g)s?u(null):c();else{const _=s?0:i,w=_*4;let S=m.clippingState||null;l.value=S,S=u(x,f,w,p);for(let N=0;N!==w;++N)S[N]=n[N];m.clippingState=S,this.numIntersection=y?this.numPlanes:0,this.numPlanes+=_}};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(h,f,p,x){const y=h!==null?h.length:0;let g=null;if(y!==0){if(g=l.value,x!==!0||g===null){const m=p+y*4,_=f.matrixWorldInverse;a.getNormalMatrix(_),(g===null||g.length<m)&&(g=new Float32Array(m));for(let w=0,S=p;w!==y;++w,S+=4)o.copy(h[w]).applyMatrix4(_,a),o.normal.toArray(g,S),g[S+3]=o.constant}l.value=g,l.needsUpdate=!0}return e.numPlanes=y,e.numIntersection=0,g}}function HQ(t){let e=new WeakMap;function n(o,a){return a===u_?o.mapping=rd:a===d_&&(o.mapping=sd),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===u_||a===d_)if(e.has(o)){const l=e.get(o).texture;return n(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new Xq(l.height);return c.fromEquirectangularTexture(t,o),e.set(o,c),o.addEventListener("dispose",r),n(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const _u=4,ZA=[.125,.215,.35,.446,.526,.582],Cl=20,Av=new p5,QA=new Gt;let Cv=null,Nv=0,Rv=0,Lv=!1;const bl=(1+Math.sqrt(5))/2,Hc=1/bl,JA=[new he(-bl,Hc,0),new he(bl,Hc,0),new he(-Hc,0,bl),new he(Hc,0,bl),new he(0,bl,-Hc),new he(0,bl,Hc),new he(-1,1,-1),new he(1,1,-1),new he(-1,1,1),new he(1,1,1)],GQ=new he;class eC{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,n=0,i=.1,r=100,s={}){const{size:o=256,position:a=GQ}=s;Cv=this._renderer.getRenderTarget(),Nv=this._renderer.getActiveCubeFace(),Rv=this._renderer.getActiveMipmapLevel(),Lv=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),n>0&&this._blur(l,0,0,n),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,n=null){return this._fromTexture(e,n)}fromCubemap(e,n=null){return this._fromTexture(e,n)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=iC(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=nC(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Cv,Nv,Rv),this._renderer.xr.enabled=Lv,e.scissorTest=!1,hm(e,0,0,e.width,e.height)}_fromTexture(e,n){e.mapping===rd||e.mapping===sd?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Cv=this._renderer.getRenderTarget(),Nv=this._renderer.getActiveCubeFace(),Rv=this._renderer.getActiveMipmapLevel(),Lv=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=n||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),n=4*this._cubeSize,i={magFilter:Ps,minFilter:Ps,generateMipmaps:!1,type:np,format:ds,colorSpace:od,depthBuffer:!1},r=tC(e,n,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==n){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=tC(e,n,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=$Q(s)),this._blurMaterial=YQ(s,e,n)}return r}_compileMaterial(e){const n=new Bs(this._lodPlanes[0],e);this._renderer.compile(n,Av)}_sceneToCubeUV(e,n,i,r,s){const l=new ls(90,1,n,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],h=this._renderer,f=h.autoClear,p=h.toneMapping;h.getClearColor(QA),h.toneMapping=Da,h.autoClear=!1,h.state.buffers.depth.getReversed()&&(h.setRenderTarget(r),h.clearDepth(),h.setRenderTarget(null));const y=new s5({name:"PMREM.Background",side:lr,depthWrite:!1,depthTest:!1}),g=new Bs(new op,y);let m=!1;const _=e.background;_?_.isColor&&(y.color.copy(_),e.background=null,m=!0):(y.color.copy(QA),m=!0);for(let w=0;w<6;w++){const S=w%3;S===0?(l.up.set(0,c[w],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[w],s.y,s.z)):S===1?(l.up.set(0,0,c[w]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[w],s.z)):(l.up.set(0,c[w],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[w]));const N=this._cubeSize;hm(r,S*N,w>2?N:0,N,N),h.setRenderTarget(r),m&&h.render(g,l),h.render(e,l)}g.geometry.dispose(),g.material.dispose(),h.toneMapping=p,h.autoClear=f,e.background=_}_textureToCubeUV(e,n){const i=this._renderer,r=e.mapping===rd||e.mapping===sd;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=iC()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=nC());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Bs(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;hm(n,0,0,3*l,2*l),i.setRenderTarget(n),i.render(o,Av)}_applyPMREM(e){const n=this._renderer,i=n.autoClear;n.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=JA[(r-s-1)%JA.length];this._blur(e,s-1,s,o,a)}n.autoClear=i}_blur(e,n,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,n,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,n,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,h=new Bs(this._lodPlanes[r],c),f=c.uniforms,p=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*p):2*Math.PI/(2*Cl-1),y=s/x,g=isFinite(s)?1+Math.floor(u*y):Cl;g>Cl&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${g} samples when the maximum is set to ${Cl}`);const m=[];let _=0;for(let R=0;R<Cl;++R){const B=R/y,L=Math.exp(-B*B/2);m.push(L),R===0?_+=L:R<g&&(_+=2*L)}for(let R=0;R<m.length;R++)m[R]=m[R]/_;f.envMap.value=e.texture,f.samples.value=g,f.weights.value=m,f.latitudinal.value=o==="latitudinal",a&&(f.poleAxis.value=a);const{_lodMax:w}=this;f.dTheta.value=x,f.mipInt.value=w-i;const S=this._sizeLods[r],N=3*S*(r>w-_u?r-w+_u:0),k=4*(this._cubeSize-S);hm(n,N,k,3*S,2*S),l.setRenderTarget(n),l.render(h,Av)}}function $Q(t){const e=[],n=[],i=[];let r=t;const s=t-_u+1+ZA.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);n.push(a);let l=1/a;o>t-_u?l=ZA[o-t+_u-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,h=1+c,f=[u,u,h,u,h,h,u,u,h,h,u,h],p=6,x=6,y=3,g=2,m=1,_=new Float32Array(y*x*p),w=new Float32Array(g*x*p),S=new Float32Array(m*x*p);for(let k=0;k<p;k++){const R=k%3*2/3-1,B=k>2?0:-1,L=[R,B,0,R+2/3,B,0,R+2/3,B+1,0,R,B,0,R+2/3,B+1,0,R,B+1,0];_.set(L,y*x*k),w.set(f,g*x*k);const D=[k,k,k,k,k,k];S.set(D,m*x*k)}const N=new bc;N.setAttribute("position",new zs(_,y)),N.setAttribute("uv",new zs(w,g)),N.setAttribute("faceIndex",new zs(S,m)),e.push(N),r>_u&&r--}return{lodPlanes:e,sizeLods:n,sigmas:i}}function tC(t,e,n){const i=new uc(t,e,n);return i.texture.mapping=Tx,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function hm(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function YQ(t,e,n){const i=new Float32Array(Cl),r=new he(0,1,0);return new jo({name:"SphericalGaussianBlur",defines:{n:Cl,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:TM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Pa,depthTest:!1,depthWrite:!1})}function nC(){return new jo({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:TM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Pa,depthTest:!1,depthWrite:!1})}function iC(){return new jo({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:TM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Pa,depthTest:!1,depthWrite:!1})}function TM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function XQ(t){let e=new WeakMap,n=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===u_||l===d_,u=l===rd||l===sd;if(c||u){let h=e.get(a);const f=h!==void 0?h.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==f)return n===null&&(n=new eC(t)),h=c?n.fromEquirectangular(a,h):n.fromCubemap(a,h),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),h.texture;if(h!==void 0)return h.texture;{const p=a.image;return c&&p&&p.height>0||u&&p&&r(p)?(n===null&&(n=new eC(t)),h=c?n.fromEquirectangular(a):n.fromCubemap(a),h.texture.pmremVersion=a.pmremVersion,e.set(a,h),a.addEventListener("dispose",s),h.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,n!==null&&(n.dispose(),n=null)}return{get:i,dispose:o}}function qQ(t){const e={};function n(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(i){return n(i)!==null},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(i){const r=n(i);return r===null&&Mf("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function KQ(t,e,n,i){const r={},s=new WeakMap;function o(h){const f=h.target;f.index!==null&&e.remove(f.index);for(const x in f.attributes)e.remove(f.attributes[x]);f.removeEventListener("dispose",o),delete r[f.id];const p=s.get(f);p&&(e.remove(p),s.delete(f)),i.releaseStatesOfGeometry(f),f.isInstancedBufferGeometry===!0&&delete f._maxInstanceCount,n.memory.geometries--}function a(h,f){return r[f.id]===!0||(f.addEventListener("dispose",o),r[f.id]=!0,n.memory.geometries++),f}function l(h){const f=h.attributes;for(const p in f)e.update(f[p],t.ARRAY_BUFFER)}function c(h){const f=[],p=h.index,x=h.attributes.position;let y=0;if(p!==null){const _=p.array;y=p.version;for(let w=0,S=_.length;w<S;w+=3){const N=_[w+0],k=_[w+1],R=_[w+2];f.push(N,k,k,R,R,N)}}else if(x!==void 0){const _=x.array;y=x.version;for(let w=0,S=_.length/3-1;w<S;w+=3){const N=w+0,k=w+1,R=w+2;f.push(N,k,k,R,R,N)}}else return;const g=new(t5(f)?a5:o5)(f,1);g.version=y;const m=s.get(h);m&&e.remove(m),s.set(h,g)}function u(h){const f=s.get(h);if(f){const p=h.index;p!==null&&f.version<p.version&&c(h)}else c(h);return s.get(h)}return{get:a,update:l,getWireframeAttribute:u}}function ZQ(t,e,n){let i;function r(f){i=f}let s,o;function a(f){s=f.type,o=f.bytesPerElement}function l(f,p){t.drawElements(i,p,s,f*o),n.update(p,i,1)}function c(f,p,x){x!==0&&(t.drawElementsInstanced(i,p,s,f*o,x),n.update(p,i,x))}function u(f,p,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,p,0,s,f,0,x);let g=0;for(let m=0;m<x;m++)g+=p[m];n.update(g,i,1)}function h(f,p,x,y){if(x===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let m=0;m<f.length;m++)c(f[m]/o,p[m],y[m]);else{g.multiDrawElementsInstancedWEBGL(i,p,0,s,f,0,y,0,x);let m=0;for(let _=0;_<x;_++)m+=p[_]*y[_];n.update(m,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=h}function QQ(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(n.calls++,o){case t.TRIANGLES:n.triangles+=a*(s/3);break;case t.LINES:n.lines+=a*(s/2);break;case t.LINE_STRIP:n.lines+=a*(s-1);break;case t.LINE_LOOP:n.lines+=a*s;break;case t.POINTS:n.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function JQ(t,e,n){const i=new WeakMap,r=new On;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,h=u!==void 0?u.length:0;let f=i.get(a);if(f===void 0||f.count!==h){let p=function(){B.dispose(),i.delete(a),a.removeEventListener("dispose",p)};f!==void 0&&f.texture.dispose();const x=a.morphAttributes.position!==void 0,y=a.morphAttributes.normal!==void 0,g=a.morphAttributes.color!==void 0,m=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let S=0;x===!0&&(S=1),y===!0&&(S=2),g===!0&&(S=3);let N=a.attributes.position.count*S,k=1;N>e.maxTextureSize&&(k=Math.ceil(N/e.maxTextureSize),N=e.maxTextureSize);const R=new Float32Array(N*k*4*h),B=new n5(R,N,k,h);B.type=So,B.needsUpdate=!0;const L=S*4;for(let D=0;D<h;D++){const j=m[D],Y=_[D],I=w[D],v=N*k*4*D;for(let b=0;b<j.count;b++){const E=b*L;x===!0&&(r.fromBufferAttribute(j,b),R[v+E+0]=r.x,R[v+E+1]=r.y,R[v+E+2]=r.z,R[v+E+3]=0),y===!0&&(r.fromBufferAttribute(Y,b),R[v+E+4]=r.x,R[v+E+5]=r.y,R[v+E+6]=r.z,R[v+E+7]=0),g===!0&&(r.fromBufferAttribute(I,b),R[v+E+8]=r.x,R[v+E+9]=r.y,R[v+E+10]=r.z,R[v+E+11]=I.itemSize===4?r.w:1)}}f={count:h,texture:B,size:new Vt(N,k)},i.set(a,f),a.addEventListener("dispose",p)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(t,"morphTexture",o.morphTexture,n);else{let p=0;for(let y=0;y<c.length;y++)p+=c[y];const x=a.morphTargetsRelative?1:1-p;l.getUniforms().setValue(t,"morphTargetBaseInfluence",x),l.getUniforms().setValue(t,"morphTargetInfluences",c)}l.getUniforms().setValue(t,"morphTargetsTexture",f.texture,n),l.getUniforms().setValue(t,"morphTargetsTextureSize",f.size)}return{update:s}}function eJ(t,e,n,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,h=e.get(l,u);if(r.get(h)!==c&&(e.update(h),r.set(h,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(n.update(l.instanceMatrix,t.ARRAY_BUFFER),l.instanceColor!==null&&n.update(l.instanceColor,t.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const f=l.skeleton;r.get(f)!==c&&(f.update(),r.set(f,c))}return h}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),n.remove(c.instanceMatrix),c.instanceColor!==null&&n.remove(c.instanceColor)}return{update:s,dispose:o}}const g5=new cr,rC=new h5(1,1),x5=new n5,y5=new Rq,v5=new u5,sC=[],oC=[],aC=new Float32Array(16),lC=new Float32Array(9),cC=new Float32Array(4);function Md(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let s=sC[r];if(s===void 0&&(s=new Float32Array(r),sC[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=n,t[o].toArray(s,a)}return s}function ei(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function ti(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function Cx(t,e){let n=oC[e];n===void 0&&(n=new Int32Array(e),oC[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function tJ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function nJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ei(n,e))return;t.uniform2fv(this.addr,e),ti(n,e)}}function iJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(e.r!==void 0)(n[0]!==e.r||n[1]!==e.g||n[2]!==e.b)&&(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(ei(n,e))return;t.uniform3fv(this.addr,e),ti(n,e)}}function rJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ei(n,e))return;t.uniform4fv(this.addr,e),ti(n,e)}}function sJ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ei(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ti(n,e)}else{if(ei(n,i))return;cC.set(i),t.uniformMatrix2fv(this.addr,!1,cC),ti(n,i)}}function oJ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ei(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ti(n,e)}else{if(ei(n,i))return;lC.set(i),t.uniformMatrix3fv(this.addr,!1,lC),ti(n,i)}}function aJ(t,e){const n=this.cache,i=e.elements;if(i===void 0){if(ei(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ti(n,e)}else{if(ei(n,i))return;aC.set(i),t.uniformMatrix4fv(this.addr,!1,aC),ti(n,i)}}function lJ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function cJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2i(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ei(n,e))return;t.uniform2iv(this.addr,e),ti(n,e)}}function uJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3i(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ei(n,e))return;t.uniform3iv(this.addr,e),ti(n,e)}}function dJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ei(n,e))return;t.uniform4iv(this.addr,e),ti(n,e)}}function hJ(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function fJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y)&&(t.uniform2ui(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(ei(n,e))return;t.uniform2uiv(this.addr,e),ti(n,e)}}function pJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z)&&(t.uniform3ui(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else{if(ei(n,e))return;t.uniform3uiv(this.addr,e),ti(n,e)}}function mJ(t,e){const n=this.cache;if(e.x!==void 0)(n[0]!==e.x||n[1]!==e.y||n[2]!==e.z||n[3]!==e.w)&&(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(ei(n,e))return;t.uniform4uiv(this.addr,e),ti(n,e)}}function gJ(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r);let s;this.type===t.SAMPLER_2D_SHADOW?(rC.compareFunction=e5,s=rC):s=g5,n.setTexture2D(e||s,r)}function xJ(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||y5,r)}function yJ(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTextureCube(e||v5,r)}function vJ(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||x5,r)}function wJ(t){switch(t){case 5126:return tJ;case 35664:return nJ;case 35665:return iJ;case 35666:return rJ;case 35674:return sJ;case 35675:return oJ;case 35676:return aJ;case 5124:case 35670:return lJ;case 35667:case 35671:return cJ;case 35668:case 35672:return uJ;case 35669:case 35673:return dJ;case 5125:return hJ;case 36294:return fJ;case 36295:return pJ;case 36296:return mJ;case 35678:case 36198:case 36298:case 36306:case 35682:return gJ;case 35679:case 36299:case 36307:return xJ;case 35680:case 36300:case 36308:case 36293:return yJ;case 36289:case 36303:case 36311:case 36292:return vJ}}function _J(t,e){t.uniform1fv(this.addr,e)}function bJ(t,e){const n=Md(e,this.size,2);t.uniform2fv(this.addr,n)}function SJ(t,e){const n=Md(e,this.size,3);t.uniform3fv(this.addr,n)}function MJ(t,e){const n=Md(e,this.size,4);t.uniform4fv(this.addr,n)}function EJ(t,e){const n=Md(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function TJ(t,e){const n=Md(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function AJ(t,e){const n=Md(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function CJ(t,e){t.uniform1iv(this.addr,e)}function NJ(t,e){t.uniform2iv(this.addr,e)}function RJ(t,e){t.uniform3iv(this.addr,e)}function LJ(t,e){t.uniform4iv(this.addr,e)}function IJ(t,e){t.uniform1uiv(this.addr,e)}function kJ(t,e){t.uniform2uiv(this.addr,e)}function PJ(t,e){t.uniform3uiv(this.addr,e)}function DJ(t,e){t.uniform4uiv(this.addr,e)}function BJ(t,e,n){const i=this.cache,r=e.length,s=Cx(n,r);ei(i,s)||(t.uniform1iv(this.addr,s),ti(i,s));for(let o=0;o!==r;++o)n.setTexture2D(e[o]||g5,s[o])}function UJ(t,e,n){const i=this.cache,r=e.length,s=Cx(n,r);ei(i,s)||(t.uniform1iv(this.addr,s),ti(i,s));for(let o=0;o!==r;++o)n.setTexture3D(e[o]||y5,s[o])}function OJ(t,e,n){const i=this.cache,r=e.length,s=Cx(n,r);ei(i,s)||(t.uniform1iv(this.addr,s),ti(i,s));for(let o=0;o!==r;++o)n.setTextureCube(e[o]||v5,s[o])}function jJ(t,e,n){const i=this.cache,r=e.length,s=Cx(n,r);ei(i,s)||(t.uniform1iv(this.addr,s),ti(i,s));for(let o=0;o!==r;++o)n.setTexture2DArray(e[o]||x5,s[o])}function FJ(t){switch(t){case 5126:return _J;case 35664:return bJ;case 35665:return SJ;case 35666:return MJ;case 35674:return EJ;case 35675:return TJ;case 35676:return AJ;case 5124:case 35670:return CJ;case 35667:case 35671:return NJ;case 35668:case 35672:return RJ;case 35669:case 35673:return LJ;case 5125:return IJ;case 36294:return kJ;case 36295:return PJ;case 36296:return DJ;case 35678:case 36198:case 36298:case 36306:case 35682:return BJ;case 35679:case 36299:case 36307:return UJ;case 35680:case 36300:case 36308:case 36293:return OJ;case 36289:case 36303:case 36311:case 36292:return jJ}}class zJ{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.setValue=wJ(n.type)}}class VJ{constructor(e,n,i){this.id=e,this.addr=i,this.cache=[],this.type=n.type,this.size=n.size,this.setValue=FJ(n.type)}}class WJ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,n,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,n[a.id],i)}}}const Iv=/(\w+)(\])?(\[|\.)?/g;function uC(t,e){t.seq.push(e),t.map[e.id]=e}function HJ(t,e,n){const i=t.name,r=i.length;for(Iv.lastIndex=0;;){const s=Iv.exec(i),o=Iv.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){uC(n,c===void 0?new zJ(a,t,e):new VJ(a,t,e));break}else{let h=n.map[a];h===void 0&&(h=new WJ(a),uC(n,h)),n=h}}}class x0{constructor(e,n){this.seq=[],this.map={};const i=e.getProgramParameter(n,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(n,r),o=e.getUniformLocation(n,s.name);HJ(s,o,this)}}setValue(e,n,i,r){const s=this.map[n];s!==void 0&&s.setValue(e,i,r)}setOptional(e,n,i){const r=n[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,n,i,r){for(let s=0,o=n.length;s!==o;++s){const a=n[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,n){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in n&&i.push(o)}return i}}function dC(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}const GJ=37297;let $J=0;function YJ(t,e){const n=t.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,n.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${n[o]}`)}return i.join(`
`)}const hC=new yt;function XJ(t){kt._getMatrix(hC,kt.workingColorSpace,t);const e=`mat3( ${hC.elements.map(n=>n.toFixed(4))} )`;switch(kt.getTransfer(t)){case _g:return[e,"LinearTransferOETF"];case Ht:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}function fC(t,e,n){const i=t.getShaderParameter(e,t.COMPILE_STATUS),s=(t.getShaderInfoLog(e)||"").trim();if(i&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return n.toUpperCase()+`

`+s+`

`+YJ(t.getShaderSource(e),a)}else return s}function qJ(t,e){const n=XJ(e);return[`vec4 ${t}( vec4 value ) {`,`	return ${n[1]}( vec4( value.rgb * ${n[0]}, value.a ) );`,"}"].join(`
`)}function KJ(t,e){let n;switch(e){case iq:n="Linear";break;case rq:n="Reinhard";break;case sq:n="Cineon";break;case oq:n="ACESFilmic";break;case lq:n="AgX";break;case cq:n="Neutral";break;case aq:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}const fm=new he;function ZJ(){kt.getLuminanceCoefficients(fm);const t=fm.x.toFixed(4),e=fm.y.toFixed(4),n=fm.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${t}, ${e}, ${n} );`,"	return dot( weights, rgb );","}"].join(`
`)}function QJ(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(ph).join(`
`)}function JJ(t){const e=[];for(const n in t){const i=t[n];i!==!1&&e.push("#define "+n+" "+i)}return e.join(`
`)}function eee(t,e){const n={},i=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=t.getActiveAttrib(e,r),o=s.name;let a=1;s.type===t.FLOAT_MAT2&&(a=2),s.type===t.FLOAT_MAT3&&(a=3),s.type===t.FLOAT_MAT4&&(a=4),n[o]={type:s.type,location:t.getAttribLocation(e,o),locationSize:a}}return n}function ph(t){return t!==""}function pC(t,e){const n=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function mC(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const tee=/^[ \t]*#include +<([\w\d./]+)>/gm;function W_(t){return t.replace(tee,iee)}const nee=new Map;function iee(t,e){let n=_t[e];if(n===void 0){const i=nee.get(e);if(i!==void 0)n=_t[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return W_(n)}const ree=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function gC(t){return t.replace(ree,see)}function see(t,e,n,i){let r="";for(let s=parseInt(e);s<parseInt(n);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function xC(t){let e=`precision ${t.precision} float;
	precision ${t.precision} int;
	precision ${t.precision} sampler2D;
	precision ${t.precision} samplerCube;
	precision ${t.precision} sampler3D;
	precision ${t.precision} sampler2DArray;
	precision ${t.precision} sampler2DShadow;
	precision ${t.precision} samplerCubeShadow;
	precision ${t.precision} sampler2DArrayShadow;
	precision ${t.precision} isampler2D;
	precision ${t.precision} isampler3D;
	precision ${t.precision} isamplerCube;
	precision ${t.precision} isampler2DArray;
	precision ${t.precision} usampler2D;
	precision ${t.precision} usampler3D;
	precision ${t.precision} usamplerCube;
	precision ${t.precision} usampler2DArray;
	`;return t.precision==="highp"?e+=`
#define HIGH_PRECISION`:t.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:t.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function oee(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===WP?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===BX?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===so&&(e="SHADOWMAP_TYPE_VSM"),e}function aee(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case rd:case sd:e="ENVMAP_TYPE_CUBE";break;case Tx:e="ENVMAP_TYPE_CUBE_UV";break}return e}function lee(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case sd:e="ENVMAP_MODE_REFRACTION";break}return e}function cee(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case HP:e="ENVMAP_BLENDING_MULTIPLY";break;case tq:e="ENVMAP_BLENDING_MIX";break;case nq:e="ENVMAP_BLENDING_ADD";break}return e}function uee(t){const e=t.envMapCubeUVHeight;if(e===null)return null;const n=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,n),7*16)),texelHeight:i,maxMip:n}}function dee(t,e,n,i){const r=t.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const l=oee(n),c=aee(n),u=lee(n),h=cee(n),f=uee(n),p=QJ(n),x=JJ(s),y=r.createProgram();let g,m,_=n.glslVersion?"#version "+n.glslVersion+`
`:"";n.isRawShaderMaterial?(g=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(ph).join(`
`),g.length>0&&(g+=`
`),m=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x].filter(ph).join(`
`),m.length>0&&(m+=`
`)):(g=[xC(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&n.flatShading===!1?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(ph).join(`
`),m=[xC(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,x,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",f?"#define CUBEUV_TEXEL_WIDTH "+f.texelWidth:"",f?"#define CUBEUV_TEXEL_HEIGHT "+f.texelHeight:"",f?"#define CUBEUV_MAX_MIP "+f.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&n.flatShading===!1?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",n.logarithmicDepthBuffer?"#define USE_LOGARITHMIC_DEPTH_BUFFER":"",n.reversedDepthBuffer?"#define USE_REVERSED_DEPTH_BUFFER":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==Da?"#define TONE_MAPPING":"",n.toneMapping!==Da?_t.tonemapping_pars_fragment:"",n.toneMapping!==Da?KJ("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",_t.colorspace_pars_fragment,qJ("linearToOutputTexel",n.outputColorSpace),ZJ(),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"",`
`].filter(ph).join(`
`)),o=W_(o),o=pC(o,n),o=mC(o,n),a=W_(a),a=pC(a,n),a=mC(a,n),o=gC(o),a=gC(a),n.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,g=[p,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+g,m=["#define varying in",n.glslVersion===IA?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===IA?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+m);const w=_+g+o,S=_+m+a,N=dC(r,r.VERTEX_SHADER,w),k=dC(r,r.FRAGMENT_SHADER,S);r.attachShader(y,N),r.attachShader(y,k),n.index0AttributeName!==void 0?r.bindAttribLocation(y,0,n.index0AttributeName):n.morphTargets===!0&&r.bindAttribLocation(y,0,"position"),r.linkProgram(y);function R(j){if(t.debug.checkShaderErrors){const Y=r.getProgramInfoLog(y)||"",I=r.getShaderInfoLog(N)||"",v=r.getShaderInfoLog(k)||"",b=Y.trim(),E=I.trim(),P=v.trim();let C=!0,z=!0;if(r.getProgramParameter(y,r.LINK_STATUS)===!1)if(C=!1,typeof t.debug.onShaderError=="function")t.debug.onShaderError(r,y,N,k);else{const V=fC(r,N,"vertex"),U=fC(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(y,r.VALIDATE_STATUS)+`

Material Name: `+j.name+`
Material Type: `+j.type+`

Program Info Log: `+b+`
`+V+`
`+U)}else b!==""?console.warn("THREE.WebGLProgram: Program Info Log:",b):(E===""||P==="")&&(z=!1);z&&(j.diagnostics={runnable:C,programLog:b,vertexShader:{log:E,prefix:g},fragmentShader:{log:P,prefix:m}})}r.deleteShader(N),r.deleteShader(k),B=new x0(r,y),L=eee(r,y)}let B;this.getUniforms=function(){return B===void 0&&R(this),B};let L;this.getAttributes=function(){return L===void 0&&R(this),L};let D=n.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(y,GJ)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=$J++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=N,this.fragmentShader=k,this}let hee=0;class fee{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const n=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(n),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const n=this.materialCache.get(e);for(const i of n)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const n=this.materialCache;let i=n.get(e);return i===void 0&&(i=new Set,n.set(e,i)),i}_getShaderStage(e){const n=this.shaderCache;let i=n.get(e);return i===void 0&&(i=new pee(e),n.set(e,i)),i}}class pee{constructor(e){this.id=hee++,this.code=e,this.usedTimes=0}}function mee(t,e,n,i,r,s,o){const a=new i5,l=new fee,c=new Set,u=[],h=r.logarithmicDepthBuffer,f=r.vertexTextures;let p=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(L){return c.add(L),L===0?"uv":`uv${L}`}function g(L,D,j,Y,I){const v=Y.fog,b=I.geometry,E=L.isMeshStandardMaterial?Y.environment:null,P=(L.isMeshStandardMaterial?n:e).get(L.envMap||E),C=P&&P.mapping===Tx?P.image.height:null,z=x[L.type];L.precision!==null&&(p=r.getMaxPrecision(L.precision),p!==L.precision&&console.warn("THREE.WebGLProgram.getParameters:",L.precision,"not supported, using",p,"instead."));const V=b.morphAttributes.position||b.morphAttributes.normal||b.morphAttributes.color,U=V!==void 0?V.length:0;let T=0;b.morphAttributes.position!==void 0&&(T=1),b.morphAttributes.normal!==void 0&&(T=2),b.morphAttributes.color!==void 0&&(T=3);let G,K,ne,Z;if(z){const ut=Cs[z];G=ut.vertexShader,K=ut.fragmentShader}else G=L.vertexShader,K=L.fragmentShader,l.update(L),ne=l.getVertexShaderID(L),Z=l.getFragmentShaderID(L);const ee=t.getRenderTarget(),me=t.state.buffers.depth.getReversed(),pe=I.isInstancedMesh===!0,Se=I.isBatchedMesh===!0,Re=!!L.map,it=!!L.matcap,J=!!P,ot=!!L.aoMap,We=!!L.lightMap,He=!!L.bumpMap,Ee=!!L.normalMap,ft=!!L.displacementMap,$e=!!L.emissiveMap,De=!!L.metalnessMap,_e=!!L.roughnessMap,lt=L.anisotropy>0,X=L.clearcoat>0,H=L.dispersion>0,se=L.iridescence>0,ce=L.sheen>0,ye=L.transmission>0,fe=lt&&!!L.anisotropyMap,Ne=X&&!!L.clearcoatMap,O=X&&!!L.clearcoatNormalMap,M=X&&!!L.clearcoatRoughnessMap,A=se&&!!L.iridescenceMap,W=se&&!!L.iridescenceThicknessMap,q=ce&&!!L.sheenColorMap,te=ce&&!!L.sheenRoughnessMap,ie=!!L.specularMap,ve=!!L.specularColorMap,Ie=!!L.specularIntensityMap,Q=ye&&!!L.transmissionMap,we=ye&&!!L.thicknessMap,xe=!!L.gradientMap,Pe=!!L.alphaMap,Te=L.alphaTest>0,ge=!!L.alphaHash,Be=!!L.extensions;let gt=Da;L.toneMapped&&(ee===null||ee.isXRRenderTarget===!0)&&(gt=t.toneMapping);const mt={shaderID:z,shaderType:L.type,shaderName:L.name,vertexShader:G,fragmentShader:K,defines:L.defines,customVertexShaderID:ne,customFragmentShaderID:Z,isRawShaderMaterial:L.isRawShaderMaterial===!0,glslVersion:L.glslVersion,precision:p,batching:Se,batchingColor:Se&&I._colorsTexture!==null,instancing:pe,instancingColor:pe&&I.instanceColor!==null,instancingMorph:pe&&I.morphTexture!==null,supportsVertexTextures:f,outputColorSpace:ee===null?t.outputColorSpace:ee.isXRRenderTarget===!0?ee.texture.colorSpace:od,alphaToCoverage:!!L.alphaToCoverage,map:Re,matcap:it,envMap:J,envMapMode:J&&P.mapping,envMapCubeUVHeight:C,aoMap:ot,lightMap:We,bumpMap:He,normalMap:Ee,displacementMap:f&&ft,emissiveMap:$e,normalMapObjectSpace:Ee&&L.normalMapType===pq,normalMapTangentSpace:Ee&&L.normalMapType===fq,metalnessMap:De,roughnessMap:_e,anisotropy:lt,anisotropyMap:fe,clearcoat:X,clearcoatMap:Ne,clearcoatNormalMap:O,clearcoatRoughnessMap:M,dispersion:H,iridescence:se,iridescenceMap:A,iridescenceThicknessMap:W,sheen:ce,sheenColorMap:q,sheenRoughnessMap:te,specularMap:ie,specularColorMap:ve,specularIntensityMap:Ie,transmission:ye,transmissionMap:Q,thicknessMap:we,gradientMap:xe,opaque:L.transparent===!1&&L.blending===Pu&&L.alphaToCoverage===!1,alphaMap:Pe,alphaTest:Te,alphaHash:ge,combine:L.combine,mapUv:Re&&y(L.map.channel),aoMapUv:ot&&y(L.aoMap.channel),lightMapUv:We&&y(L.lightMap.channel),bumpMapUv:He&&y(L.bumpMap.channel),normalMapUv:Ee&&y(L.normalMap.channel),displacementMapUv:ft&&y(L.displacementMap.channel),emissiveMapUv:$e&&y(L.emissiveMap.channel),metalnessMapUv:De&&y(L.metalnessMap.channel),roughnessMapUv:_e&&y(L.roughnessMap.channel),anisotropyMapUv:fe&&y(L.anisotropyMap.channel),clearcoatMapUv:Ne&&y(L.clearcoatMap.channel),clearcoatNormalMapUv:O&&y(L.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:M&&y(L.clearcoatRoughnessMap.channel),iridescenceMapUv:A&&y(L.iridescenceMap.channel),iridescenceThicknessMapUv:W&&y(L.iridescenceThicknessMap.channel),sheenColorMapUv:q&&y(L.sheenColorMap.channel),sheenRoughnessMapUv:te&&y(L.sheenRoughnessMap.channel),specularMapUv:ie&&y(L.specularMap.channel),specularColorMapUv:ve&&y(L.specularColorMap.channel),specularIntensityMapUv:Ie&&y(L.specularIntensityMap.channel),transmissionMapUv:Q&&y(L.transmissionMap.channel),thicknessMapUv:we&&y(L.thicknessMap.channel),alphaMapUv:Pe&&y(L.alphaMap.channel),vertexTangents:!!b.attributes.tangent&&(Ee||lt),vertexColors:L.vertexColors,vertexAlphas:L.vertexColors===!0&&!!b.attributes.color&&b.attributes.color.itemSize===4,pointsUvs:I.isPoints===!0&&!!b.attributes.uv&&(Re||Pe),fog:!!v,useFog:L.fog===!0,fogExp2:!!v&&v.isFogExp2,flatShading:L.flatShading===!0&&L.wireframe===!1,sizeAttenuation:L.sizeAttenuation===!0,logarithmicDepthBuffer:h,reversedDepthBuffer:me,skinning:I.isSkinnedMesh===!0,morphTargets:b.morphAttributes.position!==void 0,morphNormals:b.morphAttributes.normal!==void 0,morphColors:b.morphAttributes.color!==void 0,morphTargetsCount:U,morphTextureStride:T,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:L.dithering,shadowMapEnabled:t.shadowMap.enabled&&j.length>0,shadowMapType:t.shadowMap.type,toneMapping:gt,decodeVideoTexture:Re&&L.map.isVideoTexture===!0&&kt.getTransfer(L.map.colorSpace)===Ht,decodeVideoTextureEmissive:$e&&L.emissiveMap.isVideoTexture===!0&&kt.getTransfer(L.emissiveMap.colorSpace)===Ht,premultipliedAlpha:L.premultipliedAlpha,doubleSided:L.side===vo,flipSided:L.side===lr,useDepthPacking:L.depthPacking>=0,depthPacking:L.depthPacking||0,index0AttributeName:L.index0AttributeName,extensionClipCullDistance:Be&&L.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Be&&L.extensions.multiDraw===!0||Se)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:L.customProgramCacheKey()};return mt.vertexUv1s=c.has(1),mt.vertexUv2s=c.has(2),mt.vertexUv3s=c.has(3),c.clear(),mt}function m(L){const D=[];if(L.shaderID?D.push(L.shaderID):(D.push(L.customVertexShaderID),D.push(L.customFragmentShaderID)),L.defines!==void 0)for(const j in L.defines)D.push(j),D.push(L.defines[j]);return L.isRawShaderMaterial===!1&&(_(D,L),w(D,L),D.push(t.outputColorSpace)),D.push(L.customProgramCacheKey),D.join()}function _(L,D){L.push(D.precision),L.push(D.outputColorSpace),L.push(D.envMapMode),L.push(D.envMapCubeUVHeight),L.push(D.mapUv),L.push(D.alphaMapUv),L.push(D.lightMapUv),L.push(D.aoMapUv),L.push(D.bumpMapUv),L.push(D.normalMapUv),L.push(D.displacementMapUv),L.push(D.emissiveMapUv),L.push(D.metalnessMapUv),L.push(D.roughnessMapUv),L.push(D.anisotropyMapUv),L.push(D.clearcoatMapUv),L.push(D.clearcoatNormalMapUv),L.push(D.clearcoatRoughnessMapUv),L.push(D.iridescenceMapUv),L.push(D.iridescenceThicknessMapUv),L.push(D.sheenColorMapUv),L.push(D.sheenRoughnessMapUv),L.push(D.specularMapUv),L.push(D.specularColorMapUv),L.push(D.specularIntensityMapUv),L.push(D.transmissionMapUv),L.push(D.thicknessMapUv),L.push(D.combine),L.push(D.fogExp2),L.push(D.sizeAttenuation),L.push(D.morphTargetsCount),L.push(D.morphAttributeCount),L.push(D.numDirLights),L.push(D.numPointLights),L.push(D.numSpotLights),L.push(D.numSpotLightMaps),L.push(D.numHemiLights),L.push(D.numRectAreaLights),L.push(D.numDirLightShadows),L.push(D.numPointLightShadows),L.push(D.numSpotLightShadows),L.push(D.numSpotLightShadowsWithMaps),L.push(D.numLightProbes),L.push(D.shadowMapType),L.push(D.toneMapping),L.push(D.numClippingPlanes),L.push(D.numClipIntersection),L.push(D.depthPacking)}function w(L,D){a.disableAll(),D.supportsVertexTextures&&a.enable(0),D.instancing&&a.enable(1),D.instancingColor&&a.enable(2),D.instancingMorph&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),D.dispersion&&a.enable(20),D.batchingColor&&a.enable(21),D.gradientMap&&a.enable(22),L.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.reversedDepthBuffer&&a.enable(4),D.skinning&&a.enable(5),D.morphTargets&&a.enable(6),D.morphNormals&&a.enable(7),D.morphColors&&a.enable(8),D.premultipliedAlpha&&a.enable(9),D.shadowMapEnabled&&a.enable(10),D.doubleSided&&a.enable(11),D.flipSided&&a.enable(12),D.useDepthPacking&&a.enable(13),D.dithering&&a.enable(14),D.transmission&&a.enable(15),D.sheen&&a.enable(16),D.opaque&&a.enable(17),D.pointsUvs&&a.enable(18),D.decodeVideoTexture&&a.enable(19),D.decodeVideoTextureEmissive&&a.enable(20),D.alphaToCoverage&&a.enable(21),L.push(a.mask)}function S(L){const D=x[L.type];let j;if(D){const Y=Cs[D];j=Hq.clone(Y.uniforms)}else j=L.uniforms;return j}function N(L,D){let j;for(let Y=0,I=u.length;Y<I;Y++){const v=u[Y];if(v.cacheKey===D){j=v,++j.usedTimes;break}}return j===void 0&&(j=new dee(t,D,L,s),u.push(j)),j}function k(L){if(--L.usedTimes===0){const D=u.indexOf(L);u[D]=u[u.length-1],u.pop(),L.destroy()}}function R(L){l.remove(L)}function B(){l.dispose()}return{getParameters:g,getProgramCacheKey:m,getUniforms:S,acquireProgram:N,releaseProgram:k,releaseShaderCache:R,programs:u,dispose:B}}function gee(){let t=new WeakMap;function e(o){return t.has(o)}function n(o){let a=t.get(o);return a===void 0&&(a={},t.set(o,a)),a}function i(o){t.delete(o)}function r(o,a,l){t.get(o)[a]=l}function s(){t=new WeakMap}return{has:e,get:n,remove:i,update:r,dispose:s}}function xee(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function yC(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function vC(){const t=[];let e=0;const n=[],i=[],r=[];function s(){e=0,n.length=0,i.length=0,r.length=0}function o(h,f,p,x,y,g){let m=t[e];return m===void 0?(m={id:h.id,object:h,geometry:f,material:p,groupOrder:x,renderOrder:h.renderOrder,z:y,group:g},t[e]=m):(m.id=h.id,m.object=h,m.geometry=f,m.material=p,m.groupOrder=x,m.renderOrder=h.renderOrder,m.z=y,m.group=g),e++,m}function a(h,f,p,x,y,g){const m=o(h,f,p,x,y,g);p.transmission>0?i.push(m):p.transparent===!0?r.push(m):n.push(m)}function l(h,f,p,x,y,g){const m=o(h,f,p,x,y,g);p.transmission>0?i.unshift(m):p.transparent===!0?r.unshift(m):n.unshift(m)}function c(h,f){n.length>1&&n.sort(h||xee),i.length>1&&i.sort(f||yC),r.length>1&&r.sort(f||yC)}function u(){for(let h=e,f=t.length;h<f;h++){const p=t[h];if(p.id===null)break;p.id=null,p.object=null,p.geometry=null,p.material=null,p.group=null}}return{opaque:n,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function yee(){let t=new WeakMap;function e(i,r){const s=t.get(i);let o;return s===void 0?(o=new vC,t.set(i,[o])):r>=s.length?(o=new vC,s.push(o)):o=s[r],o}function n(){t=new WeakMap}return{get:e,dispose:n}}function vee(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new he,color:new Gt};break;case"SpotLight":n={position:new he,direction:new he,color:new Gt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new he,color:new Gt,distance:0,decay:0};break;case"HemisphereLight":n={direction:new he,skyColor:new Gt,groundColor:new Gt};break;case"RectAreaLight":n={color:new Gt,position:new he,halfWidth:new he,halfHeight:new he};break}return t[e.id]=n,n}}}function wee(){const t={};return{get:function(e){if(t[e.id]!==void 0)return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vt};break;case"SpotLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vt};break;case"PointLight":n={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Vt,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let _ee=0;function bee(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function See(t){const e=new vee,n=wee(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new he);const r=new he,s=new Jn,o=new Jn;function a(c){let u=0,h=0,f=0;for(let L=0;L<9;L++)i.probe[L].set(0,0,0);let p=0,x=0,y=0,g=0,m=0,_=0,w=0,S=0,N=0,k=0,R=0;c.sort(bee);for(let L=0,D=c.length;L<D;L++){const j=c[L],Y=j.color,I=j.intensity,v=j.distance,b=j.shadow&&j.shadow.map?j.shadow.map.texture:null;if(j.isAmbientLight)u+=Y.r*I,h+=Y.g*I,f+=Y.b*I;else if(j.isLightProbe){for(let E=0;E<9;E++)i.probe[E].addScaledVector(j.sh.coefficients[E],I);R++}else if(j.isDirectionalLight){const E=e.get(j);if(E.color.copy(j.color).multiplyScalar(j.intensity),j.castShadow){const P=j.shadow,C=n.get(j);C.shadowIntensity=P.intensity,C.shadowBias=P.bias,C.shadowNormalBias=P.normalBias,C.shadowRadius=P.radius,C.shadowMapSize=P.mapSize,i.directionalShadow[p]=C,i.directionalShadowMap[p]=b,i.directionalShadowMatrix[p]=j.shadow.matrix,_++}i.directional[p]=E,p++}else if(j.isSpotLight){const E=e.get(j);E.position.setFromMatrixPosition(j.matrixWorld),E.color.copy(Y).multiplyScalar(I),E.distance=v,E.coneCos=Math.cos(j.angle),E.penumbraCos=Math.cos(j.angle*(1-j.penumbra)),E.decay=j.decay,i.spot[y]=E;const P=j.shadow;if(j.map&&(i.spotLightMap[N]=j.map,N++,P.updateMatrices(j),j.castShadow&&k++),i.spotLightMatrix[y]=P.matrix,j.castShadow){const C=n.get(j);C.shadowIntensity=P.intensity,C.shadowBias=P.bias,C.shadowNormalBias=P.normalBias,C.shadowRadius=P.radius,C.shadowMapSize=P.mapSize,i.spotShadow[y]=C,i.spotShadowMap[y]=b,S++}y++}else if(j.isRectAreaLight){const E=e.get(j);E.color.copy(Y).multiplyScalar(I),E.halfWidth.set(j.width*.5,0,0),E.halfHeight.set(0,j.height*.5,0),i.rectArea[g]=E,g++}else if(j.isPointLight){const E=e.get(j);if(E.color.copy(j.color).multiplyScalar(j.intensity),E.distance=j.distance,E.decay=j.decay,j.castShadow){const P=j.shadow,C=n.get(j);C.shadowIntensity=P.intensity,C.shadowBias=P.bias,C.shadowNormalBias=P.normalBias,C.shadowRadius=P.radius,C.shadowMapSize=P.mapSize,C.shadowCameraNear=P.camera.near,C.shadowCameraFar=P.camera.far,i.pointShadow[x]=C,i.pointShadowMap[x]=b,i.pointShadowMatrix[x]=j.shadow.matrix,w++}i.point[x]=E,x++}else if(j.isHemisphereLight){const E=e.get(j);E.skyColor.copy(j.color).multiplyScalar(I),E.groundColor.copy(j.groundColor).multiplyScalar(I),i.hemi[m]=E,m++}}g>0&&(t.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Fe.LTC_FLOAT_1,i.rectAreaLTC2=Fe.LTC_FLOAT_2):(i.rectAreaLTC1=Fe.LTC_HALF_1,i.rectAreaLTC2=Fe.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=h,i.ambient[2]=f;const B=i.hash;(B.directionalLength!==p||B.pointLength!==x||B.spotLength!==y||B.rectAreaLength!==g||B.hemiLength!==m||B.numDirectionalShadows!==_||B.numPointShadows!==w||B.numSpotShadows!==S||B.numSpotMaps!==N||B.numLightProbes!==R)&&(i.directional.length=p,i.spot.length=y,i.rectArea.length=g,i.point.length=x,i.hemi.length=m,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=S,i.spotShadowMap.length=S,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=S+N-k,i.spotLightMap.length=N,i.numSpotLightShadowsWithMaps=k,i.numLightProbes=R,B.directionalLength=p,B.pointLength=x,B.spotLength=y,B.rectAreaLength=g,B.hemiLength=m,B.numDirectionalShadows=_,B.numPointShadows=w,B.numSpotShadows=S,B.numSpotMaps=N,B.numLightProbes=R,i.version=_ee++)}function l(c,u){let h=0,f=0,p=0,x=0,y=0;const g=u.matrixWorldInverse;for(let m=0,_=c.length;m<_;m++){const w=c[m];if(w.isDirectionalLight){const S=i.directional[h];S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),h++}else if(w.isSpotLight){const S=i.spot[p];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(g),S.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),p++}else if(w.isRectAreaLight){const S=i.rectArea[x];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(g),o.identity(),s.copy(w.matrixWorld),s.premultiply(g),o.extractRotation(s),S.halfWidth.set(w.width*.5,0,0),S.halfHeight.set(0,w.height*.5,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),x++}else if(w.isPointLight){const S=i.point[f];S.position.setFromMatrixPosition(w.matrixWorld),S.position.applyMatrix4(g),f++}else if(w.isHemisphereLight){const S=i.hemi[y];S.direction.setFromMatrixPosition(w.matrixWorld),S.direction.transformDirection(g),y++}}}return{setup:a,setupView:l,state:i}}function wC(t){const e=new See(t),n=[],i=[];function r(u){c.camera=u,n.length=0,i.length=0}function s(u){n.push(u)}function o(u){i.push(u)}function a(){e.setup(n)}function l(u){e.setupView(n,u)}const c={lightsArray:n,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Mee(t){let e=new WeakMap;function n(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new wC(t),e.set(r,[a])):s>=o.length?(a=new wC(t),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:n,dispose:i}}const Eee=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Tee=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Aee(t,e,n){let i=new d5;const r=new Vt,s=new Vt,o=new On,a=new eK({depthPacking:hq}),l=new tK,c={},u=n.maxTextureSize,h={[Ha]:lr,[lr]:Ha,[vo]:vo},f=new jo({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Vt},radius:{value:4}},vertexShader:Eee,fragmentShader:Tee}),p=f.clone();p.defines.HORIZONTAL_PASS=1;const x=new bc;x.setAttribute("position",new zs(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const y=new Bs(x,f),g=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=WP;let m=this.type;this.render=function(k,R,B){if(g.enabled===!1||g.autoUpdate===!1&&g.needsUpdate===!1||k.length===0)return;const L=t.getRenderTarget(),D=t.getActiveCubeFace(),j=t.getActiveMipmapLevel(),Y=t.state;Y.setBlending(Pa),Y.buffers.depth.getReversed()===!0?Y.buffers.color.setClear(0,0,0,0):Y.buffers.color.setClear(1,1,1,1),Y.buffers.depth.setTest(!0),Y.setScissorTest(!1);const I=m!==so&&this.type===so,v=m===so&&this.type!==so;for(let b=0,E=k.length;b<E;b++){const P=k[b],C=P.shadow;if(C===void 0){console.warn("THREE.WebGLShadowMap:",P,"has no shadow.");continue}if(C.autoUpdate===!1&&C.needsUpdate===!1)continue;r.copy(C.mapSize);const z=C.getFrameExtents();if(r.multiply(z),s.copy(C.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/z.x),r.x=s.x*z.x,C.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/z.y),r.y=s.y*z.y,C.mapSize.y=s.y)),C.map===null||I===!0||v===!0){const U=this.type!==so?{minFilter:gs,magFilter:gs}:{};C.map!==null&&C.map.dispose(),C.map=new uc(r.x,r.y,U),C.map.texture.name=P.name+".shadowMap",C.camera.updateProjectionMatrix()}t.setRenderTarget(C.map),t.clear();const V=C.getViewportCount();for(let U=0;U<V;U++){const T=C.getViewport(U);o.set(s.x*T.x,s.y*T.y,s.x*T.z,s.y*T.w),Y.viewport(o),C.updateMatrices(P,U),i=C.getFrustum(),S(R,B,C.camera,P,this.type)}C.isPointLightShadow!==!0&&this.type===so&&_(C,B),C.needsUpdate=!1}m=this.type,g.needsUpdate=!1,t.setRenderTarget(L,D,j)};function _(k,R){const B=e.update(y);f.defines.VSM_SAMPLES!==k.blurSamples&&(f.defines.VSM_SAMPLES=k.blurSamples,p.defines.VSM_SAMPLES=k.blurSamples,f.needsUpdate=!0,p.needsUpdate=!0),k.mapPass===null&&(k.mapPass=new uc(r.x,r.y)),f.uniforms.shadow_pass.value=k.map.texture,f.uniforms.resolution.value=k.mapSize,f.uniforms.radius.value=k.radius,t.setRenderTarget(k.mapPass),t.clear(),t.renderBufferDirect(R,null,B,f,y,null),p.uniforms.shadow_pass.value=k.mapPass.texture,p.uniforms.resolution.value=k.mapSize,p.uniforms.radius.value=k.radius,t.setRenderTarget(k.map),t.clear(),t.renderBufferDirect(R,null,B,p,y,null)}function w(k,R,B,L){let D=null;const j=B.isPointLight===!0?k.customDistanceMaterial:k.customDepthMaterial;if(j!==void 0)D=j;else if(D=B.isPointLight===!0?l:a,t.localClippingEnabled&&R.clipShadows===!0&&Array.isArray(R.clippingPlanes)&&R.clippingPlanes.length!==0||R.displacementMap&&R.displacementScale!==0||R.alphaMap&&R.alphaTest>0||R.map&&R.alphaTest>0||R.alphaToCoverage===!0){const Y=D.uuid,I=R.uuid;let v=c[Y];v===void 0&&(v={},c[Y]=v);let b=v[I];b===void 0&&(b=D.clone(),v[I]=b,R.addEventListener("dispose",N)),D=b}if(D.visible=R.visible,D.wireframe=R.wireframe,L===so?D.side=R.shadowSide!==null?R.shadowSide:R.side:D.side=R.shadowSide!==null?R.shadowSide:h[R.side],D.alphaMap=R.alphaMap,D.alphaTest=R.alphaToCoverage===!0?.5:R.alphaTest,D.map=R.map,D.clipShadows=R.clipShadows,D.clippingPlanes=R.clippingPlanes,D.clipIntersection=R.clipIntersection,D.displacementMap=R.displacementMap,D.displacementScale=R.displacementScale,D.displacementBias=R.displacementBias,D.wireframeLinewidth=R.wireframeLinewidth,D.linewidth=R.linewidth,B.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const Y=t.properties.get(D);Y.light=B}return D}function S(k,R,B,L,D){if(k.visible===!1)return;if(k.layers.test(R.layers)&&(k.isMesh||k.isLine||k.isPoints)&&(k.castShadow||k.receiveShadow&&D===so)&&(!k.frustumCulled||i.intersectsObject(k))){k.modelViewMatrix.multiplyMatrices(B.matrixWorldInverse,k.matrixWorld);const I=e.update(k),v=k.material;if(Array.isArray(v)){const b=I.groups;for(let E=0,P=b.length;E<P;E++){const C=b[E],z=v[C.materialIndex];if(z&&z.visible){const V=w(k,z,L,D);k.onBeforeShadow(t,k,R,B,I,V,C),t.renderBufferDirect(B,null,I,V,k,C),k.onAfterShadow(t,k,R,B,I,V,C)}}}else if(v.visible){const b=w(k,v,L,D);k.onBeforeShadow(t,k,R,B,I,b,null),t.renderBufferDirect(B,null,I,b,k,null),k.onAfterShadow(t,k,R,B,I,b,null)}}const Y=k.children;for(let I=0,v=Y.length;I<v;I++)S(Y[I],R,B,L,D)}function N(k){k.target.removeEventListener("dispose",N);for(const B in c){const L=c[B],D=k.target.uuid;D in L&&(L[D].dispose(),delete L[D])}}}const Cee={[i_]:r_,[s_]:l_,[o_]:c_,[id]:a_,[r_]:i_,[l_]:s_,[c_]:o_,[a_]:id};function Nee(t,e){function n(){let Q=!1;const we=new On;let xe=null;const Pe=new On(0,0,0,0);return{setMask:function(Te){xe!==Te&&!Q&&(t.colorMask(Te,Te,Te,Te),xe=Te)},setLocked:function(Te){Q=Te},setClear:function(Te,ge,Be,gt,mt){mt===!0&&(Te*=gt,ge*=gt,Be*=gt),we.set(Te,ge,Be,gt),Pe.equals(we)===!1&&(t.clearColor(Te,ge,Be,gt),Pe.copy(we))},reset:function(){Q=!1,xe=null,Pe.set(-1,0,0,0)}}}function i(){let Q=!1,we=!1,xe=null,Pe=null,Te=null;return{setReversed:function(ge){if(we!==ge){const Be=e.get("EXT_clip_control");ge?Be.clipControlEXT(Be.LOWER_LEFT_EXT,Be.ZERO_TO_ONE_EXT):Be.clipControlEXT(Be.LOWER_LEFT_EXT,Be.NEGATIVE_ONE_TO_ONE_EXT),we=ge;const gt=Te;Te=null,this.setClear(gt)}},getReversed:function(){return we},setTest:function(ge){ge?ee(t.DEPTH_TEST):me(t.DEPTH_TEST)},setMask:function(ge){xe!==ge&&!Q&&(t.depthMask(ge),xe=ge)},setFunc:function(ge){if(we&&(ge=Cee[ge]),Pe!==ge){switch(ge){case i_:t.depthFunc(t.NEVER);break;case r_:t.depthFunc(t.ALWAYS);break;case s_:t.depthFunc(t.LESS);break;case id:t.depthFunc(t.LEQUAL);break;case o_:t.depthFunc(t.EQUAL);break;case a_:t.depthFunc(t.GEQUAL);break;case l_:t.depthFunc(t.GREATER);break;case c_:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}Pe=ge}},setLocked:function(ge){Q=ge},setClear:function(ge){Te!==ge&&(we&&(ge=1-ge),t.clearDepth(ge),Te=ge)},reset:function(){Q=!1,xe=null,Pe=null,Te=null,we=!1}}}function r(){let Q=!1,we=null,xe=null,Pe=null,Te=null,ge=null,Be=null,gt=null,mt=null;return{setTest:function(ut){Q||(ut?ee(t.STENCIL_TEST):me(t.STENCIL_TEST))},setMask:function(ut){we!==ut&&!Q&&(t.stencilMask(ut),we=ut)},setFunc:function(ut,Rr,Bt){(xe!==ut||Pe!==Rr||Te!==Bt)&&(t.stencilFunc(ut,Rr,Bt),xe=ut,Pe=Rr,Te=Bt)},setOp:function(ut,Rr,Bt){(ge!==ut||Be!==Rr||gt!==Bt)&&(t.stencilOp(ut,Rr,Bt),ge=ut,Be=Rr,gt=Bt)},setLocked:function(ut){Q=ut},setClear:function(ut){mt!==ut&&(t.clearStencil(ut),mt=ut)},reset:function(){Q=!1,we=null,xe=null,Pe=null,Te=null,ge=null,Be=null,gt=null,mt=null}}}const s=new n,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let u={},h={},f=new WeakMap,p=[],x=null,y=!1,g=null,m=null,_=null,w=null,S=null,N=null,k=null,R=new Gt(0,0,0),B=0,L=!1,D=null,j=null,Y=null,I=null,v=null;const b=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let E=!1,P=0;const C=t.getParameter(t.VERSION);C.indexOf("WebGL")!==-1?(P=parseFloat(/^WebGL (\d)/.exec(C)[1]),E=P>=1):C.indexOf("OpenGL ES")!==-1&&(P=parseFloat(/^OpenGL ES (\d)/.exec(C)[1]),E=P>=2);let z=null,V={};const U=t.getParameter(t.SCISSOR_BOX),T=t.getParameter(t.VIEWPORT),G=new On().fromArray(U),K=new On().fromArray(T);function ne(Q,we,xe,Pe){const Te=new Uint8Array(4),ge=t.createTexture();t.bindTexture(Q,ge),t.texParameteri(Q,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(Q,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let Be=0;Be<xe;Be++)Q===t.TEXTURE_3D||Q===t.TEXTURE_2D_ARRAY?t.texImage3D(we,0,t.RGBA,1,1,Pe,0,t.RGBA,t.UNSIGNED_BYTE,Te):t.texImage2D(we+Be,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,Te);return ge}const Z={};Z[t.TEXTURE_2D]=ne(t.TEXTURE_2D,t.TEXTURE_2D,1),Z[t.TEXTURE_CUBE_MAP]=ne(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),Z[t.TEXTURE_2D_ARRAY]=ne(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),Z[t.TEXTURE_3D]=ne(t.TEXTURE_3D,t.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),ee(t.DEPTH_TEST),o.setFunc(id),He(!1),Ee(TA),ee(t.CULL_FACE),ot(Pa);function ee(Q){u[Q]!==!0&&(t.enable(Q),u[Q]=!0)}function me(Q){u[Q]!==!1&&(t.disable(Q),u[Q]=!1)}function pe(Q,we){return h[Q]!==we?(t.bindFramebuffer(Q,we),h[Q]=we,Q===t.DRAW_FRAMEBUFFER&&(h[t.FRAMEBUFFER]=we),Q===t.FRAMEBUFFER&&(h[t.DRAW_FRAMEBUFFER]=we),!0):!1}function Se(Q,we){let xe=p,Pe=!1;if(Q){xe=f.get(we),xe===void 0&&(xe=[],f.set(we,xe));const Te=Q.textures;if(xe.length!==Te.length||xe[0]!==t.COLOR_ATTACHMENT0){for(let ge=0,Be=Te.length;ge<Be;ge++)xe[ge]=t.COLOR_ATTACHMENT0+ge;xe.length=Te.length,Pe=!0}}else xe[0]!==t.BACK&&(xe[0]=t.BACK,Pe=!0);Pe&&t.drawBuffers(xe)}function Re(Q){return x!==Q?(t.useProgram(Q),x=Q,!0):!1}const it={[Al]:t.FUNC_ADD,[OX]:t.FUNC_SUBTRACT,[jX]:t.FUNC_REVERSE_SUBTRACT};it[FX]=t.MIN,it[zX]=t.MAX;const J={[VX]:t.ZERO,[WX]:t.ONE,[HX]:t.SRC_COLOR,[t_]:t.SRC_ALPHA,[KX]:t.SRC_ALPHA_SATURATE,[XX]:t.DST_COLOR,[$X]:t.DST_ALPHA,[GX]:t.ONE_MINUS_SRC_COLOR,[n_]:t.ONE_MINUS_SRC_ALPHA,[qX]:t.ONE_MINUS_DST_COLOR,[YX]:t.ONE_MINUS_DST_ALPHA,[ZX]:t.CONSTANT_COLOR,[QX]:t.ONE_MINUS_CONSTANT_COLOR,[JX]:t.CONSTANT_ALPHA,[eq]:t.ONE_MINUS_CONSTANT_ALPHA};function ot(Q,we,xe,Pe,Te,ge,Be,gt,mt,ut){if(Q===Pa){y===!0&&(me(t.BLEND),y=!1);return}if(y===!1&&(ee(t.BLEND),y=!0),Q!==UX){if(Q!==g||ut!==L){if((m!==Al||S!==Al)&&(t.blendEquation(t.FUNC_ADD),m=Al,S=Al),ut)switch(Q){case Pu:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case AA:t.blendFunc(t.ONE,t.ONE);break;case CA:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case NA:t.blendFuncSeparate(t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ZERO,t.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}else switch(Q){case Pu:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case AA:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE,t.ONE,t.ONE);break;case CA:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case NA:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",Q);break}_=null,w=null,N=null,k=null,R.set(0,0,0),B=0,g=Q,L=ut}return}Te=Te||we,ge=ge||xe,Be=Be||Pe,(we!==m||Te!==S)&&(t.blendEquationSeparate(it[we],it[Te]),m=we,S=Te),(xe!==_||Pe!==w||ge!==N||Be!==k)&&(t.blendFuncSeparate(J[xe],J[Pe],J[ge],J[Be]),_=xe,w=Pe,N=ge,k=Be),(gt.equals(R)===!1||mt!==B)&&(t.blendColor(gt.r,gt.g,gt.b,mt),R.copy(gt),B=mt),g=Q,L=!1}function We(Q,we){Q.side===vo?me(t.CULL_FACE):ee(t.CULL_FACE);let xe=Q.side===lr;we&&(xe=!xe),He(xe),Q.blending===Pu&&Q.transparent===!1?ot(Pa):ot(Q.blending,Q.blendEquation,Q.blendSrc,Q.blendDst,Q.blendEquationAlpha,Q.blendSrcAlpha,Q.blendDstAlpha,Q.blendColor,Q.blendAlpha,Q.premultipliedAlpha),o.setFunc(Q.depthFunc),o.setTest(Q.depthTest),o.setMask(Q.depthWrite),s.setMask(Q.colorWrite);const Pe=Q.stencilWrite;a.setTest(Pe),Pe&&(a.setMask(Q.stencilWriteMask),a.setFunc(Q.stencilFunc,Q.stencilRef,Q.stencilFuncMask),a.setOp(Q.stencilFail,Q.stencilZFail,Q.stencilZPass)),$e(Q.polygonOffset,Q.polygonOffsetFactor,Q.polygonOffsetUnits),Q.alphaToCoverage===!0?ee(t.SAMPLE_ALPHA_TO_COVERAGE):me(t.SAMPLE_ALPHA_TO_COVERAGE)}function He(Q){D!==Q&&(Q?t.frontFace(t.CW):t.frontFace(t.CCW),D=Q)}function Ee(Q){Q!==PX?(ee(t.CULL_FACE),Q!==j&&(Q===TA?t.cullFace(t.BACK):Q===DX?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):me(t.CULL_FACE),j=Q}function ft(Q){Q!==Y&&(E&&t.lineWidth(Q),Y=Q)}function $e(Q,we,xe){Q?(ee(t.POLYGON_OFFSET_FILL),(I!==we||v!==xe)&&(t.polygonOffset(we,xe),I=we,v=xe)):me(t.POLYGON_OFFSET_FILL)}function De(Q){Q?ee(t.SCISSOR_TEST):me(t.SCISSOR_TEST)}function _e(Q){Q===void 0&&(Q=t.TEXTURE0+b-1),z!==Q&&(t.activeTexture(Q),z=Q)}function lt(Q,we,xe){xe===void 0&&(z===null?xe=t.TEXTURE0+b-1:xe=z);let Pe=V[xe];Pe===void 0&&(Pe={type:void 0,texture:void 0},V[xe]=Pe),(Pe.type!==Q||Pe.texture!==we)&&(z!==xe&&(t.activeTexture(xe),z=xe),t.bindTexture(Q,we||Z[Q]),Pe.type=Q,Pe.texture=we)}function X(){const Q=V[z];Q!==void 0&&Q.type!==void 0&&(t.bindTexture(Q.type,null),Q.type=void 0,Q.texture=void 0)}function H(){try{t.compressedTexImage2D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function se(){try{t.compressedTexImage3D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ce(){try{t.texSubImage2D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function ye(){try{t.texSubImage3D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function fe(){try{t.compressedTexSubImage2D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function Ne(){try{t.compressedTexSubImage3D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function O(){try{t.texStorage2D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function M(){try{t.texStorage3D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function A(){try{t.texImage2D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function W(){try{t.texImage3D(...arguments)}catch(Q){console.error("THREE.WebGLState:",Q)}}function q(Q){G.equals(Q)===!1&&(t.scissor(Q.x,Q.y,Q.z,Q.w),G.copy(Q))}function te(Q){K.equals(Q)===!1&&(t.viewport(Q.x,Q.y,Q.z,Q.w),K.copy(Q))}function ie(Q,we){let xe=c.get(we);xe===void 0&&(xe=new WeakMap,c.set(we,xe));let Pe=xe.get(Q);Pe===void 0&&(Pe=t.getUniformBlockIndex(we,Q.name),xe.set(Q,Pe))}function ve(Q,we){const Pe=c.get(we).get(Q);l.get(we)!==Pe&&(t.uniformBlockBinding(we,Pe,Q.__bindingPointIndex),l.set(we,Pe))}function Ie(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),o.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),u={},z=null,V={},h={},f=new WeakMap,p=[],x=null,y=!1,g=null,m=null,_=null,w=null,S=null,N=null,k=null,R=new Gt(0,0,0),B=0,L=!1,D=null,j=null,Y=null,I=null,v=null,G.set(0,0,t.canvas.width,t.canvas.height),K.set(0,0,t.canvas.width,t.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:ee,disable:me,bindFramebuffer:pe,drawBuffers:Se,useProgram:Re,setBlending:ot,setMaterial:We,setFlipSided:He,setCullFace:Ee,setLineWidth:ft,setPolygonOffset:$e,setScissorTest:De,activeTexture:_e,bindTexture:lt,unbindTexture:X,compressedTexImage2D:H,compressedTexImage3D:se,texImage2D:A,texImage3D:W,updateUBOMapping:ie,uniformBlockBinding:ve,texStorage2D:O,texStorage3D:M,texSubImage2D:ce,texSubImage3D:ye,compressedTexSubImage2D:fe,compressedTexSubImage3D:Ne,scissor:q,viewport:te,reset:Ie}}function Ree(t,e,n,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Vt,u=new WeakMap;let h;const f=new WeakMap;let p=!1;try{p=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x(X,H){return p?new OffscreenCanvas(X,H):Sg("canvas")}function y(X,H,se){let ce=1;const ye=lt(X);if((ye.width>se||ye.height>se)&&(ce=se/Math.max(ye.width,ye.height)),ce<1)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap||typeof VideoFrame<"u"&&X instanceof VideoFrame){const fe=Math.floor(ce*ye.width),Ne=Math.floor(ce*ye.height);h===void 0&&(h=x(fe,Ne));const O=H?x(fe,Ne):h;return O.width=fe,O.height=Ne,O.getContext("2d").drawImage(X,0,0,fe,Ne),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ye.width+"x"+ye.height+") to ("+fe+"x"+Ne+")."),O}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ye.width+"x"+ye.height+")."),X;return X}function g(X){return X.generateMipmaps}function m(X){t.generateMipmap(X)}function _(X){return X.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:X.isWebGL3DRenderTarget?t.TEXTURE_3D:X.isWebGLArrayRenderTarget||X.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function w(X,H,se,ce,ye=!1){if(X!==null){if(t[X]!==void 0)return t[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let fe=H;if(H===t.RED&&(se===t.FLOAT&&(fe=t.R32F),se===t.HALF_FLOAT&&(fe=t.R16F),se===t.UNSIGNED_BYTE&&(fe=t.R8)),H===t.RED_INTEGER&&(se===t.UNSIGNED_BYTE&&(fe=t.R8UI),se===t.UNSIGNED_SHORT&&(fe=t.R16UI),se===t.UNSIGNED_INT&&(fe=t.R32UI),se===t.BYTE&&(fe=t.R8I),se===t.SHORT&&(fe=t.R16I),se===t.INT&&(fe=t.R32I)),H===t.RG&&(se===t.FLOAT&&(fe=t.RG32F),se===t.HALF_FLOAT&&(fe=t.RG16F),se===t.UNSIGNED_BYTE&&(fe=t.RG8)),H===t.RG_INTEGER&&(se===t.UNSIGNED_BYTE&&(fe=t.RG8UI),se===t.UNSIGNED_SHORT&&(fe=t.RG16UI),se===t.UNSIGNED_INT&&(fe=t.RG32UI),se===t.BYTE&&(fe=t.RG8I),se===t.SHORT&&(fe=t.RG16I),se===t.INT&&(fe=t.RG32I)),H===t.RGB_INTEGER&&(se===t.UNSIGNED_BYTE&&(fe=t.RGB8UI),se===t.UNSIGNED_SHORT&&(fe=t.RGB16UI),se===t.UNSIGNED_INT&&(fe=t.RGB32UI),se===t.BYTE&&(fe=t.RGB8I),se===t.SHORT&&(fe=t.RGB16I),se===t.INT&&(fe=t.RGB32I)),H===t.RGBA_INTEGER&&(se===t.UNSIGNED_BYTE&&(fe=t.RGBA8UI),se===t.UNSIGNED_SHORT&&(fe=t.RGBA16UI),se===t.UNSIGNED_INT&&(fe=t.RGBA32UI),se===t.BYTE&&(fe=t.RGBA8I),se===t.SHORT&&(fe=t.RGBA16I),se===t.INT&&(fe=t.RGBA32I)),H===t.RGB&&(se===t.UNSIGNED_INT_5_9_9_9_REV&&(fe=t.RGB9_E5),se===t.UNSIGNED_INT_10F_11F_11F_REV&&(fe=t.R11F_G11F_B10F)),H===t.RGBA){const Ne=ye?_g:kt.getTransfer(ce);se===t.FLOAT&&(fe=t.RGBA32F),se===t.HALF_FLOAT&&(fe=t.RGBA16F),se===t.UNSIGNED_BYTE&&(fe=Ne===Ht?t.SRGB8_ALPHA8:t.RGBA8),se===t.UNSIGNED_SHORT_4_4_4_4&&(fe=t.RGBA4),se===t.UNSIGNED_SHORT_5_5_5_1&&(fe=t.RGB5_A1)}return(fe===t.R16F||fe===t.R32F||fe===t.RG16F||fe===t.RG32F||fe===t.RGBA16F||fe===t.RGBA32F)&&e.get("EXT_color_buffer_float"),fe}function S(X,H){let se;return X?H===null||H===cc||H===_f?se=t.DEPTH24_STENCIL8:H===So?se=t.DEPTH32F_STENCIL8:H===wf&&(se=t.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):H===null||H===cc||H===_f?se=t.DEPTH_COMPONENT24:H===So?se=t.DEPTH_COMPONENT32F:H===wf&&(se=t.DEPTH_COMPONENT16),se}function N(X,H){return g(X)===!0||X.isFramebufferTexture&&X.minFilter!==gs&&X.minFilter!==Ps?Math.log2(Math.max(H.width,H.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?H.mipmaps.length:1}function k(X){const H=X.target;H.removeEventListener("dispose",k),B(H),H.isVideoTexture&&u.delete(H)}function R(X){const H=X.target;H.removeEventListener("dispose",R),D(H)}function B(X){const H=i.get(X);if(H.__webglInit===void 0)return;const se=X.source,ce=f.get(se);if(ce){const ye=ce[H.__cacheKey];ye.usedTimes--,ye.usedTimes===0&&L(X),Object.keys(ce).length===0&&f.delete(se)}i.remove(X)}function L(X){const H=i.get(X);t.deleteTexture(H.__webglTexture);const se=X.source,ce=f.get(se);delete ce[H.__cacheKey],o.memory.textures--}function D(X){const H=i.get(X);if(X.depthTexture&&(X.depthTexture.dispose(),i.remove(X.depthTexture)),X.isWebGLCubeRenderTarget)for(let ce=0;ce<6;ce++){if(Array.isArray(H.__webglFramebuffer[ce]))for(let ye=0;ye<H.__webglFramebuffer[ce].length;ye++)t.deleteFramebuffer(H.__webglFramebuffer[ce][ye]);else t.deleteFramebuffer(H.__webglFramebuffer[ce]);H.__webglDepthbuffer&&t.deleteRenderbuffer(H.__webglDepthbuffer[ce])}else{if(Array.isArray(H.__webglFramebuffer))for(let ce=0;ce<H.__webglFramebuffer.length;ce++)t.deleteFramebuffer(H.__webglFramebuffer[ce]);else t.deleteFramebuffer(H.__webglFramebuffer);if(H.__webglDepthbuffer&&t.deleteRenderbuffer(H.__webglDepthbuffer),H.__webglMultisampledFramebuffer&&t.deleteFramebuffer(H.__webglMultisampledFramebuffer),H.__webglColorRenderbuffer)for(let ce=0;ce<H.__webglColorRenderbuffer.length;ce++)H.__webglColorRenderbuffer[ce]&&t.deleteRenderbuffer(H.__webglColorRenderbuffer[ce]);H.__webglDepthRenderbuffer&&t.deleteRenderbuffer(H.__webglDepthRenderbuffer)}const se=X.textures;for(let ce=0,ye=se.length;ce<ye;ce++){const fe=i.get(se[ce]);fe.__webglTexture&&(t.deleteTexture(fe.__webglTexture),o.memory.textures--),i.remove(se[ce])}i.remove(X)}let j=0;function Y(){j=0}function I(){const X=j;return X>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+r.maxTextures),j+=1,X}function v(X){const H=[];return H.push(X.wrapS),H.push(X.wrapT),H.push(X.wrapR||0),H.push(X.magFilter),H.push(X.minFilter),H.push(X.anisotropy),H.push(X.internalFormat),H.push(X.format),H.push(X.type),H.push(X.generateMipmaps),H.push(X.premultiplyAlpha),H.push(X.flipY),H.push(X.unpackAlignment),H.push(X.colorSpace),H.join()}function b(X,H){const se=i.get(X);if(X.isVideoTexture&&De(X),X.isRenderTargetTexture===!1&&X.isExternalTexture!==!0&&X.version>0&&se.__version!==X.version){const ce=X.image;if(ce===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ce.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Z(se,X,H);return}}else X.isExternalTexture&&(se.__webglTexture=X.sourceTexture?X.sourceTexture:null);n.bindTexture(t.TEXTURE_2D,se.__webglTexture,t.TEXTURE0+H)}function E(X,H){const se=i.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&se.__version!==X.version){Z(se,X,H);return}n.bindTexture(t.TEXTURE_2D_ARRAY,se.__webglTexture,t.TEXTURE0+H)}function P(X,H){const se=i.get(X);if(X.isRenderTargetTexture===!1&&X.version>0&&se.__version!==X.version){Z(se,X,H);return}n.bindTexture(t.TEXTURE_3D,se.__webglTexture,t.TEXTURE0+H)}function C(X,H){const se=i.get(X);if(X.version>0&&se.__version!==X.version){ee(se,X,H);return}n.bindTexture(t.TEXTURE_CUBE_MAP,se.__webglTexture,t.TEXTURE0+H)}const z={[h_]:t.REPEAT,[Wl]:t.CLAMP_TO_EDGE,[f_]:t.MIRRORED_REPEAT},V={[gs]:t.NEAREST,[uq]:t.NEAREST_MIPMAP_NEAREST,[$p]:t.NEAREST_MIPMAP_LINEAR,[Ps]:t.LINEAR,[nv]:t.LINEAR_MIPMAP_NEAREST,[Hl]:t.LINEAR_MIPMAP_LINEAR},U={[mq]:t.NEVER,[_q]:t.ALWAYS,[gq]:t.LESS,[e5]:t.LEQUAL,[xq]:t.EQUAL,[wq]:t.GEQUAL,[yq]:t.GREATER,[vq]:t.NOTEQUAL};function T(X,H){if(H.type===So&&e.has("OES_texture_float_linear")===!1&&(H.magFilter===Ps||H.magFilter===nv||H.magFilter===$p||H.magFilter===Hl||H.minFilter===Ps||H.minFilter===nv||H.minFilter===$p||H.minFilter===Hl)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(X,t.TEXTURE_WRAP_S,z[H.wrapS]),t.texParameteri(X,t.TEXTURE_WRAP_T,z[H.wrapT]),(X===t.TEXTURE_3D||X===t.TEXTURE_2D_ARRAY)&&t.texParameteri(X,t.TEXTURE_WRAP_R,z[H.wrapR]),t.texParameteri(X,t.TEXTURE_MAG_FILTER,V[H.magFilter]),t.texParameteri(X,t.TEXTURE_MIN_FILTER,V[H.minFilter]),H.compareFunction&&(t.texParameteri(X,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(X,t.TEXTURE_COMPARE_FUNC,U[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(H.magFilter===gs||H.minFilter!==$p&&H.minFilter!==Hl||H.type===So&&e.has("OES_texture_float_linear")===!1)return;if(H.anisotropy>1||i.get(H).__currentAnisotropy){const se=e.get("EXT_texture_filter_anisotropic");t.texParameterf(X,se.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy}}}function G(X,H){let se=!1;X.__webglInit===void 0&&(X.__webglInit=!0,H.addEventListener("dispose",k));const ce=H.source;let ye=f.get(ce);ye===void 0&&(ye={},f.set(ce,ye));const fe=v(H);if(fe!==X.__cacheKey){ye[fe]===void 0&&(ye[fe]={texture:t.createTexture(),usedTimes:0},o.memory.textures++,se=!0),ye[fe].usedTimes++;const Ne=ye[X.__cacheKey];Ne!==void 0&&(ye[X.__cacheKey].usedTimes--,Ne.usedTimes===0&&L(H)),X.__cacheKey=fe,X.__webglTexture=ye[fe].texture}return se}function K(X,H,se){return Math.floor(Math.floor(X/se)/H)}function ne(X,H,se,ce){const fe=X.updateRanges;if(fe.length===0)n.texSubImage2D(t.TEXTURE_2D,0,0,0,H.width,H.height,se,ce,H.data);else{fe.sort((W,q)=>W.start-q.start);let Ne=0;for(let W=1;W<fe.length;W++){const q=fe[Ne],te=fe[W],ie=q.start+q.count,ve=K(te.start,H.width,4),Ie=K(q.start,H.width,4);te.start<=ie+1&&ve===Ie&&K(te.start+te.count-1,H.width,4)===ve?q.count=Math.max(q.count,te.start+te.count-q.start):(++Ne,fe[Ne]=te)}fe.length=Ne+1;const O=t.getParameter(t.UNPACK_ROW_LENGTH),M=t.getParameter(t.UNPACK_SKIP_PIXELS),A=t.getParameter(t.UNPACK_SKIP_ROWS);t.pixelStorei(t.UNPACK_ROW_LENGTH,H.width);for(let W=0,q=fe.length;W<q;W++){const te=fe[W],ie=Math.floor(te.start/4),ve=Math.ceil(te.count/4),Ie=ie%H.width,Q=Math.floor(ie/H.width),we=ve,xe=1;t.pixelStorei(t.UNPACK_SKIP_PIXELS,Ie),t.pixelStorei(t.UNPACK_SKIP_ROWS,Q),n.texSubImage2D(t.TEXTURE_2D,0,Ie,Q,we,xe,se,ce,H.data)}X.clearUpdateRanges(),t.pixelStorei(t.UNPACK_ROW_LENGTH,O),t.pixelStorei(t.UNPACK_SKIP_PIXELS,M),t.pixelStorei(t.UNPACK_SKIP_ROWS,A)}}function Z(X,H,se){let ce=t.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(ce=t.TEXTURE_2D_ARRAY),H.isData3DTexture&&(ce=t.TEXTURE_3D);const ye=G(X,H),fe=H.source;n.bindTexture(ce,X.__webglTexture,t.TEXTURE0+se);const Ne=i.get(fe);if(fe.version!==Ne.__version||ye===!0){n.activeTexture(t.TEXTURE0+se);const O=kt.getPrimaries(kt.workingColorSpace),M=H.colorSpace===fa?null:kt.getPrimaries(H.colorSpace),A=H.colorSpace===fa||O===M?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,H.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,H.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,A);let W=y(H.image,!1,r.maxTextureSize);W=_e(H,W);const q=s.convert(H.format,H.colorSpace),te=s.convert(H.type);let ie=w(H.internalFormat,q,te,H.colorSpace,H.isVideoTexture);T(ce,H);let ve;const Ie=H.mipmaps,Q=H.isVideoTexture!==!0,we=Ne.__version===void 0||ye===!0,xe=fe.dataReady,Pe=N(H,W);if(H.isDepthTexture)ie=S(H.format===Sf,H.type),we&&(Q?n.texStorage2D(t.TEXTURE_2D,1,ie,W.width,W.height):n.texImage2D(t.TEXTURE_2D,0,ie,W.width,W.height,0,q,te,null));else if(H.isDataTexture)if(Ie.length>0){Q&&we&&n.texStorage2D(t.TEXTURE_2D,Pe,ie,Ie[0].width,Ie[0].height);for(let Te=0,ge=Ie.length;Te<ge;Te++)ve=Ie[Te],Q?xe&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,ve.width,ve.height,q,te,ve.data):n.texImage2D(t.TEXTURE_2D,Te,ie,ve.width,ve.height,0,q,te,ve.data);H.generateMipmaps=!1}else Q?(we&&n.texStorage2D(t.TEXTURE_2D,Pe,ie,W.width,W.height),xe&&ne(H,W,q,te)):n.texImage2D(t.TEXTURE_2D,0,ie,W.width,W.height,0,q,te,W.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Q&&we&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Pe,ie,Ie[0].width,Ie[0].height,W.depth);for(let Te=0,ge=Ie.length;Te<ge;Te++)if(ve=Ie[Te],H.format!==ds)if(q!==null)if(Q){if(xe)if(H.layerUpdates.size>0){const Be=KA(ve.width,ve.height,H.format,H.type);for(const gt of H.layerUpdates){const mt=ve.data.subarray(gt*Be/ve.data.BYTES_PER_ELEMENT,(gt+1)*Be/ve.data.BYTES_PER_ELEMENT);n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,gt,ve.width,ve.height,1,q,mt)}H.clearLayerUpdates()}else n.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,0,ve.width,ve.height,W.depth,q,ve.data)}else n.compressedTexImage3D(t.TEXTURE_2D_ARRAY,Te,ie,ve.width,ve.height,W.depth,0,ve.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Q?xe&&n.texSubImage3D(t.TEXTURE_2D_ARRAY,Te,0,0,0,ve.width,ve.height,W.depth,q,te,ve.data):n.texImage3D(t.TEXTURE_2D_ARRAY,Te,ie,ve.width,ve.height,W.depth,0,q,te,ve.data)}else{Q&&we&&n.texStorage2D(t.TEXTURE_2D,Pe,ie,Ie[0].width,Ie[0].height);for(let Te=0,ge=Ie.length;Te<ge;Te++)ve=Ie[Te],H.format!==ds?q!==null?Q?xe&&n.compressedTexSubImage2D(t.TEXTURE_2D,Te,0,0,ve.width,ve.height,q,ve.data):n.compressedTexImage2D(t.TEXTURE_2D,Te,ie,ve.width,ve.height,0,ve.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Q?xe&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,ve.width,ve.height,q,te,ve.data):n.texImage2D(t.TEXTURE_2D,Te,ie,ve.width,ve.height,0,q,te,ve.data)}else if(H.isDataArrayTexture)if(Q){if(we&&n.texStorage3D(t.TEXTURE_2D_ARRAY,Pe,ie,W.width,W.height,W.depth),xe)if(H.layerUpdates.size>0){const Te=KA(W.width,W.height,H.format,H.type);for(const ge of H.layerUpdates){const Be=W.data.subarray(ge*Te/W.data.BYTES_PER_ELEMENT,(ge+1)*Te/W.data.BYTES_PER_ELEMENT);n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,ge,W.width,W.height,1,q,te,Be)}H.clearLayerUpdates()}else n.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,W.width,W.height,W.depth,q,te,W.data)}else n.texImage3D(t.TEXTURE_2D_ARRAY,0,ie,W.width,W.height,W.depth,0,q,te,W.data);else if(H.isData3DTexture)Q?(we&&n.texStorage3D(t.TEXTURE_3D,Pe,ie,W.width,W.height,W.depth),xe&&n.texSubImage3D(t.TEXTURE_3D,0,0,0,0,W.width,W.height,W.depth,q,te,W.data)):n.texImage3D(t.TEXTURE_3D,0,ie,W.width,W.height,W.depth,0,q,te,W.data);else if(H.isFramebufferTexture){if(we)if(Q)n.texStorage2D(t.TEXTURE_2D,Pe,ie,W.width,W.height);else{let Te=W.width,ge=W.height;for(let Be=0;Be<Pe;Be++)n.texImage2D(t.TEXTURE_2D,Be,ie,Te,ge,0,q,te,null),Te>>=1,ge>>=1}}else if(Ie.length>0){if(Q&&we){const Te=lt(Ie[0]);n.texStorage2D(t.TEXTURE_2D,Pe,ie,Te.width,Te.height)}for(let Te=0,ge=Ie.length;Te<ge;Te++)ve=Ie[Te],Q?xe&&n.texSubImage2D(t.TEXTURE_2D,Te,0,0,q,te,ve):n.texImage2D(t.TEXTURE_2D,Te,ie,q,te,ve);H.generateMipmaps=!1}else if(Q){if(we){const Te=lt(W);n.texStorage2D(t.TEXTURE_2D,Pe,ie,Te.width,Te.height)}xe&&n.texSubImage2D(t.TEXTURE_2D,0,0,0,q,te,W)}else n.texImage2D(t.TEXTURE_2D,0,ie,q,te,W);g(H)&&m(ce),Ne.__version=fe.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function ee(X,H,se){if(H.image.length!==6)return;const ce=G(X,H),ye=H.source;n.bindTexture(t.TEXTURE_CUBE_MAP,X.__webglTexture,t.TEXTURE0+se);const fe=i.get(ye);if(ye.version!==fe.__version||ce===!0){n.activeTexture(t.TEXTURE0+se);const Ne=kt.getPrimaries(kt.workingColorSpace),O=H.colorSpace===fa?null:kt.getPrimaries(H.colorSpace),M=H.colorSpace===fa||Ne===O?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,H.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,H.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,M);const A=H.isCompressedTexture||H.image[0].isCompressedTexture,W=H.image[0]&&H.image[0].isDataTexture,q=[];for(let ge=0;ge<6;ge++)!A&&!W?q[ge]=y(H.image[ge],!0,r.maxCubemapSize):q[ge]=W?H.image[ge].image:H.image[ge],q[ge]=_e(H,q[ge]);const te=q[0],ie=s.convert(H.format,H.colorSpace),ve=s.convert(H.type),Ie=w(H.internalFormat,ie,ve,H.colorSpace),Q=H.isVideoTexture!==!0,we=fe.__version===void 0||ce===!0,xe=ye.dataReady;let Pe=N(H,te);T(t.TEXTURE_CUBE_MAP,H);let Te;if(A){Q&&we&&n.texStorage2D(t.TEXTURE_CUBE_MAP,Pe,Ie,te.width,te.height);for(let ge=0;ge<6;ge++){Te=q[ge].mipmaps;for(let Be=0;Be<Te.length;Be++){const gt=Te[Be];H.format!==ds?ie!==null?Q?xe&&n.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be,0,0,gt.width,gt.height,ie,gt.data):n.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be,Ie,gt.width,gt.height,0,gt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Q?xe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be,0,0,gt.width,gt.height,ie,ve,gt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be,Ie,gt.width,gt.height,0,ie,ve,gt.data)}}}else{if(Te=H.mipmaps,Q&&we){Te.length>0&&Pe++;const ge=lt(q[0]);n.texStorage2D(t.TEXTURE_CUBE_MAP,Pe,Ie,ge.width,ge.height)}for(let ge=0;ge<6;ge++)if(W){Q?xe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,q[ge].width,q[ge].height,ie,ve,q[ge].data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,Ie,q[ge].width,q[ge].height,0,ie,ve,q[ge].data);for(let Be=0;Be<Te.length;Be++){const mt=Te[Be].image[ge].image;Q?xe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be+1,0,0,mt.width,mt.height,ie,ve,mt.data):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be+1,Ie,mt.width,mt.height,0,ie,ve,mt.data)}}else{Q?xe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,0,0,ie,ve,q[ge]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,0,Ie,ie,ve,q[ge]);for(let Be=0;Be<Te.length;Be++){const gt=Te[Be];Q?xe&&n.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be+1,0,0,ie,ve,gt.image[ge]):n.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+ge,Be+1,Ie,ie,ve,gt.image[ge])}}}g(H)&&m(t.TEXTURE_CUBE_MAP),fe.__version=ye.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function me(X,H,se,ce,ye,fe){const Ne=s.convert(se.format,se.colorSpace),O=s.convert(se.type),M=w(se.internalFormat,Ne,O,se.colorSpace),A=i.get(H),W=i.get(se);if(W.__renderTarget=H,!A.__hasExternalTextures){const q=Math.max(1,H.width>>fe),te=Math.max(1,H.height>>fe);ye===t.TEXTURE_3D||ye===t.TEXTURE_2D_ARRAY?n.texImage3D(ye,fe,M,q,te,H.depth,0,Ne,O,null):n.texImage2D(ye,fe,M,q,te,0,Ne,O,null)}n.bindFramebuffer(t.FRAMEBUFFER,X),$e(H)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,ce,ye,W.__webglTexture,0,ft(H)):(ye===t.TEXTURE_2D||ye>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&ye<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,ce,ye,W.__webglTexture,fe),n.bindFramebuffer(t.FRAMEBUFFER,null)}function pe(X,H,se){if(t.bindRenderbuffer(t.RENDERBUFFER,X),H.depthBuffer){const ce=H.depthTexture,ye=ce&&ce.isDepthTexture?ce.type:null,fe=S(H.stencilBuffer,ye),Ne=H.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,O=ft(H);$e(H)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,O,fe,H.width,H.height):se?t.renderbufferStorageMultisample(t.RENDERBUFFER,O,fe,H.width,H.height):t.renderbufferStorage(t.RENDERBUFFER,fe,H.width,H.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,Ne,t.RENDERBUFFER,X)}else{const ce=H.textures;for(let ye=0;ye<ce.length;ye++){const fe=ce[ye],Ne=s.convert(fe.format,fe.colorSpace),O=s.convert(fe.type),M=w(fe.internalFormat,Ne,O,fe.colorSpace),A=ft(H);se&&$e(H)===!1?t.renderbufferStorageMultisample(t.RENDERBUFFER,A,M,H.width,H.height):$e(H)?a.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,A,M,H.width,H.height):t.renderbufferStorage(t.RENDERBUFFER,M,H.width,H.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function Se(X,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(t.FRAMEBUFFER,X),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ce=i.get(H.depthTexture);ce.__renderTarget=H,(!ce.__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),b(H.depthTexture,0);const ye=ce.__webglTexture,fe=ft(H);if(H.depthTexture.format===bf)$e(H)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0,fe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,ye,0);else if(H.depthTexture.format===Sf)$e(H)?a.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0,fe):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,ye,0);else throw new Error("Unknown depthTexture format")}function Re(X){const H=i.get(X),se=X.isWebGLCubeRenderTarget===!0;if(H.__boundDepthTexture!==X.depthTexture){const ce=X.depthTexture;if(H.__depthDisposeCallback&&H.__depthDisposeCallback(),ce){const ye=()=>{delete H.__boundDepthTexture,delete H.__depthDisposeCallback,ce.removeEventListener("dispose",ye)};ce.addEventListener("dispose",ye),H.__depthDisposeCallback=ye}H.__boundDepthTexture=ce}if(X.depthTexture&&!H.__autoAllocateDepthBuffer){if(se)throw new Error("target.depthTexture not supported in Cube render targets");const ce=X.texture.mipmaps;ce&&ce.length>0?Se(H.__webglFramebuffer[0],X):Se(H.__webglFramebuffer,X)}else if(se){H.__webglDepthbuffer=[];for(let ce=0;ce<6;ce++)if(n.bindFramebuffer(t.FRAMEBUFFER,H.__webglFramebuffer[ce]),H.__webglDepthbuffer[ce]===void 0)H.__webglDepthbuffer[ce]=t.createRenderbuffer(),pe(H.__webglDepthbuffer[ce],X,!1);else{const ye=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,fe=H.__webglDepthbuffer[ce];t.bindRenderbuffer(t.RENDERBUFFER,fe),t.framebufferRenderbuffer(t.FRAMEBUFFER,ye,t.RENDERBUFFER,fe)}}else{const ce=X.texture.mipmaps;if(ce&&ce.length>0?n.bindFramebuffer(t.FRAMEBUFFER,H.__webglFramebuffer[0]):n.bindFramebuffer(t.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer===void 0)H.__webglDepthbuffer=t.createRenderbuffer(),pe(H.__webglDepthbuffer,X,!1);else{const ye=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,fe=H.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,fe),t.framebufferRenderbuffer(t.FRAMEBUFFER,ye,t.RENDERBUFFER,fe)}}n.bindFramebuffer(t.FRAMEBUFFER,null)}function it(X,H,se){const ce=i.get(X);H!==void 0&&me(ce.__webglFramebuffer,X,X.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),se!==void 0&&Re(X)}function J(X){const H=X.texture,se=i.get(X),ce=i.get(H);X.addEventListener("dispose",R);const ye=X.textures,fe=X.isWebGLCubeRenderTarget===!0,Ne=ye.length>1;if(Ne||(ce.__webglTexture===void 0&&(ce.__webglTexture=t.createTexture()),ce.__version=H.version,o.memory.textures++),fe){se.__webglFramebuffer=[];for(let O=0;O<6;O++)if(H.mipmaps&&H.mipmaps.length>0){se.__webglFramebuffer[O]=[];for(let M=0;M<H.mipmaps.length;M++)se.__webglFramebuffer[O][M]=t.createFramebuffer()}else se.__webglFramebuffer[O]=t.createFramebuffer()}else{if(H.mipmaps&&H.mipmaps.length>0){se.__webglFramebuffer=[];for(let O=0;O<H.mipmaps.length;O++)se.__webglFramebuffer[O]=t.createFramebuffer()}else se.__webglFramebuffer=t.createFramebuffer();if(Ne)for(let O=0,M=ye.length;O<M;O++){const A=i.get(ye[O]);A.__webglTexture===void 0&&(A.__webglTexture=t.createTexture(),o.memory.textures++)}if(X.samples>0&&$e(X)===!1){se.__webglMultisampledFramebuffer=t.createFramebuffer(),se.__webglColorRenderbuffer=[],n.bindFramebuffer(t.FRAMEBUFFER,se.__webglMultisampledFramebuffer);for(let O=0;O<ye.length;O++){const M=ye[O];se.__webglColorRenderbuffer[O]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,se.__webglColorRenderbuffer[O]);const A=s.convert(M.format,M.colorSpace),W=s.convert(M.type),q=w(M.internalFormat,A,W,M.colorSpace,X.isXRRenderTarget===!0),te=ft(X);t.renderbufferStorageMultisample(t.RENDERBUFFER,te,q,X.width,X.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+O,t.RENDERBUFFER,se.__webglColorRenderbuffer[O])}t.bindRenderbuffer(t.RENDERBUFFER,null),X.depthBuffer&&(se.__webglDepthRenderbuffer=t.createRenderbuffer(),pe(se.__webglDepthRenderbuffer,X,!0)),n.bindFramebuffer(t.FRAMEBUFFER,null)}}if(fe){n.bindTexture(t.TEXTURE_CUBE_MAP,ce.__webglTexture),T(t.TEXTURE_CUBE_MAP,H);for(let O=0;O<6;O++)if(H.mipmaps&&H.mipmaps.length>0)for(let M=0;M<H.mipmaps.length;M++)me(se.__webglFramebuffer[O][M],X,H,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+O,M);else me(se.__webglFramebuffer[O],X,H,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+O,0);g(H)&&m(t.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(Ne){for(let O=0,M=ye.length;O<M;O++){const A=ye[O],W=i.get(A);let q=t.TEXTURE_2D;(X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(q=X.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(q,W.__webglTexture),T(q,A),me(se.__webglFramebuffer,X,A,t.COLOR_ATTACHMENT0+O,q,0),g(A)&&m(q)}n.unbindTexture()}else{let O=t.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(O=X.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),n.bindTexture(O,ce.__webglTexture),T(O,H),H.mipmaps&&H.mipmaps.length>0)for(let M=0;M<H.mipmaps.length;M++)me(se.__webglFramebuffer[M],X,H,t.COLOR_ATTACHMENT0,O,M);else me(se.__webglFramebuffer,X,H,t.COLOR_ATTACHMENT0,O,0);g(H)&&m(O),n.unbindTexture()}X.depthBuffer&&Re(X)}function ot(X){const H=X.textures;for(let se=0,ce=H.length;se<ce;se++){const ye=H[se];if(g(ye)){const fe=_(X),Ne=i.get(ye).__webglTexture;n.bindTexture(fe,Ne),m(fe),n.unbindTexture()}}}const We=[],He=[];function Ee(X){if(X.samples>0){if($e(X)===!1){const H=X.textures,se=X.width,ce=X.height;let ye=t.COLOR_BUFFER_BIT;const fe=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,Ne=i.get(X),O=H.length>1;if(O)for(let A=0;A<H.length;A++)n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+A,t.RENDERBUFFER,null),n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+A,t.TEXTURE_2D,null,0);n.bindFramebuffer(t.READ_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer);const M=X.texture.mipmaps;M&&M.length>0?n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer[0]):n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglFramebuffer);for(let A=0;A<H.length;A++){if(X.resolveDepthBuffer&&(X.depthBuffer&&(ye|=t.DEPTH_BUFFER_BIT),X.stencilBuffer&&X.resolveStencilBuffer&&(ye|=t.STENCIL_BUFFER_BIT)),O){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[A]);const W=i.get(H[A]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,W,0)}t.blitFramebuffer(0,0,se,ce,0,0,se,ce,ye,t.NEAREST),l===!0&&(We.length=0,He.length=0,We.push(t.COLOR_ATTACHMENT0+A),X.depthBuffer&&X.resolveDepthBuffer===!1&&(We.push(fe),He.push(fe),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,He)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,We))}if(n.bindFramebuffer(t.READ_FRAMEBUFFER,null),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),O)for(let A=0;A<H.length;A++){n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+A,t.RENDERBUFFER,Ne.__webglColorRenderbuffer[A]);const W=i.get(H[A]).__webglTexture;n.bindFramebuffer(t.FRAMEBUFFER,Ne.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+A,t.TEXTURE_2D,W,0)}n.bindFramebuffer(t.DRAW_FRAMEBUFFER,Ne.__webglMultisampledFramebuffer)}else if(X.depthBuffer&&X.resolveDepthBuffer===!1&&l){const H=X.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[H])}}}function ft(X){return Math.min(r.maxSamples,X.samples)}function $e(X){const H=i.get(X);return X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function De(X){const H=o.render.frame;u.get(X)!==H&&(u.set(X,H),X.update())}function _e(X,H){const se=X.colorSpace,ce=X.format,ye=X.type;return X.isCompressedTexture===!0||X.isVideoTexture===!0||se!==od&&se!==fa&&(kt.getTransfer(se)===Ht?(ce!==ds||ye!==Uo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",se)),H}function lt(X){return typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement?(c.width=X.naturalWidth||X.width,c.height=X.naturalHeight||X.height):typeof VideoFrame<"u"&&X instanceof VideoFrame?(c.width=X.displayWidth,c.height=X.displayHeight):(c.width=X.width,c.height=X.height),c}this.allocateTextureUnit=I,this.resetTextureUnits=Y,this.setTexture2D=b,this.setTexture2DArray=E,this.setTexture3D=P,this.setTextureCube=C,this.rebindTextures=it,this.setupRenderTarget=J,this.updateRenderTargetMipmap=ot,this.updateMultisampleRenderTarget=Ee,this.setupDepthRenderbuffer=Re,this.setupFrameBufferTexture=me,this.useMultisampledRTT=$e}function Lee(t,e){function n(i,r=fa){let s;const o=kt.getTransfer(r);if(i===Uo)return t.UNSIGNED_BYTE;if(i===vM)return t.UNSIGNED_SHORT_4_4_4_4;if(i===wM)return t.UNSIGNED_SHORT_5_5_5_1;if(i===XP)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===qP)return t.UNSIGNED_INT_10F_11F_11F_REV;if(i===$P)return t.BYTE;if(i===YP)return t.SHORT;if(i===wf)return t.UNSIGNED_SHORT;if(i===yM)return t.INT;if(i===cc)return t.UNSIGNED_INT;if(i===So)return t.FLOAT;if(i===np)return t.HALF_FLOAT;if(i===KP)return t.ALPHA;if(i===ZP)return t.RGB;if(i===ds)return t.RGBA;if(i===bf)return t.DEPTH_COMPONENT;if(i===Sf)return t.DEPTH_STENCIL;if(i===QP)return t.RED;if(i===_M)return t.RED_INTEGER;if(i===JP)return t.RG;if(i===bM)return t.RG_INTEGER;if(i===SM)return t.RGBA_INTEGER;if(i===f0||i===p0||i===m0||i===g0)if(o===Ht)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===f0)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===p0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===m0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===g0)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===f0)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===p0)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===m0)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===g0)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===p_||i===m_||i===g_||i===x_)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===p_)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===m_)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===g_)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===x_)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===y_||i===v_||i===w_)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===y_||i===v_)return o===Ht?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===w_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===__||i===b_||i===S_||i===M_||i===E_||i===T_||i===A_||i===C_||i===N_||i===R_||i===L_||i===I_||i===k_||i===P_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===__)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===b_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===S_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===M_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===E_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===T_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===A_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===C_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===N_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===R_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===L_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===I_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===k_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===P_)return o===Ht?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===D_||i===B_||i===U_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===D_)return o===Ht?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===B_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===U_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===O_||i===j_||i===F_||i===z_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===O_)return s.COMPRESSED_RED_RGTC1_EXT;if(i===j_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===F_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===z_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===_f?t.UNSIGNED_INT_24_8:t[i]!==void 0?t[i]:null}return{convert:n}}const Iee=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,kee=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class Pee{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,n){if(this.texture===null){const i=new f5(e.texture);(e.depthNear!==n.depthNear||e.depthFar!==n.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=i}}getMesh(e){if(this.texture!==null&&this.mesh===null){const n=e.cameras[0].viewport,i=new jo({vertexShader:Iee,fragmentShader:kee,uniforms:{depthColor:{value:this.texture},depthWidth:{value:n.z},depthHeight:{value:n.w}}});this.mesh=new Bs(new ap(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Dee extends Sd{constructor(e,n){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,h=null,f=null,p=null,x=null;const y=typeof XRWebGLBinding<"u",g=new Pee,m={},_=n.getContextAttributes();let w=null,S=null;const N=[],k=[],R=new Vt;let B=null;const L=new ls;L.viewport=new On;const D=new ls;D.viewport=new On;const j=[L,D],Y=new nK;let I=null,v=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Z){let ee=N[Z];return ee===void 0&&(ee=new Ev,N[Z]=ee),ee.getTargetRaySpace()},this.getControllerGrip=function(Z){let ee=N[Z];return ee===void 0&&(ee=new Ev,N[Z]=ee),ee.getGripSpace()},this.getHand=function(Z){let ee=N[Z];return ee===void 0&&(ee=new Ev,N[Z]=ee),ee.getHandSpace()};function b(Z){const ee=k.indexOf(Z.inputSource);if(ee===-1)return;const me=N[ee];me!==void 0&&(me.update(Z.inputSource,Z.frame,c||o),me.dispatchEvent({type:Z.type,data:Z.inputSource}))}function E(){r.removeEventListener("select",b),r.removeEventListener("selectstart",b),r.removeEventListener("selectend",b),r.removeEventListener("squeeze",b),r.removeEventListener("squeezestart",b),r.removeEventListener("squeezeend",b),r.removeEventListener("end",E),r.removeEventListener("inputsourceschange",P);for(let Z=0;Z<N.length;Z++){const ee=k[Z];ee!==null&&(k[Z]=null,N[Z].disconnect(ee))}I=null,v=null,g.reset();for(const Z in m)delete m[Z];e.setRenderTarget(w),p=null,f=null,h=null,r=null,S=null,ne.stop(),i.isPresenting=!1,e.setPixelRatio(B),e.setSize(R.width,R.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Z){s=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Z){a=Z,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(Z){c=Z},this.getBaseLayer=function(){return f!==null?f:p},this.getBinding=function(){return h===null&&y&&(h=new XRWebGLBinding(r,n)),h},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(Z){if(r=Z,r!==null){if(w=e.getRenderTarget(),r.addEventListener("select",b),r.addEventListener("selectstart",b),r.addEventListener("selectend",b),r.addEventListener("squeeze",b),r.addEventListener("squeezestart",b),r.addEventListener("squeezeend",b),r.addEventListener("end",E),r.addEventListener("inputsourceschange",P),_.xrCompatible!==!0&&await n.makeXRCompatible(),B=e.getPixelRatio(),e.getSize(R),y&&"createProjectionLayer"in XRWebGLBinding.prototype){let me=null,pe=null,Se=null;_.depth&&(Se=_.stencil?n.DEPTH24_STENCIL8:n.DEPTH_COMPONENT24,me=_.stencil?Sf:bf,pe=_.stencil?_f:cc);const Re={colorFormat:n.RGBA8,depthFormat:Se,scaleFactor:s};h=this.getBinding(),f=h.createProjectionLayer(Re),r.updateRenderState({layers:[f]}),e.setPixelRatio(1),e.setSize(f.textureWidth,f.textureHeight,!1),S=new uc(f.textureWidth,f.textureHeight,{format:ds,type:Uo,depthTexture:new h5(f.textureWidth,f.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,me),stencilBuffer:_.stencil,colorSpace:e.outputColorSpace,samples:_.antialias?4:0,resolveDepthBuffer:f.ignoreDepthValues===!1,resolveStencilBuffer:f.ignoreDepthValues===!1})}else{const me={antialias:_.antialias,alpha:!0,depth:_.depth,stencil:_.stencil,framebufferScaleFactor:s};p=new XRWebGLLayer(r,n,me),r.updateRenderState({baseLayer:p}),e.setPixelRatio(1),e.setSize(p.framebufferWidth,p.framebufferHeight,!1),S=new uc(p.framebufferWidth,p.framebufferHeight,{format:ds,type:Uo,colorSpace:e.outputColorSpace,stencilBuffer:_.stencil,resolveDepthBuffer:p.ignoreDepthValues===!1,resolveStencilBuffer:p.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),ne.setContext(r),ne.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function P(Z){for(let ee=0;ee<Z.removed.length;ee++){const me=Z.removed[ee],pe=k.indexOf(me);pe>=0&&(k[pe]=null,N[pe].disconnect(me))}for(let ee=0;ee<Z.added.length;ee++){const me=Z.added[ee];let pe=k.indexOf(me);if(pe===-1){for(let Re=0;Re<N.length;Re++)if(Re>=k.length){k.push(me),pe=Re;break}else if(k[Re]===null){k[Re]=me,pe=Re;break}if(pe===-1)break}const Se=N[pe];Se&&Se.connect(me)}}const C=new he,z=new he;function V(Z,ee,me){C.setFromMatrixPosition(ee.matrixWorld),z.setFromMatrixPosition(me.matrixWorld);const pe=C.distanceTo(z),Se=ee.projectionMatrix.elements,Re=me.projectionMatrix.elements,it=Se[14]/(Se[10]-1),J=Se[14]/(Se[10]+1),ot=(Se[9]+1)/Se[5],We=(Se[9]-1)/Se[5],He=(Se[8]-1)/Se[0],Ee=(Re[8]+1)/Re[0],ft=it*He,$e=it*Ee,De=pe/(-He+Ee),_e=De*-He;if(ee.matrixWorld.decompose(Z.position,Z.quaternion,Z.scale),Z.translateX(_e),Z.translateZ(De),Z.matrixWorld.compose(Z.position,Z.quaternion,Z.scale),Z.matrixWorldInverse.copy(Z.matrixWorld).invert(),Se[10]===-1)Z.projectionMatrix.copy(ee.projectionMatrix),Z.projectionMatrixInverse.copy(ee.projectionMatrixInverse);else{const lt=it+De,X=J+De,H=ft-_e,se=$e+(pe-_e),ce=ot*J/X*lt,ye=We*J/X*lt;Z.projectionMatrix.makePerspective(H,se,ce,ye,lt,X),Z.projectionMatrixInverse.copy(Z.projectionMatrix).invert()}}function U(Z,ee){ee===null?Z.matrixWorld.copy(Z.matrix):Z.matrixWorld.multiplyMatrices(ee.matrixWorld,Z.matrix),Z.matrixWorldInverse.copy(Z.matrixWorld).invert()}this.updateCamera=function(Z){if(r===null)return;let ee=Z.near,me=Z.far;g.texture!==null&&(g.depthNear>0&&(ee=g.depthNear),g.depthFar>0&&(me=g.depthFar)),Y.near=D.near=L.near=ee,Y.far=D.far=L.far=me,(I!==Y.near||v!==Y.far)&&(r.updateRenderState({depthNear:Y.near,depthFar:Y.far}),I=Y.near,v=Y.far),Y.layers.mask=Z.layers.mask|6,L.layers.mask=Y.layers.mask&3,D.layers.mask=Y.layers.mask&5;const pe=Z.parent,Se=Y.cameras;U(Y,pe);for(let Re=0;Re<Se.length;Re++)U(Se[Re],pe);Se.length===2?V(Y,L,D):Y.projectionMatrix.copy(L.projectionMatrix),T(Z,Y,pe)};function T(Z,ee,me){me===null?Z.matrix.copy(ee.matrixWorld):(Z.matrix.copy(me.matrixWorld),Z.matrix.invert(),Z.matrix.multiply(ee.matrixWorld)),Z.matrix.decompose(Z.position,Z.quaternion,Z.scale),Z.updateMatrixWorld(!0),Z.projectionMatrix.copy(ee.projectionMatrix),Z.projectionMatrixInverse.copy(ee.projectionMatrixInverse),Z.isPerspectiveCamera&&(Z.fov=V_*2*Math.atan(1/Z.projectionMatrix.elements[5]),Z.zoom=1)}this.getCamera=function(){return Y},this.getFoveation=function(){if(!(f===null&&p===null))return l},this.setFoveation=function(Z){l=Z,f!==null&&(f.fixedFoveation=Z),p!==null&&p.fixedFoveation!==void 0&&(p.fixedFoveation=Z)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(Y)},this.getCameraTexture=function(Z){return m[Z]};let G=null;function K(Z,ee){if(u=ee.getViewerPose(c||o),x=ee,u!==null){const me=u.views;p!==null&&(e.setRenderTargetFramebuffer(S,p.framebuffer),e.setRenderTarget(S));let pe=!1;me.length!==Y.cameras.length&&(Y.cameras.length=0,pe=!0);for(let J=0;J<me.length;J++){const ot=me[J];let We=null;if(p!==null)We=p.getViewport(ot);else{const Ee=h.getViewSubImage(f,ot);We=Ee.viewport,J===0&&(e.setRenderTargetTextures(S,Ee.colorTexture,Ee.depthStencilTexture),e.setRenderTarget(S))}let He=j[J];He===void 0&&(He=new ls,He.layers.enable(J),He.viewport=new On,j[J]=He),He.matrix.fromArray(ot.transform.matrix),He.matrix.decompose(He.position,He.quaternion,He.scale),He.projectionMatrix.fromArray(ot.projectionMatrix),He.projectionMatrixInverse.copy(He.projectionMatrix).invert(),He.viewport.set(We.x,We.y,We.width,We.height),J===0&&(Y.matrix.copy(He.matrix),Y.matrix.decompose(Y.position,Y.quaternion,Y.scale)),pe===!0&&Y.cameras.push(He)}const Se=r.enabledFeatures;if(Se&&Se.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&y){h=i.getBinding();const J=h.getDepthInformation(me[0]);J&&J.isValid&&J.texture&&g.init(J,r.renderState)}if(Se&&Se.includes("camera-access")&&y){e.state.unbindTexture(),h=i.getBinding();for(let J=0;J<me.length;J++){const ot=me[J].camera;if(ot){let We=m[ot];We||(We=new f5,m[ot]=We);const He=h.getCameraImage(ot);We.sourceTexture=He}}}}for(let me=0;me<N.length;me++){const pe=k[me],Se=N[me];pe!==null&&Se!==void 0&&Se.update(pe,ee,c||o)}G&&G(Z,ee),ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ee}),x=null}const ne=new m5;ne.setAnimationLoop(K),this.setAnimationLoop=function(Z){G=Z},this.dispose=function(){}}}const cl=new Oo,Bee=new Jn;function Uee(t,e){function n(g,m){g.matrixAutoUpdate===!0&&g.updateMatrix(),m.value.copy(g.matrix)}function i(g,m){m.color.getRGB(g.fogColor.value,l5(t)),m.isFog?(g.fogNear.value=m.near,g.fogFar.value=m.far):m.isFogExp2&&(g.fogDensity.value=m.density)}function r(g,m,_,w,S){m.isMeshBasicMaterial||m.isMeshLambertMaterial?s(g,m):m.isMeshToonMaterial?(s(g,m),h(g,m)):m.isMeshPhongMaterial?(s(g,m),u(g,m)):m.isMeshStandardMaterial?(s(g,m),f(g,m),m.isMeshPhysicalMaterial&&p(g,m,S)):m.isMeshMatcapMaterial?(s(g,m),x(g,m)):m.isMeshDepthMaterial?s(g,m):m.isMeshDistanceMaterial?(s(g,m),y(g,m)):m.isMeshNormalMaterial?s(g,m):m.isLineBasicMaterial?(o(g,m),m.isLineDashedMaterial&&a(g,m)):m.isPointsMaterial?l(g,m,_,w):m.isSpriteMaterial?c(g,m):m.isShadowMaterial?(g.color.value.copy(m.color),g.opacity.value=m.opacity):m.isShaderMaterial&&(m.uniformsNeedUpdate=!1)}function s(g,m){g.opacity.value=m.opacity,m.color&&g.diffuse.value.copy(m.color),m.emissive&&g.emissive.value.copy(m.emissive).multiplyScalar(m.emissiveIntensity),m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.bumpMap&&(g.bumpMap.value=m.bumpMap,n(m.bumpMap,g.bumpMapTransform),g.bumpScale.value=m.bumpScale,m.side===lr&&(g.bumpScale.value*=-1)),m.normalMap&&(g.normalMap.value=m.normalMap,n(m.normalMap,g.normalMapTransform),g.normalScale.value.copy(m.normalScale),m.side===lr&&g.normalScale.value.negate()),m.displacementMap&&(g.displacementMap.value=m.displacementMap,n(m.displacementMap,g.displacementMapTransform),g.displacementScale.value=m.displacementScale,g.displacementBias.value=m.displacementBias),m.emissiveMap&&(g.emissiveMap.value=m.emissiveMap,n(m.emissiveMap,g.emissiveMapTransform)),m.specularMap&&(g.specularMap.value=m.specularMap,n(m.specularMap,g.specularMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest);const _=e.get(m),w=_.envMap,S=_.envMapRotation;w&&(g.envMap.value=w,cl.copy(S),cl.x*=-1,cl.y*=-1,cl.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(cl.y*=-1,cl.z*=-1),g.envMapRotation.value.setFromMatrix4(Bee.makeRotationFromEuler(cl)),g.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,g.reflectivity.value=m.reflectivity,g.ior.value=m.ior,g.refractionRatio.value=m.refractionRatio),m.lightMap&&(g.lightMap.value=m.lightMap,g.lightMapIntensity.value=m.lightMapIntensity,n(m.lightMap,g.lightMapTransform)),m.aoMap&&(g.aoMap.value=m.aoMap,g.aoMapIntensity.value=m.aoMapIntensity,n(m.aoMap,g.aoMapTransform))}function o(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform))}function a(g,m){g.dashSize.value=m.dashSize,g.totalSize.value=m.dashSize+m.gapSize,g.scale.value=m.scale}function l(g,m,_,w){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.size.value=m.size*_,g.scale.value=w*.5,m.map&&(g.map.value=m.map,n(m.map,g.uvTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function c(g,m){g.diffuse.value.copy(m.color),g.opacity.value=m.opacity,g.rotation.value=m.rotation,m.map&&(g.map.value=m.map,n(m.map,g.mapTransform)),m.alphaMap&&(g.alphaMap.value=m.alphaMap,n(m.alphaMap,g.alphaMapTransform)),m.alphaTest>0&&(g.alphaTest.value=m.alphaTest)}function u(g,m){g.specular.value.copy(m.specular),g.shininess.value=Math.max(m.shininess,1e-4)}function h(g,m){m.gradientMap&&(g.gradientMap.value=m.gradientMap)}function f(g,m){g.metalness.value=m.metalness,m.metalnessMap&&(g.metalnessMap.value=m.metalnessMap,n(m.metalnessMap,g.metalnessMapTransform)),g.roughness.value=m.roughness,m.roughnessMap&&(g.roughnessMap.value=m.roughnessMap,n(m.roughnessMap,g.roughnessMapTransform)),m.envMap&&(g.envMapIntensity.value=m.envMapIntensity)}function p(g,m,_){g.ior.value=m.ior,m.sheen>0&&(g.sheenColor.value.copy(m.sheenColor).multiplyScalar(m.sheen),g.sheenRoughness.value=m.sheenRoughness,m.sheenColorMap&&(g.sheenColorMap.value=m.sheenColorMap,n(m.sheenColorMap,g.sheenColorMapTransform)),m.sheenRoughnessMap&&(g.sheenRoughnessMap.value=m.sheenRoughnessMap,n(m.sheenRoughnessMap,g.sheenRoughnessMapTransform))),m.clearcoat>0&&(g.clearcoat.value=m.clearcoat,g.clearcoatRoughness.value=m.clearcoatRoughness,m.clearcoatMap&&(g.clearcoatMap.value=m.clearcoatMap,n(m.clearcoatMap,g.clearcoatMapTransform)),m.clearcoatRoughnessMap&&(g.clearcoatRoughnessMap.value=m.clearcoatRoughnessMap,n(m.clearcoatRoughnessMap,g.clearcoatRoughnessMapTransform)),m.clearcoatNormalMap&&(g.clearcoatNormalMap.value=m.clearcoatNormalMap,n(m.clearcoatNormalMap,g.clearcoatNormalMapTransform),g.clearcoatNormalScale.value.copy(m.clearcoatNormalScale),m.side===lr&&g.clearcoatNormalScale.value.negate())),m.dispersion>0&&(g.dispersion.value=m.dispersion),m.iridescence>0&&(g.iridescence.value=m.iridescence,g.iridescenceIOR.value=m.iridescenceIOR,g.iridescenceThicknessMinimum.value=m.iridescenceThicknessRange[0],g.iridescenceThicknessMaximum.value=m.iridescenceThicknessRange[1],m.iridescenceMap&&(g.iridescenceMap.value=m.iridescenceMap,n(m.iridescenceMap,g.iridescenceMapTransform)),m.iridescenceThicknessMap&&(g.iridescenceThicknessMap.value=m.iridescenceThicknessMap,n(m.iridescenceThicknessMap,g.iridescenceThicknessMapTransform))),m.transmission>0&&(g.transmission.value=m.transmission,g.transmissionSamplerMap.value=_.texture,g.transmissionSamplerSize.value.set(_.width,_.height),m.transmissionMap&&(g.transmissionMap.value=m.transmissionMap,n(m.transmissionMap,g.transmissionMapTransform)),g.thickness.value=m.thickness,m.thicknessMap&&(g.thicknessMap.value=m.thicknessMap,n(m.thicknessMap,g.thicknessMapTransform)),g.attenuationDistance.value=m.attenuationDistance,g.attenuationColor.value.copy(m.attenuationColor)),m.anisotropy>0&&(g.anisotropyVector.value.set(m.anisotropy*Math.cos(m.anisotropyRotation),m.anisotropy*Math.sin(m.anisotropyRotation)),m.anisotropyMap&&(g.anisotropyMap.value=m.anisotropyMap,n(m.anisotropyMap,g.anisotropyMapTransform))),g.specularIntensity.value=m.specularIntensity,g.specularColor.value.copy(m.specularColor),m.specularColorMap&&(g.specularColorMap.value=m.specularColorMap,n(m.specularColorMap,g.specularColorMapTransform)),m.specularIntensityMap&&(g.specularIntensityMap.value=m.specularIntensityMap,n(m.specularIntensityMap,g.specularIntensityMapTransform))}function x(g,m){m.matcap&&(g.matcap.value=m.matcap)}function y(g,m){const _=e.get(m).light;g.referencePosition.value.setFromMatrixPosition(_.matrixWorld),g.nearDistance.value=_.shadow.camera.near,g.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Oee(t,e,n,i){let r={},s={},o=[];const a=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,w){const S=w.program;i.uniformBlockBinding(_,S)}function c(_,w){let S=r[_.id];S===void 0&&(x(_),S=u(_),r[_.id]=S,_.addEventListener("dispose",g));const N=w.program;i.updateUBOMapping(_,N);const k=e.render.frame;s[_.id]!==k&&(f(_),s[_.id]=k)}function u(_){const w=h();_.__bindingPointIndex=w;const S=t.createBuffer(),N=_.__size,k=_.usage;return t.bindBuffer(t.UNIFORM_BUFFER,S),t.bufferData(t.UNIFORM_BUFFER,N,k),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,w,S),S}function h(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function f(_){const w=r[_.id],S=_.uniforms,N=_.__cache;t.bindBuffer(t.UNIFORM_BUFFER,w);for(let k=0,R=S.length;k<R;k++){const B=Array.isArray(S[k])?S[k]:[S[k]];for(let L=0,D=B.length;L<D;L++){const j=B[L];if(p(j,k,L,N)===!0){const Y=j.__offset,I=Array.isArray(j.value)?j.value:[j.value];let v=0;for(let b=0;b<I.length;b++){const E=I[b],P=y(E);typeof E=="number"||typeof E=="boolean"?(j.__data[0]=E,t.bufferSubData(t.UNIFORM_BUFFER,Y+v,j.__data)):E.isMatrix3?(j.__data[0]=E.elements[0],j.__data[1]=E.elements[1],j.__data[2]=E.elements[2],j.__data[3]=0,j.__data[4]=E.elements[3],j.__data[5]=E.elements[4],j.__data[6]=E.elements[5],j.__data[7]=0,j.__data[8]=E.elements[6],j.__data[9]=E.elements[7],j.__data[10]=E.elements[8],j.__data[11]=0):(E.toArray(j.__data,v),v+=P.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,Y,j.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}function p(_,w,S,N){const k=_.value,R=w+"_"+S;if(N[R]===void 0)return typeof k=="number"||typeof k=="boolean"?N[R]=k:N[R]=k.clone(),!0;{const B=N[R];if(typeof k=="number"||typeof k=="boolean"){if(B!==k)return N[R]=k,!0}else if(B.equals(k)===!1)return B.copy(k),!0}return!1}function x(_){const w=_.uniforms;let S=0;const N=16;for(let R=0,B=w.length;R<B;R++){const L=Array.isArray(w[R])?w[R]:[w[R]];for(let D=0,j=L.length;D<j;D++){const Y=L[D],I=Array.isArray(Y.value)?Y.value:[Y.value];for(let v=0,b=I.length;v<b;v++){const E=I[v],P=y(E),C=S%N,z=C%P.boundary,V=C+z;S+=z,V!==0&&N-V<P.storage&&(S+=N-V),Y.__data=new Float32Array(P.storage/Float32Array.BYTES_PER_ELEMENT),Y.__offset=S,S+=P.storage}}}const k=S%N;return k>0&&(S+=N-k),_.__size=S,_.__cache={},this}function y(_){const w={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function g(_){const w=_.target;w.removeEventListener("dispose",g);const S=o.indexOf(w.__bindingPointIndex);o.splice(S,1),t.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function m(){for(const _ in r)t.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:c,dispose:m}}class jee{constructor(e={}){const{canvas:n=Sq(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1,reversedDepthBuffer:f=!1}=e;this.isWebGLRenderer=!0;let p;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");p=i.getContextAttributes().alpha}else p=o;const x=new Uint32Array(4),y=new Int32Array(4);let g=null,m=null;const _=[],w=[];this.domElement=n,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=Da,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const S=this;let N=!1;this._outputColorSpace=jr;let k=0,R=0,B=null,L=-1,D=null;const j=new On,Y=new On;let I=null;const v=new Gt(0);let b=0,E=n.width,P=n.height,C=1,z=null,V=null;const U=new On(0,0,E,P),T=new On(0,0,E,P);let G=!1;const K=new d5;let ne=!1,Z=!1;const ee=new Jn,me=new he,pe=new On,Se={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Re=!1;function it(){return B===null?C:1}let J=i;function ot($,re){return n.getContext($,re)}try{const $={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in n&&n.setAttribute("data-engine",`three.js r${xM}`),n.addEventListener("webglcontextlost",xe,!1),n.addEventListener("webglcontextrestored",Pe,!1),n.addEventListener("webglcontextcreationerror",Te,!1),J===null){const re="webgl2";if(J=ot(re,$),J===null)throw ot(re)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch($){throw console.error("THREE.WebGLRenderer: "+$.message),$}let We,He,Ee,ft,$e,De,_e,lt,X,H,se,ce,ye,fe,Ne,O,M,A,W,q,te,ie,ve,Ie;function Q(){We=new qQ(J),We.init(),ie=new Lee(J,We),He=new VQ(J,We,e,ie),Ee=new Nee(J,We),He.reversedDepthBuffer&&f&&Ee.buffers.depth.setReversed(!0),ft=new QQ(J),$e=new gee,De=new Ree(J,We,Ee,$e,He,ie,ft),_e=new HQ(S),lt=new XQ(S),X=new rK(J),ve=new FQ(J,X),H=new KQ(J,X,ft,ve),se=new eJ(J,H,X,ft),W=new JQ(J,He,De),O=new WQ($e),ce=new mee(S,_e,lt,We,He,ve,O),ye=new Uee(S,$e),fe=new yee,Ne=new Mee(We),A=new jQ(S,_e,lt,Ee,se,p,l),M=new Aee(S,se,He),Ie=new Oee(J,ft,He,Ee),q=new zQ(J,We,ft),te=new ZQ(J,We,ft),ft.programs=ce.programs,S.capabilities=He,S.extensions=We,S.properties=$e,S.renderLists=fe,S.shadowMap=M,S.state=Ee,S.info=ft}Q();const we=new Dee(S,J);this.xr=we,this.getContext=function(){return J},this.getContextAttributes=function(){return J.getContextAttributes()},this.forceContextLoss=function(){const $=We.get("WEBGL_lose_context");$&&$.loseContext()},this.forceContextRestore=function(){const $=We.get("WEBGL_lose_context");$&&$.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function($){$!==void 0&&(C=$,this.setSize(E,P,!1))},this.getSize=function($){return $.set(E,P)},this.setSize=function($,re,ue=!0){if(we.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}E=$,P=re,n.width=Math.floor($*C),n.height=Math.floor(re*C),ue===!0&&(n.style.width=$+"px",n.style.height=re+"px"),this.setViewport(0,0,$,re)},this.getDrawingBufferSize=function($){return $.set(E*C,P*C).floor()},this.setDrawingBufferSize=function($,re,ue){E=$,P=re,C=ue,n.width=Math.floor($*ue),n.height=Math.floor(re*ue),this.setViewport(0,0,$,re)},this.getCurrentViewport=function($){return $.copy(j)},this.getViewport=function($){return $.copy(U)},this.setViewport=function($,re,ue,de){$.isVector4?U.set($.x,$.y,$.z,$.w):U.set($,re,ue,de),Ee.viewport(j.copy(U).multiplyScalar(C).round())},this.getScissor=function($){return $.copy(T)},this.setScissor=function($,re,ue,de){$.isVector4?T.set($.x,$.y,$.z,$.w):T.set($,re,ue,de),Ee.scissor(Y.copy(T).multiplyScalar(C).round())},this.getScissorTest=function(){return G},this.setScissorTest=function($){Ee.setScissorTest(G=$)},this.setOpaqueSort=function($){z=$},this.setTransparentSort=function($){V=$},this.getClearColor=function($){return $.copy(A.getClearColor())},this.setClearColor=function(){A.setClearColor(...arguments)},this.getClearAlpha=function(){return A.getClearAlpha()},this.setClearAlpha=function(){A.setClearAlpha(...arguments)},this.clear=function($=!0,re=!0,ue=!0){let de=0;if($){let oe=!1;if(B!==null){const Ae=B.texture.format;oe=Ae===SM||Ae===bM||Ae===_M}if(oe){const Ae=B.texture.type,je=Ae===Uo||Ae===cc||Ae===wf||Ae===_f||Ae===vM||Ae===wM,qe=A.getClearColor(),Ge=A.getClearAlpha(),at=qe.r,dt=qe.g,nt=qe.b;je?(x[0]=at,x[1]=dt,x[2]=nt,x[3]=Ge,J.clearBufferuiv(J.COLOR,0,x)):(y[0]=at,y[1]=dt,y[2]=nt,y[3]=Ge,J.clearBufferiv(J.COLOR,0,y))}else de|=J.COLOR_BUFFER_BIT}re&&(de|=J.DEPTH_BUFFER_BIT),ue&&(de|=J.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),J.clear(de)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){n.removeEventListener("webglcontextlost",xe,!1),n.removeEventListener("webglcontextrestored",Pe,!1),n.removeEventListener("webglcontextcreationerror",Te,!1),A.dispose(),fe.dispose(),Ne.dispose(),$e.dispose(),_e.dispose(),lt.dispose(),se.dispose(),ve.dispose(),Ie.dispose(),ce.dispose(),we.dispose(),we.removeEventListener("sessionstart",Bt),we.removeEventListener("sessionend",pn),ws.stop()};function xe($){$.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),N=!0}function Pe(){console.log("THREE.WebGLRenderer: Context Restored."),N=!1;const $=ft.autoReset,re=M.enabled,ue=M.autoUpdate,de=M.needsUpdate,oe=M.type;Q(),ft.autoReset=$,M.enabled=re,M.autoUpdate=ue,M.needsUpdate=de,M.type=oe}function Te($){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",$.statusMessage)}function ge($){const re=$.target;re.removeEventListener("dispose",ge),Be(re)}function Be($){gt($),$e.remove($)}function gt($){const re=$e.get($).programs;re!==void 0&&(re.forEach(function(ue){ce.releaseProgram(ue)}),$.isShaderMaterial&&ce.releaseShaderCache($))}this.renderBufferDirect=function($,re,ue,de,oe,Ae){re===null&&(re=Se);const je=oe.isMesh&&oe.matrixWorld.determinant()<0,qe=up($,re,ue,de,oe);Ee.setMaterial(de,je);let Ge=ue.index,at=1;if(de.wireframe===!0){if(Ge=H.getWireframeAttribute(ue),Ge===void 0)return;at=2}const dt=ue.drawRange,nt=ue.attributes.position;let wt=dt.start*at,Rt=(dt.start+dt.count)*at;Ae!==null&&(wt=Math.max(wt,Ae.start*at),Rt=Math.min(Rt,(Ae.start+Ae.count)*at)),Ge!==null?(wt=Math.max(wt,0),Rt=Math.min(Rt,Ge.count)):nt!=null&&(wt=Math.max(wt,0),Rt=Math.min(Rt,nt.count));const Kt=Rt-wt;if(Kt<0||Kt===1/0)return;ve.setup(oe,de,qe,ue,Ge);let Ot,Yt=q;if(Ge!==null&&(Ot=X.get(Ge),Yt=te,Yt.setIndex(Ot)),oe.isMesh)de.wireframe===!0?(Ee.setLineWidth(de.wireframeLinewidth*it()),Yt.setMode(J.LINES)):Yt.setMode(J.TRIANGLES);else if(oe.isLine){let ht=de.linewidth;ht===void 0&&(ht=1),Ee.setLineWidth(ht*it()),oe.isLineSegments?Yt.setMode(J.LINES):oe.isLineLoop?Yt.setMode(J.LINE_LOOP):Yt.setMode(J.LINE_STRIP)}else oe.isPoints?Yt.setMode(J.POINTS):oe.isSprite&&Yt.setMode(J.TRIANGLES);if(oe.isBatchedMesh)if(oe._multiDrawInstances!==null)Mf("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Yt.renderMultiDrawInstances(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount,oe._multiDrawInstances);else if(We.get("WEBGL_multi_draw"))Yt.renderMultiDraw(oe._multiDrawStarts,oe._multiDrawCounts,oe._multiDrawCount);else{const ht=oe._multiDrawStarts,vn=oe._multiDrawCounts,Lt=oe._multiDrawCount,ur=Ge?X.get(Ge).bytesPerElement:1,Mc=$e.get(de).currentProgram.getUniforms();for(let dr=0;dr<Lt;dr++)Mc.setValue(J,"_gl_DrawID",dr),Yt.render(ht[dr]/ur,vn[dr])}else if(oe.isInstancedMesh)Yt.renderInstances(wt,Kt,oe.count);else if(ue.isInstancedBufferGeometry){const ht=ue._maxInstanceCount!==void 0?ue._maxInstanceCount:1/0,vn=Math.min(ue.instanceCount,ht);Yt.renderInstances(wt,Kt,vn)}else Yt.render(wt,Kt)};function mt($,re,ue){$.transparent===!0&&$.side===vo&&$.forceSinglePass===!1?($.side=lr,$.needsUpdate=!0,tl($,re,ue),$.side=Ha,$.needsUpdate=!0,tl($,re,ue),$.side=vo):tl($,re,ue)}this.compile=function($,re,ue=null){ue===null&&(ue=$),m=Ne.get(ue),m.init(re),w.push(m),ue.traverseVisible(function(oe){oe.isLight&&oe.layers.test(re.layers)&&(m.pushLight(oe),oe.castShadow&&m.pushShadow(oe))}),$!==ue&&$.traverseVisible(function(oe){oe.isLight&&oe.layers.test(re.layers)&&(m.pushLight(oe),oe.castShadow&&m.pushShadow(oe))}),m.setupLights();const de=new Set;return $.traverse(function(oe){if(!(oe.isMesh||oe.isPoints||oe.isLine||oe.isSprite))return;const Ae=oe.material;if(Ae)if(Array.isArray(Ae))for(let je=0;je<Ae.length;je++){const qe=Ae[je];mt(qe,ue,oe),de.add(qe)}else mt(Ae,ue,oe),de.add(Ae)}),m=w.pop(),de},this.compileAsync=function($,re,ue=null){const de=this.compile($,re,ue);return new Promise(oe=>{function Ae(){if(de.forEach(function(je){$e.get(je).currentProgram.isReady()&&de.delete(je)}),de.size===0){oe($);return}setTimeout(Ae,10)}We.get("KHR_parallel_shader_compile")!==null?Ae():setTimeout(Ae,10)})};let ut=null;function Rr($){ut&&ut($)}function Bt(){ws.stop()}function pn(){ws.start()}const ws=new m5;ws.setAnimationLoop(Rr),typeof self<"u"&&ws.setContext(self),this.setAnimationLoop=function($){ut=$,we.setAnimationLoop($),$===null?ws.stop():ws.start()},we.addEventListener("sessionstart",Bt),we.addEventListener("sessionend",pn),this.render=function($,re){if(re!==void 0&&re.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(N===!0)return;if($.matrixWorldAutoUpdate===!0&&$.updateMatrixWorld(),re.parent===null&&re.matrixWorldAutoUpdate===!0&&re.updateMatrixWorld(),we.enabled===!0&&we.isPresenting===!0&&(we.cameraAutoUpdate===!0&&we.updateCamera(re),re=we.getCamera()),$.isScene===!0&&$.onBeforeRender(S,$,re,B),m=Ne.get($,w.length),m.init(re),w.push(m),ee.multiplyMatrices(re.projectionMatrix,re.matrixWorldInverse),K.setFromProjectionMatrix(ee,Ds,re.reversedDepth),Z=this.localClippingEnabled,ne=O.init(this.clippingPlanes,Z),g=fe.get($,_.length),g.init(),_.push(g),we.enabled===!0&&we.isPresenting===!0){const Ae=S.xr.getDepthSensingMesh();Ae!==null&&an(Ae,re,-1/0,S.sortObjects)}an($,re,0,S.sortObjects),g.finish(),S.sortObjects===!0&&g.sort(z,V),Re=we.enabled===!1||we.isPresenting===!1||we.hasDepthSensing()===!1,Re&&A.addToRenderList(g,$),this.info.render.frame++,ne===!0&&O.beginShadows();const ue=m.state.shadowsArray;M.render(ue,$,re),ne===!0&&O.endShadows(),this.info.autoReset===!0&&this.info.reset();const de=g.opaque,oe=g.transmissive;if(m.setupLights(),re.isArrayCamera){const Ae=re.cameras;if(oe.length>0)for(let je=0,qe=Ae.length;je<qe;je++){const Ge=Ae[je];Cd(de,oe,$,Ge)}Re&&A.render($);for(let je=0,qe=Ae.length;je<qe;je++){const Ge=Ae[je];mn(g,$,Ge,Ge.viewport)}}else oe.length>0&&Cd(de,oe,$,re),Re&&A.render($),mn(g,$,re);B!==null&&R===0&&(De.updateMultisampleRenderTarget(B),De.updateRenderTargetMipmap(B)),$.isScene===!0&&$.onAfterRender(S,$,re),ve.resetDefaultState(),L=-1,D=null,w.pop(),w.length>0?(m=w[w.length-1],ne===!0&&O.setGlobalState(S.clippingPlanes,m.state.camera)):m=null,_.pop(),_.length>0?g=_[_.length-1]:g=null};function an($,re,ue,de){if($.visible===!1)return;if($.layers.test(re.layers)){if($.isGroup)ue=$.renderOrder;else if($.isLOD)$.autoUpdate===!0&&$.update(re);else if($.isLight)m.pushLight($),$.castShadow&&m.pushShadow($);else if($.isSprite){if(!$.frustumCulled||K.intersectsSprite($)){de&&pe.setFromMatrixPosition($.matrixWorld).applyMatrix4(ee);const je=se.update($),qe=$.material;qe.visible&&g.push($,je,qe,ue,pe.z,null)}}else if(($.isMesh||$.isLine||$.isPoints)&&(!$.frustumCulled||K.intersectsObject($))){const je=se.update($),qe=$.material;if(de&&($.boundingSphere!==void 0?($.boundingSphere===null&&$.computeBoundingSphere(),pe.copy($.boundingSphere.center)):(je.boundingSphere===null&&je.computeBoundingSphere(),pe.copy(je.boundingSphere.center)),pe.applyMatrix4($.matrixWorld).applyMatrix4(ee)),Array.isArray(qe)){const Ge=je.groups;for(let at=0,dt=Ge.length;at<dt;at++){const nt=Ge[at],wt=qe[nt.materialIndex];wt&&wt.visible&&g.push($,je,wt,ue,pe.z,nt)}}else qe.visible&&g.push($,je,qe,ue,pe.z,null)}}const Ae=$.children;for(let je=0,qe=Ae.length;je<qe;je++)an(Ae[je],re,ue,de)}function mn($,re,ue,de){const oe=$.opaque,Ae=$.transmissive,je=$.transparent;m.setupLightsView(ue),ne===!0&&O.setGlobalState(S.clippingPlanes,ue),de&&Ee.viewport(j.copy(de)),oe.length>0&&tn(oe,re,ue),Ae.length>0&&tn(Ae,re,ue),je.length>0&&tn(je,re,ue),Ee.buffers.depth.setTest(!0),Ee.buffers.depth.setMask(!0),Ee.buffers.color.setMask(!0),Ee.setPolygonOffset(!1)}function Cd($,re,ue,de){if((ue.isScene===!0?ue.overrideMaterial:null)!==null)return;m.state.transmissionRenderTarget[de.id]===void 0&&(m.state.transmissionRenderTarget[de.id]=new uc(1,1,{generateMipmaps:!0,type:We.has("EXT_color_buffer_half_float")||We.has("EXT_color_buffer_float")?np:Uo,minFilter:Hl,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:kt.workingColorSpace}));const Ae=m.state.transmissionRenderTarget[de.id],je=de.viewport||j;Ae.setSize(je.z*S.transmissionResolutionScale,je.w*S.transmissionResolutionScale);const qe=S.getRenderTarget(),Ge=S.getActiveCubeFace(),at=S.getActiveMipmapLevel();S.setRenderTarget(Ae),S.getClearColor(v),b=S.getClearAlpha(),b<1&&S.setClearColor(16777215,.5),S.clear(),Re&&A.render(ue);const dt=S.toneMapping;S.toneMapping=Da;const nt=de.viewport;if(de.viewport!==void 0&&(de.viewport=void 0),m.setupLightsView(de),ne===!0&&O.setGlobalState(S.clippingPlanes,de),tn($,ue,de),De.updateMultisampleRenderTarget(Ae),De.updateRenderTargetMipmap(Ae),We.has("WEBGL_multisampled_render_to_texture")===!1){let wt=!1;for(let Rt=0,Kt=re.length;Rt<Kt;Rt++){const Ot=re[Rt],Yt=Ot.object,ht=Ot.geometry,vn=Ot.material,Lt=Ot.group;if(vn.side===vo&&Yt.layers.test(de.layers)){const ur=vn.side;vn.side=lr,vn.needsUpdate=!0,gn(Yt,ue,de,ht,vn,Lt),vn.side=ur,vn.needsUpdate=!0,wt=!0}}wt===!0&&(De.updateMultisampleRenderTarget(Ae),De.updateRenderTargetMipmap(Ae))}S.setRenderTarget(qe,Ge,at),S.setClearColor(v,b),nt!==void 0&&(de.viewport=nt),S.toneMapping=dt}function tn($,re,ue){const de=re.isScene===!0?re.overrideMaterial:null;for(let oe=0,Ae=$.length;oe<Ae;oe++){const je=$[oe],qe=je.object,Ge=je.geometry,at=je.group;let dt=je.material;dt.allowOverride===!0&&de!==null&&(dt=de),qe.layers.test(ue.layers)&&gn(qe,re,ue,Ge,dt,at)}}function gn($,re,ue,de,oe,Ae){$.onBeforeRender(S,re,ue,de,oe,Ae),$.modelViewMatrix.multiplyMatrices(ue.matrixWorldInverse,$.matrixWorld),$.normalMatrix.getNormalMatrix($.modelViewMatrix),oe.onBeforeRender(S,re,ue,de,$,Ae),oe.transparent===!0&&oe.side===vo&&oe.forceSinglePass===!1?(oe.side=lr,oe.needsUpdate=!0,S.renderBufferDirect(ue,re,de,oe,$,Ae),oe.side=Ha,oe.needsUpdate=!0,S.renderBufferDirect(ue,re,de,oe,$,Ae),oe.side=vo):S.renderBufferDirect(ue,re,de,oe,$,Ae),$.onAfterRender(S,re,ue,de,oe,Ae)}function tl($,re,ue){re.isScene!==!0&&(re=Se);const de=$e.get($),oe=m.state.lights,Ae=m.state.shadowsArray,je=oe.state.version,qe=ce.getParameters($,oe.state,Ae,re,ue),Ge=ce.getProgramCacheKey(qe);let at=de.programs;de.environment=$.isMeshStandardMaterial?re.environment:null,de.fog=re.fog,de.envMap=($.isMeshStandardMaterial?lt:_e).get($.envMap||de.environment),de.envMapRotation=de.environment!==null&&$.envMap===null?re.environmentRotation:$.envMapRotation,at===void 0&&($.addEventListener("dispose",ge),at=new Map,de.programs=at);let dt=at.get(Ge);if(dt!==void 0){if(de.currentProgram===dt&&de.lightsStateVersion===je)return yn($,qe),dt}else qe.uniforms=ce.getUniforms($),$.onBeforeCompile(qe,S),dt=ce.acquireProgram(qe,Ge),at.set(Ge,dt),de.uniforms=qe.uniforms;const nt=de.uniforms;return(!$.isShaderMaterial&&!$.isRawShaderMaterial||$.clipping===!0)&&(nt.clippingPlanes=O.uniform),yn($,qe),de.needsLights=Nn($),de.lightsStateVersion=je,de.needsLights&&(nt.ambientLightColor.value=oe.state.ambient,nt.lightProbe.value=oe.state.probe,nt.directionalLights.value=oe.state.directional,nt.directionalLightShadows.value=oe.state.directionalShadow,nt.spotLights.value=oe.state.spot,nt.spotLightShadows.value=oe.state.spotShadow,nt.rectAreaLights.value=oe.state.rectArea,nt.ltc_1.value=oe.state.rectAreaLTC1,nt.ltc_2.value=oe.state.rectAreaLTC2,nt.pointLights.value=oe.state.point,nt.pointLightShadows.value=oe.state.pointShadow,nt.hemisphereLights.value=oe.state.hemi,nt.directionalShadowMap.value=oe.state.directionalShadowMap,nt.directionalShadowMatrix.value=oe.state.directionalShadowMatrix,nt.spotShadowMap.value=oe.state.spotShadowMap,nt.spotLightMatrix.value=oe.state.spotLightMatrix,nt.spotLightMap.value=oe.state.spotLightMap,nt.pointShadowMap.value=oe.state.pointShadowMap,nt.pointShadowMatrix.value=oe.state.pointShadowMatrix),de.currentProgram=dt,de.uniformsList=null,dt}function xn($){if($.uniformsList===null){const re=$.currentProgram.getUniforms();$.uniformsList=x0.seqWithValue(re.seq,$.uniforms)}return $.uniformsList}function yn($,re){const ue=$e.get($);ue.outputColorSpace=re.outputColorSpace,ue.batching=re.batching,ue.batchingColor=re.batchingColor,ue.instancing=re.instancing,ue.instancingColor=re.instancingColor,ue.instancingMorph=re.instancingMorph,ue.skinning=re.skinning,ue.morphTargets=re.morphTargets,ue.morphNormals=re.morphNormals,ue.morphColors=re.morphColors,ue.morphTargetsCount=re.morphTargetsCount,ue.numClippingPlanes=re.numClippingPlanes,ue.numIntersection=re.numClipIntersection,ue.vertexAlphas=re.vertexAlphas,ue.vertexTangents=re.vertexTangents,ue.toneMapping=re.toneMapping}function up($,re,ue,de,oe){re.isScene!==!0&&(re=Se),De.resetTextureUnits();const Ae=re.fog,je=de.isMeshStandardMaterial?re.environment:null,qe=B===null?S.outputColorSpace:B.isXRRenderTarget===!0?B.texture.colorSpace:od,Ge=(de.isMeshStandardMaterial?lt:_e).get(de.envMap||je),at=de.vertexColors===!0&&!!ue.attributes.color&&ue.attributes.color.itemSize===4,dt=!!ue.attributes.tangent&&(!!de.normalMap||de.anisotropy>0),nt=!!ue.morphAttributes.position,wt=!!ue.morphAttributes.normal,Rt=!!ue.morphAttributes.color;let Kt=Da;de.toneMapped&&(B===null||B.isXRRenderTarget===!0)&&(Kt=S.toneMapping);const Ot=ue.morphAttributes.position||ue.morphAttributes.normal||ue.morphAttributes.color,Yt=Ot!==void 0?Ot.length:0,ht=$e.get(de),vn=m.state.lights;if(ne===!0&&(Z===!0||$!==D)){const Oi=$===D&&de.id===L;O.setState(de,$,Oi)}let Lt=!1;de.version===ht.__version?(ht.needsLights&&ht.lightsStateVersion!==vn.state.version||ht.outputColorSpace!==qe||oe.isBatchedMesh&&ht.batching===!1||!oe.isBatchedMesh&&ht.batching===!0||oe.isBatchedMesh&&ht.batchingColor===!0&&oe.colorTexture===null||oe.isBatchedMesh&&ht.batchingColor===!1&&oe.colorTexture!==null||oe.isInstancedMesh&&ht.instancing===!1||!oe.isInstancedMesh&&ht.instancing===!0||oe.isSkinnedMesh&&ht.skinning===!1||!oe.isSkinnedMesh&&ht.skinning===!0||oe.isInstancedMesh&&ht.instancingColor===!0&&oe.instanceColor===null||oe.isInstancedMesh&&ht.instancingColor===!1&&oe.instanceColor!==null||oe.isInstancedMesh&&ht.instancingMorph===!0&&oe.morphTexture===null||oe.isInstancedMesh&&ht.instancingMorph===!1&&oe.morphTexture!==null||ht.envMap!==Ge||de.fog===!0&&ht.fog!==Ae||ht.numClippingPlanes!==void 0&&(ht.numClippingPlanes!==O.numPlanes||ht.numIntersection!==O.numIntersection)||ht.vertexAlphas!==at||ht.vertexTangents!==dt||ht.morphTargets!==nt||ht.morphNormals!==wt||ht.morphColors!==Rt||ht.toneMapping!==Kt||ht.morphTargetsCount!==Yt)&&(Lt=!0):(Lt=!0,ht.__version=de.version);let ur=ht.currentProgram;Lt===!0&&(ur=tl(de,re,oe));let Mc=!1,dr=!1,Id=!1;const wn=ur.getUniforms(),Lr=ht.uniforms;if(Ee.useProgram(ur.program)&&(Mc=!0,dr=!0,Id=!0),de.id!==L&&(L=de.id,dr=!0),Mc||D!==$){Ee.buffers.depth.getReversed()&&$.reversedDepth!==!0&&($._reversedDepth=!0,$.updateProjectionMatrix()),wn.setValue(J,"projectionMatrix",$.projectionMatrix),wn.setValue(J,"viewMatrix",$.matrixWorldInverse);const Xi=wn.map.cameraPosition;Xi!==void 0&&Xi.setValue(J,me.setFromMatrixPosition($.matrixWorld)),He.logarithmicDepthBuffer&&wn.setValue(J,"logDepthBufFC",2/(Math.log($.far+1)/Math.LN2)),(de.isMeshPhongMaterial||de.isMeshToonMaterial||de.isMeshLambertMaterial||de.isMeshBasicMaterial||de.isMeshStandardMaterial||de.isShaderMaterial)&&wn.setValue(J,"isOrthographic",$.isOrthographicCamera===!0),D!==$&&(D=$,dr=!0,Id=!0)}if(oe.isSkinnedMesh){wn.setOptional(J,oe,"bindMatrix"),wn.setOptional(J,oe,"bindMatrixInverse");const Oi=oe.skeleton;Oi&&(Oi.boneTexture===null&&Oi.computeBoneTexture(),wn.setValue(J,"boneTexture",Oi.boneTexture,De))}oe.isBatchedMesh&&(wn.setOptional(J,oe,"batchingTexture"),wn.setValue(J,"batchingTexture",oe._matricesTexture,De),wn.setOptional(J,oe,"batchingIdTexture"),wn.setValue(J,"batchingIdTexture",oe._indirectTexture,De),wn.setOptional(J,oe,"batchingColorTexture"),oe._colorsTexture!==null&&wn.setValue(J,"batchingColorTexture",oe._colorsTexture,De));const Ir=ue.morphAttributes;if((Ir.position!==void 0||Ir.normal!==void 0||Ir.color!==void 0)&&W.update(oe,ue,ur),(dr||ht.receiveShadow!==oe.receiveShadow)&&(ht.receiveShadow=oe.receiveShadow,wn.setValue(J,"receiveShadow",oe.receiveShadow)),de.isMeshGouraudMaterial&&de.envMap!==null&&(Lr.envMap.value=Ge,Lr.flipEnvMap.value=Ge.isCubeTexture&&Ge.isRenderTargetTexture===!1?-1:1),de.isMeshStandardMaterial&&de.envMap===null&&re.environment!==null&&(Lr.envMapIntensity.value=re.environmentIntensity),dr&&(wn.setValue(J,"toneMappingExposure",S.toneMappingExposure),ht.needsLights&&Cn(Lr,Id),Ae&&de.fog===!0&&ye.refreshFogUniforms(Lr,Ae),ye.refreshMaterialUniforms(Lr,de,C,P,m.state.transmissionRenderTarget[$.id]),x0.upload(J,xn(ht),Lr,De)),de.isShaderMaterial&&de.uniformsNeedUpdate===!0&&(x0.upload(J,xn(ht),Lr,De),de.uniformsNeedUpdate=!1),de.isSpriteMaterial&&wn.setValue(J,"center",oe.center),wn.setValue(J,"modelViewMatrix",oe.modelViewMatrix),wn.setValue(J,"normalMatrix",oe.normalMatrix),wn.setValue(J,"modelMatrix",oe.matrixWorld),de.isShaderMaterial||de.isRawShaderMaterial){const Oi=de.uniformsGroups;for(let Xi=0,Dx=Oi.length;Xi<Dx;Xi++){const nl=Oi[Xi];Ie.update(nl,ur),Ie.bind(nl,ur)}}return ur}function Cn($,re){$.ambientLightColor.needsUpdate=re,$.lightProbe.needsUpdate=re,$.directionalLights.needsUpdate=re,$.directionalLightShadows.needsUpdate=re,$.pointLights.needsUpdate=re,$.pointLightShadows.needsUpdate=re,$.spotLights.needsUpdate=re,$.spotLightShadows.needsUpdate=re,$.rectAreaLights.needsUpdate=re,$.hemisphereLights.needsUpdate=re}function Nn($){return $.isMeshLambertMaterial||$.isMeshToonMaterial||$.isMeshPhongMaterial||$.isMeshStandardMaterial||$.isShadowMaterial||$.isShaderMaterial&&$.lights===!0}this.getActiveCubeFace=function(){return k},this.getActiveMipmapLevel=function(){return R},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function($,re,ue){const de=$e.get($);de.__autoAllocateDepthBuffer=$.resolveDepthBuffer===!1,de.__autoAllocateDepthBuffer===!1&&(de.__useRenderToTexture=!1),$e.get($.texture).__webglTexture=re,$e.get($.depthTexture).__webglTexture=de.__autoAllocateDepthBuffer?void 0:ue,de.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function($,re){const ue=$e.get($);ue.__webglFramebuffer=re,ue.__useDefaultFramebuffer=re===void 0};const Nd=J.createFramebuffer();this.setRenderTarget=function($,re=0,ue=0){B=$,k=re,R=ue;let de=!0,oe=null,Ae=!1,je=!1;if($){const Ge=$e.get($);if(Ge.__useDefaultFramebuffer!==void 0)Ee.bindFramebuffer(J.FRAMEBUFFER,null),de=!1;else if(Ge.__webglFramebuffer===void 0)De.setupRenderTarget($);else if(Ge.__hasExternalTextures)De.rebindTextures($,$e.get($.texture).__webglTexture,$e.get($.depthTexture).__webglTexture);else if($.depthBuffer){const nt=$.depthTexture;if(Ge.__boundDepthTexture!==nt){if(nt!==null&&$e.has(nt)&&($.width!==nt.image.width||$.height!==nt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");De.setupDepthRenderbuffer($)}}const at=$.texture;(at.isData3DTexture||at.isDataArrayTexture||at.isCompressedArrayTexture)&&(je=!0);const dt=$e.get($).__webglFramebuffer;$.isWebGLCubeRenderTarget?(Array.isArray(dt[re])?oe=dt[re][ue]:oe=dt[re],Ae=!0):$.samples>0&&De.useMultisampledRTT($)===!1?oe=$e.get($).__webglMultisampledFramebuffer:Array.isArray(dt)?oe=dt[ue]:oe=dt,j.copy($.viewport),Y.copy($.scissor),I=$.scissorTest}else j.copy(U).multiplyScalar(C).floor(),Y.copy(T).multiplyScalar(C).floor(),I=G;if(ue!==0&&(oe=Nd),Ee.bindFramebuffer(J.FRAMEBUFFER,oe)&&de&&Ee.drawBuffers($,oe),Ee.viewport(j),Ee.scissor(Y),Ee.setScissorTest(I),Ae){const Ge=$e.get($.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_CUBE_MAP_POSITIVE_X+re,Ge.__webglTexture,ue)}else if(je){const Ge=re;for(let at=0;at<$.textures.length;at++){const dt=$e.get($.textures[at]);J.framebufferTextureLayer(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0+at,dt.__webglTexture,ue,Ge)}}else if($!==null&&ue!==0){const Ge=$e.get($.texture);J.framebufferTexture2D(J.FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Ge.__webglTexture,ue)}L=-1},this.readRenderTargetPixels=function($,re,ue,de,oe,Ae,je,qe=0){if(!($&&$.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ge=$e.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&je!==void 0&&(Ge=Ge[je]),Ge){Ee.bindFramebuffer(J.FRAMEBUFFER,Ge);try{const at=$.textures[qe],dt=at.format,nt=at.type;if(!He.textureFormatReadable(dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!He.textureTypeReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}re>=0&&re<=$.width-de&&ue>=0&&ue<=$.height-oe&&($.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+qe),J.readPixels(re,ue,de,oe,ie.convert(dt),ie.convert(nt),Ae))}finally{const at=B!==null?$e.get(B).__webglFramebuffer:null;Ee.bindFramebuffer(J.FRAMEBUFFER,at)}}},this.readRenderTargetPixelsAsync=async function($,re,ue,de,oe,Ae,je,qe=0){if(!($&&$.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ge=$e.get($).__webglFramebuffer;if($.isWebGLCubeRenderTarget&&je!==void 0&&(Ge=Ge[je]),Ge)if(re>=0&&re<=$.width-de&&ue>=0&&ue<=$.height-oe){Ee.bindFramebuffer(J.FRAMEBUFFER,Ge);const at=$.textures[qe],dt=at.format,nt=at.type;if(!He.textureFormatReadable(dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!He.textureTypeReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const wt=J.createBuffer();J.bindBuffer(J.PIXEL_PACK_BUFFER,wt),J.bufferData(J.PIXEL_PACK_BUFFER,Ae.byteLength,J.STREAM_READ),$.textures.length>1&&J.readBuffer(J.COLOR_ATTACHMENT0+qe),J.readPixels(re,ue,de,oe,ie.convert(dt),ie.convert(nt),0);const Rt=B!==null?$e.get(B).__webglFramebuffer:null;Ee.bindFramebuffer(J.FRAMEBUFFER,Rt);const Kt=J.fenceSync(J.SYNC_GPU_COMMANDS_COMPLETE,0);return J.flush(),await Mq(J,Kt,4),J.bindBuffer(J.PIXEL_PACK_BUFFER,wt),J.getBufferSubData(J.PIXEL_PACK_BUFFER,0,Ae),J.deleteBuffer(wt),J.deleteSync(Kt),Ae}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function($,re=null,ue=0){const de=Math.pow(2,-ue),oe=Math.floor($.image.width*de),Ae=Math.floor($.image.height*de),je=re!==null?re.x:0,qe=re!==null?re.y:0;De.setTexture2D($,0),J.copyTexSubImage2D(J.TEXTURE_2D,ue,0,0,je,qe,oe,Ae),Ee.unbindTexture()};const Rd=J.createFramebuffer(),Ld=J.createFramebuffer();this.copyTextureToTexture=function($,re,ue=null,de=null,oe=0,Ae=null){Ae===null&&(oe!==0?(Mf("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ae=oe,oe=0):Ae=0);let je,qe,Ge,at,dt,nt,wt,Rt,Kt;const Ot=$.isCompressedTexture?$.mipmaps[Ae]:$.image;if(ue!==null)je=ue.max.x-ue.min.x,qe=ue.max.y-ue.min.y,Ge=ue.isBox3?ue.max.z-ue.min.z:1,at=ue.min.x,dt=ue.min.y,nt=ue.isBox3?ue.min.z:0;else{const Ir=Math.pow(2,-oe);je=Math.floor(Ot.width*Ir),qe=Math.floor(Ot.height*Ir),$.isDataArrayTexture?Ge=Ot.depth:$.isData3DTexture?Ge=Math.floor(Ot.depth*Ir):Ge=1,at=0,dt=0,nt=0}de!==null?(wt=de.x,Rt=de.y,Kt=de.z):(wt=0,Rt=0,Kt=0);const Yt=ie.convert(re.format),ht=ie.convert(re.type);let vn;re.isData3DTexture?(De.setTexture3D(re,0),vn=J.TEXTURE_3D):re.isDataArrayTexture||re.isCompressedArrayTexture?(De.setTexture2DArray(re,0),vn=J.TEXTURE_2D_ARRAY):(De.setTexture2D(re,0),vn=J.TEXTURE_2D),J.pixelStorei(J.UNPACK_FLIP_Y_WEBGL,re.flipY),J.pixelStorei(J.UNPACK_PREMULTIPLY_ALPHA_WEBGL,re.premultiplyAlpha),J.pixelStorei(J.UNPACK_ALIGNMENT,re.unpackAlignment);const Lt=J.getParameter(J.UNPACK_ROW_LENGTH),ur=J.getParameter(J.UNPACK_IMAGE_HEIGHT),Mc=J.getParameter(J.UNPACK_SKIP_PIXELS),dr=J.getParameter(J.UNPACK_SKIP_ROWS),Id=J.getParameter(J.UNPACK_SKIP_IMAGES);J.pixelStorei(J.UNPACK_ROW_LENGTH,Ot.width),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,Ot.height),J.pixelStorei(J.UNPACK_SKIP_PIXELS,at),J.pixelStorei(J.UNPACK_SKIP_ROWS,dt),J.pixelStorei(J.UNPACK_SKIP_IMAGES,nt);const wn=$.isDataArrayTexture||$.isData3DTexture,Lr=re.isDataArrayTexture||re.isData3DTexture;if($.isDepthTexture){const Ir=$e.get($),Oi=$e.get(re),Xi=$e.get(Ir.__renderTarget),Dx=$e.get(Oi.__renderTarget);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,Xi.__webglFramebuffer),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,Dx.__webglFramebuffer);for(let nl=0;nl<Ge;nl++)wn&&(J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,$e.get($).__webglTexture,oe,nt+nl),J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,$e.get(re).__webglTexture,Ae,Kt+nl)),J.blitFramebuffer(at,dt,je,qe,wt,Rt,je,qe,J.DEPTH_BUFFER_BIT,J.NEAREST);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else if(oe!==0||$.isRenderTargetTexture||$e.has($)){const Ir=$e.get($),Oi=$e.get(re);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,Rd),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,Ld);for(let Xi=0;Xi<Ge;Xi++)wn?J.framebufferTextureLayer(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Ir.__webglTexture,oe,nt+Xi):J.framebufferTexture2D(J.READ_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Ir.__webglTexture,oe),Lr?J.framebufferTextureLayer(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,Oi.__webglTexture,Ae,Kt+Xi):J.framebufferTexture2D(J.DRAW_FRAMEBUFFER,J.COLOR_ATTACHMENT0,J.TEXTURE_2D,Oi.__webglTexture,Ae),oe!==0?J.blitFramebuffer(at,dt,je,qe,wt,Rt,je,qe,J.COLOR_BUFFER_BIT,J.NEAREST):Lr?J.copyTexSubImage3D(vn,Ae,wt,Rt,Kt+Xi,at,dt,je,qe):J.copyTexSubImage2D(vn,Ae,wt,Rt,at,dt,je,qe);Ee.bindFramebuffer(J.READ_FRAMEBUFFER,null),Ee.bindFramebuffer(J.DRAW_FRAMEBUFFER,null)}else Lr?$.isDataTexture||$.isData3DTexture?J.texSubImage3D(vn,Ae,wt,Rt,Kt,je,qe,Ge,Yt,ht,Ot.data):re.isCompressedArrayTexture?J.compressedTexSubImage3D(vn,Ae,wt,Rt,Kt,je,qe,Ge,Yt,Ot.data):J.texSubImage3D(vn,Ae,wt,Rt,Kt,je,qe,Ge,Yt,ht,Ot):$.isDataTexture?J.texSubImage2D(J.TEXTURE_2D,Ae,wt,Rt,je,qe,Yt,ht,Ot.data):$.isCompressedTexture?J.compressedTexSubImage2D(J.TEXTURE_2D,Ae,wt,Rt,Ot.width,Ot.height,Yt,Ot.data):J.texSubImage2D(J.TEXTURE_2D,Ae,wt,Rt,je,qe,Yt,ht,Ot);J.pixelStorei(J.UNPACK_ROW_LENGTH,Lt),J.pixelStorei(J.UNPACK_IMAGE_HEIGHT,ur),J.pixelStorei(J.UNPACK_SKIP_PIXELS,Mc),J.pixelStorei(J.UNPACK_SKIP_ROWS,dr),J.pixelStorei(J.UNPACK_SKIP_IMAGES,Id),Ae===0&&re.generateMipmaps&&J.generateMipmap(vn),Ee.unbindTexture()},this.initRenderTarget=function($){$e.get($).__webglFramebuffer===void 0&&De.setupRenderTarget($)},this.initTexture=function($){$.isCubeTexture?De.setTextureCube($,0):$.isData3DTexture?De.setTexture3D($,0):$.isDataArrayTexture||$.isCompressedArrayTexture?De.setTexture2DArray($,0):De.setTexture2D($,0),Ee.unbindTexture()},this.resetState=function(){k=0,R=0,B=null,Ee.reset(),ve.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ds}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const n=this.getContext();n.drawingBufferColorSpace=kt._getDrawingBufferColorSpace(e),n.unpackColorSpace=kt._getUnpackColorSpace()}}function w5(){const t=F.useRef(null);return F.useEffect(()=>{if(!t.current)return;const e=new Kq,n=new p5(-1,1,1,-1,0,1),i=new jee({antialias:!0});i.setSize(window.innerWidth,window.innerHeight),t.current.appendChild(i.domElement);const r=new jo({uniforms:{iTime:{value:0},iResolution:{value:new Vt(window.innerWidth,window.innerHeight)}},vertexShader:`
        void main() {
          gl_Position = vec4(position, 1.0);
        }
      `,fragmentShader:`
        uniform float iTime;
        uniform vec2 iResolution;

        #define NUM_OCTAVES 3

        float rand(vec2 n) {
          return fract(sin(dot(n, vec2(12.9898, 4.1414))) * 43758.5453);
        }

        float noise(vec2 p) {
          vec2 ip = floor(p);
          vec2 u = fract(p);
          u = u*u*(3.0-2.0*u);

          float res = mix(
            mix(rand(ip), rand(ip + vec2(1.0, 0.0)), u.x),
            mix(rand(ip + vec2(0.0, 1.0)), rand(ip + vec2(1.0, 1.0)), u.x), u.y);
          return res * res;
        }

        float fbm(vec2 x) {
          float v = 0.0;
          float a = 0.3;
          vec2 shift = vec2(100);
          mat2 rot = mat2(cos(0.5), sin(0.5), -sin(0.5), cos(0.5));
          for (int i = 0; i < NUM_OCTAVES; ++i) {
            v += a * noise(x);
            x = rot * x * 2.0 + shift;
            a *= 0.4;
          }
          return v;
        }

        void main() {
          vec2 shake = vec2(sin(iTime * 1.2) * 0.005, cos(iTime * 2.1) * 0.005);
          vec2 p = ((gl_FragCoord.xy + shake * iResolution.xy) - iResolution.xy * 0.5) / iResolution.y * mat2(6.0, -4.0, 4.0, 6.0);
          vec2 v;
          vec4 o = vec4(0.0);

          float f = 2.0 + fbm(p + vec2(iTime * 5.0, 0.0)) * 0.5;

          for (float i = 0.0; i < 35.0; i++) {
            v = p + cos(i * i + (iTime + p.x * 0.08) * 0.025 + i * vec2(13.0, 11.0)) * 3.5 + vec2(sin(iTime * 3.0 + i) * 0.003, cos(iTime * 3.5 - i) * 0.003);
            float tailNoise = fbm(v + vec2(iTime * 0.5, i)) * 0.3 * (1.0 - (i / 35.0));
        vec3 basePurple = vec3(0.33, 0.16, 0.65);
        vec3 baseTeal = vec3(0.05, 0.8, 0.73);
        float mixFactor = 0.5 + 0.5 * sin(i * 0.35 + iTime * 0.6);
        vec4 auroraColors = vec4(mix(basePurple, baseTeal, mixFactor), 1.0);
        vec4 currentContribution = auroraColors * exp(sin(i * i + iTime * 0.8)) / length(max(v, vec2(v.x * f * 0.015, v.y * 1.5)));
        float thinnessFactor = smoothstep(0.0, 1.0, i / 35.0) * 0.6;
        o += currentContribution * (1.0 + tailNoise * 0.8) * thinnessFactor;
      }

      o = tanh(pow(o / 70.0, vec4(1.4)));
      gl_FragColor = vec4(o.rgb * 1.8, 1.0);
        }
      `}),s=new ap(2,2),o=new Bs(s,r);e.add(o);let a;const l=()=>{r.uniforms.iTime.value+=.016,i.render(e,n),a=requestAnimationFrame(l)};l();const c=()=>{i.setSize(window.innerWidth,window.innerHeight),r.uniforms.iResolution.value.set(window.innerWidth,window.innerHeight)};return window.addEventListener("resize",c),()=>{window.removeEventListener("resize",c),cancelAnimationFrame(a),i.dispose(),s.dispose(),r.dispose(),t.current&&(t.current.innerHTML="")}},[]),d.jsx("div",{ref:t,className:"fixed top-0 left-0 w-full h-full -z-10",style:{zIndex:0}})}function Fee({onEnter:t}){return d.jsxs(et.div,{initial:{opacity:1},exit:{opacity:0,scale:1.2},transition:{duration:.8},className:"fixed inset-0 z-50 flex flex-col items-center justify-center bg-neutral-900/80 backdrop-blur-sm",onClick:t,children:[d.jsx("div",{className:"relative",children:d.jsx(et.div,{className:"w-64 h-64 md:w-80 md:h-80 lg:w-96 lg:h-96 flex items-center justify-center cursor-pointer",animate:{rotateY:[0,360],rotateX:[0,360]},transition:{duration:8,repeat:1/0,ease:"linear"},whileHover:{scale:1.1,transition:{duration:.3}},style:{transformStyle:"preserve-3d",perspective:1e3,filter:"drop-shadow(0 0 20px rgba(197, 107, 206, 0.5))"},children:d.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 533 530",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M520.858 245.866C536.403 253.587 536.403 275.762 520.858 283.482L30.4678 527.04C11.1866 536.616 -8.30137 514.434 3.678 496.547L151.138 276.36C155.874 269.289 155.874 260.06 151.138 252.989L3.67798 32.802C-8.30139 14.9145 11.1865 -7.26763 30.4677 2.30859L520.858 245.866Z",fill:"#C56BCE"})})})}),d.jsx(et.p,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"mt-12 text-lg font-medium text-neutral-400 tracking-wide",children:"Click to enter The Flix"})]})}const Nx=new Xe("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");new Xe("TokenzQdBNbLqP5VEhdkAS6EPFLC1PHnBqCXEpPxuEb");const zee=new Xe("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");new Xe("So11111111111111111111111111111111111111112");new Xe("9pan9bMn5HatX4EJdBwg9VgCa7Uz5HL8N1m5D3NdXejP");const AM=t=>{const e=t.decode.bind(t),n=t.encode.bind(t);return{decode:e,encode:n}};var lp={};Object.defineProperty(lp,"__esModule",{value:!0});function Vee(t){{const e=cn.from(t);e.reverse();const n=e.toString("hex");return n.length===0?BigInt(0):BigInt(`0x${n}`)}}var Wee=lp.toBigIntLE=Vee;function Hee(t){{const e=t.toString("hex");return e.length===0?BigInt(0):BigInt(`0x${e}`)}}lp.toBigIntBE=Hee;function Gee(t,e){{const n=t.toString(16),i=cn.from(n.padStart(e*2,"0").slice(0,e*2),"hex");return i.reverse(),i}}var $ee=lp.toBufferLE=Gee;function Yee(t,e){{const n=t.toString(16);return cn.from(n.padStart(e*2,"0").slice(0,e*2),"hex")}}lp.toBufferBE=Yee;const Xee=t=>e=>{const n=qt(t,e),{encode:i,decode:r}=AM(n),s=n;return s.decode=(o,a)=>{const l=r(o,a);return Wee(cn.from(l))},s.encode=(o,a,l)=>{const c=$ee(o,t);return i(c,a,l)},s},qee=Xee(8),Kee=t=>{const e=Ct(t),{encode:n,decode:i}=AM(e),r=e;return r.decode=(s,o)=>!!i(s,o),r.encode=(s,o,a)=>{const l=Number(s);return n(l,o,a)},r},_C=t=>{const e=qt(32,t),{encode:n,decode:i}=AM(e),r=e;return r.decode=(s,o)=>{const a=i(s,o);return new Xe(a)},r.encode=(s,o,a)=>{const l=s.toBuffer();return n(l,o,a)},r};class Zee extends Error{constructor(e){super(e)}}class Qee extends Zee{constructor(){super(...arguments),this.name="TokenOwnerOffCurveError"}}const Jee=Qe([rt("mintAuthorityOption"),_C("mintAuthority"),qee("supply"),Ct("decimals"),Kee("isInitialized"),rt("freezeAuthorityOption"),_C("freezeAuthority")]);Jee.span;async function ete(t,e,n=!1,i=Nx,r=zee){if(!n&&!Xe.isOnCurve(e.toBuffer()))throw new Qee;const[s]=await Xe.findProgramAddress([e.toBuffer(),i.toBuffer(),t.toBuffer()],r);return s}function bC(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function tte(...t){return e=>{let n=!1;const i=t.map(r=>{const s=bC(r,e);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let r=0;r<i.length;r++){const s=i[r];typeof s=="function"?s():bC(t[r],null)}}}}var nte=Symbol.for("react.lazy"),Mg=dN[" use ".trim().toString()];function ite(t){return typeof t=="object"&&t!==null&&"then"in t}function _5(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===nte&&"_payload"in t&&ite(t._payload)}function rte(t){const e=ote(t),n=F.forwardRef((i,r)=>{let{children:s,...o}=i;_5(s)&&typeof Mg=="function"&&(s=Mg(s._payload));const a=F.Children.toArray(s),l=a.find(lte);if(l){const c=l.props.children,u=a.map(h=>h===l?F.Children.count(c)>1?F.Children.only(null):F.isValidElement(c)?c.props.children:null:h);return d.jsx(e,{...o,ref:r,children:F.isValidElement(c)?F.cloneElement(c,void 0,u):null})}return d.jsx(e,{...o,ref:r,children:s})});return n.displayName=`${t}.Slot`,n}var ste=rte("Slot");function ote(t){const e=F.forwardRef((n,i)=>{let{children:r,...s}=n;if(_5(r)&&typeof Mg=="function"&&(r=Mg(r._payload)),F.isValidElement(r)){const o=ute(r),a=cte(s,r.props);return r.type!==F.Fragment&&(a.ref=i?tte(i,o):o),F.cloneElement(r,a)}return F.Children.count(r)>1?F.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var ate=Symbol("radix.slottable");function lte(t){return F.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===ate}function cte(t,e){const n={...e};for(const i in e){const r=t[i],s=e[i];/^on[A-Z]/.test(i)?r&&s?n[i]=(...a)=>{const l=s(...a);return r(...a),l}:r&&(n[i]=r):i==="style"?n[i]={...r,...s}:i==="className"&&(n[i]=[r,s].filter(Boolean).join(" "))}return{...t,...n}}function ute(t){var i,r;let e=(i=Object.getOwnPropertyDescriptor(t.props,"ref"))==null?void 0:i.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=(r=Object.getOwnPropertyDescriptor(t,"ref"))==null?void 0:r.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function b5(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=b5(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function S5(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=b5(t))&&(i&&(i+=" "),i+=e);return i}const SC=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,MC=S5,dte=(t,e)=>n=>{var i;if((e==null?void 0:e.variants)==null)return MC(t,n==null?void 0:n.class,n==null?void 0:n.className);const{variants:r,defaultVariants:s}=e,o=Object.keys(r).map(c=>{const u=n==null?void 0:n[c],h=s==null?void 0:s[c];if(u===null)return null;const f=SC(u)||SC(h);return r[c][f]}),a=n&&Object.entries(n).reduce((c,u)=>{let[h,f]=u;return f===void 0||(c[h]=f),c},{}),l=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((c,u)=>{let{class:h,className:f,...p}=u;return Object.entries(p).every(x=>{let[y,g]=x;return Array.isArray(g)?g.includes({...s,...a}[y]):{...s,...a}[y]===g})?[...c,h,f]:c},[]);return MC(t,o,l,n==null?void 0:n.class,n==null?void 0:n.className)},hte=(t,e)=>{const n=new Array(t.length+e.length);for(let i=0;i<t.length;i++)n[i]=t[i];for(let i=0;i<e.length;i++)n[t.length+i]=e[i];return n},fte=(t,e)=>({classGroupId:t,validator:e}),M5=(t=new Map,e=null,n)=>({nextPart:t,validators:e,classGroupId:n}),Eg="-",EC=[],pte="arbitrary..",mte=t=>{const e=xte(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:o=>{if(o.startsWith("[")&&o.endsWith("]"))return gte(o);const a=o.split(Eg),l=a[0]===""&&a.length>1?1:0;return E5(a,l,e)},getConflictingClassGroupIds:(o,a)=>{if(a){const l=i[o],c=n[o];return l?c?hte(c,l):l:c||EC}return n[o]||EC}}},E5=(t,e,n)=>{if(t.length-e===0)return n.classGroupId;const r=t[e],s=n.nextPart.get(r);if(s){const c=E5(t,e+1,s);if(c)return c}const o=n.validators;if(o===null)return;const a=e===0?t.join(Eg):t.slice(e).join(Eg),l=o.length;for(let c=0;c<l;c++){const u=o[c];if(u.validator(a))return u.classGroupId}},gte=t=>t.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=t.slice(1,-1),n=e.indexOf(":"),i=e.slice(0,n);return i?pte+i:void 0})(),xte=t=>{const{theme:e,classGroups:n}=t;return yte(n,e)},yte=(t,e)=>{const n=M5();for(const i in t){const r=t[i];CM(r,n,i,e)}return n},CM=(t,e,n,i)=>{const r=t.length;for(let s=0;s<r;s++){const o=t[s];vte(o,e,n,i)}},vte=(t,e,n,i)=>{if(typeof t=="string"){wte(t,e,n);return}if(typeof t=="function"){_te(t,e,n,i);return}bte(t,e,n,i)},wte=(t,e,n)=>{const i=t===""?e:T5(e,t);i.classGroupId=n},_te=(t,e,n,i)=>{if(Ste(t)){CM(t(i),e,n,i);return}e.validators===null&&(e.validators=[]),e.validators.push(fte(n,t))},bte=(t,e,n,i)=>{const r=Object.entries(t),s=r.length;for(let o=0;o<s;o++){const[a,l]=r[o];CM(l,T5(e,a),n,i)}},T5=(t,e)=>{let n=t;const i=e.split(Eg),r=i.length;for(let s=0;s<r;s++){const o=i[s];let a=n.nextPart.get(o);a||(a=M5(),n.nextPart.set(o,a)),n=a}return n},Ste=t=>"isThemeGetter"in t&&t.isThemeGetter===!0,Mte=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=Object.create(null),i=Object.create(null);const r=(s,o)=>{n[s]=o,e++,e>t&&(e=0,i=n,n=Object.create(null))};return{get(s){let o=n[s];if(o!==void 0)return o;if((o=i[s])!==void 0)return r(s,o),o},set(s,o){s in n?n[s]=o:r(s,o)}}},H_="!",TC=":",Ete=[],AC=(t,e,n,i,r)=>({modifiers:t,hasImportantModifier:e,baseClassName:n,maybePostfixModifierPosition:i,isExternal:r}),Tte=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=r=>{const s=[];let o=0,a=0,l=0,c;const u=r.length;for(let y=0;y<u;y++){const g=r[y];if(o===0&&a===0){if(g===TC){s.push(r.slice(l,y)),l=y+1;continue}if(g==="/"){c=y;continue}}g==="["?o++:g==="]"?o--:g==="("?a++:g===")"&&a--}const h=s.length===0?r:r.slice(l);let f=h,p=!1;h.endsWith(H_)?(f=h.slice(0,-1),p=!0):h.startsWith(H_)&&(f=h.slice(1),p=!0);const x=c&&c>l?c-l:void 0;return AC(s,p,f,x)};if(e){const r=e+TC,s=i;i=o=>o.startsWith(r)?s(o.slice(r.length)):AC(Ete,!1,o,void 0,!0)}if(n){const r=i;i=s=>n({className:s,parseClassName:r})}return i},Ate=t=>{const e=new Map;return t.orderSensitiveModifiers.forEach((n,i)=>{e.set(n,1e6+i)}),n=>{const i=[];let r=[];for(let s=0;s<n.length;s++){const o=n[s],a=o[0]==="[",l=e.has(o);a||l?(r.length>0&&(r.sort(),i.push(...r),r=[]),i.push(o)):r.push(o)}return r.length>0&&(r.sort(),i.push(...r)),i}},Cte=t=>({cache:Mte(t.cacheSize),parseClassName:Tte(t),sortModifiers:Ate(t),...mte(t)}),Nte=/\s+/,Rte=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:s}=e,o=[],a=t.trim().split(Nte);let l="";for(let c=a.length-1;c>=0;c-=1){const u=a[c],{isExternal:h,modifiers:f,hasImportantModifier:p,baseClassName:x,maybePostfixModifierPosition:y}=n(u);if(h){l=u+(l.length>0?" "+l:l);continue}let g=!!y,m=i(g?x.substring(0,y):x);if(!m){if(!g){l=u+(l.length>0?" "+l:l);continue}if(m=i(x),!m){l=u+(l.length>0?" "+l:l);continue}g=!1}const _=f.length===0?"":f.length===1?f[0]:s(f).join(":"),w=p?_+H_:_,S=w+m;if(o.indexOf(S)>-1)continue;o.push(S);const N=r(m,g);for(let k=0;k<N.length;++k){const R=N[k];o.push(w+R)}l=u+(l.length>0?" "+l:l)}return l},Lte=(...t)=>{let e=0,n,i,r="";for(;e<t.length;)(n=t[e++])&&(i=A5(n))&&(r&&(r+=" "),r+=i);return r},A5=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=A5(t[i]))&&(n&&(n+=" "),n+=e);return n},Ite=(t,...e)=>{let n,i,r,s;const o=l=>{const c=e.reduce((u,h)=>h(u),t());return n=Cte(c),i=n.cache.get,r=n.cache.set,s=a,a(l)},a=l=>{const c=i(l);if(c)return c;const u=Rte(l,n);return r(l,u),u};return s=o,(...l)=>s(Lte(...l))},kte=[],Xn=t=>{const e=n=>n[t]||kte;return e.isThemeGetter=!0,e},C5=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,N5=/^\((?:(\w[\w-]*):)?(.+)\)$/i,Pte=/^\d+\/\d+$/,Dte=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Bte=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Ute=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,Ote=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,jte=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Gc=t=>Pte.test(t),St=t=>!!t&&!Number.isNaN(Number(t)),ta=t=>!!t&&Number.isInteger(Number(t)),kv=t=>t.endsWith("%")&&St(t.slice(0,-1)),no=t=>Dte.test(t),Fte=()=>!0,zte=t=>Bte.test(t)&&!Ute.test(t),R5=()=>!1,Vte=t=>Ote.test(t),Wte=t=>jte.test(t),Hte=t=>!Ke(t)&&!Ze(t),Gte=t=>Ed(t,k5,R5),Ke=t=>C5.test(t),ul=t=>Ed(t,P5,zte),Pv=t=>Ed(t,Kte,St),CC=t=>Ed(t,L5,R5),$te=t=>Ed(t,I5,Wte),pm=t=>Ed(t,D5,Vte),Ze=t=>N5.test(t),qd=t=>Td(t,P5),Yte=t=>Td(t,Zte),NC=t=>Td(t,L5),Xte=t=>Td(t,k5),qte=t=>Td(t,I5),mm=t=>Td(t,D5,!0),Ed=(t,e,n)=>{const i=C5.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},Td=(t,e,n=!1)=>{const i=N5.exec(t);return i?i[1]?e(i[1]):n:!1},L5=t=>t==="position"||t==="percentage",I5=t=>t==="image"||t==="url",k5=t=>t==="length"||t==="size"||t==="bg-size",P5=t=>t==="length",Kte=t=>t==="number",Zte=t=>t==="family-name",D5=t=>t==="shadow",Qte=()=>{const t=Xn("color"),e=Xn("font"),n=Xn("text"),i=Xn("font-weight"),r=Xn("tracking"),s=Xn("leading"),o=Xn("breakpoint"),a=Xn("container"),l=Xn("spacing"),c=Xn("radius"),u=Xn("shadow"),h=Xn("inset-shadow"),f=Xn("text-shadow"),p=Xn("drop-shadow"),x=Xn("blur"),y=Xn("perspective"),g=Xn("aspect"),m=Xn("ease"),_=Xn("animate"),w=()=>["auto","avoid","all","avoid-page","page","left","right","column"],S=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],N=()=>[...S(),Ze,Ke],k=()=>["auto","hidden","clip","visible","scroll"],R=()=>["auto","contain","none"],B=()=>[Ze,Ke,l],L=()=>[Gc,"full","auto",...B()],D=()=>[ta,"none","subgrid",Ze,Ke],j=()=>["auto",{span:["full",ta,Ze,Ke]},ta,Ze,Ke],Y=()=>[ta,"auto",Ze,Ke],I=()=>["auto","min","max","fr",Ze,Ke],v=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],b=()=>["start","end","center","stretch","center-safe","end-safe"],E=()=>["auto",...B()],P=()=>[Gc,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...B()],C=()=>[t,Ze,Ke],z=()=>[...S(),NC,CC,{position:[Ze,Ke]}],V=()=>["no-repeat",{repeat:["","x","y","space","round"]}],U=()=>["auto","cover","contain",Xte,Gte,{size:[Ze,Ke]}],T=()=>[kv,qd,ul],G=()=>["","none","full",c,Ze,Ke],K=()=>["",St,qd,ul],ne=()=>["solid","dashed","dotted","double"],Z=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[St,kv,NC,CC],me=()=>["","none",x,Ze,Ke],pe=()=>["none",St,Ze,Ke],Se=()=>["none",St,Ze,Ke],Re=()=>[St,Ze,Ke],it=()=>[Gc,"full",...B()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[no],breakpoint:[no],color:[Fte],container:[no],"drop-shadow":[no],ease:["in","out","in-out"],font:[Hte],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[no],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[no],shadow:[no],spacing:["px",St],text:[no],"text-shadow":[no],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Gc,Ke,Ze,g]}],container:["container"],columns:[{columns:[St,Ke,Ze,a]}],"break-after":[{"break-after":w()}],"break-before":[{"break-before":w()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:N()}],overflow:[{overflow:k()}],"overflow-x":[{"overflow-x":k()}],"overflow-y":[{"overflow-y":k()}],overscroll:[{overscroll:R()}],"overscroll-x":[{"overscroll-x":R()}],"overscroll-y":[{"overscroll-y":R()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:L()}],"inset-x":[{"inset-x":L()}],"inset-y":[{"inset-y":L()}],start:[{start:L()}],end:[{end:L()}],top:[{top:L()}],right:[{right:L()}],bottom:[{bottom:L()}],left:[{left:L()}],visibility:["visible","invisible","collapse"],z:[{z:[ta,"auto",Ze,Ke]}],basis:[{basis:[Gc,"full","auto",a,...B()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[St,Gc,"auto","initial","none",Ke]}],grow:[{grow:["",St,Ze,Ke]}],shrink:[{shrink:["",St,Ze,Ke]}],order:[{order:[ta,"first","last","none",Ze,Ke]}],"grid-cols":[{"grid-cols":D()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":Y()}],"col-end":[{"col-end":Y()}],"grid-rows":[{"grid-rows":D()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":Y()}],"row-end":[{"row-end":Y()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":I()}],"auto-rows":[{"auto-rows":I()}],gap:[{gap:B()}],"gap-x":[{"gap-x":B()}],"gap-y":[{"gap-y":B()}],"justify-content":[{justify:[...v(),"normal"]}],"justify-items":[{"justify-items":[...b(),"normal"]}],"justify-self":[{"justify-self":["auto",...b()]}],"align-content":[{content:["normal",...v()]}],"align-items":[{items:[...b(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...b(),{baseline:["","last"]}]}],"place-content":[{"place-content":v()}],"place-items":[{"place-items":[...b(),"baseline"]}],"place-self":[{"place-self":["auto",...b()]}],p:[{p:B()}],px:[{px:B()}],py:[{py:B()}],ps:[{ps:B()}],pe:[{pe:B()}],pt:[{pt:B()}],pr:[{pr:B()}],pb:[{pb:B()}],pl:[{pl:B()}],m:[{m:E()}],mx:[{mx:E()}],my:[{my:E()}],ms:[{ms:E()}],me:[{me:E()}],mt:[{mt:E()}],mr:[{mr:E()}],mb:[{mb:E()}],ml:[{ml:E()}],"space-x":[{"space-x":B()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":B()}],"space-y-reverse":["space-y-reverse"],size:[{size:P()}],w:[{w:[a,"screen",...P()]}],"min-w":[{"min-w":[a,"screen","none",...P()]}],"max-w":[{"max-w":[a,"screen","none","prose",{screen:[o]},...P()]}],h:[{h:["screen","lh",...P()]}],"min-h":[{"min-h":["screen","lh","none",...P()]}],"max-h":[{"max-h":["screen","lh",...P()]}],"font-size":[{text:["base",n,qd,ul]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Ze,Pv]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",kv,Ke]}],"font-family":[{font:[Yte,Ke,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Ze,Ke]}],"line-clamp":[{"line-clamp":[St,"none",Ze,Pv]}],leading:[{leading:[s,...B()]}],"list-image":[{"list-image":["none",Ze,Ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ze,Ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:C()}],"text-color":[{text:C()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ne(),"wavy"]}],"text-decoration-thickness":[{decoration:[St,"from-font","auto",Ze,ul]}],"text-decoration-color":[{decoration:C()}],"underline-offset":[{"underline-offset":[St,"auto",Ze,Ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ze,Ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ze,Ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:z()}],"bg-repeat":[{bg:V()}],"bg-size":[{bg:U()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},ta,Ze,Ke],radial:["",Ze,Ke],conic:[ta,Ze,Ke]},qte,$te]}],"bg-color":[{bg:C()}],"gradient-from-pos":[{from:T()}],"gradient-via-pos":[{via:T()}],"gradient-to-pos":[{to:T()}],"gradient-from":[{from:C()}],"gradient-via":[{via:C()}],"gradient-to":[{to:C()}],rounded:[{rounded:G()}],"rounded-s":[{"rounded-s":G()}],"rounded-e":[{"rounded-e":G()}],"rounded-t":[{"rounded-t":G()}],"rounded-r":[{"rounded-r":G()}],"rounded-b":[{"rounded-b":G()}],"rounded-l":[{"rounded-l":G()}],"rounded-ss":[{"rounded-ss":G()}],"rounded-se":[{"rounded-se":G()}],"rounded-ee":[{"rounded-ee":G()}],"rounded-es":[{"rounded-es":G()}],"rounded-tl":[{"rounded-tl":G()}],"rounded-tr":[{"rounded-tr":G()}],"rounded-br":[{"rounded-br":G()}],"rounded-bl":[{"rounded-bl":G()}],"border-w":[{border:K()}],"border-w-x":[{"border-x":K()}],"border-w-y":[{"border-y":K()}],"border-w-s":[{"border-s":K()}],"border-w-e":[{"border-e":K()}],"border-w-t":[{"border-t":K()}],"border-w-r":[{"border-r":K()}],"border-w-b":[{"border-b":K()}],"border-w-l":[{"border-l":K()}],"divide-x":[{"divide-x":K()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":K()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ne(),"hidden","none"]}],"divide-style":[{divide:[...ne(),"hidden","none"]}],"border-color":[{border:C()}],"border-color-x":[{"border-x":C()}],"border-color-y":[{"border-y":C()}],"border-color-s":[{"border-s":C()}],"border-color-e":[{"border-e":C()}],"border-color-t":[{"border-t":C()}],"border-color-r":[{"border-r":C()}],"border-color-b":[{"border-b":C()}],"border-color-l":[{"border-l":C()}],"divide-color":[{divide:C()}],"outline-style":[{outline:[...ne(),"none","hidden"]}],"outline-offset":[{"outline-offset":[St,Ze,Ke]}],"outline-w":[{outline:["",St,qd,ul]}],"outline-color":[{outline:C()}],shadow:[{shadow:["","none",u,mm,pm]}],"shadow-color":[{shadow:C()}],"inset-shadow":[{"inset-shadow":["none",h,mm,pm]}],"inset-shadow-color":[{"inset-shadow":C()}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:C()}],"ring-offset-w":[{"ring-offset":[St,ul]}],"ring-offset-color":[{"ring-offset":C()}],"inset-ring-w":[{"inset-ring":K()}],"inset-ring-color":[{"inset-ring":C()}],"text-shadow":[{"text-shadow":["none",f,mm,pm]}],"text-shadow-color":[{"text-shadow":C()}],opacity:[{opacity:[St,Ze,Ke]}],"mix-blend":[{"mix-blend":[...Z(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Z()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[St]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":C()}],"mask-image-linear-to-color":[{"mask-linear-to":C()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":C()}],"mask-image-t-to-color":[{"mask-t-to":C()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":C()}],"mask-image-r-to-color":[{"mask-r-to":C()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":C()}],"mask-image-b-to-color":[{"mask-b-to":C()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":C()}],"mask-image-l-to-color":[{"mask-l-to":C()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":C()}],"mask-image-x-to-color":[{"mask-x-to":C()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":C()}],"mask-image-y-to-color":[{"mask-y-to":C()}],"mask-image-radial":[{"mask-radial":[Ze,Ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":C()}],"mask-image-radial-to-color":[{"mask-radial-to":C()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":S()}],"mask-image-conic-pos":[{"mask-conic":[St]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":C()}],"mask-image-conic-to-color":[{"mask-conic-to":C()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:z()}],"mask-repeat":[{mask:V()}],"mask-size":[{mask:U()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ze,Ke]}],filter:[{filter:["","none",Ze,Ke]}],blur:[{blur:me()}],brightness:[{brightness:[St,Ze,Ke]}],contrast:[{contrast:[St,Ze,Ke]}],"drop-shadow":[{"drop-shadow":["","none",p,mm,pm]}],"drop-shadow-color":[{"drop-shadow":C()}],grayscale:[{grayscale:["",St,Ze,Ke]}],"hue-rotate":[{"hue-rotate":[St,Ze,Ke]}],invert:[{invert:["",St,Ze,Ke]}],saturate:[{saturate:[St,Ze,Ke]}],sepia:[{sepia:["",St,Ze,Ke]}],"backdrop-filter":[{"backdrop-filter":["","none",Ze,Ke]}],"backdrop-blur":[{"backdrop-blur":me()}],"backdrop-brightness":[{"backdrop-brightness":[St,Ze,Ke]}],"backdrop-contrast":[{"backdrop-contrast":[St,Ze,Ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",St,Ze,Ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[St,Ze,Ke]}],"backdrop-invert":[{"backdrop-invert":["",St,Ze,Ke]}],"backdrop-opacity":[{"backdrop-opacity":[St,Ze,Ke]}],"backdrop-saturate":[{"backdrop-saturate":[St,Ze,Ke]}],"backdrop-sepia":[{"backdrop-sepia":["",St,Ze,Ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":B()}],"border-spacing-x":[{"border-spacing-x":B()}],"border-spacing-y":[{"border-spacing-y":B()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ze,Ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[St,"initial",Ze,Ke]}],ease:[{ease:["linear","initial",m,Ze,Ke]}],delay:[{delay:[St,Ze,Ke]}],animate:[{animate:["none",_,Ze,Ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[y,Ze,Ke]}],"perspective-origin":[{"perspective-origin":N()}],rotate:[{rotate:pe()}],"rotate-x":[{"rotate-x":pe()}],"rotate-y":[{"rotate-y":pe()}],"rotate-z":[{"rotate-z":pe()}],scale:[{scale:Se()}],"scale-x":[{"scale-x":Se()}],"scale-y":[{"scale-y":Se()}],"scale-z":[{"scale-z":Se()}],"scale-3d":["scale-3d"],skew:[{skew:Re()}],"skew-x":[{"skew-x":Re()}],"skew-y":[{"skew-y":Re()}],transform:[{transform:[Ze,Ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:N()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:it()}],"translate-x":[{"translate-x":it()}],"translate-y":[{"translate-y":it()}],"translate-z":[{"translate-z":it()}],"translate-none":["translate-none"],accent:[{accent:C()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:C()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ze,Ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ze,Ke]}],fill:[{fill:["none",...C()]}],"stroke-w":[{stroke:[St,qd,ul,Pv]}],stroke:[{stroke:["none",...C()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Jte=Ite(Qte);function G_(...t){return Jte(S5(t))}const ene=dte(["gradient-button","inline-flex items-center justify-center","rounded-[11px] min-w-[132px] px-9 py-4","text-base leading-[19px] font-[500] text-white","font-sans font-bold","focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring","disabled:pointer-events-none disabled:opacity-50"],{variants:{variant:{default:"",variant:"gradient-button-variant"}},defaultVariants:{variant:"default"}}),Xt=F.forwardRef(({className:t,variant:e,asChild:n=!1,...i},r)=>{const s=n?ste:"button";return d.jsx(s,{className:G_(ene({variant:e,className:t})),ref:r,...i})});Xt.displayName="GradientButton";function Pn({className:t="",size:e=16}){return d.jsxs("svg",{width:e,height:e,viewBox:"0 0 500 500",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:t,children:[d.jsx("path",{d:"M250 498.3C387.133 498.3 498.3 387.133 498.3 250C498.3 112.868 387.133 1.7002 250 1.7002C112.868 1.7002 1.7002 112.868 1.7002 250C1.7002 387.133 112.868 498.3 250 498.3Z",fill:"#2775CA"}),d.jsx("path",{d:"M203.4 422.7C203.4 428.5 198.7 431.8 193.3 430.1C118.1 406 63.7998 335.7 63.7998 252.5C63.7998 169.5 118.1 99.0999 193.4 74.9999C199 73.2999 203.5 76.5999 203.5 82.3999V96.8999C203.5 100.8 200.6 105.2 196.9 106.6C137.3 128.5 94.8998 185.7 94.8998 252.5C94.8998 319.4 137.4 376.5 196.9 398.2C200.6 399.6 203.5 404 203.5 407.9V422.7H203.4Z",fill:"white"}),d.jsx("path",{d:"M265.5 368.9C265.5 373.2 262 376.7 257.7 376.7H242.2C237.9 376.7 234.4 373.2 234.4 368.9V344.5C200.5 339.8 184 321 179.5 295C178.7 290.5 182.2 286.7 186.7 286.7H204.4C208.1 286.7 211.2 289.4 212 292.9C215.3 308.2 224.2 320.1 251.4 320.1C271.4 320.1 285.7 308.8 285.7 292.2C285.7 275.5 277.4 269.1 247.9 264.3C204.4 258.5 183.9 245.3 183.9 211.3C183.9 185.1 203.9 164.5 234.5 160.3V136.2C234.5 131.9 238 128.4 242.3 128.4H257.8C262.1 128.4 265.6 131.9 265.6 136.2V160.8C290.6 165.3 306.5 179.4 311.8 203.1C312.8 207.6 309.3 211.6 304.6 211.6H288.3C284.8 211.6 281.9 209.3 280.9 206C276.4 191.1 265.8 184.5 247.1 184.5C226.5 184.5 215.9 194.4 215.9 208.4C215.9 223.1 221.9 230.5 253.5 235C296.2 240.8 318.3 253 318.3 289.3C318.3 316.8 297.7 339.2 265.7 344.2V369H265.5V368.9Z",fill:"white"}),d.jsx("path",{d:"M306.6 430C301 431.7 296.5 428.4 296.5 422.6V408.1C296.5 403.8 299 399.8 303.1 398.4C362.5 376.7 405.1 319.4 405.1 252.7C405.1 185.8 362.6 128.7 303.1 107C299.4 105.6 296.5 101.2 296.5 97.2998V82.7998C296.5 76.9998 301.2 73.6998 306.6 75.3998C381.9 99.0998 436.2 169.5 436.2 252.5C436.2 335.7 381.9 406 306.6 430Z",fill:"white"})]})}class tne{constructor(){Oe(this,"queue",[]);Oe(this,"processing",!1);Oe(this,"minDelay",300);Oe(this,"maxConcurrent",1);Oe(this,"activeRequests",0);Oe(this,"lastRequestTime",0)}async enqueue(e,n=5){return new Promise((i,r)=>{const s=Math.random().toString(36).slice(2),o={id:s,execute:e,resolve:i,reject:r,retryCount:0,priority:n},a=this.queue.findIndex(l=>l.priority>n);a===-1?this.queue.push(o):this.queue.splice(a,0,o),console.log(` Queued request ${s} (priority: ${n}, queue size: ${this.queue.length})`),this.processQueue()})}async processQueue(){if(!(this.processing||this.queue.length===0)){for(this.processing=!0;this.queue.length>0&&this.activeRequests<this.maxConcurrent;){const e=Date.now()-this.lastRequestTime;e<this.minDelay&&await new Promise(i=>setTimeout(i,this.minDelay-e));const n=this.queue.shift();n&&(this.activeRequests++,this.lastRequestTime=Date.now(),this.executeRequest(n))}this.processing=!1}}async executeRequest(e){var n,i;try{console.log(` Executing request ${e.id} (retry: ${e.retryCount})`);const r=await e.execute();e.resolve(r),console.log(` Request ${e.id} completed`)}catch(r){if(((n=r==null?void 0:r.message)!=null&&n.includes("429")||(i=r==null?void 0:r.message)!=null&&i.includes("Too many requests"))&&e.retryCount<3){const s=Math.pow(2,e.retryCount)*1e3;console.warn(` Request ${e.id} hit rate limit. Retrying in ${s/1e3}s... (attempt ${e.retryCount+1}/3)`),e.retryCount++,setTimeout(()=>{this.queue.unshift(e),this.processQueue()},s)}else console.error(` Request ${e.id} failed:`,(r==null?void 0:r.message)||r),e.reject(r)}finally{this.activeRequests--,setTimeout(()=>this.processQueue(),this.minDelay)}}getStatus(){return{queueSize:this.queue.length,activeRequests:this.activeRequests,processing:this.processing}}clear(){this.queue.forEach(e=>{e.reject(new Error("Request queue cleared"))}),this.queue=[]}}const nne=new tne;function Ba(t,e=5){return nne.enqueue(t,e)}const Ua={CRITICAL:0,HIGH:2,MEDIUM:5,LOW:7,BACKGROUND:9},ine="4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU",rne=ine,NM=()=>new Xe(rne);function B5({isOpen:t,onClose:e,onSessionCreated:n,hasExistingSession:i=!1}){const{publicKey:r,signTransaction:s,sendTransaction:o}=Ui(),[a,l]=F.useState(10),[c,u]=F.useState(!1),[h,f]=F.useState(null),[p,x]=F.useState("setup"),[y,g]=F.useState(null),[m,_]=F.useState(!1),[w,S]=F.useState(0),[N,k]=F.useState(!1),R=[5,10,20,50,100],B=F.useCallback(()=>y===null?0:Math.max(y-(i?w:0),0),[y,i,w]),L=F.useCallback(async()=>{if(!t||!r){console.log(" Modal not open or no wallet connected");return}_(!0),console.log(" Fetching wallet balance for MAX button (HIGH priority)...");try{const v="https://api.devnet.solana.com",b=new Ok(v,"confirmed"),E=NM(),P=await ete(E,r);if(console.log("    User USDC account:",P.toBase58()),!await Ba(()=>b.getAccountInfo(P),Ua.HIGH)){console.log("    No USDC account found - balance is 0"),g(0),_(!1);return}const z=await Ba(()=>b.getTokenAccountBalance(P),Ua.HIGH),V=parseFloat(z.value.uiAmountString||"0");console.log(`    Wallet balance fetched: ${V} USDC`),g(V),_(!1)}catch(v){console.error("    Error fetching wallet balance:",(v==null?void 0:v.message)||v),g(null),_(!1)}},[t,r]),D=F.useCallback(async()=>{if(!t||!r||!i){S(0);return}try{k(!0);const v=await fetch(`/api/payments/session/balance?userWallet=${r.toBase58()}`);if(v.ok){const b=await v.json();S(b.remainingAmount||0)}else S(0)}catch(v){console.error(" Error fetching session balance for clamp:",v),S(0)}finally{k(!1)}},[i,t,r]);F.useEffect(()=>{L(),D()},[L,D]);const j=()=>{if(console.log(" MAX button clicked!"),console.log("   Current wallet balance:",y),console.log("   Fetching balance:",m),console.log("   Public key:",r==null?void 0:r.toBase58()),!r){f("Please connect your wallet first");return}if(m){f("Loading balance... Please wait"),setTimeout(()=>f(null),2e3);return}if(y!==null&&y>0){const v=B(),b=Math.floor(v*100)/100;console.log(`    Setting approved amount to: ${b}`),l(b)}else y===0?(f("Your USDC balance is 0. Please add funds to your wallet."),setTimeout(()=>f(null),3e3)):(f("Unable to fetch wallet balance. Please try again."),setTimeout(()=>f(null),3e3))};F.useEffect(()=>{if(!t||y===null)return;const v=B();a>v&&l(Math.floor(v*100)/100)},[a,B,t,y]),F.useEffect(()=>{t&&(x("setup"),l(10),f(null),u(!1))},[t]);const Y=F.useCallback(async()=>(console.log(" Wallet signer availability check..."),console.log("   signTransaction:",!!s),console.log("   sendTransaction:",!!o),typeof s=="function"||typeof o=="function"?(console.log(" Using wallet adapter signer"),{signTransaction:s,sendTransaction:o}):(console.error(" No signer available"),null)),[o,s]);if(!t)return null;const I=async()=>{var b;if(!r){f("Wallet not connected");return}let v=null;try{v=await Y()}catch(E){console.error(" Failed to connect external signer:",E),f("Wallet connection was canceled. Please approve in Phantom and try again."),setTimeout(()=>f(null),4e3);return}if(!v||!v.signTransaction&&!v.sendTransaction){f("Wallet not ready. Try: 1) Refresh page 2) Reconnect Phantom 3) Retry deposit"),setTimeout(()=>f(null),5e3);return}try{u(!0),f(null),x("signing"),console.log(" Creating session...");const E=await fetch("/api/sessions/create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userWallet:r.toBase58(),approvedAmount:a,expiresIn:24})});if(!E.ok){let Z="Failed to create session";try{const ee=await E.json();Z=ee.message||ee.error||"Failed to create session"}catch{Z=`Server error (${E.status}): ${E.statusText||"Please try again"}`}throw new Error(Z)}const{sessionId:P,approvalTransaction:C,sessionPublicKey:z,expiresAt:V}=await E.json();console.log(` Session created: ${P}`),console.log(`   Session key: ${z}`),console.log(`   Expires: ${V}`),console.log("  Please sign the approval transaction...");const U=cn.from(C,"base64"),T=Vr.from(U);let G=null,K=null;if(v.signTransaction){const Z=await v.signTransaction(T);G=Z.serialize().toString("base64"),K=((b=Z.signature)==null?void 0:b.toString("base64"))||null}else v.sendTransaction&&(console.log("  Signing via signAndSendTransaction..."),K=await v.sendTransaction(T,{skipPreflight:!1}),G=null);if(!G&&!K)throw new Error("Failed to sign approval transaction");console.log(" Confirming session...");const ne=await fetch("/api/sessions/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sessionId:P,approvalTransaction:G,transactionSignature:K})});if(!ne.ok){let Z="Failed to confirm session";try{const ee=await ne.json();Z=ee.message||ee.error||"Failed to confirm session"}catch{Z=`Server error (${ne.status}): ${ne.statusText||"Please try again"}`}throw new Error(Z)}console.log(" Session confirmed! Seamless payments enabled."),x("success"),window.dispatchEvent(new Event("sessionUpdated")),await L(),setTimeout(()=>{n(),e(),x("setup"),l(10),f(null)},2e3)}catch(E){console.error(" Session creation failed:",E),f(E.message||"Failed to create session"),x("setup")}finally{u(!1)}};return d.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm",children:d.jsxs("div",{className:"relative bg-gradient-to-br from-neutral-900 to-neutral-800 rounded-2xl p-8 max-w-md w-full mx-4 border border-neutral-700 shadow-2xl",children:[p==="setup"&&d.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-neutral-400 hover:text-white transition-colors",children:d.jsx("svg",{className:"w-6 h-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),p==="setup"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"text-center mb-6",children:[d.jsxs("div",{className:"relative w-16 h-16 mx-auto mb-4 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 rounded-full bg-[#C56BCE] opacity-70 blur-xl"}),d.jsx("div",{className:"relative w-full h-full rounded-full bg-gradient-to-br from-[#C56BCE] to-[#9F4BC4] flex items-center justify-center shadow-[0_0_30px_rgba(197,107,206,0.45)]",children:d.jsx("svg",{className:"w-9 h-9 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.6,strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Add Credits"}),d.jsx("p",{className:"text-neutral-400 text-sm",children:"Tap. Pay. Play. It's that easy."})]}),d.jsxs("div",{className:"bg-neutral-800/50 rounded-xl p-4 mb-6 border border-neutral-700",children:[d.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[d.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:d.jsxs("svg",{className:"w-4 h-4 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",children:[d.jsx("path",{d:"M8.433 7.418c.155-.103.346-.196.567-.267v1.698a2.305 2.305 0 01-.567-.267C8.07 8.34 8 8.114 8 8c0-.114.07-.34.433-.582zM11 12.849v-1.698c.22.071.412.164.567.267.364.243.433.468.433.582 0 .114-.07.34-.433.582a2.305 2.305 0 01-.567.267z"}),d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-13a1 1 0 10-2 0v.092a4.535 4.535 0 00-1.676.662C6.602 6.234 6 7.009 6 8c0 .99.602 1.765 1.324 2.246.48.32 1.054.545 1.676.662v1.941c-.391-.127-.68-.317-.843-.504a1 1 0 10-1.51 1.31c.562.649 1.413 1.076 2.353 1.253V15a1 1 0 102 0v-.092a4.535 4.535 0 001.676-.662C13.398 13.766 14 12.991 14 12c0-.99-.602-1.765-1.324-2.246A4.535 4.535 0 0011 9.092V7.151c.391.127.68.317.843.504a1 1 0 101.511-1.31c-.563-.649-1.413-1.076-2.354-1.253V5z",clipRule:"evenodd"})]})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium text-sm",children:"Choose your deposit amount"}),d.jsx("p",{className:"text-neutral-400 text-xs",children:"Add as little as $0.01 or as much as you want"})]})]}),d.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[d.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:d.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z",clipRule:"evenodd"})})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium text-sm",children:"Seamless payments"}),d.jsx("p",{className:"text-neutral-400 text-xs",children:"Just tap to watch after depositno wallet prompts"})]})]}),d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0 mt-0.5",children:d.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",children:d.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-medium text-sm",children:"Secure & automatic"}),d.jsx("p",{className:"text-neutral-400 text-xs",children:"Funds stay in your wallet, session expires in 24h"})]})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-3",children:"How much USDC would you like to deposit?"}),d.jsx("div",{className:"grid grid-cols-5 gap-2 mb-3",children:R.map(v=>{const b=B(),E=Math.min(v,b),P=E<=0;return d.jsxs("button",{onClick:()=>l(Math.floor(E*100)/100),disabled:P,className:`px-3 py-2 rounded-lg text-sm font-medium transition-all ${a===Math.floor(E*100)/100?"bg-purple-500 text-white shadow-lg shadow-purple-500/30":"bg-neutral-800 text-neutral-300 hover:bg-neutral-700 border border-neutral-600"} ${P?"opacity-40 cursor-not-allowed":""}`,children:["$",v]},v)})}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-4 top-1/2 -translate-y-1/2 text-neutral-400 font-medium",children:"$"}),d.jsx("input",{type:"number",value:a,onChange:v=>{const b=parseFloat(v.target.value)||0,E=B(),P=Math.min(b,E);l(P)},min:"0.01",max:"1000",step:"0.01",className:"w-full bg-neutral-800 border border-neutral-600 rounded-lg pl-8 pr-24 py-3 text-white text-lg font-medium focus:outline-none focus:border-purple-500 transition-colors [&::-webkit-outer-spin-button]:appearance-none [&::-webkit-inner-spin-button]:appearance-none",placeholder:"Custom amount",style:{MozAppearance:"textfield"}}),d.jsx("button",{onClick:j,disabled:m||y===null||y===0,className:"absolute right-16 top-1/2 -translate-y-1/2 px-2 py-1 rounded bg-purple-500/20 text-purple-400 hover:bg-purple-500/30 text-xs font-bold transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:y!==null?`Max: $${B().toFixed(2)} USDC`:"Fetching balance...",children:m?"...":"MAX"}),d.jsx("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-neutral-400 font-medium text-sm",children:"USDC"})]}),d.jsxs("div",{className:"flex items-center justify-between mt-2",children:[d.jsx("p",{className:"text-xs text-neutral-500",children:" Most videos cost $0.01-0.50  $10 gets you 20-1000 videos!"}),y!==null&&d.jsxs("p",{className:"text-xs text-neutral-400 flex gap-2",children:[d.jsxs("span",{children:["Wallet:"," ",d.jsxs("span",{className:"text-purple-400 font-medium",children:["$",y.toFixed(2)]})]}),i&&d.jsxs("span",{children:["Credits:"," ",d.jsx("span",{className:"text-purple-400 font-medium",children:N?"...":`$${w.toFixed(2)}`})]})]})]})]}),h&&d.jsx("div",{className:"mb-6 p-3 bg-red-500/10 border border-red-500/50 rounded-lg text-red-400 text-sm",children:h}),d.jsx(Xt,{onClick:I,disabled:c||a<=0,className:"w-full text-lg py-4",children:c?d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):d.jsxs("span",{className:"flex items-center justify-center gap-2",children:[d.jsx(Pn,{size:18}),d.jsxs("span",{className:"font-semibold",children:["Deposit $",a.toFixed(2)," USDC"]})]})}),d.jsx("button",{onClick:e,className:"w-full mt-3 py-3 text-neutral-400 hover:text-white transition-colors text-sm font-medium",children:"Maybe later"})]}),p==="signing"&&d.jsxs("div",{className:"text-center py-8",children:[d.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 flex items-center justify-center animate-pulse",children:d.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"})})}),d.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Sign Approval Transaction"}),d.jsx("p",{className:"text-neutral-400 text-sm",children:"Check your wallet to approve the session..."})]}),p==="success"&&d.jsxs("div",{className:"text-center py-8",children:[d.jsxs("div",{className:"relative w-14 h-14 mx-auto mb-4 flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 rounded-full bg-[#C56BCE] opacity-70 blur-lg"}),d.jsx("div",{className:"relative rounded-full w-full h-full bg-gradient-to-br from-[#C56BCE] to-[#9F4BC4] flex items-center justify-center shadow-[0_0_25px_rgba(197,107,206,0.45)]",children:d.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.4,strokeLinecap:"round",strokeLinejoin:"round",children:d.jsx("path",{d:"M5 13l4 4L19 7"})})})]}),d.jsx("p",{className:"text-neutral-100 text-sm font-medium",children:"Tap. Pay. Play. It's that easy."})]})]})})}function Tg({mint:t,symbol:e,logo:n,className:i="w-8 h-8"}){const s={EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:{name:"USDC",logoUrl:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU":{name:"USDC",logoUrl:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},DRXxfmg3PEk5Ad6DKuGSfa93ZLHDzXJKxcnjaAUGmW3z:{name:"USDC",logoUrl:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},"9zB1qKtTs7A1rbDpj15fsVrN1MrFxFSyRgBF8hd2fDX2":{name:"USDC",logoUrl:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB:{name:"USDT",logoUrl:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/Es9vMFrzaCERmJfrF4H2FYD4KCoNkY11McCe8BenwNYB/logo.svg"},So11111111111111111111111111111111111111112:{name:"SOL",logoUrl:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111112/logo.png"}}[t],o=["from-cyan-500 to-blue-500","from-purple-500 to-pink-500","from-orange-500 to-red-500","from-green-500 to-emerald-500","from-yellow-500 to-orange-500","from-indigo-500 to-purple-500"],a=parseInt(t.slice(0,8),36)%o.length,l=o[a],c=d.jsx("div",{className:`w-full h-full rounded-full bg-gradient-to-br ${l} flex items-center justify-center`,children:d.jsx("span",{className:"text-white text-xs font-bold",children:e.slice(0,1).toUpperCase()})}),u=(h,f)=>d.jsxs("div",{className:i,children:[d.jsx("img",{src:h,alt:f,className:"w-full h-full rounded-full object-cover",onError:p=>{const x=p.target;x.style.display="none",x.nextElementSibling&&(x.nextElementSibling.style.display="flex")}}),d.jsx("div",{className:"hidden w-full h-full",children:c})]});return n?u(n,e):s?u(s.logoUrl,s.name):d.jsx("div",{className:i,children:c})}const sne="84db05e3-e9ad-479e-923e-80be54938a18",one="https://api-devnet.helius-rpc.com/v0/token-metadata",RC=new Map;async function RM(t){var i,r,s,o,a,l,c,u,h;const e=new Map,n=[];for(const f of t){const p=RC.get(f);p?e.set(f,p):n.push(f)}if(n.length===0)return e;try{console.log(` Fetching metadata for ${n.length} tokens from Helius...`);const f=await fetch(`${one}?api-key=${sne}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({mintAccounts:n})});if(!f.ok)return console.warn(" Helius metadata API error:",f.status),e;const p=await f.json();for(const x of p)if(x.account){const y={mint:x.account,name:((s=(r=(i=x.onChainMetadata)==null?void 0:i.metadata)==null?void 0:r.data)==null?void 0:s.name)||"Unknown Token",symbol:((l=(a=(o=x.onChainMetadata)==null?void 0:o.metadata)==null?void 0:a.data)==null?void 0:l.symbol)||x.account.slice(0,4),logo:((u=(c=x.offChainMetadata)==null?void 0:c.metadata)==null?void 0:u.image)||void 0,decimals:((h=x.onChainAccountInfo)==null?void 0:h.decimals)||6};RC.set(y.mint,y),e.set(y.mint,y),console.log(` Loaded metadata for ${y.symbol} (${y.name})`)}return e}catch(f){return console.error(" Error fetching token metadata:",f),e}}const LM={"9zB1qKtTs7A1rbDpj15fsVrN1MrFxFSyRgBF8hd2fDX2":{name:"USD Coin (Test)",symbol:"USDC",decimals:6},"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU":{name:"USD Coin (Devnet)",symbol:"USDC",decimals:6},DRXxfmg3PEk5Ad6DKuGSfa93ZLHDzXJKxcnjaAUGmW3z:{name:"USD Coin (Official Devnet)",symbol:"USDC",decimals:6},So11111111111111111111111111111111111111112:{name:"Solana",symbol:"SOL",decimals:9}},ane={So11111111111111111111111111111111111111112:{symbol:"SOL",name:"Solana",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/So11111111111111111111111111111111111111112/logo.png"},EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v:{symbol:"USDC",name:"USD Coin",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},"4zMMC9srt5Ri5X14GAgXhaHii3GnPAEERYPJgZJDncDU":{symbol:"USDC",name:"USD Coin",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},DRXxfmg3PEk5Ad6DKuGSfa93ZLHDzXJKxcnjaAUGmW3z:{symbol:"USDC",name:"USD Coin",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"},"9zB1qKtTs7A1rbDpj15fsVrN1MrFxFSyRgBF8hd2fDX2":{symbol:"USDC",name:"USD Coin",logo:"https://raw.githubusercontent.com/solana-labs/token-list/main/assets/mainnet/EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v/logo.png"}},Ef=t=>ane[t],LC="So11111111111111111111111111111111111111112";function lne(){const[t,e]=F.useState(!1),[n,i]=F.useState(!1),[r,s]=F.useState(0),[o,a]=F.useState(0),[l,c]=F.useState(!1),[u,h]=F.useState(!1),[f,p]=F.useState(null),[x,y]=F.useState(null),[g,m]=F.useState(!1),[_,w]=F.useState(!1),[S,N]=F.useState(!1),[k,R]=F.useState(!1),[B,L]=F.useState(""),[D,j]=F.useState(!1),[Y,I]=F.useState([]),[v,b]=F.useState(0),[E,P]=F.useState(!1),C=F.useRef(null),z=mc(),{connected:V,publicKey:U}=Ui(),{logout:T}=Ex(),{connection:G}=Zf(),{setVisible:K}=Ja(),ne=F.useRef(!1),Z=F.useRef(!1),ee=F.useRef(!1),me=NM(),pe=U==null?void 0:U.toBase58();F.useEffect(()=>{V&&pe?(Re(),it(),Se()):(s(0),a(0),c(!1),p(null),y(null))},[V,pe]),F.useEffect(()=>{if(V&&pe){const _e=setInterval(()=>{Se(),Re()},6e4);return()=>clearInterval(_e)}},[V,pe]),F.useEffect(()=>{const _e=()=>{V&&pe&&it()};return window.addEventListener("profileUpdated",_e),()=>window.removeEventListener("profileUpdated",_e)},[V,pe]);const Se=async()=>{if(!(!pe||!U)&&!ne.current){ne.current=!0,h(!0);try{const _e=await fetch(`/api/payments/session/balance?userWallet=${pe}`);if(_e.ok){const lt=await _e.json();console.log(" Balance API Response:",lt),s(lt.remainingAmount||0),c(lt.hasSession||!1)}else s(0),c(!1)}catch(_e){console.error("Error fetching session balance:",_e),s(0),c(!1)}finally{h(!1),ne.current=!1}}},Re=async()=>{if(!(!pe||!U)&&!Z.current){Z.current=!0,console.log(" Fetching wallet USDC balance (queued)..."),console.log(`   Wallet: ${pe.slice(0,8)}...`),console.log(`   USDC Mint: ${me.toBase58()}`);try{const _e=await Ba(()=>G.getParsedTokenAccountsByOwner(U,{mint:me}),Ua.MEDIUM);if(console.log(`   Found ${_e.value.length} USDC token account(s)`),_e.value.length>0){const lt=_e.value[0].account.data.parsed.info.tokenAmount.uiAmount;console.log(`    Balance: ${lt} USDC`),a(lt||0)}else console.log("    No USDC token account found - balance is 0"),a(0)}catch(_e){console.error("    Error fetching wallet balance:",(_e==null?void 0:_e.message)||_e),a(0)}finally{Z.current=!1}}},it=async()=>{if(!(!pe||!U))try{const _e=await fetch("/api/users/profile",{headers:{"x-wallet-address":pe}});if(_e.ok){const lt=await _e.json();p(lt.user.profile_picture_url),y(lt.user.username)}}catch(_e){console.error("Error fetching user profile:",_e)}},J=async()=>{var _e,lt;if(!(!pe||!U||!V)&&!ee.current){ee.current=!0,console.log(" Fetching all token balances (queued)..."),P(!0);try{const X=await Ba(()=>G.getBalance(U),Ua.LOW);b(X/fg);const se=(await Ba(()=>G.getParsedTokenAccountsByOwner(U,{programId:Nx}),Ua.LOW)).value.map(({account:Ne})=>{const O=Ne.data.parsed.info,M=O.tokenAmount.uiAmount;return{mint:O.mint,balance:M}}).filter(({balance:Ne})=>Ne>0),ce=se.map(Ne=>Ne.mint),ye=await RM(ce),fe=se.map(({mint:Ne,balance:O})=>{const M=Ef(Ne),A=ye.get(Ne),W=LM[Ne],q=Ne.slice(0,4)+"...",te=(M==null?void 0:M.symbol)||(A==null?void 0:A.symbol)||(W==null?void 0:W.symbol)||q,ie=(M==null?void 0:M.name)||(A==null?void 0:A.name)||(W==null?void 0:W.name)||(M!=null&&M.symbol||A!=null&&A.symbol||W!=null&&W.symbol?te:"Unknown Token"),ve=(M==null?void 0:M.logo)||(A==null?void 0:A.logo);return{mint:Ne,balance:O,symbol:te,name:ie,logo:ve}});I(fe),console.log(" Found",fe.length,"tokens and",X/fg,"SOL")}catch(X){(_e=X==null?void 0:X.message)!=null&&_e.includes("429")||(lt=X==null?void 0:X.message)!=null&&lt.includes("Too many requests")?console.warn(" Rate limit reached when fetching all tokens. Using last known data."):console.error("Error fetching all token balances:",X)}finally{P(!1),ee.current=!1}}};F.useEffect(()=>{D&&V&&pe&&J()},[D,V,pe]),F.useEffect(()=>{const _e=()=>{V&&pe&&(Se(),Re())};return window.addEventListener("sessionUpdated",_e),()=>window.removeEventListener("sessionUpdated",_e)},[V,pe]);const ot=[{path:"/",icon:"home",label:"Home"},{path:"/payflix",icon:"sparkles",label:"Why PayFlix"},...V?[{path:"/subscriptions",icon:"bell",label:"Subscriptions"}]:[],{path:"/creator-dashboard",icon:"video",label:"Creator Dashboard"}],We=()=>{K(!0)},He=()=>{i(!1)},Ee=async()=>{try{T(),w(!1),He()}catch(_e){console.error("Error disconnecting wallet:",_e)}},ft=()=>{L(r.toFixed(2)),R(!0)},$e=async()=>{if(!pe||!U||!l)return;const _e=parseFloat(B);if(isNaN(_e)||_e<=0){alert(" Please enter a valid amount greater than 0");return}if(_e>r){alert(` Insufficient balance. You have ${r.toFixed(2)} USDC available`);return}N(!0);try{const lt=await fetch("/api/sessions/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userWallet:pe,amount:_e})}),X=await lt.json();if(lt.ok){const H=X.sessionClosed?` Successfully withdrawn ${X.withdrawnAmount.toFixed(2)} USDC!
Session closed.`:` Successfully withdrawn ${X.withdrawnAmount.toFixed(2)} USDC!
Remaining: ${X.newRemainingBalance.toFixed(2)} USDC`;alert(H),R(!1),L(""),await Se(),await Re(),window.dispatchEvent(new Event("sessionUpdated"))}else alert(` Failed to withdraw: ${X.error||"Unknown error"}`)}catch(lt){console.error("Error withdrawing credits:",lt),alert(" Failed to withdraw credits. Please try again.")}finally{N(!1)}};F.useEffect(()=>{const _e=lt=>{if(typeof window>"u"||window.innerWidth>=768)return;const X=lt;i(H=>{var se;return typeof((se=X.detail)==null?void 0:se.open)=="boolean"?X.detail.open:!H})};return window.addEventListener("toggleSidebar",_e),()=>window.removeEventListener("toggleSidebar",_e)},[]);const De=Ef(LC);return d.jsxs(d.Fragment,{children:[d.jsx(po,{children:n&&d.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},className:"md:hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:He})}),d.jsxs(et.aside,{initial:!1,animate:{x:n||window.innerWidth>=768?0:"-100%",width:t||n?300:60},transition:{duration:.3,ease:"easeInOut"},onMouseEnter:()=>window.innerWidth>=768&&e(!0),onMouseLeave:()=>{window.innerWidth>=768&&(e(!1),j(!1),w(!1))},className:"fixed md:relative h-full md:h-auto md:min-h-screen bg-neutral-800 z-40 flex flex-col pt-4 pb-4",children:[d.jsx("button",{onClick:He,className:"md:hidden absolute right-4 top-4 w-8 h-8 flex items-center justify-center text-neutral-400 hover:text-neutral-200",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),d.jsx("div",{className:"px-4 mb-8",children:d.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:d.jsx("svg",{width:"40",height:"40",viewBox:"0 0 533 530",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M520.858 245.866C536.403 253.587 536.403 275.762 520.858 283.482L30.4678 527.04C11.1866 536.616 -8.30137 514.434 3.678 496.547L151.138 276.36C155.874 269.289 155.874 260.06 151.138 252.989L3.67798 32.802C-8.30139 14.9145 11.1865 -7.26763 30.4677 2.30859L520.858 245.866Z",fill:"#C56BCE"})})})}),d.jsx("nav",{className:"flex-1 flex flex-col px-2 space-y-1",children:ot.map(_e=>d.jsxs(on,{to:_e.path,onClick:He,className:`flex items-center gap-3 px-3 py-2 rounded-lg transition-colors group ${z.pathname===_e.path?"bg-purple-500/10 text-purple-500":"text-neutral-400 hover:bg-neutral-700 hover:text-neutral-200"}`,children:[d.jsx(cne,{name:_e.icon,className:"w-5 h-5 flex-shrink-0"}),d.jsx(et.span,{initial:!1,animate:{opacity:t||n?1:0},className:"text-sm whitespace-nowrap",children:_e.label})]},_e.path))}),d.jsxs("div",{className:"flex flex-col px-2 space-y-1 mt-auto",children:[V?d.jsxs("div",{className:"relative",ref:C,children:[d.jsxs("button",{onClick:()=>{console.log(" Wallet button clicked! Dropdown state:",D),j(!D)},className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg bg-purple-500/10 border border-purple-500/20 text-purple-400 hover:bg-purple-500/20 hover:border-purple-500/30 transition-colors group",children:[d.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),d.jsx(et.span,{initial:!1,animate:{opacity:t||n?1:0},className:"text-sm whitespace-nowrap font-medium truncate flex-1 text-left",children:`${U==null?void 0:U.toString().slice(0,4)}...${U==null?void 0:U.toString().slice(-4)}`}),d.jsx(et.svg,{initial:!1,animate:{rotate:D?180:0,opacity:t||n?1:0},className:"w-4 h-4 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d.jsx(po,{children:D&&d.jsxs(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"absolute bottom-full left-0 right-0 mb-2 bg-neutral-800 border border-neutral-700 rounded-lg shadow-2xl overflow-hidden max-h-96 overflow-y-auto",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-3",children:[d.jsx("div",{className:"text-[10px] font-medium opacity-80 mb-1",children:"Wallet Address"}),d.jsx("div",{className:"font-mono text-xs break-all text-white",children:U==null?void 0:U.toBase58()})]}),d.jsxs("div",{className:"p-3",children:[d.jsx("div",{className:"text-xs font-semibold text-white mb-2",children:"All Balances"}),E?d.jsx("div",{className:"flex items-center justify-center py-6",children:d.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-purple-500 border-t-transparent"})}):d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-700/50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Tg,{mint:LC,symbol:(De==null?void 0:De.symbol)||"SOL",logo:De==null?void 0:De.logo,className:"w-6 h-6"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-semibold text-white",children:(De==null?void 0:De.symbol)||"SOL"}),d.jsx("div",{className:"text-[10px] text-neutral-400",children:(De==null?void 0:De.name)||"Solana"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs font-semibold text-white",children:v.toFixed(4)}),d.jsx("div",{className:"text-[10px] text-neutral-400",children:(De==null?void 0:De.symbol)||"SOL"})]})]}),Y.map(_e=>d.jsxs("div",{className:"flex items-center justify-between p-2 bg-neutral-700/50 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx(Tg,{mint:_e.mint,symbol:_e.symbol,logo:_e.logo,className:"w-6 h-6"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-xs font-semibold text-white",children:_e.symbol}),d.jsx("div",{className:"text-[10px] text-neutral-400 truncate max-w-[100px]",children:_e.name||_e.symbol})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-xs font-semibold text-white",children:_e.balance.toLocaleString()}),d.jsx("div",{className:"text-[10px] text-neutral-400",children:_e.symbol})]})]},_e.mint)),Y.length===0&&!E&&d.jsx("div",{className:"text-center py-4 text-neutral-500 text-xs",children:"No tokens found"})]})]}),d.jsxs("div",{className:"border-t border-neutral-700 p-3 space-y-2",children:[d.jsxs("button",{onClick:async()=>{j(!1);try{T();const _e=[];for(let lt=0;lt<localStorage.length;lt++){const X=localStorage.key(lt);X&&(X.includes("walletName")||X.includes("wallet-adapter"))&&_e.push(X)}_e.forEach(lt=>localStorage.removeItem(lt)),console.log(" Cleared wallet adapter cache, waiting before reconnect..."),setTimeout(()=>{We()},800)}catch(_e){console.error("Error changing wallet:",_e),We()}},className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-neutral-700 hover:bg-neutral-600 text-white text-xs font-medium transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Change Wallet"]}),d.jsxs("button",{onClick:()=>{j(!1),Ee()},className:"w-full flex items-center justify-center gap-2 px-3 py-2 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 text-xs font-medium transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Disconnect Wallet"]})]})]})})]}):d.jsxs("button",{onClick:We,className:"flex items-center gap-3 px-3 py-2 rounded-lg bg-purple-500/10 border border-purple-500/20 text-purple-400 hover:bg-purple-500/20 hover:border-purple-500/30 transition-colors group",children:[d.jsx("svg",{className:"w-5 h-5 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),d.jsx(et.span,{initial:!1,animate:{opacity:t||n?1:0},className:"text-sm whitespace-nowrap font-medium truncate",children:"Connect Wallet"})]}),d.jsx(po,{children:(t||n)&&V&&d.jsxs(et.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"space-y-2",children:[d.jsxs("div",{className:"px-3 py-2 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-lg border border-purple-500/30",children:[d.jsxs("div",{className:"flex items-center justify-between mb-1",children:[d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-white",children:d.jsx("path",{d:"M15 7V5M15 11V10M15 15V14M15 19V18M21 5H3V9C4.65685 9 6 10.3431 6 12C6 13.6569 4.65685 15 3 15V19H21V15C19.3431 15 18 13.6569 18 12C18 10.3431 19.3431 9 21 9V5Z",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),d.jsx("div",{className:"text-xs text-purple-300 font-medium",children:"Credits"}),l&&d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500 animate-pulse",title:"Active Session"})]}),d.jsxs("div",{className:"flex gap-1",children:[l&&r>0&&d.jsx("button",{onClick:ft,disabled:S,className:"text-[10px] px-2 py-0.5 rounded bg-red-500/30 hover:bg-red-500/50 text-red-200 transition-colors disabled:opacity-50",title:"Withdraw credits",children:"Withdraw"}),d.jsx("button",{onClick:()=>m(!0),className:"text-[10px] px-2 py-0.5 rounded bg-purple-500/30 hover:bg-purple-500/50 text-purple-200 transition-colors",title:"Add more credits",children:"+ Add"})]})]}),d.jsx("div",{className:"text-lg font-bold text-white",children:u?d.jsx("span",{className:"animate-pulse text-sm",children:"Loading..."}):l?d.jsxs("span",{className:"bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent flex items-center gap-1.5",children:["$",r.toFixed(2),d.jsx(Pn,{size:16})]}):d.jsx("span",{className:"text-sm text-neutral-400",children:"No deposit"})})]}),d.jsxs("div",{className:"px-3 py-2 bg-neutral-700/50 rounded-lg border border-neutral-600/50",children:[d.jsx("div",{className:"text-xs text-neutral-400 mb-1",children:"Wallet USDC"}),d.jsx("div",{className:"text-sm font-semibold text-white flex items-center gap-1",children:u?d.jsx("span",{className:"animate-pulse",children:"Loading..."}):d.jsxs(d.Fragment,{children:["$",o.toFixed(2),d.jsx(Pn,{size:14})]})})]})]})}),V&&d.jsxs("div",{className:"relative",children:[d.jsxs("button",{onClick:()=>w(!_),className:"w-full flex items-center gap-3 px-3 py-2 rounded-lg text-neutral-400 hover:bg-neutral-700 hover:text-neutral-200 transition-colors group",children:[f?d.jsx("img",{src:f,alt:"Profile",className:"w-5 h-5 rounded-full object-cover border border-neutral-700 flex-shrink-0"}):d.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-xs font-bold flex-shrink-0",children:(x||(U==null?void 0:U.toBase58())||"U")[0].toUpperCase()}),d.jsx(et.span,{initial:!1,animate:{opacity:t||n?1:0},className:"text-sm whitespace-nowrap",children:x||"Profile"})]}),d.jsx(po,{children:_&&d.jsxs(et.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute bottom-full left-0 right-0 mb-2 bg-neutral-800 border border-neutral-700 rounded-lg shadow-xl overflow-hidden",children:[d.jsxs(on,{to:"/profile",onClick:()=>{w(!1),He()},className:"flex items-center gap-2 px-4 py-2.5 text-sm text-neutral-300 hover:bg-neutral-700 hover:text-white transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),"Profile"]}),d.jsxs("button",{onClick:Ee,className:"w-full flex items-center gap-2 px-4 py-2.5 text-sm text-red-400 hover:bg-neutral-700 hover:text-red-300 transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Logout"]})]})})]})]})]}),d.jsx(B5,{isOpen:g,onClose:()=>{m(!1)},onSessionCreated:()=>{Se(),Re()},hasExistingSession:l}),d.jsx(po,{children:k&&d.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/70 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>!S&&R(!1),children:d.jsxs(et.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},onClick:_e=>_e.stopPropagation(),className:"bg-neutral-800 rounded-2xl border border-neutral-700 p-6 max-w-md w-full shadow-2xl",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Withdraw Credits"}),d.jsxs("p",{className:"text-sm text-neutral-400 mb-6 flex items-center gap-1",children:["Available balance: ",d.jsxs("span",{className:"text-purple-400 font-semibold flex items-center gap-1",children:["$",r.toFixed(2),d.jsx(Pn,{size:14})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-300 mb-2",children:"Withdrawal Amount (USDC)"}),d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",children:"$"}),d.jsx("input",{type:"number",value:B,onChange:_e=>L(_e.target.value),min:"0",max:r,step:"0.01",placeholder:"0.00",disabled:S,className:"w-full pl-8 pr-4 py-3 bg-neutral-900 border border-neutral-600 rounded-lg text-white placeholder-neutral-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 disabled:opacity-50"})]}),d.jsxs("div",{className:"flex gap-2 mt-2",children:[d.jsx("button",{onClick:()=>L((r*.25).toFixed(2)),disabled:S,className:"flex-1 text-xs px-2 py-1 rounded bg-neutral-700 hover:bg-neutral-600 text-neutral-300 transition-colors disabled:opacity-50",children:"25%"}),d.jsx("button",{onClick:()=>L((r*.5).toFixed(2)),disabled:S,className:"flex-1 text-xs px-2 py-1 rounded bg-neutral-700 hover:bg-neutral-600 text-neutral-300 transition-colors disabled:opacity-50",children:"50%"}),d.jsx("button",{onClick:()=>L((r*.75).toFixed(2)),disabled:S,className:"flex-1 text-xs px-2 py-1 rounded bg-neutral-700 hover:bg-neutral-600 text-neutral-300 transition-colors disabled:opacity-50",children:"75%"}),d.jsx("button",{onClick:()=>L(r.toFixed(2)),disabled:S,className:"flex-1 text-xs px-2 py-1 rounded bg-neutral-700 hover:bg-neutral-600 text-neutral-300 transition-colors disabled:opacity-50",children:"Max"})]})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:()=>{R(!1),L("")},disabled:S,className:"flex-1 px-4 py-3 rounded-lg bg-neutral-700 hover:bg-neutral-600 text-white font-medium transition-colors disabled:opacity-50",children:"Cancel"}),d.jsx("button",{onClick:$e,disabled:S,className:"flex-1 px-4 py-3 rounded-lg bg-gradient-to-r from-red-600 to-red-500 hover:from-red-500 hover:to-red-400 text-white font-medium transition-all disabled:opacity-50",children:S?"Withdrawing...":"Confirm Withdraw"})]}),d.jsx("p",{className:"text-xs text-neutral-500 mt-4 text-center",children:parseFloat(B||"0")>=r?"Withdrawing all credits will close your session":"Your session will remain active with the remaining balance"})]})})})]})}function cne({name:t,className:e}){const n={home:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"}),sparkles:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"}),video:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"}),bell:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})};return d.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:n[t]})}function une(){const{connected:t,publicKey:e}=Ui(),n=e==null?void 0:e.toBase58(),[i,r]=F.useState(!1),[s,o]=F.useState(!1),[a,l]=F.useState(!1),c=F.useRef(null);F.useEffect(()=>{(async()=>{if(!t||!n){o(!1),c.current=null;return}const p=n;if(!(a||c.current===p))try{l(!0),c.current=p,console.log(" Checking for existing X402 session...");const x=await fetch(`/api/payments/session/balance?userWallet=${p}`);if(x.ok){const y=await x.json();y.hasSession?(console.log(" Found existing session!"),console.log(`   Balance: $${y.remainingAmount} USDC`),console.log(`   Total approved: $${y.approvedAmount} USDC`),console.log(`   Spent: $${y.spentAmount} USDC`),console.log(" Seamless payments enabled - no popups needed!"),o(!0)):(console.log("  No session found - will prompt for deposit"),o(!1),setTimeout(()=>{r(!0)},1e3))}}catch(x){console.error(" Error checking session:",x),c.current=null}finally{l(!1)}})()},[t,n]);const u=()=>{o(!0),r(!1)},h=()=>{r(!1)};return d.jsx(B5,{isOpen:i,onClose:h,onSessionCreated:u})}const IC="So11111111111111111111111111111111111111112";function dne(){const{publicKey:t,connected:e,connecting:n,disconnect:i}=Ui(),{connection:r}=Zf(),{setVisible:s}=Ja(),{logout:o}=Ex(),[a,l]=F.useState(!1),[c,u]=F.useState(!1),[h,f]=F.useState([]),[p,x]=F.useState(0),[y,g]=F.useState(!1),m=F.useRef(null);F.useEffect(()=>{l(!0)},[]),F.useEffect(()=>{function R(B){m.current&&!m.current.contains(B.target)&&u(!1)}return document.addEventListener("mousedown",R),()=>document.removeEventListener("mousedown",R)},[]);const _=async()=>{if(!(!t||!e)){console.log(" WalletConnectButton: Fetching all token balances with metadata (queued)..."),g(!0);try{const R=await Ba(()=>r.getBalance(t),Ua.LOW);x(R/fg);const B=await Ba(()=>r.getParsedTokenAccountsByOwner(t,{programId:Nx}),Ua.LOW),L=[];for(const{account:I}of B.value){const v=I.data.parsed.info,b=v.tokenAmount.uiAmount;b>0&&L.push({mint:v.mint,balance:b})}const D=L.map(I=>I.mint),j=await RM(D),Y=L.map(({mint:I,balance:v})=>{const b=Ef(I),E=j.get(I),P=LM[I],C=I.slice(0,4)+"...",z=(b==null?void 0:b.symbol)||(E==null?void 0:E.symbol)||(P==null?void 0:P.symbol)||C,V=(b==null?void 0:b.name)||(E==null?void 0:E.name)||(P==null?void 0:P.name)||(b!=null&&b.symbol||E!=null&&E.symbol||P!=null&&P.symbol?z:"Unknown Token"),U=(b==null?void 0:b.logo)||(E==null?void 0:E.logo);return{mint:I,balance:v,symbol:z,name:V,logo:U}});f(Y),console.log(" WalletConnectButton: Found",Y.length,"tokens with metadata and",R/fg,"SOL")}catch(R){console.error("Error fetching token balances:",R)}finally{g(!1)}}};if(F.useEffect(()=>{c&&e&&_()},[c,e]),!a)return null;const w=()=>{e?(console.log(" WalletConnectButton clicked! Dropdown state:",c),u(!c)):s(!0)},S=()=>{u(!1),i(),o()},N=R=>`${R.slice(0,4)}...${R.slice(-4)}`,k=Ef(IC);return d.jsx("div",{className:"flex items-center gap-4",children:d.jsxs("div",{className:"relative",ref:m,children:[d.jsx(Xt,{onClick:w,disabled:n,className:"min-w-[180px]",children:n?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),d.jsx("span",{children:"Connecting..."})]}):e?d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("div",{className:"w-2 h-2 rounded-full bg-green-400 animate-pulse"}),d.jsx("span",{children:N((t==null?void 0:t.toBase58())||"")}),d.jsx("svg",{className:`w-4 h-4 transition-transform ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}):d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),d.jsx("span",{children:"Connect Wallet"})]})}),d.jsx(po,{children:c&&e&&d.jsxs(et.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"absolute top-full right-0 mt-2 w-80 bg-neutral-900 border border-neutral-700 rounded-xl shadow-2xl overflow-hidden z-50",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 p-4",children:[d.jsx("div",{className:"text-xs font-medium opacity-80 mb-1",children:"Wallet Address"}),d.jsx("div",{className:"font-mono text-xs break-all text-white",children:t==null?void 0:t.toBase58()})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("div",{className:"text-sm font-semibold text-white mb-3",children:"All Balances"}),y?d.jsx("div",{className:"flex items-center justify-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-purple-500 border-t-transparent"})}):d.jsxs("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:[d.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-800 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Tg,{mint:IC,symbol:(k==null?void 0:k.symbol)||"SOL",logo:k==null?void 0:k.logo,className:"w-8 h-8"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold text-white",children:(k==null?void 0:k.symbol)||"SOL"}),d.jsx("div",{className:"text-xs text-neutral-400",children:(k==null?void 0:k.name)||"Solana"})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-sm font-semibold text-white",children:p.toFixed(4)}),d.jsx("div",{className:"text-xs text-neutral-400",children:(k==null?void 0:k.symbol)||"SOL"})]})]}),h.map(R=>d.jsxs("div",{className:"flex items-center justify-between p-3 bg-neutral-800 rounded-lg",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx(Tg,{mint:R.mint,symbol:R.symbol,logo:R.logo,className:"w-8 h-8"}),d.jsxs("div",{children:[d.jsx("div",{className:"text-sm font-semibold text-white",children:R.symbol}),d.jsx("div",{className:"text-xs text-neutral-400 truncate max-w-[140px]",children:R.name})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("div",{className:"text-sm font-semibold text-white",children:R.balance.toLocaleString()}),d.jsx("div",{className:"text-xs text-neutral-400",children:R.symbol})]})]},R.mint)),h.length===0&&!y&&d.jsx("div",{className:"text-center py-6 text-neutral-500 text-sm",children:"No tokens found"})]})]}),d.jsxs("div",{className:"border-t border-neutral-700 p-4 space-y-2",children:[d.jsxs("button",{onClick:()=>{u(!1),s(!0)},className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-neutral-800 hover:bg-neutral-700 text-white text-sm font-medium transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),"Change Wallet"]}),d.jsxs("button",{onClick:S,className:"w-full flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg bg-red-500/20 hover:bg-red-500/30 text-red-400 text-sm font-medium transition-colors",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})}),"Disconnect Wallet"]})]})]})})]})})}const Tf="subscriptionsUpdated";function Rx(t){return t?{"x-wallet-address":t}:{}}async function hne(t){const e=await fetch("/api/subscriptions",{headers:{...Rx(t)}});if(!e.ok)throw new Error("Failed to load subscriptions");return(await e.json()).subscriptions||[]}async function U5(t,e){const n=await fetch("/api/subscriptions",{method:"POST",headers:{"Content-Type":"application/json",...Rx(t)},body:JSON.stringify({creatorWallet:e})});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.error||"Failed to subscribe")}const i=await n.json();return O5(e),{subscriberCount:i.subscriberCount??0,isSubscribed:!0}}async function IM(t,e){const n=await fetch(`/api/subscriptions/${e}`,{method:"DELETE",headers:{...Rx(t)}});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.error||"Failed to unsubscribe")}const i=await n.json();return O5(e),{subscriberCount:i.subscriberCount??0,isSubscribed:!1}}async function fne(t,e){const n=await fetch(`/api/subscriptions/${t}/summary`,{headers:{...Rx(e)}});if(!n.ok)throw new Error("Failed to fetch subscription summary");const i=await n.json();return{subscriberCount:i.subscriberCount??0,isSubscribed:!!i.isSubscribed}}function O5(t){typeof window>"u"||window.dispatchEvent(new CustomEvent(Tf,{detail:{creatorWallet:t}}))}function j5(){const{publicKey:t}=Ui();return t==null?void 0:t.toBase58()}function F5(t=!0){const e=j5(),[n,i]=F.useState([]),[r,s]=F.useState(!1),o=F.useCallback(async()=>{if(!t||!e){i([]);return}s(!0);try{const l=await hne(e);i(l)}catch(l){console.error("Failed to load subscriptions:",l)}finally{s(!1)}},[t,e]);F.useEffect(()=>{o()},[o]),F.useEffect(()=>{const l=()=>o();return window.addEventListener(Tf,l),()=>window.removeEventListener(Tf,l)},[o]);const a=F.useMemo(()=>new Set(n.map(l=>l.creatorWallet)),[n]);return{subscriptions:n,subscribedWallets:a,loading:r,refresh:o}}function z5(t){const e=j5(),[n,i]=F.useState({subscriberCount:0,isSubscribed:!1}),[r,s]=F.useState(!1),o=F.useCallback(async()=>{if(!t){i({subscriberCount:0,isSubscribed:!1});return}s(!0);try{const a=await fne(t,e);i(a)}catch(a){console.error("Failed to fetch subscription summary:",a)}finally{s(!1)}},[t,e]);return F.useEffect(()=>{o()},[o]),F.useEffect(()=>{const a=l=>{const c=l.detail;!c||!t||c.creatorWallet===t&&o()};return window.addEventListener(Tf,a),()=>window.removeEventListener(Tf,a)},[t,o]),{summary:n,loading:r,refresh:o,async subscribe(){if(!t||!e)throw new Error("Wallet not connected");const a=await U5(e,t);return i(a),a},async unsubscribe(){if(!t||!e)throw new Error("Wallet not connected");const a=await IM(e,t);return i(a),a}}}async function pne(){try{const t=await fetch("/api/analytics/trending");if(!t.ok)throw new Error("Failed to fetch trending analytics");return t.json()}catch(t){return console.error("Error loading trending highlights:",t),null}}const mne=6e4;function gne(t=mne){const[e,n]=F.useState(null),[i,r]=F.useState(!0),[s,o]=F.useState(null),a=F.useRef(null);return F.useEffect(()=>{let l=!0;const c=async()=>{if(!l)return;r(!0);const u=await pne();l&&(u?(n(u),o(null)):o("Unable to load trending data"),r(!1))};return c(),t>0&&(a.current=setInterval(c,t)),()=>{l=!1,a.current&&clearInterval(a.current)}},[t]),{data:e,loading:i,error:s}}const kC="digitalIdUpdated";async function xne(t,e={}){const n=new URLSearchParams;e.videoId&&n.set("videoId",e.videoId);const i=await fetch(`/api/digital-id/${t}${n.toString()?`?${n.toString()}`:""}`,{headers:e.viewerWallet?{"x-wallet-address":e.viewerWallet}:void 0});if(!i.ok){const r=await i.json().catch(()=>({}));throw new Error(r.error||"Failed to load digital identity")}return i.json()}function yne(t,e,n=!0){const{publicKey:i}=Ui(),r=(i==null?void 0:i.toBase58())||null,[s,o]=F.useState(null),[a,l]=F.useState(!1),[c,u]=F.useState(null),h=F.useCallback(async()=>{if(!t||!n){o(null),l(!1);return}l(!0);try{const f=await xne(t,{viewerWallet:r,videoId:e});o(f),u(null)}catch(f){u((f==null?void 0:f.message)||"Unable to load digital identity")}finally{l(!1)}},[t,r,e,n]);return F.useEffect(()=>{if(!n){l(!1);return}h()},[h,n]),F.useEffect(()=>{if(!n)return;const f=()=>h();return window.addEventListener("sessionUpdated",f),window.addEventListener(kC,f),()=>{window.removeEventListener("sessionUpdated",f),window.removeEventListener(kC,f)}},[h,n]),{data:s,loading:a,error:c,refresh:h}}async function PC(t){try{await fetch("/api/telemetry/digital-id",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventType:t})})}catch(e){console.warn("Digital ID telemetry failed",e)}}function kM({creatorWallet:t,videoId:e,className:n,variant:i="default",lazy:r=!1}){var E;const[s,o]=F.useState(!r),{data:a,loading:l,error:c}=yne(t,e,s),[u,h]=F.useState(!1),[f,p]=F.useState(!1),[x,y]=F.useState(Date.now()),[g,m]=F.useState(null),[_,w]=F.useState(!1),{connection:S}=Zf(),N=F.useRef(null);F.useEffect(()=>{if(!r||s)return;if(typeof IntersectionObserver>"u"){o(!0);return}const P=new IntersectionObserver(z=>{z.some(V=>V.isIntersecting)&&o(!0)},{threshold:.4}),C=N.current;return C&&P.observe(C),()=>{C&&P.unobserve(C),P.disconnect()}},[r,s]);const k=F.useMemo(()=>t?`${t.slice(0,4)}...${t.slice(-4)}`:"",[t]),R=((E=a==null?void 0:a.recentPayments)==null?void 0:E[0])??null,B=()=>{!t||i==="compact"||(PC("modal_open"),p(!0))},L=()=>p(!1);if(F.useEffect(()=>{let P=!1;async function C(){if(!(!f||!t||!S)){w(!0);try{const z=new Xe(t),U=(await Ba(()=>S.getParsedTokenAccountsByOwner(z,{programId:Nx}),Ua.LOW)).value.map(({account:G})=>{const K=G.data.parsed.info,ne=K.tokenAmount.uiAmount;return{mint:K.mint,balance:typeof ne=="number"?ne:parseFloat(ne||"0")}}).filter(G=>G.balance>0);if(!U.length){P||m([]);return}const T=await RM(U.map(G=>G.mint));P||m(U.slice(0,6).map(G=>{const K=Ef(G.mint),ne=LM[G.mint],Z=T.get(G.mint);return{mint:G.mint,balance:G.balance,symbol:(K==null?void 0:K.symbol)||(Z==null?void 0:Z.symbol)||(ne==null?void 0:ne.symbol)||G.mint.slice(0,4),name:(K==null?void 0:K.name)||(Z==null?void 0:Z.name)||(ne==null?void 0:ne.name)||`${G.mint.slice(0,4)}...${G.mint.slice(-4)}`,logo:(K==null?void 0:K.logo)||(Z==null?void 0:Z.logo)}}))}catch(z){console.warn("Unable to load creator token metadata",z),P||m([])}finally{P||w(!1)}}}return C(),()=>{P=!0}},[S,t,f]),F.useEffect(()=>{u&&s&&PC("hover")},[u,s]),!t)return null;const D=()=>{var P;return l?d.jsx("p",{className:"text-sm text-neutral-300",children:"Loading Digital ID"}):c?d.jsx("p",{className:"text-sm text-red-400",children:c}):a?d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-neutral-500",children:"Wallet"}),d.jsx("p",{className:"font-mono text-white",children:k})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-neutral-500",children:"Latest verification"}),d.jsx("p",{className:"text-white",children:a.highlights.hasVerifiedPayments&&a.highlights.latestPaymentAt?W5(a.highlights.latestPaymentAt,x):a.recentPayments.length>0?"Awaiting on-chain verification":"Awaiting first payment"})]}),((P=a.viewerContext)==null?void 0:P.session)&&d.jsxs("div",{children:[d.jsx("p",{className:"text-xs uppercase tracking-wide text-neutral-500",children:"Your session"}),a.viewerContext.session.hasSession?d.jsxs("p",{className:"text-white",children:[eu(a.viewerContext.session.remainingAmount||0)," remaining"]}):d.jsx("p",{className:"text-white",children:"No active session"})]})]}):d.jsx("p",{className:"text-sm text-neutral-300",children:"No digital identity data"})},j=()=>{o(!0),h(!0)},Y=()=>{h(!1)},I=()=>{o(!0),h(!0)},v=()=>h(!1),b=u||f;return F.useEffect(()=>{if(!b)return;y(Date.now());const P=window.setInterval(()=>{y(Date.now())},1e3);return()=>{window.clearInterval(P)}},[b]),d.jsxs("div",{ref:N,className:G_("relative inline-flex",n),onMouseEnter:j,onMouseLeave:Y,children:[d.jsx("button",{type:"button",className:G_("rounded-full border border-white/15 bg-white/5 px-4 py-1.5 text-xs font-semibold uppercase tracking-[0.2em] text-white/80 transition hover:border-purple-400/60 hover:bg-white/10 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-purple-500",l&&"opacity-70"),onFocus:I,onBlur:v,onClick:B,children:d.jsxs("span",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse"}),"Digital ID",d.jsx("span",{className:"font-mono tracking-normal",children:k})]})}),u&&d.jsx("div",{role:i==="compact"?void 0:"button",tabIndex:i==="compact"?void 0:0,onClick:i==="compact"?void 0:B,onKeyDown:i==="compact"?void 0:P=>{(P.key==="Enter"||P.key===" ")&&(P.preventDefault(),B())},className:"absolute z-50 mt-2 w-64 rounded-2xl border border-white/10 bg-neutral-900/95 p-4 text-left shadow-2xl backdrop-blur focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-neutral-900 cursor-pointer",children:D()}),f&&a&&i==="default"&&d.jsx(vne,{data:a,tokens:{items:g,loading:_},onClose:L,recentPayment:R,referenceTime:x})]})}function vne({data:t,tokens:e,onClose:n,recentPayment:i,referenceTime:r}){var s;return!t||typeof document>"u"?null:Zb.createPortal(d.jsxs("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center",children:[d.jsx("div",{className:"absolute inset-0 bg-black/70 backdrop-blur-sm",onClick:n}),d.jsxs("div",{className:"relative z-10 w-full max-w-3xl overflow-hidden rounded-3xl border border-white/15 bg-neutral-950/95 p-6 shadow-2xl",children:[d.jsxs("div",{className:"flex items-start justify-between gap-6 border-b border-white/10 pb-6",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-white/60",children:"Digital Identity"}),d.jsx("h2",{className:"mt-2 text-3xl font-semibold",children:t.creator.username||t.creator.walletAddress}),t.creator.bio&&d.jsx("p",{className:"mt-2 text-neutral-400 max-w-2xl",children:t.creator.bio}),d.jsxs("div",{className:"mt-4 flex flex-wrap gap-3 text-sm text-neutral-400",children:[d.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["Wallet: ",DC(t.creator.walletAddress)]}),d.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:["Joined:"," ",t.creator.joinedAt?new Date(t.creator.joinedAt).toLocaleDateString():"N/A"]}),d.jsxs("span",{className:"rounded-full border border-white/10 px-3 py-1",children:[t.stats.totalSubscribers.toLocaleString()," subscribers"]})]})]}),d.jsx("button",{type:"button",onClick:n,className:"rounded-full border border-white/20 p-2 text-white/70 transition hover:border-white hover:text-white",children:d.jsx("svg",{className:"h-5 w-5",viewBox:"0 0 24 24",fill:"none",children:d.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),d.jsxs("div",{className:"mt-6 grid gap-4 lg:grid-cols-3",children:[d.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:"24h Revenue"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold text-emerald-400",children:eu(t.analytics24h.revenue)}),d.jsxs("p",{className:"mt-1 text-xs text-neutral-400",children:[t.analytics24h.views.toLocaleString()," paid views"]})]}),d.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:"Videos"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold text-white",children:t.stats.totalVideos}),d.jsxs("p",{className:"mt-1 text-xs text-neutral-400",children:["Avg price ",eu(t.stats.averagePrice||0)]})]}),d.jsxs("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:"Lifetime"}),d.jsx("p",{className:"mt-2 text-2xl font-semibold text-white",children:eu(t.stats.lifetimeEarnings)}),d.jsx("p",{className:"mt-1 text-xs text-neutral-400",children:"Total verified payouts"})]})]}),d.jsxs("div",{className:"mt-6 grid gap-6 lg:grid-cols-2",children:[d.jsxs("div",{className:"rounded-3xl border border-white/10 bg-gradient-to-br from-purple-900/60 via-neutral-900 to-neutral-950 p-5",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:"Recent Verified Payouts"}),d.jsxs("p",{className:"text-xs uppercase tracking-[0.3em] text-white/60",children:[t.recentPayments.length," records"]})]}),d.jsxs("div",{className:"mt-4 space-y-4",children:[t.recentPayments.length===0&&d.jsx("p",{className:"text-sm text-neutral-400",children:"No verified payouts yet."}),t.recentPayments.map(o=>{var a;return d.jsx("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4 text-sm text-white",children:d.jsxs("div",{className:"flex items-center justify-between gap-4",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:((a=o.video)==null?void 0:a.title)||"Untitled Video"}),d.jsx("p",{className:"text-xs text-neutral-400",children:o.verifiedAt?V5(o.verifiedAt,r):"Pending verification"})]}),d.jsxs("div",{className:"text-right",children:[d.jsx("p",{className:"font-semibold",children:eu(o.amount)}),d.jsx("a",{className:"text-xs text-purple-300 hover:text-purple-200",href:`https://explorer.solana.com/tx/${o.signature}?cluster=devnet`,target:"_blank",rel:"noreferrer",children:"View on Solana"})]})]})},o.id)})]})]}),d.jsxs("div",{className:"rounded-3xl border border-white/10 bg-neutral-900 p-5",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:"On-chain Assets"}),d.jsx("span",{className:"rounded-full border border-white/10 px-3 py-1 text-xs text-white/70",children:"Live lookup"})]}),d.jsxs("div",{className:"mt-4 space-y-3",children:[e.loading&&d.jsx("p",{className:"text-sm text-neutral-400",children:"Loading assets"}),!e.loading&&e.items&&e.items.length===0&&d.jsx("p",{className:"text-sm text-neutral-400",children:"No public token balances were detected for this wallet."}),!e.loading&&((s=e.items)==null?void 0:s.map(o=>d.jsxs("div",{className:"flex items-center justify-between rounded-2xl border border-white/5 bg-white/5 px-3 py-2",children:[d.jsxs("div",{className:"flex items-center gap-3",children:[o.logo?d.jsx("img",{src:o.logo,alt:o.symbol,className:"h-8 w-8 rounded-full"}):d.jsx("div",{className:"h-8 w-8 rounded-full bg-purple-500/40 text-center leading-8 text-white",children:o.symbol.slice(0,2)}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-white",children:o.name}),d.jsx("p",{className:"text-xs text-neutral-400",children:DC(o.mint)})]})]}),d.jsxs("p",{className:"text-sm font-semibold text-white",children:[o.balance.toLocaleString(void 0,{maximumFractionDigits:4})," ",o.symbol]})]},o.mint)))]})]})]}),i&&d.jsxs("div",{className:"mt-6 rounded-2xl border border-emerald-500/30 bg-emerald-500/5 p-4 text-sm text-emerald-200",children:["Latest payout of ",eu(i.amount)," ",i.verifiedAt?W5(i.verifiedAt,r):"awaiting verification","."]})]})]}),document.body)}function DC(t){return`${t.slice(0,4)}...${t.slice(-4)}`}function eu(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2,maximumFractionDigits:2}).format(t||0)}function V5(t,e=Date.now()){const n=new Date(t);if(Number.isNaN(n.getTime()))return"Unknown";const i=Math.max(0,Math.floor((e-n.getTime())/1e3));if(i<5)return"just now";if(i<60)return`${i} second${i===1?"":"s"} ago`;const r=Math.floor(i/60);if(r<60)return`${r} minute${r===1?"":"s"} ago`;const s=Math.floor(r/60);if(s<24)return`${s} hour${s===1?"":"s"} ago`;const o=Math.floor(s/24);return o<7?`${o} day${o===1?"":"s"} ago`:n.toLocaleDateString()}function W5(t,e=Date.now()){const n=new Date(t);if(Number.isNaN(n.getTime()))return"Unknown";const i=V5(t,e);return i==="Unknown"?"Verification time unknown":i==="just now"?"Verified just now":i.includes("ago")?`Verified ${i}`:`Verified on ${n.toLocaleDateString()} ${n.toLocaleTimeString([],{hour:"numeric",minute:"2-digit"})}`}const wne=24;function _ne(){var T,G;const[t,e]=F.useState([]),[n,i]=F.useState(!0),[r,s]=F.useState(null),[o,a]=F.useState("All"),[l,c]=F.useState([]),[u,h]=F.useState(""),[f,p]=F.useState(""),{connected:x,publicKey:y}=Ui(),g=y==null?void 0:y.toBase58(),{setVisible:m}=Ja(),_=eS(),{showToast:w}=bd(),{subscribedWallets:S}=F5(x),[N,k]=F.useState(null),{data:R}=gne(),B=(T=R==null?void 0:R.videos)==null?void 0:T[0],L=(G=R==null?void 0:R.creators)==null?void 0:G[0],D=["All","Entertainment","Gaming","Music","Education","Technology","Lifestyle"],j=!!(B||L),Y=()=>{var K,ne,Z,ee;return d.jsxs(d.Fragment,{children:[B&&d.jsx(BC,{label:"Top Video",linkTarget:B.id?`/video/${B.id}`:"/#top-video",heading:B.title,subheading:`${C(B.stats.revenue24h)}  ${B.stats.views24h.toLocaleString()} views`,stats:[`Revenue 24h: ${C(B.stats.revenue24h)}`,`Views 24h: ${B.stats.views24h.toLocaleString()}`,`Comments 24h: ${B.stats.comments24h.toLocaleString()}`],thumbnailUrl:B.thumbnailUrl,type:"video"},`video-${B.id}`),L&&d.jsx(BC,{label:"Top Creator",linkTarget:L.walletAddress?`/profile/${L.walletAddress}`:"/#top-creator",heading:L.username||(L.walletAddress?`${L.walletAddress.slice(0,4)}...${L.walletAddress.slice(-4)}`:"Creator"),subheading:`${C(L.stats.revenue24h)}  ${L.stats.subscribers24h.toLocaleString()} subs`,stats:[`Revenue 24h: ${C(L.stats.revenue24h)}`,`Subs gained: ${L.stats.subscribers24h.toLocaleString()}`,`Views 24h: ${L.stats.views24h.toLocaleString()}`],thumbnailUrl:L.profilePictureUrl||void 0,type:"creator",fallbackInitial:((ne=(K=L.username)==null?void 0:K[0])==null?void 0:ne.toUpperCase())||((ee=(Z=L.walletAddress)==null?void 0:Z[0])==null?void 0:ee.toUpperCase())||"C"},`creator-${L.walletAddress}`)]})},I=D.map(K=>d.jsx("button",{onClick:()=>a(K),className:`px-4 py-1.5 rounded-lg text-sm font-medium whitespace-nowrap flex-shrink-0 transition-colors ${o===K?"bg-purple-500 text-white":"bg-neutral-800/50 border border-neutral-700/50 text-neutral-300 hover:bg-neutral-700/50"}`,children:K},K));F.useEffect(()=>{const K=window.setTimeout(()=>{p(u.trim())},250);return()=>window.clearTimeout(K)},[u]),F.useEffect(()=>{x&&g?b():c([])},[x,g]);const v=F.useCallback(async K=>{i(!0),s(null);const ne=new URLSearchParams;ne.set("limit",String(wne)),f&&ne.set("search",f),o&&o!=="All"&&ne.set("category",o);try{const Z=await fetch(`/api/videos?${ne.toString()}`,{signal:K});if(!Z.ok)throw new Error(`Failed to fetch videos (${Z.status})`);const ee=await Z.json();e(ee.videos||[])}catch(Z){if((Z==null?void 0:Z.name)==="AbortError")return;console.error("Error fetching videos:",Z),s(Z.message||"Failed to fetch videos")}finally{K!=null&&K.aborted||i(!1)}},[f,o]);F.useEffect(()=>{const K=new AbortController;return v(K.signal),()=>K.abort()},[v]);const b=async()=>{if(g)try{const K=await fetch("/api/users/owned-video-ids",{headers:{"x-wallet-address":g}});if(K.ok){const ne=await K.json();c(ne.videoIds||[]),console.log(" Loaded owned video IDs:",ne.videoIds)}}catch(K){console.error("Error fetching owned video IDs:",K)}},E=K=>{const ne=Math.floor(K/60),Z=K%60;return`${ne}:${Z.toString().padStart(2,"0")}`},P=K=>K>=1e6?`${(K/1e6).toFixed(1)}M`:K>=1e3?`${(K/1e3).toFixed(1)}K`:K.toString(),C=K=>Number.isFinite(K)?`$${K.toFixed(2)}`:"$0.00",z=K=>{const ne=new Date(K),ee=Math.floor((new Date().getTime()-ne.getTime())/1e3);return ee<60?"Just now":ee<3600?`${Math.floor(ee/60)} minutes ago`:ee<86400?`${Math.floor(ee/3600)} hours ago`:ee<604800?`${Math.floor(ee/86400)} days ago`:`${Math.floor(ee/604800)} weeks ago`},V=F.useCallback((K,ne)=>{K.preventDefault(),K.stopPropagation(),_(`/profile/${ne}`)},[_]),U=F.useCallback(async(K,ne)=>{if(K.preventDefault(),K.stopPropagation(),!!ne){if(!g){m(!0);return}k(ne);try{S.has(ne)?(await IM(g,ne),w({title:"Unsubscribed",description:"Removed from your subscriptions.",variant:"success"})):(await U5(g,ne),w({title:"Subscribed",description:"Creator added to your subscriptions.",variant:"success"}))}catch(Z){w({title:"Subscription error",description:Z.message||"Please try again.",variant:"error"})}finally{k(null)}}},[g,S,m,w]);return d.jsx("main",{className:"flex flex-col overflow-y-auto h-full relative",children:d.jsxs("div",{className:"z-10 w-full",children:[d.jsx("div",{className:"sticky top-0 z-20 bg-neutral-900/80 backdrop-blur-sm border-b border-neutral-800/50 px-4 md:px-8 py-4",children:d.jsxs("div",{className:"flex items-center justify-between max-w-[1800px] mx-auto",children:[d.jsxs("svg",{width:"120",height:"56",viewBox:"0 0 1968 919",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"h-8 w-auto",children:[d.jsx("g",{filter:"url(#filter0_d_3_76)",children:d.jsx("path",{d:"M1735 83.1698L1963 83.1698L1635 835.812L1422.35 835.812L1735 83.1698Z",fill:"#C56BCE"})}),d.jsx("g",{filter:"url(#filter1_d_3_76)",children:d.jsx("path",{d:"M1751 843.17L1947 843.17L1633.28 73.7996L1433.28 73.7997L1751 843.17Z",fill:"#C56BCE"})}),d.jsx("g",{filter:"url(#filter2_d_3_76)",children:d.jsx("rect",{x:"1242",y:"367.17",width:"156",height:"465",fill:"#C56BCE"})}),d.jsx("g",{filter:"url(#filter3_d_3_76)",children:d.jsx("rect",{x:"1242",y:"63.1698",width:"156",height:"156",fill:"#C56BCE"})}),d.jsxs("g",{filter:"url(#filter4_d_3_76)",children:[d.jsx("path",{d:"M760 63.1698H916V836.17H760V63.1698Z",fill:"#C56BCE"}),d.jsx("path",{d:"M760 523.17V367.17H1091V523.17H760Z",fill:"#C56BCE"}),d.jsx("path",{d:"M760 219.17V63.1698H1203V219.17H760Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter5_d_3_76)",children:[d.jsx("path",{d:"M4 63.1698H160V836.17H4V63.1698Z",fill:"#C56BCE"}),d.jsx("path",{d:"M63 63.1698H645V195.17H63V63.1698Z",fill:"#C56BCE"}),d.jsx("path",{d:"M646.583 69.6306L644.999 523.271L513 522.81L514.584 69.1698L646.583 69.6306Z",fill:"#C56BCE"}),d.jsx("path",{d:"M63 391.17H645V523.17H63V391.17Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter6_d_3_76)",children:[d.jsx("path",{d:"M192 547.17H280V836.17H192V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M393 547.17H481V836.17H393V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M192 635.17V547.17H481V635.17H192Z",fill:"#C56BCE"}),d.jsx("path",{d:"M192 763.17V675.17H481V763.17H192Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter7_d_3_76)",children:[d.jsx("path",{d:"M955 547.17H1043V836.17H955V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M982 836.17V748.17H1203V836.17H982Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter8_d_3_76)",children:[d.jsx("path",{d:"M506 547.17H594V675.17H506V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M633 547.17H721V675.17H633V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M569 691.17H657V836.17H569V691.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M506 763.17V675.17H721V763.17H506Z",fill:"#C56BCE"})]})]}),d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsxs("div",{className:"relative hidden md:block",children:[d.jsx("input",{type:"text",value:u,onChange:K=>h(K.target.value),placeholder:"Search videos...",className:"w-64 lg:w-96 px-4 py-2 pl-10 bg-neutral-800/50 border border-neutral-700/50 rounded-lg text-sm focus:outline-none focus:border-purple-500/50 transition-colors"}),d.jsx("svg",{className:"w-4 h-4 absolute left-3 top-1/2 -translate-y-1/2 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]}),d.jsx(on,{to:"/creator-dashboard",className:"w-9 h-9 flex items-center justify-center rounded-lg bg-neutral-800/50 border border-neutral-700/50 text-neutral-200 hover:bg-neutral-700/50 transition-colors",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),d.jsx(dne,{})]})]})}),d.jsxs("div",{className:"sticky top-[73px] z-10 bg-neutral-900/80 backdrop-blur-sm border-b border-neutral-800/50 px-4 md:px-8 py-3 md:py-4",children:[d.jsxs("div",{className:"space-y-3 md:hidden",children:[j&&d.jsx("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide",children:Y()}),d.jsx("div",{className:"flex items-center gap-3 overflow-x-auto scrollbar-hide",children:I})]}),d.jsx("div",{className:"hidden md:flex items-center gap-3 max-w-[1800px] mx-auto",children:d.jsxs("div",{className:"flex items-center gap-3",children:[I,j&&d.jsx("div",{className:"flex items-center gap-3 ml-6",children:Y()})]})})]}),d.jsx("div",{className:"px-4 md:px-8 py-6 max-w-[1800px] mx-auto",children:n?d.jsx("div",{className:"flex items-center justify-center py-20",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent"})}):r?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center text-red-400",children:[d.jsx("div",{className:"w-24 h-24 rounded-full bg-red-500/10 flex items-center justify-center mb-6",children:d.jsx("svg",{className:"w-12 h-12",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 8v4m0 4h.01M4.93 4.93l14.14 14.14"})})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Something went wrong"}),d.jsx("p",{className:"text-sm text-red-300 max-w-md",children:r})]}):t.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center py-20 text-center",children:[d.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center mb-6",children:d.jsx("svg",{className:"w-12 h-12 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),d.jsx("h3",{className:"text-xl font-semibold text-neutral-200 mb-2",children:f?`No results for "${f}"`:"No videos yet"}),d.jsx("p",{className:"text-neutral-400 mb-6 max-w-md",children:f?"Try refining your keywords or explore another category.":"Be the first creator to upload content to the platform!"}),d.jsx(on,{to:"/creator-dashboard",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-lg font-medium text-white hover:from-purple-600 hover:to-pink-600 transition-all",children:"Start Creating"})]}):d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 md:gap-6",children:t.filter(K=>o==="All"||K.category===o).map(K=>{const ne=l.includes(K.id),Z=K.creatorWallet?S.has(K.creatorWallet):!1;return d.jsx("div",{className:"group cursor-pointer",children:d.jsxs(on,{to:`/video/${K.id}`,children:[d.jsxs("div",{className:"relative mb-3 rounded-xl overflow-hidden bg-neutral-800/50 aspect-video",children:[K.thumbnailUrl&&K.thumbnailUrl.startsWith("/api/")?d.jsx("img",{src:K.thumbnailUrl,alt:K.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300",onError:ee=>{const me=ee.target;me.style.display="none";const pe=me.parentElement;pe&&(pe.innerHTML='<div class="flex items-center justify-center h-full bg-white/5"><span class="text-6xl"></span></div>')}}):d.jsx("div",{className:"flex items-center justify-center h-full bg-white/5",children:d.jsx("span",{className:"text-6xl",children:""})}),ne&&d.jsx("div",{className:"absolute top-2 left-2 bg-gradient-to-r from-green-500 to-emerald-600 px-3 py-1 rounded-full text-xs font-bold text-white shadow-lg",children:"OWNED"}),d.jsx("div",{className:"absolute bottom-2 right-2 bg-black/80 px-2 py-0.5 rounded text-xs font-medium",children:E(K.duration)}),d.jsx("div",{className:"absolute inset-0 bg-black/60 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsxs("button",{className:`flex flex-col items-center gap-2 px-4 py-2 rounded-lg font-medium text-sm transition-colors ${ne?"bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white":"bg-white/90 hover:bg-white text-neutral-900"}`,children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{width:"20",height:"20",viewBox:"0 0 533 530",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{opacity:"0.7",d:"M520.858 245.866C536.403 253.587 536.403 275.762 520.858 283.482L30.4678 527.04C11.1866 536.616 -8.30134 514.434 3.67803 496.547L151.138 276.36C155.874 269.289 155.874 260.06 151.138 252.989L3.67801 32.802C-8.30136 14.9145 11.1866 -7.26763 30.4678 2.30859L520.858 245.866Z",fill:ne?"#ffffff":"#171717"})}),d.jsx("span",{children:ne?"Play":"Unlock"})]}),!ne&&d.jsxs("span",{className:"text-xs text-neutral-600 flex items-center gap-1",children:[Number(K.priceUsdc??0).toFixed(2),d.jsx(Pn,{size:12})]})]})})]}),d.jsxs("div",{className:"flex gap-3",children:[K.creatorProfilePicture?d.jsx("img",{src:K.creatorProfilePicture,alt:K.creatorName,className:"w-9 h-9 rounded-full object-cover flex-shrink-0"}):d.jsx("div",{className:"w-9 h-9 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex-shrink-0"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("h3",{className:"font-medium text-sm line-clamp-2 group-hover:text-purple-400 transition-colors flex-1",children:K.title}),d.jsxs("div",{className:"flex items-center gap-1 text-xs font-medium text-purple-400 flex-shrink-0",children:[Number(K.priceUsdc??0).toFixed(2),d.jsx(Pn,{size:14})]})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-neutral-400",children:[d.jsx("button",{type:"button",onClick:ee=>K.creatorWallet&&V(ee,K.creatorWallet),className:"text-left hover:text-white transition-colors",children:K.creatorName||"Creator"}),x&&K.creatorWallet&&d.jsx("button",{type:"button",onClick:ee=>U(ee,K.creatorWallet),disabled:N===K.creatorWallet,className:`p-1.5 rounded-full transition ${Z?"text-purple-400 bg-white/10":"text-neutral-400 hover:text-white hover:bg-white/10"}`,children:N===K.creatorWallet?d.jsxs("svg",{className:"w-4 h-4 animate-spin",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"})]}):d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6 6 0 10-12 0v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"})})})]}),d.jsxs("p",{className:"text-xs text-neutral-400",children:[P(K.views)," views  ",z(K.createdAt)]}),K.creatorWallet&&d.jsx(kM,{creatorWallet:K.creatorWallet,variant:"compact",lazy:!0,className:"mt-2 text-[10px] [&>button]:px-3 [&>button]:py-1 [&>button]:text-[10px]"})]})]})]})},K.id)})})})]})})}function BC({label:t,heading:e,subheading:n,stats:i,linkTarget:r,thumbnailUrl:s,type:o,fallbackInitial:a="T"}){return d.jsxs("div",{className:"relative group flex-shrink-0",children:[d.jsxs(on,{to:r,className:"flex items-center gap-3 px-4 py-2 rounded-2xl text-white shadow-lg backdrop-blur-sm transition transform hover:-translate-y-0.5 live-chip",children:[d.jsxs("div",{className:"relative",children:[s?d.jsx("div",{className:`${o==="video"?"w-14 h-10 rounded-lg":"w-10 h-10 rounded-full"} overflow-hidden border border-white/20 shadow-lg`,children:d.jsx("img",{src:s,alt:e,className:"w-full h-full object-cover",loading:"lazy"})}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 flex items-center justify-center text-white/80 text-sm font-semibold border border-white/20",children:a}),d.jsx("span",{className:"live-glow"})]}),d.jsxs("div",{className:"flex flex-col",children:[d.jsxs("span",{className:"text-[10px] uppercase tracking-[0.35em] text-white/70 flex items-center gap-2",children:[d.jsx("span",{className:"live-dot"}),t]}),d.jsx("span",{className:"text-sm font-semibold line-clamp-1",children:e}),d.jsx("span",{className:"text-xs text-white/80 md:hidden",children:n})]})]}),d.jsxs("div",{className:"hidden md:block pointer-events-none absolute right-0 top-full mt-2 w-64 rounded-2xl border border-white/10 bg-black/85 p-4 text-sm text-white/80 opacity-0 shadow-2xl transition-opacity group-hover:opacity-100 z-20",children:[d.jsx("p",{className:"text-xs uppercase tracking-[0.3em] text-white/60 mb-2",children:t}),d.jsx("p",{className:"text-sm font-semibold mb-3",children:e}),d.jsx("ul",{className:"space-y-1 text-xs",children:i.map(l=>d.jsxs("li",{className:"flex items-center gap-2 text-white/80",children:[d.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-white/60"}),l]},l))})]})]})}function bne({price:t,onClick:e,loading:n=!1}){return d.jsxs(et.button,{onClick:e,disabled:n,whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative group","aria-label":`Unlock video for $${t}`,children:[d.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-500/50 to-pink-500/50 rounded-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),d.jsxs("div",{className:"relative flex flex-col items-center gap-4",children:[d.jsx("div",{className:"relative",children:n?d.jsx("div",{className:"w-32 h-32 flex items-center justify-center",children:d.jsx("div",{className:"animate-spin rounded-full h-24 w-24 border-4 border-purple-500 border-t-transparent"})}):d.jsxs("svg",{width:"133",height:"130",viewBox:"0 0 533 530",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-32 h-32 drop-shadow-2xl transform transition-all duration-300 group-hover:scale-110 group-hover:drop-shadow-[0_0_30px_rgba(168,85,247,0.6)]",children:[d.jsx("path",{opacity:"0.9",d:"M520.858 245.866C536.403 253.587 536.403 275.762 520.858 283.482L30.4678 527.04C11.1866 536.616 -8.30134 514.434 3.67803 496.547L151.138 276.36C155.874 269.289 155.874 260.06 151.138 252.989L3.67801 32.802C-8.30136 14.9145 11.1866 -7.26763 30.4678 2.30859L520.858 245.866Z",fill:"url(#gradient)",className:"transition-all duration-300"}),d.jsx("defs",{children:d.jsxs("linearGradient",{id:"gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[d.jsx("stop",{offset:"0%",stopColor:"#A855F7"}),d.jsx("stop",{offset:"100%",stopColor:"#EC4899"})]})})]})}),d.jsx(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full shadow-2xl",children:d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),d.jsx("span",{className:"text-white font-bold text-lg flex items-center gap-1.5",children:n?"Processing...":d.jsxs(d.Fragment,{children:["Unlock for $",t.toFixed(2),d.jsx(Pn,{size:18})]})})]})})]})]})}function Sne({videoId:t,commentsEnabled:e,commentPrice:n}){const{publicKey:i}=Ui(),{user:r,token:s}=Ex(),{showToast:o}=bd(),[a,l]=F.useState([]),[c,u]=F.useState(""),[h,f]=F.useState(!1),[p,x]=F.useState(!1),[y,g]=F.useState(null),[m,_]=F.useState(!1);F.useEffect(()=>{w()},[t]);const w=async()=>{f(!0);try{const R=await fetch(`/api/comments/${t}`);if(R.ok){const B=await R.json();l(B.comments||[])}else console.error("Failed to fetch comments")}catch(R){console.error("Error fetching comments:",R)}finally{f(!1)}},S=async R=>{var B;if(R.preventDefault(),!i||!r){g("Please connect your wallet to comment");return}if(!s){g("Authentication in progress. Please try again in a moment.");return}if(!c.trim()){g("Please enter a comment");return}x(!0),g(null);try{const L=i.toBase58(),D=await fetch("/api/comments",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify({videoId:t,content:c.trim(),userWallet:L,username:r.username,profilePictureUrl:null})}),j=await D.json();if(D.ok){u(""),_(!1),await w(),(B=j.balance)!=null&&B.hasSession&&window.dispatchEvent(new Event("sessionUpdated"));const Y=j.message||(n>0?`Comment posted! $${n} USDC deducted from your session balance.`:"Thanks for joining the conversation.");o({title:"Comment posted",description:Y,variant:"success"})}else D.status===402?(g(j.message||"Insufficient session balance"),_(!0)):D.status===403?g(j.error||"Comments are disabled for this video"):(g(j.error||"Failed to post comment"),o({title:"Failed to post comment",description:j.error||"Something went wrong while posting your comment.",variant:"error"}))}catch(L){console.error("Error submitting comment:",L),g("Failed to post comment. Please try again."),o({title:"Failed to post comment",description:"Please try again.",variant:"error"})}finally{x(!1)}},N=async R=>{if(!(!i||!window.confirm("Are you sure you want to delete this comment?")))try{const L=i.toBase58(),D=await fetch(`/api/comments/${R}`,{method:"DELETE",headers:{"Content-Type":"application/json","x-wallet-address":L}});if(D.ok)l(a.filter(j=>j.id!==R));else{const j=await D.json();alert(`Failed to delete comment: ${j.error}`)}}catch(L){console.error("Error deleting comment:",L),alert("Failed to delete comment")}},k=R=>{const B=new Date(R),D=Math.floor((new Date().getTime()-B.getTime())/1e3);return D<60?"just now":D<3600?`${Math.floor(D/60)}m ago`:D<86400?`${Math.floor(D/3600)}h ago`:D<604800?`${Math.floor(D/86400)}d ago`:B.toLocaleDateString()};return e?d.jsxs("div",{className:"mt-8",children:[d.jsxs("h2",{className:"text-2xl font-bold text-white mb-6",children:["Comments ",a.length>0&&`(${a.length})`]}),i&&r?d.jsxs("form",{onSubmit:S,className:"bg-neutral-800/50 rounded-lg p-4 mb-6",children:[d.jsx("textarea",{value:c,onChange:R=>u(R.target.value),placeholder:n>0?`Write a comment... ($${n} USDC per comment)`:"Write a comment...",maxLength:1e3,rows:3,disabled:p,className:"w-full bg-neutral-900 border border-neutral-700 rounded-lg px-4 py-3 text-white placeholder-neutral-500 focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 disabled:opacity-50 resize-none"}),y&&d.jsxs("div",{className:"mt-3 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:[d.jsx("p",{className:"text-red-400 text-sm",children:y}),m&&d.jsx("button",{type:"button",onClick:()=>{o({title:"Top up required",description:"Open the sidebar to add credits to your session balance, then try again.",variant:"info"})},className:"mt-2 text-sm text-purple-400 hover:text-purple-300 underline",children:"Add Credits"})]}),d.jsxs("div",{className:"mt-3 flex flex-wrap items-center justify-between gap-3",children:[d.jsxs("div",{className:"text-xs text-neutral-400 flex-1",children:[c.length,"/1000 characters",n>0&&d.jsxs("span",{className:"ml-3 inline-flex items-center gap-1 text-purple-300 bg-purple-500/10 px-2 py-1 rounded border border-purple-500/20",children:[d.jsx("span",{className:"hidden sm:inline",children:"Only paid comments appear here."}),d.jsxs("span",{className:"inline-flex items-center gap-1 font-semibold text-white",children:["Cost: $",n.toFixed(2)," ",d.jsx(Pn,{size:12})]}),d.jsx("span",{className:"hidden sm:inline text-purple-300",children:" exclusivity enabled."})]})]}),d.jsx("button",{type:"submit",disabled:p||!c.trim(),className:"px-5 py-2 rounded-lg bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-500 hover:to-pink-500 text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",title:n>0?`This will cost $${n.toFixed(2)} USDC`:void 0,children:p?"Posting...":n>0?d.jsxs(d.Fragment,{children:[d.jsxs("span",{children:["$",n.toFixed(2)," USDC"]}),d.jsx(Pn,{size:16})]}):"Post Comment"})]})]}):d.jsx("div",{className:"bg-neutral-800/50 rounded-lg p-4 mb-6 text-center",children:d.jsx("p",{className:"text-neutral-400",children:n>0?`Connect your wallet and add credits to comment ($${n} USDC per comment)`:"Connect your wallet to comment"})}),d.jsx("div",{className:"space-y-4",children:h?d.jsx("div",{className:"flex justify-center py-8",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-2 border-purple-500 border-t-transparent"})}):a.length===0?d.jsx("div",{className:"bg-neutral-800/30 rounded-lg p-8 text-center",children:d.jsx("p",{className:"text-neutral-400",children:"No comments yet. Be the first to comment!"})}):a.map(R=>d.jsx("div",{className:"bg-neutral-800/50 rounded-lg p-4 hover:bg-neutral-800/70 transition-colors",children:d.jsxs("div",{className:"flex items-start justify-between",children:[d.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[R.profile_picture_url?d.jsx("img",{src:R.profile_picture_url,alt:R.username||"User",className:"w-10 h-10 rounded-full object-cover border border-neutral-700"}):d.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-sm font-bold",children:(R.username||R.user_wallet)[0].toUpperCase()}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[d.jsx("span",{className:"font-semibold text-white",children:R.username||`${R.user_wallet.slice(0,4)}...${R.user_wallet.slice(-4)}`}),d.jsx("span",{className:"text-xs text-neutral-500",children:k(R.created_at)}),R.payment_id&&d.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-purple-500/20 text-purple-400",children:"Paid"})]}),d.jsx("p",{className:"text-neutral-300 whitespace-pre-wrap break-words",children:R.content})]})]}),i&&R.user_wallet===i.toBase58()&&d.jsx("button",{onClick:()=>N(R.id),className:"text-neutral-500 hover:text-red-400 transition-colors ml-2",title:"Delete comment",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},R.id))})]}):d.jsx("div",{className:"bg-neutral-800/50 rounded-lg p-6 mt-8",children:d.jsx("p",{className:"text-neutral-400 text-center",children:"Comments are disabled for this video"})})}NM();function Mne(){const{id:t}=b4(),{publicKey:e,connected:n,signTransaction:i}=Ui(),{connection:r}=Zf(),{setVisible:s}=Ja(),o=e==null?void 0:e.toBase58(),[a,l]=F.useState(null),[c,u]=F.useState(!0),[h,f]=F.useState(!1),[p,x]=F.useState(!0),[y,g]=F.useState(!1),[m,_]=F.useState(!1),[w,S]=F.useState(null),[N,k]=F.useState(null),[R,B]=F.useState(null),{showToast:L}=bd(),D=z5(a==null?void 0:a.creatorWallet),j=a==null?void 0:a.creatorWallet,Y=j&&o&&j===o,I=(R==null?void 0:R.walletAddress)||(R==null?void 0:R.wallet_address)||j||"";F.useEffect(()=>{b()},[t]),F.useEffect(()=>{n&&o&&t?P():x(!1)},[n,o,t]),F.useEffect(()=>{h&&!w&&C()},[h]);const v=F.useCallback(async()=>{if(!(!j||Y)){if(!o){s(!0);return}try{D.summary.isSubscribed?(await D.unsubscribe(),L({title:"Unsubscribed",description:"You will no longer receive updates from this creator.",variant:"success"})):(await D.subscribe(),L({title:"Subscribed",description:"We will keep this creator at the top of your feed.",variant:"success"}))}catch(V){L({title:"Subscription failed",description:V.message||"Please try again.",variant:"error"})}}},[j,Y,o,D,L,s]),b=async()=>{try{const V=await fetch(`/api/videos/${t}`);if(!V.ok)throw new Error("Video not found");const U=await V.json();console.log(" Video data:",U),console.log(" Creator wallet:",U.creatorWallet),l(U),U.creatorWallet?(console.log(" Fetching creator profile for:",U.creatorWallet),E(U.creatorWallet)):console.warn(" No creator wallet found for this video!")}catch(V){console.error("Failed to fetch video:",V)}finally{u(!1)}},E=async V=>{try{const U=await fetch(`/api/users/profile?walletAddress=${V}`);if(U.ok){const T=await U.json();B(T.user)}}catch(U){console.error("Failed to fetch creator profile:",U)}},P=async()=>{if(!o||!t){console.log(" Cannot check access: missing wallet or id"),x(!1);return}x(!0),console.log(` Checking access for video ${t}...`);try{const V=await fetch(`/api/videos/${t}/stream`,{headers:{"x-wallet-address":o}});console.log(` Stream endpoint response status: ${V.status}`),V.status===402?(f(!1),console.log(" HTTP 402 Payment Required - User does NOT have access")):V.ok?(f(!0),console.log(" Access granted - User OWNS this video! Setting hasAccess = true"),C()):(console.log(` Unexpected response status: ${V.status}`),f(!1))}catch(V){console.error(" Error checking access:",V),f(!1)}finally{x(!1)}},C=async()=>{if(!(!o||!t))try{if(a!=null&&a.videoUrl&&a.videoUrl.startsWith("/api/storage/")){console.log(" Using local storage video"),console.log(`   Video URL: ${a.videoUrl}`),S(a.videoUrl);return}console.log(" Fetching secure streaming session...");const V=await fetch(`/api/videos/${t}/play-url`,{headers:{"x-wallet-address":o}});if(!V.ok)throw new Error("Failed to get streaming URL");const U=await V.json();console.log(" Got streaming session!"),console.log(`   Session token: ${U.sessionToken.substring(0,20)}...`),console.log(`   Expires in: ${U.expiresIn}s`),k(U.sessionToken);const T=`/api/videos/${t}/stream-secure?session=${encodeURIComponent(U.sessionToken)}`;S(T),console.log(" Using session-based secure streaming"),console.log("   URL sharing is now prevented - session is tied to your wallet")}catch(V){console.error(" Error fetching stream URL:",V),S(`/api/videos/${t}/play`)}},z=async()=>{var V,U,T;if(!e||!a||!n){console.error("Missing required data:",{publicKey:e,video:a,connected:n});return}f(!0),g(!0);try{console.log(`
=== Seamless X402 Payment (No Popups!) ===`),console.log(`Amount: ${a.priceUsdc} USDC`),console.log(`Video: ${a.title}`),console.log(`User Wallet: ${e.toBase58()}`);const G=await fetch("/api/payments/seamless",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({videoId:t,userWallet:e.toBase58()})});if(!G.ok){const ne=await G.json();throw new Error(ne.message||ne.error||"Payment failed")}const K=await G.json();if(K.alreadyPaid){console.log(" Already paid for this video!");return}console.log(" Payment complete!"),console.log(`Transaction: ${K.signature}`),console.log(`=== No Wallet Popup Required! ===
`),window.dispatchEvent(new Event("sessionUpdated")),_(!0),setTimeout(()=>_(!1),1500)}catch(G){console.error(" Payment failed:",G),f(!1);let K="Payment failed. Please try again.";(V=G.message)!=null&&V.includes("No Active Session")?K=" Please deposit USDC first to enable seamless payments. Refresh the page to see the deposit modal.":(U=G.message)!=null&&U.includes("Insufficient Balance")?K=" Not enough credits. Please add more USDC to your session. Refresh the page to see the top-up option.":(T=G.message)!=null&&T.includes("insufficient funds")?K=" Insufficient USDC in your wallet. Please add USDC to your wallet first.":G.message&&(K=G.message),alert(K)}finally{g(!1)}};return c?d.jsx("main",{className:"flex items-center justify-center h-full relative z-10",children:d.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),d.jsx("p",{className:"text-neutral-400 text-lg",children:"Loading video..."})]})}):a?d.jsx("main",{className:"flex flex-col overflow-y-auto h-full relative z-10",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-8 w-full",children:[d.jsx(et.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:d.jsxs(on,{to:"/",className:"inline-flex items-center gap-2 text-neutral-400 hover:text-white transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Videos"]})}),d.jsx(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"relative aspect-video bg-neutral-900 rounded-xl overflow-hidden mb-6 border border-neutral-800/50",children:p?d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-purple-500/20 border-t-purple-500 rounded-full animate-spin mb-4 mx-auto"}),d.jsx("p",{className:"text-neutral-400 text-sm",children:"Checking access..."})]})}):h?d.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"w-full h-full",children:w?d.jsx("video",{controls:!0,autoPlay:!0,preload:"metadata",playsInline:!0,className:"w-full h-full object-contain bg-black",controlsList:"nodownload",onContextMenu:V=>V.preventDefault(),src:w,onLoadStart:()=>console.log("Video: Load started"),onLoadedMetadata:()=>console.log("Video: Metadata loaded"),onLoadedData:()=>{console.log("Video: Data loaded");const V=document.querySelector("video");V&&V.play().catch(U=>console.log("Auto-play prevented:",U))},onCanPlay:()=>console.log("Video: Can play"),onCanPlayThrough:()=>console.log("Video: Can play through"),onWaiting:()=>console.log("Video: Waiting/Buffering"),onPlaying:()=>console.log("Video: Playing"),onError:V=>{console.error("Video error:",V);const U=V.target;if(U.error&&(console.error("Error code:",U.error.code),console.error("Error message:",U.error.message),U.error.code===2||U.error.code===4)){console.log(" Network error - URL may have expired, refreshing...");const T=U.currentTime;C().then(()=>{console.log(" URL refreshed - resuming playback"),setTimeout(()=>{U&&(U.currentTime=T,U.play().catch(G=>console.error("Resume failed:",G)))},100)})}},children:"Your browser does not support the video tag."},w):d.jsx("div",{className:"w-full h-full flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"w-12 h-12 border-4 border-purple-500/20 border-t-purple-500 rounded-full animate-spin mb-4 mx-auto"}),d.jsx("p",{className:"text-neutral-400 text-sm",children:"Loading video..."})]})})}):d.jsxs("div",{className:"w-full h-full flex items-center justify-center relative",children:[d.jsx("img",{src:a.thumbnailUrl,alt:a.title,className:"absolute inset-0 w-full h-full object-cover opacity-10 blur-lg"}),d.jsx("div",{className:"relative z-10 text-center px-4",children:n?d.jsx(bne,{price:a.priceUsdc,onClick:z,loading:y}):d.jsxs(et.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},className:"bg-neutral-800/90 backdrop-blur-sm border border-neutral-700/50 p-8 rounded-xl max-w-md mx-auto",children:[d.jsx("div",{className:"w-16 h-16 bg-purple-500/10 rounded-full flex items-center justify-center mb-4 mx-auto",children:d.jsx("svg",{className:"w-8 h-8 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("h3",{className:"text-2xl font-semibold text-white mb-2",children:"Connect Wallet"}),d.jsxs("p",{className:"text-neutral-300 mb-6",children:["Connect your wallet to unlock this video for $",a.priceUsdc.toFixed(2)]}),d.jsx("button",{onClick:()=>s(!0),className:"px-8 py-3 bg-purple-500 hover:bg-purple-600 rounded-lg text-white font-semibold w-full transition-colors",children:"Connect Wallet to Watch"})]})})]})}),m&&d.jsx(et.div,{initial:{opacity:0,y:-20,scale:.9},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.9},className:"fixed top-24 right-4 bg-green-500 p-4 rounded-lg shadow-2xl z-50",children:d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-white font-semibold",children:"Payment Successful!"}),d.jsx("p",{className:"text-white/90 text-sm",children:"Video unlocked"})]})]})}),d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 p-6 rounded-xl",children:[d.jsxs("div",{className:"flex items-start justify-between mb-4",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx("h1",{className:"text-3xl font-semibold text-white mb-2",children:a.title}),d.jsxs("div",{className:"flex items-center gap-4 text-sm text-neutral-400 mb-4",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),a.views.toLocaleString()," views"]}),d.jsxs("span",{className:"flex items-center gap-1",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Math.floor(a.duration/60)," minutes"]})]})]}),d.jsx("div",{className:"px-4 py-2 bg-purple-500/10 border border-purple-500/20 rounded-lg",children:d.jsxs("p",{className:"text-purple-400 font-semibold text-lg flex items-center gap-1.5",children:["$",a.priceUsdc.toFixed(2),d.jsx(Pn,{size:18})]})})]}),d.jsx("p",{className:"text-neutral-300 mb-4 leading-relaxed",children:a.description}),d.jsxs("div",{className:"flex flex-wrap items-center gap-4 pt-4 border-t border-neutral-700/50",children:[d.jsxs(on,{to:j?`/profile/${j}`:"#",className:"flex items-center gap-3 flex-1 min-w-[220px] group",children:[R!=null&&R.profile_picture_url?d.jsx("img",{src:R.profile_picture_url,alt:(R==null?void 0:R.username)||"Creator",className:"w-12 h-12 rounded-2xl object-cover border border-neutral-700 group-hover:border-purple-400/40 transition"}):d.jsx("div",{className:"w-12 h-12 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white font-bold",children:R!=null&&R.username?R.username[0].toUpperCase():I.slice(0,1).toUpperCase()||"C"}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400",children:"Creator"}),d.jsx("p",{className:"text-white font-medium",children:(R==null?void 0:R.username)||(I?`${I.slice(0,4)}...${I.slice(-4)}`:"Anonymous")}),(R==null?void 0:R.bio)&&d.jsx("p",{className:"text-xs text-neutral-400 mt-1 line-clamp-2",children:R.bio})]})]}),d.jsxs("div",{className:"flex flex-col items-end gap-3 min-w-[220px]",children:[j&&d.jsx(kM,{creatorWallet:j,videoId:t}),!Y&&j&&d.jsxs(d.Fragment,{children:[d.jsxs("span",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:[D.summary.subscriberCount.toLocaleString()," subs"]}),d.jsxs("button",{onClick:v,disabled:D.loading,className:`group relative overflow-hidden rounded-full px-6 py-2 text-sm font-semibold transition focus:outline-none ${D.summary.isSubscribed?"bg-white/10 text-white border border-white/20":"bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-400 text-white shadow-[0_0_30px_rgba(197,107,206,0.45)]"}`,children:[d.jsx("span",{className:"relative z-10 flex items-center gap-2",children:D.loading?"Updating...":D.summary.isSubscribed?"Subscribed":"Subscribe"}),!D.summary.isSubscribed&&d.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-40 bg-white/20 transition"})]})]})]})]}),h&&d.jsx(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-3 bg-green-500/10 border border-green-500/30 rounded-lg",children:d.jsxs("p",{className:"text-green-400 text-sm flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),"You own this video and have unlimited access"]})})]}),d.jsx(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:d.jsx(Sne,{videoId:t,commentsEnabled:(a==null?void 0:a.commentsEnabled)??!0,commentPrice:(a==null?void 0:a.commentPrice)??0})})]})}):d.jsx("main",{className:"flex items-center justify-center h-full relative z-10",children:d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-500/10 rounded-full flex items-center justify-center mb-6 mx-auto",children:d.jsx("svg",{className:"w-10 h-10 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),d.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"Video Not Found"}),d.jsx("p",{className:"text-neutral-400 mb-6",children:"This video doesn't exist or has been removed"}),d.jsxs(on,{to:"/",className:"inline-flex items-center gap-2 px-6 py-3 bg-purple-500 hover:bg-purple-600 text-white font-medium rounded-lg transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]})]})})}function UC(){const t=b4(),{publicKey:e,connected:n}=Ui(),{setVisible:i}=Ja(),r=F.useRef(null),{showToast:s}=bd(),o=t.wallet||(e==null?void 0:e.toBase58())||null,a=!t.wallet||!!(e&&t.wallet===e.toBase58()),l=z5(!a&&o?o:void 0),c=!!(a&&n&&e),[u,h]=F.useState(null),[f,p]=F.useState(null),[x,y]=F.useState([]),[g,m]=F.useState([]),[_,w]=F.useState(!0),[S,N]=F.useState(!1),[k,R]=F.useState(!1),[B,L]=F.useState(!1),[D,j]=F.useState(!1),[Y,I]=F.useState(""),[v,b]=F.useState(null),[E,P]=F.useState(null);F.useEffect(()=>{o?(C(o,a),a&&n&&e?z():y([])):w(!1)},[o,a,n,e]),F.useEffect(()=>{!c&&k&&R(!1)},[c,k]);const C=async(ee,me)=>{var pe,Se,Re,it,J;w(!0);try{const ot=me?"/api/users/profile":`/api/users/profile?walletAddress=${ee}`,We=await fetch(ot,{headers:me?{"x-wallet-address":ee}:void 0});if(We.ok){const He=await We.json();h(He.user),p({videosOwned:((pe=He.stats)==null?void 0:pe.videosOwned)??0,totalSpent:((Se=He.stats)==null?void 0:Se.totalSpent)??0,videosCreated:((Re=He.stats)==null?void 0:Re.videosCreated)??0,totalEarnings:((it=He.stats)==null?void 0:it.totalEarnings)??0,subscriberCount:((J=He.stats)==null?void 0:J.subscriberCount)??0}),I(He.user.username||""),m((He.createdVideos||[]).map(Ee=>({id:Ee.id,title:Ee.title,thumbnailUrl:Ee.thumbnailUrl||Ee.thumbnail_url||"/placeholder-video.jpg",priceUsdc:Ee.priceUsdc??Ee.price_usdc??0,views:Ee.views??0,createdAt:Ee.createdAt||Ee.created_at||new Date().toISOString(),description:Ee.description})))}}catch(ot){console.error("Failed to fetch profile:",ot)}finally{w(!1)}},z=async()=>{if(e){N(!0);try{const ee=e.toBase58(),me=await fetch("/api/users/purchased-videos",{headers:{"x-wallet-address":ee}});if(me.ok){const Se=(await me.json()).videos.map(Re=>({id:Re.id,title:Re.title,thumbnailUrl:Re.thumbnailUrl||Re.thumbnail_url||"/placeholder-video.jpg",creatorName:Re.creatorName||"Unknown Creator",priceUsdc:Re.priceUsdc||Re.price_usdc||0,createdAt:Re.createdAt||Re.created_at||new Date().toISOString()}));y(Se),console.log(" Loaded",Se.length,"owned videos")}}catch(ee){console.error("Failed to fetch owned videos:",ee)}finally{N(!1)}}},V=ee=>{var pe;const me=(pe=ee.target.files)==null?void 0:pe[0];if(me){if(!me.type.startsWith("image/")){s({title:"Unsupported file",description:"Please select a valid image file (PNG, JPG, GIF).",variant:"error"});return}if(me.size>5*1024*1024){s({title:"File too large",description:"Profile pictures must be smaller than 5MB.",variant:"error"});return}b(me);const Se=new FileReader;Se.onloadend=()=>{P(Se.result)},Se.readAsDataURL(me)}},U=async()=>{if(!(!o||a)){if(!n||!e){i(!0);return}try{l.summary.isSubscribed?(await l.unsubscribe(),s({title:"Unsubscribed",description:"You will no longer receive updates from this creator.",variant:"success"})):(await l.subscribe(),s({title:"Subscribed",description:"Creator updates will appear in your feed immediately.",variant:"success"}))}catch(ee){s({title:"Subscription failed",description:ee.message||"Please try again.",variant:"error"})}}},T=async()=>{if(e){j(!0);try{const ee=e.toBase58(),me=new FormData;me.append("username",Y),v&&me.append("profilePicture",v);const pe=await fetch("/api/users/update-profile",{method:"PUT",headers:{"x-wallet-address":ee},body:me});if(!pe.ok)throw new Error(`Failed to update profile (${pe.status})`);const Se=await pe.json();h(Se.user),R(!1),b(null),P(null),s({title:"Profile updated",description:"Your changes have been saved successfully.",variant:"success"})}catch(ee){console.error("Failed to save profile:",ee),s({title:"Update failed",description:"We could not save your profile changes. Please try again.",variant:"error"})}finally{j(!1)}}},G=()=>{R(!1),I((u==null?void 0:u.username)||""),b(null),P(null)};if(!o)return d.jsx("main",{className:"flex items-center justify-center h-full relative z-10",children:d.jsxs(et.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center max-w-md",children:[d.jsx("div",{className:"w-24 h-24 bg-purple-500/10 rounded-full flex items-center justify-center mb-6 mx-auto",children:d.jsx("svg",{className:"w-12 h-12 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})}),d.jsx("h2",{className:"text-2xl font-semibold text-white mb-2",children:"Connect Your Wallet"}),d.jsx("p",{className:"text-neutral-400 mb-8",children:"Connect your wallet to view and manage your profile"}),d.jsxs(Xt,{onClick:()=>i(!0),children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Connect Wallet"]})]})});if(_)return d.jsx("main",{className:"flex items-center justify-center h-full relative z-10",children:d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent"})});const K=(u==null?void 0:u.profile_picture_url)||(u==null?void 0:u.profilePictureUrl)||null,ne=(u==null?void 0:u.is_creator)??(u==null?void 0:u.isCreator),Z=E||K;return d.jsx("main",{className:"flex flex-col overflow-y-auto h-full relative z-10",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 md:px-8 py-12 w-full",children:[d.jsx(et.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},className:"mb-6",children:d.jsxs(on,{to:"/",className:"inline-flex items-center gap-2 text-neutral-400 hover:text-white transition-colors",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]})}),d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8 mb-8",children:[d.jsxs("div",{className:"flex flex-col md:flex-row items-start gap-8",children:[d.jsxs("div",{className:"relative",children:[Z?d.jsx("img",{src:Z,alt:"Profile",className:"w-32 h-32 rounded-full object-cover border-4 border-purple-500/20"}):d.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-white text-4xl font-bold",children:((u==null?void 0:u.username)||o||"U")[0].toUpperCase()}),k&&d.jsx("button",{onClick:()=>{var ee;return(ee=r.current)==null?void 0:ee.click()},className:"absolute bottom-0 right-0 w-10 h-10 bg-purple-500 hover:bg-purple-600 rounded-full flex items-center justify-center text-white transition-colors",children:d.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("input",{ref:r,type:"file",accept:"image/*",onChange:V,className:"hidden"})]}),d.jsx("div",{className:"flex-1",children:c&&k?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-400 mb-2",children:"Username"}),d.jsx("input",{type:"text",value:Y,onChange:ee=>I(ee.target.value),placeholder:"Enter username",className:"w-full max-w-md px-4 py-2 bg-neutral-900 border border-neutral-700 rounded-lg text-white focus:outline-none focus:border-purple-500 transition-colors"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-400 mb-2",children:"Wallet Address"}),d.jsx("p",{className:"text-neutral-500 font-mono text-sm",children:e==null?void 0:e.toBase58()})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(Xt,{onClick:T,disabled:D,className:"min-w-[120px]",children:D?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),"Saving..."]}):d.jsxs(d.Fragment,{children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes"]})}),d.jsx("button",{onClick:G,disabled:D,className:"px-6 py-3 bg-neutral-700 hover:bg-neutral-600 rounded-lg text-white font-medium transition-colors disabled:opacity-50",children:"Cancel"})]})]}):d.jsxs(d.Fragment,{children:[d.jsx("h1",{className:"text-3xl font-bold text-white mb-2",children:(u==null?void 0:u.username)||"Anonymous User"}),d.jsx("p",{className:"text-neutral-400 font-mono text-sm mb-4",children:o?`${o.slice(0,8)}...${o.slice(-8)}`:""}),(u==null?void 0:u.bio)&&d.jsx("p",{className:"text-neutral-300 mb-4",children:u.bio}),ne&&d.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-purple-500/10 border border-purple-500/20 rounded-full text-purple-400 text-sm font-medium mb-4",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),"Creator"]}),o&&d.jsx("div",{className:"mb-4",children:d.jsx(kM,{creatorWallet:o})}),d.jsx("div",{className:"flex flex-wrap gap-3 mt-6",children:c?d.jsxs(Xt,{onClick:()=>R(!0),children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Edit Profile"]}):o?d.jsxs("button",{onClick:U,disabled:l.loading,className:`group relative overflow-hidden rounded-full px-6 py-2 text-sm font-semibold transition focus:outline-none ${l.summary.isSubscribed?"bg-white/10 text-white border border-white/20":"bg-gradient-to-r from-purple-500 via-pink-500 to-cyan-400 text-white shadow-[0_0_25px_rgba(197,107,206,0.4)]"}`,children:[d.jsx("span",{className:"relative z-10",children:l.loading?"Updating...":l.summary.isSubscribed?"Subscribed":"Subscribe"}),!l.summary.isSubscribed&&d.jsx("span",{className:"absolute inset-0 opacity-0 group-hover:opacity-40 bg-white/20 transition"})]}):null})]})})]}),!k&&f&&d.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6 mt-8 pt-8 border-t border-neutral-700/50",children:[c&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-1",children:f.videosOwned}),d.jsx("div",{className:"text-sm text-neutral-400",children:"Paid-Views"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-3xl font-bold text-pink-400 mb-1 flex items-center gap-2",children:["$",Number(f.totalSpent??0).toFixed(2),d.jsx(Pn,{size:16})]}),d.jsx("div",{className:"text-sm text-neutral-400",children:"Total Spent"})]})]}),ne&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-green-400 mb-1",children:f.videosCreated}),d.jsx("div",{className:"text-sm text-neutral-400",children:"Videos Created"})]}),d.jsxs("div",{children:[d.jsxs("div",{className:"text-3xl font-bold text-green-400 mb-1 flex items-center gap-2",children:["$",Number(f.totalEarnings??0).toFixed(2),d.jsx(Pn,{size:16})]}),d.jsx("div",{className:"text-sm text-neutral-400",children:"Total Earnings"})]})]}),typeof f.subscriberCount=="number"&&d.jsxs("div",{children:[d.jsx("div",{className:"text-3xl font-bold text-cyan-400 mb-1",children:f.subscriberCount}),d.jsx("div",{className:"text-sm text-neutral-400",children:"Subscribers"})]})]})]}),c&&d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:[d.jsx("h2",{className:"text-2xl font-semibold text-white mb-6",children:"My Library"}),S?d.jsxs("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-12 text-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),d.jsx("p",{className:"text-neutral-400",children:"Loading your videos..."})]}):x.length===0?d.jsxs("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-12 text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-purple-500/10 rounded-full flex items-center justify-center mb-6 mx-auto",children:d.jsx("svg",{className:"w-10 h-10 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),d.jsx("p",{className:"text-neutral-400 mb-8",children:"You haven't purchased any videos yet"}),d.jsx(Xt,{asChild:!0,children:d.jsxs(on,{to:"/",children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),"Browse Videos"]})})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:x.map(ee=>d.jsx(et.div,{whileHover:{scale:1.05},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl overflow-hidden group cursor-pointer",children:d.jsxs(on,{to:`/video/${ee.id}`,className:"block",children:[d.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[d.jsx("img",{src:ee.thumbnailUrl,alt:ee.title,className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:d.jsx("div",{className:"w-16 h-16 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center",children:d.jsx("svg",{className:"w-8 h-8 text-white ml-1",fill:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{d:"M8 5v14l11-7z"})})})})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"text-white font-semibold mb-2 line-clamp-2 group-hover:text-purple-400 transition-colors",children:ee.title}),d.jsx("p",{className:"text-neutral-400 text-sm mb-3",children:ee.creatorName}),d.jsxs("div",{className:"flex items-center justify-between text-sm",children:[d.jsxs("span",{className:"text-purple-400 font-medium flex items-center gap-1",children:["$",Number(ee.priceUsdc??0).toFixed(2),d.jsx(Pn,{size:14})]}),d.jsxs("span",{className:"text-neutral-500",children:["Purchased ",new Date(ee.createdAt).toLocaleDateString()]})]})]})]})},ee.id))})]}),d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"mt-16",children:[d.jsx("h2",{className:"text-2xl font-semibold text-white mb-6",children:a?"Your Uploads":"Creator Uploads"}),g.length===0?d.jsx("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-12 text-center",children:d.jsx("p",{className:"text-neutral-400",children:a?"You haven't uploaded any videos yet.":"No videos published yet."})}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:g.map(ee=>d.jsx(et.div,{whileHover:{scale:1.02},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl overflow-hidden",children:d.jsxs(on,{to:`/video/${ee.id}`,className:"block",children:[d.jsxs("div",{className:"relative aspect-video overflow-hidden",children:[d.jsx("img",{src:ee.thumbnailUrl||"/placeholder-video.jpg",alt:ee.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),d.jsxs("div",{className:"absolute bottom-3 right-3 px-3 py-1 rounded-full bg-black/70 text-xs text-white",children:["$",Number(ee.priceUsdc||0).toFixed(2)]})]}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"text-white font-semibold mb-2 line-clamp-2",children:ee.title}),d.jsxs("div",{className:"flex items-center justify-between text-sm text-neutral-400",children:[d.jsxs("span",{children:[ee.views.toLocaleString()," views"]}),d.jsx("span",{children:new Date(ee.createdAt).toLocaleDateString()})]})]})]})},ee.id))})]})]})})}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function cp(t){return t+.5|0}const _a=(t,e,n)=>Math.max(Math.min(t,n),e);function mh(t){return _a(cp(t*2.55),0,255)}function Oa(t){return _a(cp(t*255),0,255)}function fo(t){return _a(cp(t/2.55)/100,0,1)}function OC(t){return _a(cp(t*100),0,100)}const Dr={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},$_=[..."0123456789ABCDEF"],Ene=t=>$_[t&15],Tne=t=>$_[(t&240)>>4]+$_[t&15],gm=t=>(t&240)>>4===(t&15),Ane=t=>gm(t.r)&&gm(t.g)&&gm(t.b)&&gm(t.a);function Cne(t){var e=t.length,n;return t[0]==="#"&&(e===4||e===5?n={r:255&Dr[t[1]]*17,g:255&Dr[t[2]]*17,b:255&Dr[t[3]]*17,a:e===5?Dr[t[4]]*17:255}:(e===7||e===9)&&(n={r:Dr[t[1]]<<4|Dr[t[2]],g:Dr[t[3]]<<4|Dr[t[4]],b:Dr[t[5]]<<4|Dr[t[6]],a:e===9?Dr[t[7]]<<4|Dr[t[8]]:255})),n}const Nne=(t,e)=>t<255?e(t):"";function Rne(t){var e=Ane(t)?Ene:Tne;return t?"#"+e(t.r)+e(t.g)+e(t.b)+Nne(t.a,e):void 0}const Lne=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function H5(t,e,n){const i=e*Math.min(n,1-n),r=(s,o=(s+t/30)%12)=>n-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function Ine(t,e,n){const i=(r,s=(r+t/60)%6)=>n-n*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function kne(t,e,n){const i=H5(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Pne(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}function PM(t){const n=t.r/255,i=t.g/255,r=t.b/255,s=Math.max(n,i,r),o=Math.min(n,i,r),a=(s+o)/2;let l,c,u;return s!==o&&(u=s-o,c=a>.5?u/(2-s-o):u/(s+o),l=Pne(n,i,r,u,s),l=l*60+.5),[l|0,c||0,a]}function DM(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(Oa)}function BM(t,e,n){return DM(H5,t,e,n)}function Dne(t,e,n){return DM(kne,t,e,n)}function Bne(t,e,n){return DM(Ine,t,e,n)}function G5(t){return(t%360+360)%360}function Une(t){const e=Lne.exec(t);let n=255,i;if(!e)return;e[5]!==i&&(n=e[6]?mh(+e[5]):Oa(+e[5]));const r=G5(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=Dne(r,s,o):e[1]==="hsv"?i=Bne(r,s,o):i=BM(r,s,o),{r:i[0],g:i[1],b:i[2],a:n}}function One(t,e){var n=PM(t);n[0]=G5(n[0]+e),n=BM(n),t.r=n[0],t.g=n[1],t.b=n[2]}function jne(t){if(!t)return;const e=PM(t),n=e[0],i=OC(e[1]),r=OC(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${fo(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}const jC={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},FC={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Fne(){const t={},e=Object.keys(FC),n=Object.keys(jC);let i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<n.length;r++)s=n[r],a=a.replace(s,jC[s]);s=parseInt(FC[o],16),t[a]=[s>>16&255,s>>8&255,s&255]}return t}let xm;function zne(t){xm||(xm=Fne(),xm.transparent=[0,0,0,0]);const e=xm[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Vne=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Wne(t){const e=Vne.exec(t);let n=255,i,r,s;if(e){if(e[7]!==i){const o=+e[7];n=e[8]?mh(o):_a(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?mh(i):_a(i,0,255)),r=255&(e[4]?mh(r):_a(r,0,255)),s=255&(e[6]?mh(s):_a(s,0,255)),{r:i,g:r,b:s,a:n}}}function Hne(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${fo(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Dv=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$c=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Gne(t,e,n){const i=$c(fo(t.r)),r=$c(fo(t.g)),s=$c(fo(t.b));return{r:Oa(Dv(i+n*($c(fo(e.r))-i))),g:Oa(Dv(r+n*($c(fo(e.g))-r))),b:Oa(Dv(s+n*($c(fo(e.b))-s))),a:t.a+n*(e.a-t.a)}}function ym(t,e,n){if(t){let i=PM(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,e===0?360:1)),i=BM(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function $5(t,e){return t&&Object.assign(e||{},t)}function zC(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Oa(t[3]))):(e=$5(t,{r:0,g:0,b:0,a:1}),e.a=Oa(e.a)),e}function $ne(t){return t.charAt(0)==="r"?Wne(t):Une(t)}class Af{constructor(e){if(e instanceof Af)return e;const n=typeof e;let i;n==="object"?i=zC(e):n==="string"&&(i=Cne(e)||zne(e)||$ne(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=$5(this._rgb);return e&&(e.a=fo(e.a)),e}set rgb(e){this._rgb=zC(e)}rgbString(){return this._valid?Hne(this._rgb):void 0}hexString(){return this._valid?Rne(this._rgb):void 0}hslString(){return this._valid?jne(this._rgb):void 0}mix(e,n){if(e){const i=this.rgb,r=e.rgb;let s;const o=n===s?.5:n,a=2*o-1,l=i.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,i.r=255&c*i.r+s*r.r+.5,i.g=255&c*i.g+s*r.g+.5,i.b=255&c*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,n){return e&&(this._rgb=Gne(this._rgb,e._rgb,n)),this}clone(){return new Af(this.rgb)}alpha(e){return this._rgb.a=Oa(e),this}clearer(e){const n=this._rgb;return n.a*=1-e,this}greyscale(){const e=this._rgb,n=cp(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=n,this}opaquer(e){const n=this._rgb;return n.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return ym(this._rgb,2,e),this}darken(e){return ym(this._rgb,2,-e),this}saturate(e){return ym(this._rgb,1,e),this}desaturate(e){return ym(this._rgb,1,-e),this}rotate(e){return One(this._rgb,e),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function io(){}const Yne=(()=>{let t=0;return()=>t++})();function Ut(t){return t==null}function Zn(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function Pt(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Zr(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ss(t,e){return Zr(t)?t:e}function Et(t,e){return typeof t>"u"?e:t}const Xne=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function rn(t,e,n){if(t&&typeof t.call=="function")return t.apply(n,e)}function Ft(t,e,n,i){let r,s,o;if(Zn(t))for(s=t.length,r=0;r<s;r++)e.call(n,t[r],r);else if(Pt(t))for(o=Object.keys(t),s=o.length,r=0;r<s;r++)e.call(n,t[o[r]],o[r])}function Ag(t,e){let n,i,r,s;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],s=e[n],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Cg(t){if(Zn(t))return t.map(Cg);if(Pt(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=Cg(t[n[r]]);return e}return t}function Y5(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function qne(t,e,n,i){if(!Y5(t))return;const r=e[t],s=n[t];Pt(r)&&Pt(s)?Cf(r,s,i):e[t]=Cg(s)}function Cf(t,e,n){const i=Zn(e)?e:[e],r=i.length;if(!Pt(t))return t;n=n||{};const s=n.merger||qne;let o;for(let a=0;a<r;++a){if(o=i[a],!Pt(o))continue;const l=Object.keys(o);for(let c=0,u=l.length;c<u;++c)s(l[c],t,o,n)}return t}function Uh(t,e){return Cf(t,e,{merger:Kne})}function Kne(t,e,n){if(!Y5(t))return;const i=e[t],r=n[t];Pt(i)&&Pt(r)?Uh(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Cg(r))}const VC={"":t=>t,x:t=>t.x,y:t=>t.y};function Zne(t){const e=t.split("."),n=[];let i="";for(const r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function Qne(t){const e=Zne(t);return n=>{for(const i of e){if(i==="")break;n=n&&n[i]}return n}}function ld(t,e){return(VC[e]||(VC[e]=Qne(e)))(t)}function UM(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Nf=t=>typeof t<"u",Ga=t=>typeof t=="function",WC=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function Jne(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const ci=Math.PI,Vs=2*ci,eie=Vs+ci,Ng=Number.POSITIVE_INFINITY,tie=ci/180,hs=ci/2,dl=ci/4,HC=ci*2/3,X5=Math.log10,Ws=Math.sign;function Oh(t,e,n){return Math.abs(t-e)<n}function GC(t){const e=Math.round(t);t=Oh(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(X5(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function nie(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i===0&&(e.push(i),e.push(t/i));return n===(n|0)&&e.push(n),e.sort((r,s)=>r-s).pop(),e}function iie(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Rf(t){return!iie(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function rie(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function sie(t,e,n){let i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i][n],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Gl(t){return t*(ci/180)}function oie(t){return t*(180/ci)}function $C(t){if(!Zr(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function aie(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let s=Math.atan2(i,n);return s<-.5*ci&&(s+=Vs),{angle:s,distance:r}}function Y_(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function lie(t,e){return(t-e+eie)%Vs-ci}function sa(t){return(t%Vs+Vs)%Vs}function q5(t,e,n,i){const r=sa(t),s=sa(e),o=sa(n),a=sa(s-r),l=sa(o-r),c=sa(r-s),u=sa(r-o);return r===s||r===o||i&&s===o||a>l&&c<u}function br(t,e,n){return Math.max(e,Math.min(n,t))}function cie(t){return br(t,-32768,32767)}function $l(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function OM(t,e,n){n=n||(o=>t[o]<e);let i=t.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,n(s)?r=s:i=s;return{lo:r,hi:i}}const Yl=(t,e,n,i)=>OM(t,n,i?r=>{const s=t[r][e];return s<n||s===n&&t[r+1][e]===n}:r=>t[r][e]<n),uie=(t,e,n)=>OM(t,n,i=>t[i][e]>=n);function die(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const K5=["push","pop","shift","splice","unshift"];function hie(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),K5.forEach(n=>{const i="_onData"+UM(n),r=t[n];Object.defineProperty(t,n,{configurable:!0,enumerable:!1,value(...s){const o=r.apply(this,s);return t._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function YC(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(K5.forEach(s=>{delete t[s]}),delete t._chartjs)}function Z5(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Q5=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function J5(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,Q5.call(window,()=>{i=!1,t.apply(e,n)}))}}function fie(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const jM=t=>t==="start"?"left":t==="end"?"right":"center",Li=(t,e,n)=>t==="start"?e:t==="end"?n:(e+n)/2,pie=(t,e,n,i)=>t===(i?"left":"right")?n:t==="center"?(e+n)/2:e;function mie(t,e,n){const i=e.length;let r=0,s=i;if(t._sorted){const{iScale:o,vScale:a,_parsed:l}=t,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:p,maxDefined:x}=o.getUserBounds();if(p){if(r=Math.min(Yl(l,u,h).lo,n?i:Yl(e,u,o.getPixelForValue(h)).lo),c){const y=l.slice(0,r+1).reverse().findIndex(g=>!Ut(g[a.axis]));r-=Math.max(0,y)}r=br(r,0,i-1)}if(x){let y=Math.max(Yl(l,o.axis,f,!0).hi+1,n?0:Yl(e,u,o.getPixelForValue(f),!0).hi+1);if(c){const g=l.slice(y-1).findIndex(m=>!Ut(m[a.axis]));y+=Math.max(0,g)}s=br(y,r,i)-r}else s=i-r}return{start:r,count:s}}function gie(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),s}const vm=t=>t===0||t===1,XC=(t,e,n)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Vs/n)),qC=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*Vs/n)+1,jh={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*hs)+1,easeOutSine:t=>Math.sin(t*hs),easeInOutSine:t=>-.5*(Math.cos(ci*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>vm(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>vm(t)?t:XC(t,.075,.3),easeOutElastic:t=>vm(t)?t:qC(t,.075,.3),easeInOutElastic(t){return vm(t)?t:t<.5?.5*XC(t*2,.1125,.45):.5+.5*qC(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-jh.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?jh.easeInBounce(t*2)*.5:jh.easeOutBounce(t*2-1)*.5+.5};function FM(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function KC(t){return FM(t)?t:new Af(t)}function Bv(t){return FM(t)?t:new Af(t).saturate(.5).darken(.1).hexString()}const xie=["x","y","borderWidth","radius","tension"],yie=["color","borderColor","backgroundColor"];function vie(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:yie},numbers:{type:"number",properties:xie}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function wie(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ZC=new Map;function _ie(t,e){e=e||{};const n=t+JSON.stringify(e);let i=ZC.get(n);return i||(i=new Intl.NumberFormat(t,e),ZC.set(n,i)),i}function eD(t,e,n){return _ie(e,n).format(t)}const bie={values(t){return Zn(t)?t:""+t},numeric(t,e,n){if(t===0)return"0";const i=this.chart.options.locale;let r,s=t;if(n.length>1){const c=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=Sie(t,n)}const o=X5(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),eD(t,i,l)}};function Sie(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}var tD={formatters:bie};function Mie(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,n)=>n.lineWidth,tickColor:(e,n)=>n.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:tD.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const dc=Object.create(null),X_=Object.create(null);function Fh(t,e){if(!e)return t;const n=e.split(".");for(let i=0,r=n.length;i<r;++i){const s=n[i];t=t[s]||(t[s]=Object.create(null))}return t}function Uv(t,e,n){return typeof e=="string"?Cf(Fh(t,e),n):Cf(Fh(t,""),e)}class Eie{constructor(e,n){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Bv(r.backgroundColor),this.hoverBorderColor=(i,r)=>Bv(r.borderColor),this.hoverColor=(i,r)=>Bv(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(n)}set(e,n){return Uv(this,e,n)}get(e){return Fh(this,e)}describe(e,n){return Uv(X_,e,n)}override(e,n){return Uv(dc,e,n)}route(e,n,i,r){const s=Fh(this,e),o=Fh(this,i),a="_"+n;Object.defineProperties(s,{[a]:{value:s[n],writable:!0},[n]:{enumerable:!0,get(){const l=this[a],c=o[r];return Pt(l)?Object.assign({},c,l):Et(l,c)},set(l){this[a]=l}}})}apply(e){e.forEach(n=>n(this))}}var jn=new Eie({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[vie,wie,Mie]);function Tie(t){return!t||Ut(t.size)||Ut(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function QC(t,e,n,i,r){let s=e[r];return s||(s=e[r]=t.measureText(r).width,n.push(r)),s>i&&(i=s),i}function hl(t,e,n){const i=t.currentDevicePixelRatio,r=n!==0?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function JC(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function q_(t,e,n,i){nD(t,e,n,i,null)}function nD(t,e,n,i,r){let s,o,a,l,c,u,h,f;const p=e.pointStyle,x=e.rotation,y=e.radius;let g=(x||0)*tie;if(p&&typeof p=="object"&&(s=p.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){t.save(),t.translate(n,i),t.rotate(g),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,i,r/2,y,0,0,Vs):t.arc(n,i,y,0,Vs),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(n+Math.sin(g)*u,i-Math.cos(g)*y),g+=HC,t.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*y),g+=HC,t.lineTo(n+Math.sin(g)*u,i-Math.cos(g)*y),t.closePath();break;case"rectRounded":c=y*.516,l=y-c,o=Math.cos(g+dl)*l,h=Math.cos(g+dl)*(r?r/2-c:l),a=Math.sin(g+dl)*l,f=Math.sin(g+dl)*(r?r/2-c:l),t.arc(n-h,i-a,c,g-ci,g-hs),t.arc(n+f,i-o,c,g-hs,g),t.arc(n+h,i+a,c,g,g+hs),t.arc(n-f,i+o,c,g+hs,g+ci),t.closePath();break;case"rect":if(!x){l=Math.SQRT1_2*y,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}g+=dl;case"rectRot":h=Math.cos(g)*(r?r/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+f,i-o),t.lineTo(n+h,i+a),t.lineTo(n-f,i+o),t.closePath();break;case"crossRot":g+=dl;case"cross":h=Math.cos(g)*(r?r/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"star":h=Math.cos(g)*(r?r/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o),g+=dl,h=Math.cos(g)*(r?r/2:y),o=Math.cos(g)*y,a=Math.sin(g)*y,f=Math.sin(g)*(r?r/2:y),t.moveTo(n-h,i-a),t.lineTo(n+h,i+a),t.moveTo(n+f,i-o),t.lineTo(n-f,i+o);break;case"line":o=r?r/2:Math.cos(g)*y,a=Math.sin(g)*y,t.moveTo(n-o,i-a),t.lineTo(n+o,i+a);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(g)*(r?r/2:y),i+Math.sin(g)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Lf(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function zM(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function VM(t){t.restore()}function Aie(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if(r==="middle"){const s=(e.x+n.x)/2;t.lineTo(s,e.y),t.lineTo(s,n.y)}else r==="after"!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function Cie(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Nie(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),Ut(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function Rie(t,e,n,i,r){if(r.strikethrough||r.underline){const s=t.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(a,u),t.stroke()}}function Lie(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function If(t,e,n,i,r,s={}){const o=Zn(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="";let l,c;for(t.save(),t.font=r.string,Nie(t,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&Lie(t,s.backdrop),a&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),Ut(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(c,n,i,s.maxWidth)),t.fillText(c,n,i,s.maxWidth),Rie(t,n,i,c,s),i+=Number(r.lineHeight);t.restore()}function Rg(t,e){const{x:n,y:i,w:r,h:s,radius:o}=e;t.arc(n+o.topLeft,i+o.topLeft,o.topLeft,1.5*ci,ci,!0),t.lineTo(n,i+s-o.bottomLeft),t.arc(n+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ci,hs,!0),t.lineTo(n+r-o.bottomRight,i+s),t.arc(n+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,hs,0,!0),t.lineTo(n+r,i+o.topRight),t.arc(n+r-o.topRight,i+o.topRight,o.topRight,0,-hs,!0),t.lineTo(n+o.topLeft,i)}const Iie=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,kie=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function Pie(t,e){const n=(""+t).match(Iie);if(!n||n[1]==="normal")return e*1.2;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100;break}return e*t}const Die=t=>+t||0;function iD(t,e){const n={},i=Pt(e),r=i?Object.keys(e):e,s=Pt(t)?i?o=>Et(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)n[o]=Die(s(o));return n}function rD(t){return iD(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Bu(t){return iD(t,["topLeft","topRight","bottomLeft","bottomRight"])}function Qr(t){const e=rD(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Di(t,e){t=t||{},e=e||jn.font;let n=Et(t.size,e.size);typeof n=="string"&&(n=parseInt(n,10));let i=Et(t.style,e.style);i&&!(""+i).match(kie)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:Et(t.family,e.family),lineHeight:Pie(Et(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:Et(t.weight,e.weight),string:""};return r.string=Tie(r),r}function wm(t,e,n,i){let r,s,o;for(r=0,s=t.length;r<s;++r)if(o=t[r],o!==void 0&&o!==void 0)return o}function Bie(t,e,n){const{min:i,max:r}=t,s=Xne(e,(r-i)/2),o=(a,l)=>n&&a===0?0:a+l;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Sc(t,e){return Object.assign(Object.create(t),e)}function WM(t,e=[""],n,i,r=()=>t[0]){const s=n||t;typeof i>"u"&&(i=lD("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>WM([a,...t],e,s,i)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete t[0][l],!0},get(a,l){return oD(a,l,()=>Hie(l,e,t,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(a,l){return t3(a).includes(l)},ownKeys(a){return t3(a)},set(a,l,c){const u=a._storage||(a._storage=r());return a[l]=u[l]=c,delete a._keys,!0}})}function cd(t,e,n,i){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:sD(t,i),setContext:s=>cd(t,s,n,i),override:s=>cd(t.override(s),e,n,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete t[o],!0},get(s,o,a){return oD(s,o,()=>Oie(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(s,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(s,o,a){return t[o]=a,delete s[o],!0}})}function sD(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:Ga(n)?n:()=>n,isIndexable:Ga(i)?i:()=>i}}const Uie=(t,e)=>t?t+UM(e):e,HM=(t,e)=>Pt(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function oD(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const i=n();return t[e]=i,i}function Oie(t,e,n){const{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=t;let a=i[e];return Ga(a)&&o.isScriptable(e)&&(a=jie(e,a,t,n)),Zn(a)&&a.length&&(a=Fie(e,a,t,o.isIndexable)),HM(e,a)&&(a=cd(a,r,s&&s[e],o)),a}function jie(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_stack:a}=n;if(a.has(t))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+t);a.add(t);let l=e(s,o||i);return a.delete(t),HM(t,l)&&(l=GM(r._scopes,r,t,l)),l}function Fie(t,e,n,i){const{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=n;if(typeof s.index<"u"&&i(t))return e[s.index%e.length];if(Pt(e[0])){const l=e,c=r._scopes.filter(u=>u!==l);e=[];for(const u of l){const h=GM(c,r,t,u);e.push(cd(h,s,o&&o[t],a))}}return e}function aD(t,e,n){return Ga(t)?t(e,n):t}const zie=(t,e)=>t===!0?e:typeof t=="string"?ld(e,t):void 0;function Vie(t,e,n,i,r){for(const s of e){const o=zie(n,s);if(o){t.add(o);const a=aD(o._fallback,n,r);if(typeof a<"u"&&a!==n&&a!==i)return a}else if(o===!1&&typeof i<"u"&&n!==i)return null}return!1}function GM(t,e,n,i){const r=e._rootScopes,s=aD(e._fallback,n,i),o=[...t,...r],a=new Set;a.add(i);let l=e3(a,o,n,s||n,i);return l===null||typeof s<"u"&&s!==n&&(l=e3(a,o,s,l,i),l===null)?!1:WM(Array.from(a),[""],r,s,()=>Wie(e,n,i))}function e3(t,e,n,i,r){for(;n;)n=Vie(t,e,n,i,r);return n}function Wie(t,e,n){const i=t._getTarget();e in i||(i[e]={});const r=i[e];return Zn(r)&&Pt(n)?n:r||{}}function Hie(t,e,n,i){let r;for(const s of e)if(r=lD(Uie(s,t),n),typeof r<"u")return HM(t,r)?GM(n,i,t,r):r}function lD(t,e){for(const n of e){if(!n)continue;const i=n[t];if(typeof i<"u")return i}}function t3(t){let e=t._keys;return e||(e=t._keys=Gie(t._scopes)),e}function Gie(t){const e=new Set;for(const n of t)for(const i of Object.keys(n).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}const $ie=Number.EPSILON||1e-14,ud=(t,e)=>e<t.length&&!t[e].skip&&t[e],cD=t=>t==="x"?"y":"x";function Yie(t,e,n,i){const r=t.skip?e:t,s=e,o=n.skip?e:n,a=Y_(s,r),l=Y_(o,s);let c=a/(a+l),u=l/(a+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,f=i*u;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+f*(o.x-r.x),y:s.y+f*(o.y-r.y)}}}function Xie(t,e,n){const i=t.length;let r,s,o,a,l,c=ud(t,0);for(let u=0;u<i-1;++u)if(l=c,c=ud(t,u+1),!(!l||!c)){if(Oh(e[u],0,$ie)){n[u]=n[u+1]=0;continue}r=n[u]/e[u],s=n[u+1]/e[u],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),n[u]=r*o*e[u],n[u+1]=s*o*e[u])}}function qie(t,e,n="x"){const i=cD(n),r=t.length;let s,o,a,l=ud(t,0);for(let c=0;c<r;++c){if(o=a,a=l,l=ud(t,c+1),!a)continue;const u=a[n],h=a[i];o&&(s=(u-o[n])/3,a[`cp1${n}`]=u-s,a[`cp1${i}`]=h-s*e[c]),l&&(s=(l[n]-u)/3,a[`cp2${n}`]=u+s,a[`cp2${i}`]=h+s*e[c])}}function Kie(t,e="x"){const n=cD(e),i=t.length,r=Array(i).fill(0),s=Array(i);let o,a,l,c=ud(t,0);for(o=0;o<i;++o)if(a=l,l=c,c=ud(t,o+1),!!l){if(c){const u=c[e]-l[e];r[o]=u!==0?(c[n]-l[n])/u:0}s[o]=a?c?Ws(r[o-1])!==Ws(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Xie(t,r,s),qie(t,s,e)}function _m(t,e,n){return Math.max(Math.min(t,n),e)}function Zie(t,e){let n,i,r,s,o,a=Lf(t[0],e);for(n=0,i=t.length;n<i;++n)o=s,s=a,a=n<i-1&&Lf(t[n+1],e),s&&(r=t[n],o&&(r.cp1x=_m(r.cp1x,e.left,e.right),r.cp1y=_m(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=_m(r.cp2x,e.left,e.right),r.cp2y=_m(r.cp2y,e.top,e.bottom)))}function Qie(t,e,n,i,r){let s,o,a,l;if(e.spanGaps&&(t=t.filter(c=>!c.skip)),e.cubicInterpolationMode==="monotone")Kie(t,r);else{let c=i?t[t.length-1]:t[0];for(s=0,o=t.length;s<o;++s)a=t[s],l=Yie(c,a,t[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}e.capBezierPoints&&Zie(t,n)}function $M(){return typeof window<"u"&&typeof document<"u"}function YM(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Lg(t,e,n){let i;return typeof t=="string"?(i=parseInt(t,10),t.indexOf("%")!==-1&&(i=i/100*e.parentNode[n])):i=t,i}const Lx=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function Jie(t,e){return Lx(t).getPropertyValue(e)}const ere=["top","right","bottom","left"];function nc(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const s=ere[r];i[s]=parseFloat(t[e+"-"+s+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}const tre=(t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot);function nre(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:s}=i;let o=!1,a,l;if(tre(r,s,t.target))a=r,l=s;else{const c=e.getBoundingClientRect();a=i.clientX-c.left,l=i.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Sl(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=Lx(n),s=r.boxSizing==="border-box",o=nc(r,"padding"),a=nc(r,"border","width"),{x:l,y:c,box:u}=nre(t,n),h=o.left+(u&&a.left),f=o.top+(u&&a.top);let{width:p,height:x}=e;return s&&(p-=o.width+a.width,x-=o.height+a.height),{x:Math.round((l-h)/p*n.width/i),y:Math.round((c-f)/x*n.height/i)}}function ire(t,e,n){let i,r;if(e===void 0||n===void 0){const s=t&&YM(t);if(!s)e=t.clientWidth,n=t.clientHeight;else{const o=s.getBoundingClientRect(),a=Lx(s),l=nc(a,"border","width"),c=nc(a,"padding");e=o.width-c.width-l.width,n=o.height-c.height-l.height,i=Lg(a.maxWidth,s,"clientWidth"),r=Lg(a.maxHeight,s,"clientHeight")}}return{width:e,height:n,maxWidth:i||Ng,maxHeight:r||Ng}}const ba=t=>Math.round(t*10)/10;function rre(t,e,n,i){const r=Lx(t),s=nc(r,"margin"),o=Lg(r.maxWidth,t,"clientWidth")||Ng,a=Lg(r.maxHeight,t,"clientHeight")||Ng,l=ire(t,e,n);let{width:c,height:u}=l;if(r.boxSizing==="content-box"){const f=nc(r,"border","width"),p=nc(r,"padding");c-=p.width+f.width,u-=p.height+f.height}return c=Math.max(0,c-s.width),u=Math.max(0,i?c/i:u-s.height),c=ba(Math.min(c,o,l.maxWidth)),u=ba(Math.min(u,a,l.maxHeight)),c&&!u&&(u=ba(c/2)),(e!==void 0||n!==void 0)&&i&&l.height&&u>l.height&&(u=l.height,c=ba(Math.floor(u*i))),{width:c,height:u}}function n3(t,e,n){const i=e||1,r=ba(t.height*i),s=ba(t.width*i);t.height=ba(t.height),t.width=ba(t.width);const o=t.canvas;return o.style&&(n||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(t.currentDevicePixelRatio=i,o.height=r,o.width=s,t.ctx.setTransform(i,0,0,i,0,0),!0):!1}const sre=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};$M()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function i3(t,e){const n=Jie(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Ml(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function ore(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:i==="middle"?n<.5?t.y:e.y:i==="after"?n<1?t.y:e.y:n>0?e.y:t.y}}function are(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},s={x:e.cp1x,y:e.cp1y},o=Ml(t,r,n),a=Ml(r,s,n),l=Ml(s,e,n),c=Ml(o,a,n),u=Ml(a,l,n);return Ml(c,u,n)}const lre=function(t,e){return{x(n){return t+t+e-n},setWidth(n){e=n},textAlign(n){return n==="center"?n:n==="right"?"left":"right"},xPlus(n,i){return n-i},leftForLtr(n,i){return n-i}}},cre=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Uu(t,e,n){return t?lre(e,n):cre()}function uD(t,e){let n,i;(e==="ltr"||e==="rtl")&&(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function dD(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function hD(t){return t==="angle"?{between:q5,compare:lie,normalize:sa}:{between:$l,compare:(e,n)=>e-n,normalize:e=>e}}function r3({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n===0,style:r}}function ure(t,e,n){const{property:i,start:r,end:s}=n,{between:o,normalize:a}=hD(i),l=e.length;let{start:c,end:u,loop:h}=t,f,p;if(h){for(c+=l,u+=l,f=0,p=l;f<p&&o(a(e[c%l][i]),r,s);++f)c--,u--;c%=l,u%=l}return u<c&&(u+=l),{start:c,end:u,loop:h,style:t.style}}function dre(t,e,n){if(!n)return[t];const{property:i,start:r,end:s}=n,o=e.length,{compare:a,between:l,normalize:c}=hD(i),{start:u,end:h,loop:f,style:p}=ure(t,e,n),x=[];let y=!1,g=null,m,_,w;const S=()=>l(r,w,m)&&a(r,w)!==0,N=()=>a(s,m)===0||l(s,w,m),k=()=>y||S(),R=()=>!y||N();for(let B=u,L=u;B<=h;++B)_=e[B%o],!_.skip&&(m=c(_[i]),m!==w&&(y=l(m,r,s),g===null&&k()&&(g=a(m,r)===0?B:L),g!==null&&R()&&(x.push(r3({start:g,end:B,loop:f,count:o,style:p})),g=null),L=B,w=m));return g!==null&&x.push(r3({start:g,end:h,loop:f,count:o,style:p})),x}function hre(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const s=dre(i[r],t.points,e);s.length&&n.push(...s)}return n}function fre(t,e,n,i){let r=0,s=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(s+=r);s>r&&t[s%e].skip;)s--;return s%=e,{start:r,end:s}}function pre(t,e,n,i){const r=t.length,s=[];let o=e,a=t[e],l;for(l=e+1;l<=n;++l){const c=t[l%r];c.skip||c.stop?a.skip||(i=!1,s.push({start:e%r,end:(l-1)%r,loop:i}),e=o=c.stop?l:null):(o=l,a.skip&&(e=l)),a=c}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function mre(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const s=!!t._loop,{start:o,end:a}=fre(n,r,s,i);if(i===!0)return s3(t,[{start:o,end:a,loop:s}],n,e);const l=a<o?a+r:a,c=!!t._fullLoop&&o===0&&a===r-1;return s3(t,pre(n,o,l,c),n,e)}function s3(t,e,n,i){return!i||!i.setContext||!n?e:gre(t,e,n,i)}function gre(t,e,n,i){const r=t._chart.getContext(),s=o3(t.options),{_datasetIndex:o,options:{spanGaps:a}}=t,l=n.length,c=[];let u=s,h=e[0].start,f=h;function p(x,y,g,m){const _=a?-1:1;if(x!==y){for(x+=l;n[x%l].skip;)x-=_;for(;n[y%l].skip;)y+=_;x%l!==y%l&&(c.push({start:x%l,end:y%l,loop:g,style:m}),u=m,h=y%l)}}for(const x of e){h=a?h:x.start;let y=n[h%l],g;for(f=h+1;f<=x.end;f++){const m=n[f%l];g=o3(i.setContext(Sc(r,{type:"segment",p0:y,p1:m,p0DataIndex:(f-1)%l,p1DataIndex:f%l,datasetIndex:o}))),xre(g,u)&&p(h,f-1,x.loop,u),y=m,u=g}h<f-1&&p(h,f-1,x.loop,u)}return c}function o3(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function xre(t,e){if(!e)return!1;const n=[],i=function(r,s){return FM(s)?(n.includes(s)||n.push(s),n.indexOf(s)):s};return JSON.stringify(t,i)!==JSON.stringify(e,i)}function bm(t,e,n){return t.options.clip?t[n]:e[n]}function yre(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:bm(n,e,"left"),right:bm(n,e,"right"),top:bm(i,e,"top"),bottom:bm(i,e,"bottom")}:e}function vre(t,e){const n=e._clip;if(n.disabled)return!1;const i=yre(e,t.chartArea);return{left:n.left===!1?0:i.left-(n.left===!0?0:n.left),right:n.right===!1?t.width:i.right+(n.right===!0?0:n.right),top:n.top===!1?0:i.top-(n.top===!0?0:n.top),bottom:n.bottom===!1?t.height:i.bottom+(n.bottom===!0?0:n.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class wre{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,n,i,r){const s=n.listeners[r],o=n.duration;s.forEach(a=>a({chart:e,initial:n.initial,numSteps:o,currentStep:Math.min(i-n.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Q5.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let n=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;const s=i.items;let o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>i.duration&&(i.duration=l._total),l.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),n+=s.length}),this._lastDate=e,n===0&&(this._running=!1)}_getAnims(e){const n=this._charts;let i=n.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},n.set(e,i)),i}listen(e,n,i){this._getAnims(e).listeners[n].push(i)}add(e,n){!n||!n.length||this._getAnims(e).items.push(...n)}has(e){return this._getAnims(e).items.length>0}start(e){const n=this._charts.get(e);n&&(n.running=!0,n.start=Date.now(),n.duration=n.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const n=this._charts.get(e);return!(!n||!n.running||!n.items.length)}stop(e){const n=this._charts.get(e);if(!n||!n.items.length)return;const i=n.items;let r=i.length-1;for(;r>=0;--r)i[r].cancel();n.items=[],this._notify(e,n,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var oo=new wre;const a3="transparent",_re={boolean(t,e,n){return n>.5?e:t},color(t,e,n){const i=KC(t||a3),r=i.valid&&KC(e||a3);return r&&r.valid?r.mix(i,n).hexString():e},number(t,e,n){return t+(e-t)*n}};class bre{constructor(e,n,i,r){const s=n[i];r=wm([e.to,r,s,e.from]);const o=wm([e.from,s,r]);this._active=!0,this._fn=e.fn||_re[e.type||typeof o],this._easing=jh[e.easing]||jh.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=n,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,n,i){if(this._active){this._notify(!1);const r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=wm([e.to,n,r,e.from]),this._from=wm([e.from,r,n])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const n=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to;let l;if(this._active=s!==a&&(o||n<i),!this._active){this._target[r]=a,this._notify(!0);return}if(n<0){this._target[r]=s;return}l=n/i%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){const e=this._promises||(this._promises=[]);return new Promise((n,i)=>{e.push({res:n,rej:i})})}_notify(e){const n=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][n]()}}class fD{constructor(e,n){this._chart=e,this._properties=new Map,this.configure(n)}configure(e){if(!Pt(e))return;const n=Object.keys(jn.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const s=e[r];if(!Pt(s))return;const o={};for(const a of n)o[a]=s[a];(Zn(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,n){const i=n.options,r=Mre(e,i);if(!r)return[];const s=this._createAnimations(r,i);return i.$shared&&Sre(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,n){const i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(n),a=Date.now();let l;for(l=o.length-1;l>=0;--l){const c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(e,n));continue}const u=n[c];let h=s[c];const f=i.get(c);if(h)if(f&&h.active()){h.update(f,u,a);continue}else h.cancel();if(!f||!f.duration){e[c]=u;continue}s[c]=h=new bre(f,e,c,u),r.push(h)}return r}update(e,n){if(this._properties.size===0){Object.assign(e,n);return}const i=this._createAnimations(e,n);if(i.length)return oo.add(this._chart,i),!0}}function Sre(t,e){const n=[],i=Object.keys(e);for(let r=0;r<i.length;r++){const s=t[i[r]];s&&s.active()&&n.push(s.wait())}return Promise.all(n)}function Mre(t,e){if(!e)return;let n=t.options;if(!n){t.options=e;return}return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n}function l3(t,e){const n=t&&t.options||{},i=n.reverse,r=n.min===void 0?e:0,s=n.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function Ere(t,e,n){if(n===!1)return!1;const i=l3(t,n),r=l3(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Tre(t){let e,n,i,r;return Pt(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:t===!1}}function pD(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,s;for(r=0,s=i.length;r<s;++r)n.push(i[r].index);return n}function c3(t,e,n,i={}){const r=t.keys,s=i.mode==="single";let o,a,l,c;if(e===null)return;let u=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===n){if(u=!0,i.all)continue;break}c=t.values[l],Zr(c)&&(s||e===0||Ws(e)===Ws(c))&&(e+=c)}return!u&&!i.all?0:e}function Are(t,e){const{iScale:n,vScale:i}=e,r=n.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(t),a=new Array(o.length);let l,c,u;for(l=0,c=o.length;l<c;++l)u=o[l],a[l]={[r]:u,[s]:t[u]};return a}function Ov(t,e){const n=t&&t.options.stacked;return n||n===void 0&&e.stack!==void 0}function Cre(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}function Nre(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}function Rre(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function u3(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const s=t[r.index];if(n&&s>0||!n&&s<0)return r.index}return null}function d3(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:s,vScale:o,index:a}=i,l=s.axis,c=o.axis,u=Cre(s,o,i),h=e.length;let f;for(let p=0;p<h;++p){const x=e[p],{[l]:y,[c]:g}=x,m=x._stacks||(x._stacks={});f=m[c]=Rre(r,u,y),f[a]=g,f._top=u3(f,o,!0,i.type),f._bottom=u3(f,o,!1,i.type);const _=f._visualValues||(f._visualValues={});_[a]=g}}function jv(t,e){const n=t.scales;return Object.keys(n).filter(i=>n[i].axis===e).shift()}function Lre(t,e){return Sc(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function Ire(t,e,n){return Sc(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}function Kd(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const r of e){const s=r._stacks;if(!s||s[i]===void 0||s[i][n]===void 0)return;delete s[i][n],s[i]._visualValues!==void 0&&s[i]._visualValues[n]!==void 0&&delete s[i]._visualValues[n]}}}const Fv=t=>t==="reset"||t==="none",h3=(t,e)=>e?t:Object.assign({},t),kre=(t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:pD(n,!0),values:null};class Ou{constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Ov(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Kd(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,n=this._cachedMeta,i=this.getDataset(),r=(h,f,p,x)=>h==="x"?f:h==="r"?x:p,s=n.xAxisID=Et(i.xAxisID,jv(e,"x")),o=n.yAxisID=Et(i.yAxisID,jv(e,"y")),a=n.rAxisID=Et(i.rAxisID,jv(e,"r")),l=n.indexAxis,c=n.iAxisID=r(l,s,o,a),u=n.vAxisID=r(l,o,s,a);n.xScale=this.getScaleForId(s),n.yScale=this.getScaleForId(o),n.rScale=this.getScaleForId(a),n.iScale=this.getScaleForId(c),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&YC(this._data,this),e._stacked&&Kd(e)}_dataCheck(){const e=this.getDataset(),n=e.data||(e.data=[]),i=this._data;if(Pt(n)){const r=this._cachedMeta;this._data=Are(n,r)}else if(i!==n){if(i){YC(i,this);const r=this._cachedMeta;Kd(r),r._parsed=[]}n&&Object.isExtensible(n)&&hie(n,this),this._syncList=[],this._data=n}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const n=this._cachedMeta,i=this.getDataset();let r=!1;this._dataCheck();const s=n._stacked;n._stacked=Ov(n.vScale,n),n.stack!==i.stack&&(r=!0,Kd(n),n.stack=i.stack),this._resyncElements(e),(r||s!==n._stacked)&&(d3(this,n._parsed),n._stacked=Ov(n.vScale,n))}configure(){const e=this.chart.config,n=e.datasetScopeKeys(this._type),i=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){const{_cachedMeta:i,_data:r}=this,{iScale:s,_stacked:o}=i,a=s.axis;let l=e===0&&n===r.length?!0:i._sorted,c=e>0&&i._parsed[e-1],u,h,f;if(this._parsing===!1)i._parsed=r,i._sorted=!0,f=r;else{Zn(r[e])?f=this.parseArrayData(i,r,e,n):Pt(r[e])?f=this.parseObjectData(i,r,e,n):f=this.parsePrimitiveData(i,r,e,n);const p=()=>h[a]===null||c&&h[a]<c[a];for(u=0;u<n;++u)i._parsed[u+e]=h=f[u],l&&(p()&&(l=!1),c=h);i._sorted=l}o&&d3(this,f)}parsePrimitiveData(e,n,i,r){const{iScale:s,vScale:o}=e,a=s.axis,l=o.axis,c=s.getLabels(),u=s===o,h=new Array(r);let f,p,x;for(f=0,p=r;f<p;++f)x=f+i,h[f]={[a]:u||s.parse(c[x],x),[l]:o.parse(n[x],x)};return h}parseArrayData(e,n,i,r){const{xScale:s,yScale:o}=e,a=new Array(r);let l,c,u,h;for(l=0,c=r;l<c;++l)u=l+i,h=n[u],a[l]={x:s.parse(h[0],u),y:o.parse(h[1],u)};return a}parseObjectData(e,n,i,r){const{xScale:s,yScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=new Array(r);let u,h,f,p;for(u=0,h=r;u<h;++u)f=u+i,p=n[f],c[u]={x:s.parse(ld(p,a),f),y:o.parse(ld(p,l),f)};return c}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,i){const r=this.chart,s=this._cachedMeta,o=n[e.axis],a={keys:pD(r,!0),values:n._stacks[e.axis]._visualValues};return c3(a,o,s.index,{mode:i})}updateRangeFromParsed(e,n,i,r){const s=i[n.axis];let o=s===null?NaN:s;const a=r&&i._stacks[n.axis];r&&a&&(r.values=a,o=c3(r,s,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,n){const i=this._cachedMeta,r=i._parsed,s=i._sorted&&e===i.iScale,o=r.length,a=this._getOtherScale(e),l=kre(n,i,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Nre(a);let f,p;function x(){p=r[f];const y=p[a.axis];return!Zr(p[e.axis])||u>y||h<y}for(f=0;f<o&&!(!x()&&(this.updateRangeFromParsed(c,e,p,l),s));++f);if(s){for(f=o-1;f>=0;--f)if(!x()){this.updateRangeFromParsed(c,e,p,l);break}}return c}getAllParsedValues(e){const n=this._cachedMeta._parsed,i=[];let r,s,o;for(r=0,s=n.length;r<s;++r)o=n[r][e.axis],Zr(o)&&i.push(o);return i}getMaxOverflow(){return!1}getLabelAndValue(e){const n=this._cachedMeta,i=n.iScale,r=n.vScale,s=this.getParsed(e);return{label:i?""+i.getLabelForValue(s[i.axis]):"",value:r?""+r.getLabelForValue(s[r.axis]):""}}_update(e){const n=this._cachedMeta;this.update(e||"default"),n._clip=Tre(Et(this.options.clip,Ere(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,n=this.chart,i=this._cachedMeta,r=i.data||[],s=n.chartArea,o=[],a=this._drawStart||0,l=this._drawCount||r.length-a,c=this.options.drawActiveElementsOnTop;let u;for(i.dataset&&i.dataset.draw(e,s,a,l),u=a;u<a+l;++u){const h=r[u];h.hidden||(h.active&&c?o.push(h):h.draw(e,s))}for(u=0;u<o.length;++u)o[u].draw(e,s)}getStyle(e,n){const i=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(e||0,i)}getContext(e,n,i){const r=this.getDataset();let s;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];s=o.$context||(o.$context=Ire(this.getContext(),e,o)),s.parsed=this.getParsed(e),s.raw=r.data[e],s.index=s.dataIndex=e}else s=this.$context||(this.$context=Lre(this.chart.getContext(),this.index)),s.dataset=r,s.index=s.datasetIndex=this.index;return s.active=!!n,s.mode=i,s}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",i){const r=n==="active",s=this._cachedDataOpts,o=e+"-"+n,a=s[o],l=this.enableOptionSharing&&Nf(i);if(a)return h3(a,l);const c=this.chart.config,u=c.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=c.getOptionScopes(this.getDataset(),u),p=Object.keys(jn.elements[e]),x=()=>this.getContext(i,r,n),y=c.resolveNamedOptions(f,p,x,h);return y.$shared&&(y.$shared=l,s[o]=Object.freeze(h3(y,l))),y}_resolveAnimations(e,n,i){const r=this.chart,s=this._cachedDataOpts,o=`animation-${n}`,a=s[o];if(a)return a;let l;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),f=u.getOptionScopes(this.getDataset(),h);l=u.createResolver(f,this.getContext(e,i,n))}const c=new fD(r,l&&l.animations);return l&&l._cacheable&&(s[o]=Object.freeze(c)),c}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||Fv(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){const i=this.resolveDataElementOptions(e,n),r=this._sharedOptions,s=this.getSharedOptions(i),o=this.includeOptions(n,s)||s!==r;return this.updateSharedOptions(s,n,i),{sharedOptions:s,includeOptions:o}}updateElement(e,n,i,r){Fv(r)?Object.assign(e,i):this._resolveAnimations(n,r).update(e,i)}updateSharedOptions(e,n,i){e&&!Fv(n)&&this._resolveAnimations(void 0,n).update(e,i)}_setStyle(e,n,i,r){e.active=r;const s=this.getStyle(n,r);this._resolveAnimations(n,i,r).update(e,{options:!r&&this.getSharedOptions(s)||s})}removeHoverStyle(e,n,i){this._setStyle(e,i,"active",!1)}setHoverStyle(e,n,i){this._setStyle(e,i,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const n=this._data,i=this._cachedMeta.data;for(const[a,l,c]of this._syncList)this[a](l,c);this._syncList=[];const r=i.length,s=n.length,o=Math.min(s,r);o&&this.parse(0,o),s>r?this._insertElements(r,s-r,e):s<r&&this._removeElements(s,r-s)}_insertElements(e,n,i=!0){const r=this._cachedMeta,s=r.data,o=e+n;let a;const l=c=>{for(c.length+=n,a=c.length-1;a>=o;a--)c[a]=c[a-n]};for(l(s),a=e;a<o;++a)s[a]=new this.dataElementType;this._parsing&&l(r._parsed),this.parse(e,n),i&&this.updateElements(s,e,n,"reset")}updateElements(e,n,i,r){}_removeElements(e,n){const i=this._cachedMeta;if(this._parsing){const r=i._parsed.splice(e,n);i._stacked&&Kd(i,r)}i.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[n,i,r]=e;this[n](i,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);const i=arguments.length-2;i&&this._sync(["_insertElements",e,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Oe(Ou,"defaults",{}),Oe(Ou,"datasetElementType",null),Oe(Ou,"dataElementType",null);function Pre(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let r=0,s=n.length;r<s;r++)i=i.concat(n[r].controller.getAllParsedValues(t));t._cache.$bar=Z5(i.sort((r,s)=>r-s))}return t._cache.$bar}function Dre(t){const e=t.iScale,n=Pre(e,t.type);let i=e._length,r,s,o,a;const l=()=>{o===32767||o===-32768||(Nf(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=n.length;r<s;++r)o=e.getPixelForValue(n[r]),l();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),l();return i}function Bre(t,e,n,i){const r=n.barThickness;let s,o;return Ut(r)?(s=e.min*n.categoryPercentage,o=n.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[t]-s/2}}function Ure(t,e,n,i){const r=e.pixels,s=r[t];let o=t>0?r[t-1]:null,a=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);const c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/i,ratio:n.barPercentage,start:c}}function Ore(t,e,n,i){const r=n.parse(t[0],i),s=n.parse(t[1],i),o=Math.min(r,s),a=Math.max(r,s);let l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function mD(t,e,n,i){return Zn(t)?Ore(t,e,n,i):e[n.axis]=n.parse(t,i),e}function f3(t,e,n,i){const r=t.iScale,s=t.vScale,o=r.getLabels(),a=r===s,l=[];let c,u,h,f;for(c=n,u=n+i;c<u;++c)f=e[c],h={},h[r.axis]=a||r.parse(o[c],c),l.push(mD(f,h,s,c));return l}function zv(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function jre(t,e,n){return t!==0?Ws(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}function Fre(t){let e,n,i,r,s;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:n,end:i,reverse:e,top:r,bottom:s}}function zre(t,e,n,i){let r=e.borderSkipped;const s={};if(!r){t.borderSkipped=s;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:a,reverse:l,top:c,bottom:u}=Fre(t);r==="middle"&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(s[p3(u,o,a,l)]=!0,r=c)),s[p3(r,o,a,l)]=!0,t.borderSkipped=s}function p3(t,e,n,i){return i?(t=Vre(t,e,n),t=m3(t,n,e)):t=m3(t,e,n),t}function Vre(t,e,n){return t===e?n:t===n?e:t}function m3(t,e,n){return t==="start"?e:t==="end"?n:t}function Wre(t,{inflateAmount:e},n){t.inflateAmount=e==="auto"?n===1?.33:0:e}class y0 extends Ou{parsePrimitiveData(e,n,i,r){return f3(e,n,i,r)}parseArrayData(e,n,i,r){return f3(e,n,i,r)}parseObjectData(e,n,i,r){const{iScale:s,vScale:o}=e,{xAxisKey:a="x",yAxisKey:l="y"}=this._parsing,c=s.axis==="x"?a:l,u=o.axis==="x"?a:l,h=[];let f,p,x,y;for(f=i,p=i+r;f<p;++f)y=n[f],x={},x[s.axis]=s.parse(ld(y,c),f),h.push(mD(ld(y,u),x,o,f));return h}updateRangeFromParsed(e,n,i,r){super.updateRangeFromParsed(e,n,i,r);const s=i._custom;s&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,s.min),e.max=Math.max(e.max,s.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const n=this._cachedMeta,{iScale:i,vScale:r}=n,s=this.getParsed(e),o=s._custom,a=zv(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(s[r.axis]);return{label:""+i.getLabelForValue(s[i.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,i,r){const s=r==="reset",{index:o,_cachedMeta:{vScale:a}}=this,l=a.getBasePixel(),c=a.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(n,r);for(let p=n;p<n+i;p++){const x=this.getParsed(p),y=s||Ut(x[a.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),g=this._calculateBarIndexPixels(p,u),m=(x._stacks||{})[a.axis],_={horizontal:c,base:y.base,enableBorderRadius:!m||zv(x._custom)||o===m._top||o===m._bottom,x:c?y.head:g.center,y:c?g.center:y.head,height:c?g.size:Math.abs(y.size),width:c?Math.abs(y.size):g.size};f&&(_.options=h||this.resolveDataElementOptions(p,e[p].active?"active":r));const w=_.options||e[p].options;zre(_,w,m,o),Wre(_,w,u.ratio),this.updateElement(e[p],p,_,r)}}_getStacks(e,n){const{iScale:i}=this._cachedMeta,r=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),s=i.options.stacked,o=[],a=this._cachedMeta.controller.getParsed(n),l=a&&a[i.axis],c=u=>{const h=u._parsed.find(p=>p[i.axis]===l),f=h&&h[u.vScale.axis];if(Ut(f)||isNaN(f))return!0};for(const u of r)if(!(n!==void 0&&c(u))&&((s===!1||o.indexOf(u.stack)===-1||s===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,n=this.chart.options.indexAxis;return Object.keys(e).filter(i=>e[i].axis===n).shift()}_getAxis(){const e={},n=this.getFirstScaleIdForIndexAxis();for(const i of this.chart.data.datasets)e[Et(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,n)]=!0;return Object.keys(e)}_getStackIndex(e,n,i){const r=this._getStacks(e,i),s=n!==void 0?r.indexOf(n):-1;return s===-1?r.length-1:s}_getRuler(){const e=this.options,n=this._cachedMeta,i=n.iScale,r=[];let s,o;for(s=0,o=n.data.length;s<o;++s)r.push(i.getPixelForValue(this.getParsed(s)[i.axis],s));const a=e.barThickness;return{min:a||Dre(n),pixels:r,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:n,_stacked:i,index:r},options:{base:s,minBarLength:o}}=this,a=s||0,l=this.getParsed(e),c=l._custom,u=zv(c);let h=l[n.axis],f=0,p=i?this.applyStack(n,l,i):h,x,y;p!==h&&(f=p-h,p=h),u&&(h=c.barStart,p=c.barEnd-c.barStart,h!==0&&Ws(h)!==Ws(c.barEnd)&&(f=0),f+=h);const g=!Ut(s)&&!u?s:f;let m=n.getPixelForValue(g);if(this.chart.getDataVisibility(e)?x=n.getPixelForValue(f+p):x=m,y=x-m,Math.abs(y)<o){y=jre(y,n,a)*o,h===a&&(m-=y/2);const _=n.getPixelForDecimal(0),w=n.getPixelForDecimal(1),S=Math.min(_,w),N=Math.max(_,w);m=Math.max(Math.min(m,N),S),x=m+y,i&&!u&&(l._stacks[n.axis]._visualValues[r]=n.getValueForPixel(x)-n.getValueForPixel(m))}if(m===n.getPixelForValue(a)){const _=Ws(y)*n.getLineWidthForValue(a)/2;m+=_,y-=_}return{size:y,base:m,head:x,center:x+y/2}}_calculateBarIndexPixels(e,n){const i=n.scale,r=this.options,s=r.skipNull,o=Et(r.maxBarThickness,1/0);let a,l;const c=this._getAxisCount();if(n.grouped){const u=s?this._getStackCount(e):n.stackCount,h=r.barThickness==="flex"?Ure(e,n,r,u*c):Bre(e,n,r,u*c),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,p=this._getAxis().indexOf(Et(f,this.getFirstScaleIdForIndexAxis())),x=this._getStackIndex(this.index,this._cachedMeta.stack,s?e:void 0)+p;a=h.start+h.chunk*x+h.chunk/2,l=Math.min(o,h.chunk*h.ratio)}else a=i.getPixelForValue(this.getParsed(e)[i.axis],e),l=Math.min(o,n.min*n.ratio);return{base:a-l/2,head:a+l/2,center:a,size:l}}draw(){const e=this._cachedMeta,n=e.vScale,i=e.data,r=i.length;let s=0;for(;s<r;++s)this.getParsed(s)[n.axis]!==null&&!i[s].hidden&&i[s].draw(this._ctx)}}Oe(y0,"id","bar"),Oe(y0,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Oe(y0,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class v0 extends Ou{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const n=this._cachedMeta,{dataset:i,data:r=[],_dataset:s}=n,o=this.chart._animationsDisabled;let{start:a,count:l}=mie(n,r,o);this._drawStart=a,this._drawCount=l,gie(n)&&(a=0,l=r.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=r;const c=this.resolveDatasetElementOptions(e);this.options.showLine||(c.borderWidth=0),c.segment=this.options.segment,this.updateElement(i,void 0,{animated:!o,options:c},e),this.updateElements(r,a,l,e)}updateElements(e,n,i,r){const s=r==="reset",{iScale:o,vScale:a,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,r),f=o.axis,p=a.axis,{spanGaps:x,segment:y}=this.options,g=Rf(x)?x:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||s||r==="none",_=n+i,w=e.length;let S=n>0&&this.getParsed(n-1);for(let N=0;N<w;++N){const k=e[N],R=m?k:{};if(N<n||N>=_){R.skip=!0;continue}const B=this.getParsed(N),L=Ut(B[p]),D=R[f]=o.getPixelForValue(B[f],N),j=R[p]=s||L?a.getBasePixel():a.getPixelForValue(l?this.applyStack(a,B,l):B[p],N);R.skip=isNaN(D)||isNaN(j)||L,R.stop=N>0&&Math.abs(B[f]-S[f])>g,y&&(R.parsed=B,R.raw=c.data[N]),h&&(R.options=u||this.resolveDataElementOptions(N,k.active?"active":r)),m||this.updateElement(k,N,R,r),S=B}}getMaxOverflow(){const e=this._cachedMeta,n=e.dataset,i=n.options&&n.options.borderWidth||0,r=e.data||[];if(!r.length)return i;const s=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(i,s,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Oe(v0,"id","line"),Oe(v0,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Oe(v0,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function fl(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class XM{constructor(e){Oe(this,"options");this.options=e||{}}static override(e){Object.assign(XM.prototype,e)}init(){}formats(){return fl()}parse(){return fl()}format(){return fl()}add(){return fl()}diff(){return fl()}startOf(){return fl()}endOf(){return fl()}}var Hre={_date:XM};function Gre(t,e,n,i){const{controller:r,data:s,_sorted:o}=t,a=r._cachedMeta.iScale,l=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(a&&e===a.axis&&e!=="r"&&o&&s.length){const c=a._reversePixels?uie:Yl;if(i){if(r._sharedOptions){const u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=c(s,e,n-h),p=c(s,e,n+h);return{lo:f.lo,hi:p.hi}}}}else{const u=c(s,e,n);if(l){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,p=f.slice(0,u.lo+1).reverse().findIndex(y=>!Ut(y[h.axis]));u.lo-=Math.max(0,p);const x=f.slice(u.hi).findIndex(y=>!Ut(y[h.axis]));u.hi+=Math.max(0,x)}return u}}return{lo:0,hi:s.length-1}}function Ix(t,e,n,i,r){const s=t.getSortedVisibleDatasetMetas(),o=n[e];for(let a=0,l=s.length;a<l;++a){const{index:c,data:u}=s[a],{lo:h,hi:f}=Gre(s[a],e,o,r);for(let p=h;p<=f;++p){const x=u[p];x.skip||i(x,c,p)}}}function $re(t){const e=t.indexOf("x")!==-1,n=t.indexOf("y")!==-1;return function(i,r){const s=e?Math.abs(i.x-r.x):0,o=n?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Vv(t,e,n,i,r){const s=[];return!r&&!t.isPointInArea(e)||Ix(t,n,e,function(a,l,c){!r&&!Lf(a,t.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function Yre(t,e,n,i){let r=[];function s(o,a,l){const{startAngle:c,endAngle:u}=o.getProps(["startAngle","endAngle"],i),{angle:h}=aie(o,{x:e.x,y:e.y});q5(h,c,u)&&r.push({element:o,datasetIndex:a,index:l})}return Ix(t,n,e,s),r}function Xre(t,e,n,i,r,s){let o=[];const a=$re(n);let l=Number.POSITIVE_INFINITY;function c(u,h,f){const p=u.inRange(e.x,e.y,r);if(i&&!p)return;const x=u.getCenterPoint(r);if(!(!!s||t.isPointInArea(x))&&!p)return;const g=a(e,x);g<l?(o=[{element:u,datasetIndex:h,index:f}],l=g):g===l&&o.push({element:u,datasetIndex:h,index:f})}return Ix(t,n,e,c),o}function Wv(t,e,n,i,r,s){return!s&&!t.isPointInArea(e)?[]:n==="r"&&!i?Yre(t,e,n,r):Xre(t,e,n,i,r,s)}function g3(t,e,n,i,r){const s=[],o=n==="x"?"inXRange":"inYRange";let a=!1;return Ix(t,n,e,(l,c,u)=>{l[o]&&l[o](e[n],r)&&(s.push({element:l,datasetIndex:c,index:u}),a=a||l.inRange(e.x,e.y,r))}),i&&!a?[]:s}var qre={modes:{index(t,e,n,i){const r=Sl(e,t),s=n.axis||"x",o=n.includeInvisible||!1,a=n.intersect?Vv(t,r,s,i,o):Wv(t,r,s,!1,i,o),l=[];return a.length?(t.getSortedVisibleDatasetMetas().forEach(c=>{const u=a[0].index,h=c.data[u];h&&!h.skip&&l.push({element:h,datasetIndex:c.index,index:u})}),l):[]},dataset(t,e,n,i){const r=Sl(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;let a=n.intersect?Vv(t,r,s,i,o):Wv(t,r,s,!1,i,o);if(a.length>0){const l=a[0].datasetIndex,c=t.getDatasetMeta(l).data;a=[];for(let u=0;u<c.length;++u)a.push({element:c[u],datasetIndex:l,index:u})}return a},point(t,e,n,i){const r=Sl(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Vv(t,r,s,i,o)},nearest(t,e,n,i){const r=Sl(e,t),s=n.axis||"xy",o=n.includeInvisible||!1;return Wv(t,r,s,n.intersect,i,o)},x(t,e,n,i){const r=Sl(e,t);return g3(t,r,"x",n.intersect,i)},y(t,e,n,i){const r=Sl(e,t);return g3(t,r,"y",n.intersect,i)}}};const gD=["left","top","right","bottom"];function Zd(t,e){return t.filter(n=>n.pos===e)}function x3(t,e){return t.filter(n=>gD.indexOf(n.pos)===-1&&n.box.axis===e)}function Qd(t,e){return t.sort((n,i)=>{const r=e?i:n,s=e?n:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function Kre(t){const e=[];let n,i,r,s,o,a;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:n,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Zre(t){const e={};for(const n of t){const{stack:i,pos:r,stackWeight:s}=n;if(!i||!gD.includes(r))continue;const o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Qre(t,e){const n=Zre(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let s,o,a;for(s=0,o=t.length;s<o;++s){a=t[s];const{fullSize:l}=a.box,c=n[a.stack],u=c&&a.stackWeight/c.weight;a.horizontal?(a.width=u?u*i:l&&e.availableWidth,a.height=r):(a.width=i,a.height=u?u*r:l&&e.availableHeight)}return n}function Jre(t){const e=Kre(t),n=Qd(e.filter(c=>c.box.fullSize),!0),i=Qd(Zd(e,"left"),!0),r=Qd(Zd(e,"right")),s=Qd(Zd(e,"top"),!0),o=Qd(Zd(e,"bottom")),a=x3(e,"x"),l=x3(e,"y");return{fullSize:n,leftAndTop:i.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:Zd(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function y3(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function xD(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function ese(t,e,n,i){const{pos:r,box:s}=n,o=t.maxPadding;if(!Pt(r)){n.size&&(t[r]-=n.size);const h=i[n.stack]||{size:0,count:1};h.size=Math.max(h.size,n.horizontal?s.height:s.width),n.size=h.size/h.count,t[r]+=n.size}s.getPadding&&xD(o,s.getPadding());const a=Math.max(0,e.outerWidth-y3(o,t,"left","right")),l=Math.max(0,e.outerHeight-y3(o,t,"top","bottom")),c=a!==t.w,u=l!==t.h;return t.w=a,t.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function tse(t){const e=t.maxPadding;function n(i){const r=Math.max(e[i]-t[i],0);return t[i]+=r,r}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}function nse(t,e){const n=e.maxPadding;function i(r){const s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],n[o])}),s}return i(t?["left","right"]:["top","bottom"])}function gh(t,e,n,i){const r=[];let s,o,a,l,c,u;for(s=0,o=t.length,c=0;s<o;++s){a=t[s],l=a.box,l.update(a.width||e.w,a.height||e.h,nse(a.horizontal,e));const{same:h,other:f}=ese(e,n,a,i);c|=h&&r.length,u=u||f,l.fullSize||r.push(a)}return c&&gh(r,e,n,i)||u}function Sm(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function v3(t,e,n,i){const r=n.padding;let{x:s,y:o}=e;for(const a of t){const l=a.box,c=i[a.stack]||{placed:0,weight:1},u=a.stackWeight/c.weight||1;if(a.horizontal){const h=e.w*u,f=c.size||l.height;Nf(c.start)&&(o=c.start),l.fullSize?Sm(l,r.left,o,n.outerWidth-r.right-r.left,f):Sm(l,e.left+c.placed,o,h,f),c.start=o,c.placed+=h,o=l.bottom}else{const h=e.h*u,f=c.size||l.width;Nf(c.start)&&(s=c.start),l.fullSize?Sm(l,s,r.top,f,n.outerHeight-r.bottom-r.top):Sm(l,s,e.top+c.placed,f,h),c.start=s,c.placed+=h,s=l.right}}e.x=s,e.y=o}var Gr={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(n){e.draw(n)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;n!==-1&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=Qr(t.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(n-r.height,0),a=Jre(t.boxes),l=a.vertical,c=a.horizontal;Ft(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=l.reduce((y,g)=>g.box.options&&g.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);xD(f,Qr(i));const p=Object.assign({maxPadding:f,w:s,h:o,x:r.left,y:r.top},r),x=Qre(l.concat(c),h);gh(a.fullSize,p,h,x),gh(l,p,h,x),gh(c,p,h,x)&&gh(l,p,h,x),tse(p),v3(a.leftAndTop,p,h,x),p.x+=p.w,p.y+=p.h,v3(a.rightAndBottom,p,h,x),t.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},Ft(a.chartArea,y=>{const g=y.box;Object.assign(g,t.chartArea),g.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class yD{acquireContext(e,n){}releaseContext(e){return!1}addEventListener(e,n,i){}removeEventListener(e,n,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,n,i,r){return n=Math.max(0,n||e.width),i=i||e.height,{width:n,height:Math.max(0,r?Math.floor(n/r):i)}}isAttached(e){return!0}updateConfig(e){}}class ise extends yD{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const w0="$chartjs",rse={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},w3=t=>t===null||t==="";function sse(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[w0]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",w3(r)){const s=i3(t,"width");s!==void 0&&(t.width=s)}if(w3(i))if(t.style.height==="")t.height=t.width/(e||2);else{const s=i3(t,"height");s!==void 0&&(t.height=s)}return t}const vD=sre?{passive:!0}:!1;function ose(t,e,n){t&&t.addEventListener(e,n,vD)}function ase(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,vD)}function lse(t,e){const n=rse[t.type]||t.type,{x:i,y:r}=Sl(t,e);return{type:n,chart:e,native:t,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ig(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function cse(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ig(a.addedNodes,i),o=o&&!Ig(a.removedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}function use(t,e,n){const i=t.canvas,r=new MutationObserver(s=>{let o=!1;for(const a of s)o=o||Ig(a.removedNodes,i),o=o&&!Ig(a.addedNodes,i);o&&n()});return r.observe(document,{childList:!0,subtree:!0}),r}const kf=new Map;let _3=0;function wD(){const t=window.devicePixelRatio;t!==_3&&(_3=t,kf.forEach((e,n)=>{n.currentDevicePixelRatio!==t&&e()}))}function dse(t,e){kf.size||window.addEventListener("resize",wD),kf.set(t,e)}function hse(t){kf.delete(t),kf.size||window.removeEventListener("resize",wD)}function fse(t,e,n){const i=t.canvas,r=i&&YM(i);if(!r)return;const s=J5((a,l)=>{const c=r.clientWidth;n(a,l),c<r.clientWidth&&n()},window),o=new ResizeObserver(a=>{const l=a[0],c=l.contentRect.width,u=l.contentRect.height;c===0&&u===0||s(c,u)});return o.observe(r),dse(t,s),o}function Hv(t,e,n){n&&n.disconnect(),e==="resize"&&hse(t)}function pse(t,e,n){const i=t.canvas,r=J5(s=>{t.ctx!==null&&n(lse(s,t))},t);return ose(i,e,r),r}class mse extends yD{acquireContext(e,n){const i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(sse(e,n),i):null}releaseContext(e){const n=e.canvas;if(!n[w0])return!1;const i=n[w0].initial;["height","width"].forEach(s=>{const o=i[s];Ut(o)?n.removeAttribute(s):n.setAttribute(s,o)});const r=i.style||{};return Object.keys(r).forEach(s=>{n.style[s]=r[s]}),n.width=n.width,delete n[w0],!0}addEventListener(e,n,i){this.removeEventListener(e,n);const r=e.$proxies||(e.$proxies={}),o={attach:cse,detach:use,resize:fse}[n]||pse;r[n]=o(e,n,i)}removeEventListener(e,n){const i=e.$proxies||(e.$proxies={}),r=i[n];if(!r)return;({attach:Hv,detach:Hv,resize:Hv}[n]||ase)(e,n,r),i[n]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,n,i,r){return rre(e,n,i,r)}isAttached(e){const n=e&&YM(e);return!!(n&&n.isConnected)}}function gse(t){return!$M()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?ise:mse}var Nm;let el=(Nm=class{constructor(){Oe(this,"x");Oe(this,"y");Oe(this,"active",!1);Oe(this,"options");Oe(this,"$animations")}tooltipPosition(e){const{x:n,y:i}=this.getProps(["x","y"],e);return{x:n,y:i}}hasValue(){return Rf(this.x)&&Rf(this.y)}getProps(e,n){const i=this.$animations;if(!n||!i)return this;const r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}},Oe(Nm,"defaults",{}),Oe(Nm,"defaultRoutes"),Nm);function xse(t,e){const n=t.options.ticks,i=yse(t),r=Math.min(n.maxTicksLimit||i,i),s=n.major.enabled?wse(e):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return _se(e,c,s,o/r),c;const u=vse(s,e,r);if(o>0){let h,f;const p=o>1?Math.round((l-a)/(o-1)):null;for(Mm(e,c,u,Ut(p)?0:a-p,a),h=0,f=o-1;h<f;h++)Mm(e,c,u,s[h],s[h+1]);return Mm(e,c,u,l,Ut(p)?e.length:l+p),c}return Mm(e,c,u),c}function yse(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}function vse(t,e,n){const i=bse(t),r=e.length/n;if(!i)return Math.max(r,1);const s=nie(i);for(let o=0,a=s.length-1;o<a;o++){const l=s[o];if(l>r)return l}return Math.max(r,1)}function wse(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}function _se(t,e,n,i){let r=0,s=n[0],o;for(i=Math.ceil(i),o=0;o<t.length;o++)o===s&&(e.push(t[o]),r++,s=n[r*i])}function Mm(t,e,n,i,r){const s=Et(i,0),o=Math.min(Et(r,t.length),t.length);let a=0,l,c,u;for(n=Math.ceil(n),r&&(l=r-i,n=l/Math.floor(l/n)),u=s;u<0;)a++,u=Math.round(s+a*n);for(c=Math.max(s,0);c<o;c++)c===u&&(e.push(t[c]),a++,u=Math.round(s+a*n))}function bse(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}const Sse=t=>t==="left"?"right":t==="right"?"left":t,b3=(t,e,n)=>e==="top"||e==="left"?t[e]+n:t[e]-n,S3=(t,e)=>Math.min(e||t,t);function M3(t,e){const n=[],i=t.length/e,r=t.length;let s=0;for(;s<r;s+=i)n.push(t[Math.floor(s)]);return n}function Mse(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),s=t._startPixel,o=t._endPixel,a=1e-6;let l=t.getPixelForTick(r),c;if(!(n&&(i===1?c=Math.max(l-s,o-l):e===0?c=(t.getPixelForTick(1)-l)/2:c=(l-t.getPixelForTick(r-1))/2,l+=r<e?c:-c,l<s-a||l>o+a)))return l}function Ese(t,e){Ft(t,n=>{const i=n.gc,r=i.length/2;let s;if(r>e){for(s=0;s<r;++s)delete n.data[i[s]];i.splice(0,r)}})}function Jd(t){return t.drawTicks?t.tickLength:0}function E3(t,e){if(!t.display)return 0;const n=Di(t.font,e),i=Qr(t.padding);return(Zn(t.text)?t.text.length:1)*n.lineHeight+i.height}function Tse(t,e){return Sc(t,{scale:e,type:"scale"})}function Ase(t,e,n){return Sc(t,{tick:n,index:e,type:"tick"})}function Cse(t,e,n){let i=jM(t);return(n&&e!=="right"||!n&&e==="right")&&(i=Sse(i)),i}function Nse(t,e,n,i){const{top:r,left:s,bottom:o,right:a,chart:l}=t,{chartArea:c,scales:u}=l;let h=0,f,p,x;const y=o-r,g=a-s;if(t.isHorizontal()){if(p=Li(i,s,a),Pt(n)){const m=Object.keys(n)[0],_=n[m];x=u[m].getPixelForValue(_)+y-e}else n==="center"?x=(c.bottom+c.top)/2+y-e:x=b3(t,n,e);f=a-s}else{if(Pt(n)){const m=Object.keys(n)[0],_=n[m];p=u[m].getPixelForValue(_)-g+e}else n==="center"?p=(c.left+c.right)/2-g+e:p=b3(t,n,e);x=Li(i,o,r),h=n==="left"?-hs:hs}return{titleX:p,titleY:x,maxWidth:f,rotation:h}}class Ad extends el{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,n){return e}getUserBounds(){let{_userMin:e,_userMax:n,_suggestedMin:i,_suggestedMax:r}=this;return e=Ss(e,Number.POSITIVE_INFINITY),n=Ss(n,Number.NEGATIVE_INFINITY),i=Ss(i,Number.POSITIVE_INFINITY),r=Ss(r,Number.NEGATIVE_INFINITY),{min:Ss(e,i),max:Ss(n,r),minDefined:Zr(e),maxDefined:Zr(n)}}getMinMax(e){let{min:n,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,e),r||(n=Math.min(n,o.min)),s||(i=Math.max(i,o.max));return n=s&&n>i?i:n,i=r&&n>i?n:i,{min:Ss(n,Ss(i,n)),max:Ss(i,Ss(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){rn(this.options.beforeUpdate,[this])}update(e,n,i){const{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=n,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Bie(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=a<this.ticks.length;this._convertTicksToLabels(l?M3(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=xse(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,n,i;this.isHorizontal()?(n=this.left,i=this.right):(n=this.top,i=this.bottom,e=!e),this._startPixel=n,this._endPixel=i,this._reversePixels=e,this._length=i-n,this._alignToPixels=this.options.alignToPixels}afterUpdate(){rn(this.options.afterUpdate,[this])}beforeSetDimensions(){rn(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){rn(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),rn(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){rn(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const n=this.options.ticks;let i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=rn(n.callback,[s.value,i,e],this)}afterTickToLabelConversion(){rn(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){rn(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,n=e.ticks,i=S3(this.ticks.length,e.ticks.maxTicksLimit),r=n.minRotation||0,s=n.maxRotation;let o=r,a,l,c;if(!this._isVisible()||!n.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,p=br(this.chart.width-h,0,this.maxWidth);a=e.offset?this.maxWidth/i:p/(i-1),h+6>a&&(a=p/(i-(e.offset?.5:1)),l=this.maxHeight-Jd(e.grid)-n.padding-E3(e.title,this.chart.options.font),c=Math.sqrt(h*h+f*f),o=oie(Math.min(Math.asin(br((u.highest.height+6)/a,-1,1)),Math.asin(br(l/c,-1,1))-Math.asin(br(f/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){rn(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){rn(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:n,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const l=E3(r,n.options.font);if(a?(e.width=this.maxWidth,e.height=Jd(s)+l):(e.height=this.maxHeight,e.width=Jd(s)+l),i.display&&this.ticks.length){const{first:c,last:u,widest:h,highest:f}=this._getLabelSizes(),p=i.padding*2,x=Gl(this.labelRotation),y=Math.cos(x),g=Math.sin(x);if(a){const m=i.mirror?0:g*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+m+p)}else{const m=i.mirror?0:y*h.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+m+p)}this._calculatePadding(c,u,g,y)}}this._handleMargins(),a?(this.width=this._length=n.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=n.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,n,i,r){const{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,p=0;l?c?(f=r*e.width,p=i*n.height):(f=i*e.height,p=r*n.width):s==="start"?p=n.width:s==="end"?f=e.width:s!=="inner"&&(f=e.width/2,p=n.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((p-h+o)*this.width/(this.width-h),0)}else{let u=n.height/2,h=e.height/2;s==="start"?(u=0,h=e.height):s==="end"&&(u=n.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){rn(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:n}=this.options;return n==="top"||n==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let n,i;for(n=0,i=e.length;n<i;n++)Ut(e[n].label)&&(e.splice(n,1),i--,n--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const n=this.options.ticks.sampleSize;let i=this.ticks;n<i.length&&(i=M3(i,n)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,n,i){const{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(n/S3(n,i));let c=0,u=0,h,f,p,x,y,g,m,_,w,S,N;for(h=0;h<n;h+=l){if(x=e[h].label,y=this._resolveTickFontOptions(h),r.font=g=y.string,m=s[g]=s[g]||{data:{},gc:[]},_=y.lineHeight,w=S=0,!Ut(x)&&!Zn(x))w=QC(r,m.data,m.gc,w,x),S=_;else if(Zn(x))for(f=0,p=x.length;f<p;++f)N=x[f],!Ut(N)&&!Zn(N)&&(w=QC(r,m.data,m.gc,w,N),S+=_);o.push(w),a.push(S),c=Math.max(w,c),u=Math.max(S,u)}Ese(s,n);const k=o.indexOf(c),R=a.indexOf(u),B=L=>({width:o[L]||0,height:a[L]||0});return{first:B(0),last:B(n-1),widest:B(k),highest:B(R),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,n){return NaN}getValueForPixel(e){}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const n=this._startPixel+e*this._length;return cie(this._alignToPixels?hl(this.chart,n,0):n)}getDecimalForPixel(e){const n=(e-this._startPixel)/this._length;return this._reversePixels?1-n:n}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:n}=this;return e<0&&n<0?n:e>0&&n>0?e:0}getContext(e){const n=this.ticks||[];if(e>=0&&e<n.length){const i=n[e];return i.$context||(i.$context=Ase(this.getContext(),e,i))}return this.$context||(this.$context=Tse(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,n=Gl(this.labelRotation),i=Math.abs(Math.cos(n)),r=Math.abs(Math.sin(n)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*i>a*r?a/i:l/r:l*r<a*i?l/i:a/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const n=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),h=this.ticks.length+(l?1:0),f=Jd(s),p=[],x=a.setContext(this.getContext()),y=x.display?x.width:0,g=y/2,m=function(E){return hl(i,E,y)};let _,w,S,N,k,R,B,L,D,j,Y,I;if(o==="top")_=m(this.bottom),R=this.bottom-f,L=_-g,j=m(e.top)+g,I=e.bottom;else if(o==="bottom")_=m(this.top),j=e.top,I=m(e.bottom)-g,R=_+g,L=this.top+f;else if(o==="left")_=m(this.right),k=this.right-f,B=_-g,D=m(e.left)+g,Y=e.right;else if(o==="right")_=m(this.left),D=e.left,Y=m(e.right)-g,k=_+g,B=this.left+f;else if(n==="x"){if(o==="center")_=m((e.top+e.bottom)/2+.5);else if(Pt(o)){const E=Object.keys(o)[0],P=o[E];_=m(this.chart.scales[E].getPixelForValue(P))}j=e.top,I=e.bottom,R=_+g,L=R+f}else if(n==="y"){if(o==="center")_=m((e.left+e.right)/2);else if(Pt(o)){const E=Object.keys(o)[0],P=o[E];_=m(this.chart.scales[E].getPixelForValue(P))}k=_-g,B=k-f,D=e.left,Y=e.right}const v=Et(r.ticks.maxTicksLimit,h),b=Math.max(1,Math.ceil(h/v));for(w=0;w<h;w+=b){const E=this.getContext(w),P=s.setContext(E),C=a.setContext(E),z=P.lineWidth,V=P.color,U=C.dash||[],T=C.dashOffset,G=P.tickWidth,K=P.tickColor,ne=P.tickBorderDash||[],Z=P.tickBorderDashOffset;S=Mse(this,w,l),S!==void 0&&(N=hl(i,S,z),c?k=B=D=Y=N:R=L=j=I=N,p.push({tx1:k,ty1:R,tx2:B,ty2:L,x1:D,y1:j,x2:Y,y2:I,width:z,color:V,borderDash:U,borderDashOffset:T,tickWidth:G,tickColor:K,tickBorderDash:ne,tickBorderDashOffset:Z}))}return this._ticksLength=h,this._borderValue=_,p}_computeLabelItems(e){const n=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:u,mirror:h}=s,f=Jd(i.grid),p=f+u,x=h?-u:p,y=-Gl(this.labelRotation),g=[];let m,_,w,S,N,k,R,B,L,D,j,Y,I="middle";if(r==="top")k=this.bottom-x,R=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+x,R=this._getXAxisLabelAlignment();else if(r==="left"){const b=this._getYAxisLabelAlignment(f);R=b.textAlign,N=b.x}else if(r==="right"){const b=this._getYAxisLabelAlignment(f);R=b.textAlign,N=b.x}else if(n==="x"){if(r==="center")k=(e.top+e.bottom)/2+p;else if(Pt(r)){const b=Object.keys(r)[0],E=r[b];k=this.chart.scales[b].getPixelForValue(E)+p}R=this._getXAxisLabelAlignment()}else if(n==="y"){if(r==="center")N=(e.left+e.right)/2-p;else if(Pt(r)){const b=Object.keys(r)[0],E=r[b];N=this.chart.scales[b].getPixelForValue(E)}R=this._getYAxisLabelAlignment(f).textAlign}n==="y"&&(l==="start"?I="top":l==="end"&&(I="bottom"));const v=this._getLabelSizes();for(m=0,_=a.length;m<_;++m){w=a[m],S=w.label;const b=s.setContext(this.getContext(m));B=this.getPixelForTick(m)+s.labelOffset,L=this._resolveTickFontOptions(m),D=L.lineHeight,j=Zn(S)?S.length:1;const E=j/2,P=b.color,C=b.textStrokeColor,z=b.textStrokeWidth;let V=R;o?(N=B,R==="inner"&&(m===_-1?V=this.options.reverse?"left":"right":m===0?V=this.options.reverse?"right":"left":V="center"),r==="top"?c==="near"||y!==0?Y=-j*D+D/2:c==="center"?Y=-v.highest.height/2-E*D+D:Y=-v.highest.height+D/2:c==="near"||y!==0?Y=D/2:c==="center"?Y=v.highest.height/2-E*D:Y=v.highest.height-j*D,h&&(Y*=-1),y!==0&&!b.showLabelBackdrop&&(N+=D/2*Math.sin(y))):(k=B,Y=(1-j)*D/2);let U;if(b.showLabelBackdrop){const T=Qr(b.backdropPadding),G=v.heights[m],K=v.widths[m];let ne=Y-T.top,Z=0-T.left;switch(I){case"middle":ne-=G/2;break;case"bottom":ne-=G;break}switch(R){case"center":Z-=K/2;break;case"right":Z-=K;break;case"inner":m===_-1?Z-=K:m>0&&(Z-=K/2);break}U={left:Z,top:ne,width:K+T.width,height:G+T.height,color:b.backdropColor}}g.push({label:S,font:L,textOffset:Y,options:{rotation:y,color:P,strokeColor:C,strokeWidth:z,textAlign:V,textBaseline:I,translation:[N,k],backdrop:U}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:n}=this.options;if(-Gl(this.labelRotation))return e==="top"?"left":"right";let r="center";return n.align==="start"?r="left":n.align==="end"?r="right":n.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:n,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,l=o.widest.width;let c,u;return n==="left"?r?(u=this.right+s,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u+=l)):(u=this.right-a,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u=this.left)):n==="right"?r?(u=this.left+s,i==="near"?c="right":i==="center"?(c="center",u-=l/2):(c="left",u-=l)):(u=this.left+a,i==="near"?c="left":i==="center"?(c="center",u+=l/2):(c="right",u=this.right)):c="right",{textAlign:c,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,n=this.options.position;if(n==="left"||n==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(n==="top"||n==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:n},left:i,top:r,width:s,height:o}=this;n&&(e.save(),e.fillStyle=n,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){const n=this.options.grid;if(!this._isVisible()||!n.display)return 0;const r=this.ticks.findIndex(s=>s.value===e);return r>=0?n.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const n=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let s,o;const a=(l,c,u)=>{!u.width||!u.color||(i.save(),i.lineWidth=u.width,i.strokeStyle=u.color,i.setLineDash(u.borderDash||[]),i.lineDashOffset=u.borderDashOffset,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.x,c.y),i.stroke(),i.restore())};if(n.display)for(s=0,o=r.length;s<o;++s){const l=r[s];n.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),n.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:n,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;const a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let c,u,h,f;this.isHorizontal()?(c=hl(e,this.left,o)-o/2,u=hl(e,this.right,a)+a/2,h=f=l):(h=hl(e,this.top,o)-o/2,f=hl(e,this.bottom,a)+a/2,c=u=l),n.save(),n.lineWidth=s.width,n.strokeStyle=s.color,n.beginPath(),n.moveTo(c,h),n.lineTo(u,f),n.stroke(),n.restore()}drawLabels(e){if(!this.options.ticks.display)return;const i=this.ctx,r=this._computeLabelArea();r&&zM(i,r);const s=this.getLabelItems(e);for(const o of s){const a=o.options,l=o.font,c=o.label,u=o.textOffset;If(i,c,0,u,l,a)}r&&VM(i)}drawTitle(){const{ctx:e,options:{position:n,title:i,reverse:r}}=this;if(!i.display)return;const s=Di(i.font),o=Qr(i.padding),a=i.align;let l=s.lineHeight/2;n==="bottom"||n==="center"||Pt(n)?(l+=o.bottom,Zn(i.text)&&(l+=s.lineHeight*(i.text.length-1))):l+=o.top;const{titleX:c,titleY:u,maxWidth:h,rotation:f}=Nse(this,l,n,a);If(e,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:f,textAlign:Cse(a,n,r),textBaseline:"middle",translation:[c,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,n=e.ticks&&e.ticks.z||0,i=Et(e.grid&&e.grid.z,-1),r=Et(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Ad.prototype.draw?[{z:n,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:n,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){const n=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[];let s,o;for(s=0,o=n.length;s<o;++s){const a=n[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){const n=this.options.ticks.setContext(this.getContext(e));return Di(n.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Em{constructor(e,n,i){this.type=e,this.scope=n,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const n=Object.getPrototypeOf(e);let i;Ise(n)&&(i=this.register(n));const r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,Rse(e,o,i),this.override&&jn.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const n=this.items,i=e.id,r=this.scope;i in n&&delete n[i],r&&i in jn[r]&&(delete jn[r][i],this.override&&delete dc[i])}}function Rse(t,e,n){const i=Cf(Object.create(null),[n?jn.get(n):{},jn.get(e),t.defaults]);jn.set(e,i),t.defaultRoutes&&Lse(e,t.defaultRoutes),t.descriptors&&jn.describe(e,t.descriptors)}function Lse(t,e){Object.keys(e).forEach(n=>{const i=n.split("."),r=i.pop(),s=[t].concat(i).join("."),o=e[n].split("."),a=o.pop(),l=o.join(".");jn.route(s,r,l,a)})}function Ise(t){return"id"in t&&"defaults"in t}class kse{constructor(){this.controllers=new Em(Ou,"datasets",!0),this.elements=new Em(el,"elements"),this.plugins=new Em(Object,"plugins"),this.scales=new Em(Ad,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,n,i){[...n].forEach(r=>{const s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):Ft(r,o=>{const a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,n,i){const r=UM(e);rn(i["before"+r],[],i),n[e](i),rn(i["after"+r],[],i)}_getRegistryForType(e){for(let n=0;n<this._typedRegistries.length;n++){const i=this._typedRegistries[n];if(i.isForType(e))return i}return this.plugins}_get(e,n,i){const r=n.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}}var As=new kse;class Pse{constructor(){this._init=void 0}notify(e,n,i,r){if(n==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install")),this._init===void 0)return;const s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,n,i);return n==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall"),this._init=void 0),o}_notify(e,n,i,r){r=r||{};for(const s of e){const o=s.plugin,a=o[i],l=[n,r,s.options];if(rn(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){Ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const n=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),n}_createDescriptors(e,n){const i=e&&e.config,r=Et(i.options&&i.options.plugins,{}),s=Dse(i);return r===!1&&!n?[]:Use(e,s,r,n)}_notifyStateChanges(e){const n=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(n,i),e,"stop"),this._notify(r(i,n),e,"start")}}function Dse(t){const e={},n=[],i=Object.keys(As.plugins.items);for(let s=0;s<i.length;s++)n.push(As.getPlugin(i[s]));const r=t.plugins||[];for(let s=0;s<r.length;s++){const o=r[s];n.indexOf(o)===-1&&(n.push(o),e[o.id]=!0)}return{plugins:n,localIds:e}}function Bse(t,e){return!e&&t===!1?null:t===!0?{}:t}function Use(t,{plugins:e,localIds:n},i,r){const s=[],o=t.getContext();for(const a of e){const l=a.id,c=Bse(i[l],r);c!==null&&s.push({plugin:a,options:Ose(t.config,{plugin:a,local:n[l]},c,o)})}return s}function Ose(t,{plugin:e,local:n},i,r){const s=t.pluginScopeKeys(e),o=t.getOptionScopes(i,s);return n&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function K_(t,e){const n=jn.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function jse(t,e){let n=t;return t==="_index_"?n=e:t==="_value_"&&(n=e==="x"?"y":"x"),n}function Fse(t,e){return t===e?"_index_":"_value_"}function T3(t){if(t==="x"||t==="y"||t==="r")return t}function zse(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Z_(t,...e){if(T3(t))return t;for(const n of e){const i=n.axis||zse(n.position)||t.length>1&&T3(t[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function A3(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function Vse(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter(i=>i.xAxisID===t||i.yAxisID===t);if(n.length)return A3(t,"x",n[0])||A3(t,"y",n[0])}return{}}function Wse(t,e){const n=dc[t.type]||{scales:{}},i=e.scales||{},r=K_(t.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{const a=i[o];if(!Pt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const l=Z_(o,a,Vse(o,t),jn.scales[a.type]),c=Fse(l,r),u=n.scales||{};s[o]=Uh(Object.create(null),[{axis:l},a,u[l],u[c]])}),t.data.datasets.forEach(o=>{const a=o.type||t.type,l=o.indexAxis||K_(a,e),u=(dc[a]||{}).scales||{};Object.keys(u).forEach(h=>{const f=jse(h,l),p=o[f+"AxisID"]||f;s[p]=s[p]||Object.create(null),Uh(s[p],[{axis:f},i[p],u[h]])})}),Object.keys(s).forEach(o=>{const a=s[o];Uh(a,[jn.scales[a.type],jn.scale])}),s}function _D(t){const e=t.options||(t.options={});e.plugins=Et(e.plugins,{}),e.scales=Wse(t,e)}function bD(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function Hse(t){return t=t||{},t.data=bD(t.data),_D(t),t}const C3=new Map,SD=new Set;function Tm(t,e){let n=C3.get(t);return n||(n=e(),C3.set(t,n),SD.add(n)),n}const eh=(t,e,n)=>{const i=ld(e,n);i!==void 0&&t.add(i)};class Gse{constructor(e){this._config=Hse(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=bD(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),_D(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Tm(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,n){return Tm(`${e}.transition.${n}`,()=>[[`datasets.${e}.transitions.${n}`,`transitions.${n}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,n){return Tm(`${e}-${n}`,()=>[[`datasets.${e}.elements.${n}`,`datasets.${e}`,`elements.${n}`,""]])}pluginScopeKeys(e){const n=e.id,i=this.type;return Tm(`${i}-plugin-${n}`,()=>[[`plugins.${n}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,n){const i=this._scopeCache;let r=i.get(e);return(!r||n)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,n,i){const{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(n);if(a)return a;const l=new Set;n.forEach(u=>{e&&(l.add(e),u.forEach(h=>eh(l,e,h))),u.forEach(h=>eh(l,r,h)),u.forEach(h=>eh(l,dc[s]||{},h)),u.forEach(h=>eh(l,jn,h)),u.forEach(h=>eh(l,X_,h))});const c=Array.from(l);return c.length===0&&c.push(Object.create(null)),SD.has(n)&&o.set(n,c),c}chartOptionScopes(){const{options:e,type:n}=this;return[e,dc[n]||{},jn.datasets[n]||{},{type:n},jn,X_]}resolveNamedOptions(e,n,i,r=[""]){const s={$shared:!0},{resolver:o,subPrefixes:a}=N3(this._resolverCache,e,r);let l=o;if(Yse(o,n)){s.$shared=!1,i=Ga(i)?i():i;const c=this.createResolver(e,i,a);l=cd(o,i,c)}for(const c of n)s[c]=l[c];return s}createResolver(e,n,i=[""],r){const{resolver:s}=N3(this._resolverCache,e,i);return Pt(n)?cd(s,n,void 0,r):s}}function N3(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let s=i.get(r);return s||(s={resolver:WM(e,n),subPrefixes:n.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}const $se=t=>Pt(t)&&Object.getOwnPropertyNames(t).some(e=>Ga(t[e]));function Yse(t,e){const{isScriptable:n,isIndexable:i}=sD(t);for(const r of e){const s=n(r),o=i(r),a=(o||s)&&t[r];if(s&&(Ga(a)||$se(a))||o&&Zn(a))return!0}return!1}var Xse="4.5.1";const qse=["top","bottom","left","right","chartArea"];function R3(t,e){return t==="top"||t==="bottom"||qse.indexOf(t)===-1&&e==="x"}function L3(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function I3(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),rn(n&&n.onComplete,[t],e)}function Kse(t){const e=t.chart,n=e.options.animation;rn(n&&n.onProgress,[t],e)}function MD(t){return $M()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const _0={},k3=t=>{const e=MD(t);return Object.values(_0).filter(n=>n.canvas===e).pop()};function Zse(t,e,n){const i=Object.keys(t);for(const r of i){const s=+r;if(s>=e){const o=t[r];delete t[r],(n>0||s>e)&&(t[s+n]=o)}}}function Qse(t,e,n,i){return!n||t.type==="mouseout"?null:i?e:t}var na;let kx=(na=class{static register(...e){As.add(...e),P3()}static unregister(...e){As.remove(...e),P3()}constructor(e,n){const i=this.config=new Gse(n),r=MD(e),s=k3(r);if(s)throw new Error("Canvas is already in use. Chart with ID '"+s.id+"' must be destroyed before the canvas with ID '"+s.canvas.id+"' can be reused.");const o=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||gse(r)),this.platform.updateConfig(i);const a=this.platform.acquireContext(r,o.aspectRatio),l=a&&a.canvas,c=l&&l.height,u=l&&l.width;if(this.id=Yne(),this.ctx=a,this.canvas=l,this.width=u,this.height=c,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Pse,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=fie(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],_0[this.id]=this,!a||!l){console.error("Failed to create chart: can't acquire context from the given item");return}oo.listen(this,"complete",I3),oo.listen(this,"progress",Kse),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:n},width:i,height:r,_aspectRatio:s}=this;return Ut(e)?n&&s?s:r?i/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return As}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():n3(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return JC(this.canvas,this.ctx),this}stop(){return oo.stop(this),this}resize(e,n){oo.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){const i=this.options,r=this.canvas,s=i.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,n,s),a=i.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,n3(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),rn(i.onResize,[this,o],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const n=this.options.scales||{};Ft(n,(i,r)=>{i.id=r})}buildOrUpdateScales(){const e=this.options,n=e.scales,i=this.scales,r=Object.keys(i).reduce((o,a)=>(o[a]=!1,o),{});let s=[];n&&(s=s.concat(Object.keys(n).map(o=>{const a=n[o],l=Z_(o,a),c=l==="r",u=l==="x";return{options:a,dposition:c?"chartArea":u?"bottom":"left",dtype:c?"radialLinear":u?"category":"linear"}}))),Ft(s,o=>{const a=o.options,l=a.id,c=Z_(l,a),u=Et(a.type,o.dtype);(a.position===void 0||R3(a.position,c)!==R3(o.dposition))&&(a.position=o.dposition),r[l]=!0;let h=null;if(l in i&&i[l].type===u)h=i[l];else{const f=As.getScale(u);h=new f({id:l,type:u,ctx:this.ctx,chart:this}),i[h.id]=h}h.init(a,e)}),Ft(r,(o,a)=>{o||delete i[a]}),Ft(i,o=>{Gr.configure(this,o,o.options),Gr.addBox(this,o)})}_updateMetasets(){const e=this._metasets,n=this.data.datasets.length,i=e.length;if(e.sort((r,s)=>r.index-s.index),i>n){for(let r=n;r<i;++r)this._destroyDatasetMeta(r);e.splice(n,i-n)}this._sortedMetasets=e.slice(0).sort(L3("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((i,r)=>{n.filter(s=>s===i._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],n=this.data.datasets;let i,r;for(this._removeUnreferencedMetasets(),i=0,r=n.length;i<r;i++){const s=n[i];let o=this.getDatasetMeta(i);const a=s.type||this.config.type;if(o.type&&o.type!==a&&(this._destroyDatasetMeta(i),o=this.getDatasetMeta(i)),o.type=a,o.indexAxis=s.indexAxis||K_(a,this.options),o.order=s.order||0,o.index=i,o.label=""+s.label,o.visible=this.isDatasetVisible(i),o.controller)o.controller.updateIndex(i),o.controller.linkScales();else{const l=As.getController(a),{datasetElementType:c,dataElementType:u}=jn.datasets[a];Object.assign(l,{dataElementType:As.getElement(u),datasetElementType:c&&As.getElement(c)}),o.controller=new l(this,i),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ft(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const n=this.config;n.update();const i=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const s=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let c=0,u=this.data.datasets.length;c<u;c++){const{controller:h}=this.getDatasetMeta(c),f=!r&&s.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=i.layout.autoPadding?o:0,this._updateLayout(o),r||Ft(s,c=>{c.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(L3("z","_idx"));const{_active:a,_lastEvent:l}=this;l?this._eventHandler(l,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Ft(this.scales,e=>{Gr.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,n=new Set(Object.keys(this._listeners)),i=new Set(e.events);(!WC(n,i)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(const{method:i,start:r,count:s}of n){const o=i==="_removeElements"?-s:s;Zse(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const n=this.data.datasets.length,i=s=>new Set(e.filter(o=>o[0]===s).map((o,a)=>a+","+o.splice(1).join(","))),r=i(0);for(let s=1;s<n;s++)if(!WC(r,i(s)))return;return Array.from(r).map(s=>s.split(",")).map(s=>({method:s[1],start:+s[2],count:+s[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Gr.update(this,this.width,this.height,e);const n=this.chartArea,i=n.width<=0||n.height<=0;this._layers=[],Ft(this.boxes,r=>{i&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,s)=>{r._idx=s}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,i=this.data.datasets.length;n<i;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,i=this.data.datasets.length;n<i;++n)this._updateDataset(n,Ga(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){const i=this.getDatasetMeta(e),r={meta:i,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(i.controller._update(n),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(oo.has(this)?this.attached&&!oo.running(this)&&oo.start(this):(this.draw(),I3({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:i,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const n=this._sortedMetasets,i=[];let r,s;for(r=0,s=n.length;r<s;++r){const o=n[r];(!e||o.visible)&&i.push(o)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const n=this.ctx,i={meta:e,index:e.index,cancelable:!0},r=vre(this,e);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(r&&zM(n,r),e.controller.draw(),r&&VM(n),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(e){return Lf(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,i,r){const s=qre.modes[n];return typeof s=="function"?s(this,e,i,r):[]}getDatasetMeta(e){const n=this.data.datasets[e],i=this._metasets;let r=i.filter(s=>s&&s._dataset===n).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},i.push(r)),r}getContext(){return this.$context||(this.$context=Sc(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const n=this.data.datasets[e];if(!n)return!1;const i=this.getDatasetMeta(e);return typeof i.hidden=="boolean"?!i.hidden:!n.hidden}setDatasetVisibility(e,n){const i=this.getDatasetMeta(e);i.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,i){const r=i?"show":"hide",s=this.getDatasetMeta(e),o=s.controller._resolveAnimations(void 0,r);Nf(n)?(s.data[n].hidden=!i,this.update()):(this.setDatasetVisibility(e,i),o.update(s,{visible:i}),this.update(a=>a.datasetIndex===e?r:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){const n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),oo.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),JC(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete _0[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,n=this.platform,i=(s,o)=>{n.addEventListener(this,s,o),e[s]=o},r=(s,o,a)=>{s.offsetX=o,s.offsetY=a,this._eventHandler(s)};Ft(this.options.events,s=>i(s,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,n=this.platform,i=(l,c)=>{n.addEventListener(this,l,c),e[l]=c},r=(l,c)=>{e[l]&&(n.removeEventListener(this,l,c),delete e[l])},s=(l,c)=>{this.canvas&&this.resize(l,c)};let o;const a=()=>{r("attach",a),this.attached=!0,this.resize(),i("resize",s),i("detach",o)};o=()=>{this.attached=!1,r("resize",s),this._stop(),this._resize(0,0),i("attach",a)},n.isAttached(this.canvas)?a():o()}unbindEvents(){Ft(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ft(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,i){const r=i?"set":"remove";let s,o,a,l;for(n==="dataset"&&(s=this.getDatasetMeta(e[0].datasetIndex),s.controller["_"+r+"DatasetHoverStyle"]()),a=0,l=e.length;a<l;++a){o=e[a];const c=o&&this.getDatasetMeta(o.datasetIndex).controller;c&&c[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const n=this._active||[],i=e.map(({datasetIndex:s,index:o})=>{const a=this.getDatasetMeta(s);if(!a)throw new Error("No dataset found at index "+s);return{datasetIndex:s,element:a.data[o],index:o}});!Ag(i,n)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,n))}notifyPlugins(e,n,i){return this._plugins.notify(this,e,n,i)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,i){const r=this.options.hover,s=(l,c)=>l.filter(u=>!c.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=s(n,e),a=i?e:s(e,n);o.length&&this.updateHoverStyle(o,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,n){const i={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",i,r)===!1)return;const s=this._handleEvent(e,n,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,r),(s||i.changed)&&this.render(),this}_handleEvent(e,n,i){const{_active:r=[],options:s}=this,o=n,a=this._getActiveElements(e,r,i,o),l=Jne(e),c=Qse(e,this._lastEvent,i,l);i&&(this._lastEvent=null,rn(s.onHover,[e,a,this],this),l&&rn(s.onClick,[e,a,this],this));const u=!Ag(a,r);return(u||n)&&(this._active=a,this._updateHoverStyles(a,r,n)),this._lastEvent=c,u}_getActiveElements(e,n,i,r){if(e.type==="mouseout")return[];if(!i)return n;const s=this.options.hover;return this.getElementsAtEventForMode(e,s.mode,s,r)}},Oe(na,"defaults",jn),Oe(na,"instances",_0),Oe(na,"overrides",dc),Oe(na,"registry",As),Oe(na,"version",Xse),Oe(na,"getChart",k3),na);function P3(){return Ft(kx.instances,t=>t._plugins.invalidate())}function ED(t,e,n=e){t.lineCap=Et(n.borderCapStyle,e.borderCapStyle),t.setLineDash(Et(n.borderDash,e.borderDash)),t.lineDashOffset=Et(n.borderDashOffset,e.borderDashOffset),t.lineJoin=Et(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=Et(n.borderWidth,e.borderWidth),t.strokeStyle=Et(n.borderColor,e.borderColor)}function Jse(t,e,n){t.lineTo(n.x,n.y)}function eoe(t){return t.stepped?Aie:t.tension||t.cubicInterpolationMode==="monotone"?Cie:Jse}function TD(t,e,n={}){const i=t.length,{start:r=0,end:s=i-1}=n,{start:o,end:a}=e,l=Math.max(r,o),c=Math.min(s,a),u=r<o&&s<o||r>a&&s>a;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function toe(t,e,n,i){const{points:r,options:s}=e,{count:o,start:a,loop:l,ilen:c}=TD(r,n,i),u=eoe(s);let{move:h=!0,reverse:f}=i||{},p,x,y;for(p=0;p<=c;++p)x=r[(a+(f?c-p:p))%o],!x.skip&&(h?(t.moveTo(x.x,x.y),h=!1):u(t,y,x,f,s.stepped),y=x);return l&&(x=r[(a+(f?c:0))%o],u(t,y,x,f,s.stepped)),!!l}function noe(t,e,n,i){const r=e.points,{count:s,start:o,ilen:a}=TD(r,n,i),{move:l=!0,reverse:c}=i||{};let u=0,h=0,f,p,x,y,g,m;const _=S=>(o+(c?a-S:S))%s,w=()=>{y!==g&&(t.lineTo(u,g),t.lineTo(u,y),t.lineTo(u,m))};for(l&&(p=r[_(0)],t.moveTo(p.x,p.y)),f=0;f<=a;++f){if(p=r[_(f)],p.skip)continue;const S=p.x,N=p.y,k=S|0;k===x?(N<y?y=N:N>g&&(g=N),u=(h*u+S)/++h):(w(),t.lineTo(S,N),x=k,h=0,y=g=N),m=N}w()}function Q_(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!n?noe:toe}function ioe(t){return t.stepped?ore:t.tension||t.cubicInterpolationMode==="monotone"?are:Ml}function roe(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),ED(t,e.options),t.stroke(r)}function soe(t,e,n,i){const{segments:r,options:s}=e,o=Q_(e);for(const a of r)ED(t,s,a.style),t.beginPath(),o(t,e,a,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}const ooe=typeof Path2D=="function";function aoe(t,e,n,i){ooe&&!e.options.segment?roe(t,e,n,i):soe(t,e,n,i)}class xh extends el{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){const i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){const r=i.spanGaps?this._loop:this._fullLoop;Qie(this._points,i,e,r,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=mre(this,this.options.segment))}first(){const e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){const e=this.segments,n=this.points,i=e.length;return i&&n[e[i-1].end]}interpolate(e,n){const i=this.options,r=e[n],s=this.points,o=hre(this,{property:n,start:r,end:r});if(!o.length)return;const a=[],l=ioe(i);let c,u;for(c=0,u=o.length;c<u;++c){const{start:h,end:f}=o[c],p=s[h],x=s[f];if(p===x){a.push(p);continue}const y=Math.abs((r-p[n])/(x[n]-p[n])),g=l(p,x,y,i.stepped);g[n]=e[n],a.push(g)}return a.length===1?a[0]:a}pathSegment(e,n,i){return Q_(this)(e,this,n,i)}path(e,n,i){const r=this.segments,s=Q_(this);let o=this._loop;n=n||0,i=i||this.points.length-n;for(const a of r)o&=s(e,this,a,{start:n,end:n+i-1});return!!o}draw(e,n,i,r){const s=this.options||{};(this.points||[]).length&&s.borderWidth&&(e.save(),aoe(e,this,i,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Oe(xh,"id","line"),Oe(xh,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Oe(xh,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Oe(xh,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function D3(t,e,n,i){const r=t.options,{[n]:s}=t.getProps([n],i);return Math.abs(e-s)<r.radius+r.hitRadius}class b0 extends el{constructor(n){super();Oe(this,"parsed");Oe(this,"skip");Oe(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,n&&Object.assign(this,n)}inRange(n,i,r){const s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(n-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(n,i){return D3(this,n,"x",i)}inYRange(n,i){return D3(this,n,"y",i)}getCenterPoint(n){const{x:i,y:r}=this.getProps(["x","y"],n);return{x:i,y:r}}size(n){n=n||this.options||{};let i=n.radius||0;i=Math.max(i,i&&n.hoverRadius||0);const r=i&&n.borderWidth||0;return(i+r)*2}draw(n,i){const r=this.options;this.skip||r.radius<.1||!Lf(this,i,this.size(r)/2)||(n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.fillStyle=r.backgroundColor,q_(n,r,this.x,this.y))}getRange(){const n=this.options||{};return n.radius+n.hitRadius}}Oe(b0,"id","point"),Oe(b0,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Oe(b0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function AD(t,e){const{x:n,y:i,base:r,width:s,height:o}=t.getProps(["x","y","base","width","height"],e);let a,l,c,u,h;return t.horizontal?(h=o/2,a=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=s/2,a=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:a,top:c,right:l,bottom:u}}function Sa(t,e,n,i){return t?0:br(e,n,i)}function loe(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,s=rD(i);return{t:Sa(r.top,s.top,0,n),r:Sa(r.right,s.right,0,e),b:Sa(r.bottom,s.bottom,0,n),l:Sa(r.left,s.left,0,e)}}function coe(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,s=Bu(r),o=Math.min(e,n),a=t.borderSkipped,l=i||Pt(r);return{topLeft:Sa(!l||a.top||a.left,s.topLeft,0,o),topRight:Sa(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Sa(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Sa(!l||a.bottom||a.right,s.bottomRight,0,o)}}function uoe(t){const e=AD(t),n=e.right-e.left,i=e.bottom-e.top,r=loe(t,n/2,i/2),s=coe(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Gv(t,e,n,i){const r=e===null,s=n===null,a=t&&!(r&&s)&&AD(t,i);return a&&(r||$l(e,a.left,a.right))&&(s||$l(n,a.top,a.bottom))}function doe(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function hoe(t,e){t.rect(e.x,e.y,e.w,e.h)}function $v(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,s=(t.x+t.w!==n.x+n.w?e:0)-i,o=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+s,h:t.h+o,radius:t.radius}}class S0 extends el{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:n,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=uoe(this),a=doe(o.radius)?Rg:hoe;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,$v(o,n,s)),e.clip(),a(e,$v(s,-n,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,$v(s,n)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,n,i){return Gv(this,e,n,i)}inXRange(e,n){return Gv(this,e,null,n)}inYRange(e,n){return Gv(this,null,e,n)}getCenterPoint(e){const{x:n,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(n+r)/2:n,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Oe(S0,"id","bar"),Oe(S0,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Oe(S0,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const B3=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}},foe=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class U3 extends el{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n,i){this.maxWidth=e,this.maxHeight=n,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let n=rn(e.generateLabels,[this.chart],this)||[];e.filter&&(n=n.filter(i=>e.filter(i,this.chart.data))),e.sort&&(n=n.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&n.reverse(),this.legendItems=n}fit(){const{options:e,ctx:n}=this;if(!e.display){this.width=this.height=0;return}const i=e.labels,r=Di(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=B3(i,s);let c,u;n.font=r.string,this.isHorizontal()?(c=this.maxWidth,u=this._fitRows(o,s,a,l)+10):(u=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,n,i,r){const{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],u=r+a;let h=e;s.textAlign="left",s.textBaseline="middle";let f=-1,p=-u;return this.legendItems.forEach((x,y)=>{const g=i+n/2+s.measureText(x.text).width;(y===0||c[c.length-1]+g+2*a>o)&&(h+=u,c[c.length-(y>0?0:1)]=0,p+=u,f++),l[y]={left:0,top:p,row:f,width:g,height:r},c[c.length-1]+=g+a}),h}_fitCols(e,n,i,r){const{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],u=o-e;let h=a,f=0,p=0,x=0,y=0;return this.legendItems.forEach((g,m)=>{const{itemWidth:_,itemHeight:w}=poe(i,n,s,g,r);m>0&&p+w+2*a>u&&(h+=f+a,c.push({width:f,height:p}),x+=f+a,y++,f=p=0),l[m]={left:x,top:p,col:y,width:_,height:w},f=Math.max(f,_),p+=w+a}),h+=f,c.push({width:f,height:p}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:n,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Uu(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Li(i,this.left+r,this.right-this.lineWidths[a]);for(const c of n)a!==c.row&&(a=c.row,l=Li(i,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+e+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Li(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(const c of n)c.col!==a&&(a=c.col,l=Li(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;zM(e,this),this._draw(),VM(e)}}_draw(){const{options:e,columnSizes:n,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=jn.color,l=Uu(e.rtl,this.left,this.width),c=Di(o.font),{padding:u}=o,h=c.size,f=h/2;let p;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;const{boxWidth:x,boxHeight:y,itemHeight:g}=B3(o,h),m=function(k,R,B){if(isNaN(x)||x<=0||isNaN(y)||y<0)return;r.save();const L=Et(B.lineWidth,1);if(r.fillStyle=Et(B.fillStyle,a),r.lineCap=Et(B.lineCap,"butt"),r.lineDashOffset=Et(B.lineDashOffset,0),r.lineJoin=Et(B.lineJoin,"miter"),r.lineWidth=L,r.strokeStyle=Et(B.strokeStyle,a),r.setLineDash(Et(B.lineDash,[])),o.usePointStyle){const D={radius:y*Math.SQRT2/2,pointStyle:B.pointStyle,rotation:B.rotation,borderWidth:L},j=l.xPlus(k,x/2),Y=R+f;nD(r,D,j,Y,o.pointStyleWidth&&x)}else{const D=R+Math.max((h-y)/2,0),j=l.leftForLtr(k,x),Y=Bu(B.borderRadius);r.beginPath(),Object.values(Y).some(I=>I!==0)?Rg(r,{x:j,y:D,w:x,h:y,radius:Y}):r.rect(j,D,x,y),r.fill(),L!==0&&r.stroke()}r.restore()},_=function(k,R,B){If(r,B.text,k,R+g/2,c,{strikethrough:B.hidden,textAlign:l.textAlign(B.textAlign)})},w=this.isHorizontal(),S=this._computeTitleHeight();w?p={x:Li(s,this.left+u,this.right-i[0]),y:this.top+u+S,line:0}:p={x:this.left+u,y:Li(s,this.top+S+u,this.bottom-n[0].height),line:0},uD(this.ctx,e.textDirection);const N=g+u;this.legendItems.forEach((k,R)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const B=r.measureText(k.text).width,L=l.textAlign(k.textAlign||(k.textAlign=o.textAlign)),D=x+f+B;let j=p.x,Y=p.y;l.setWidth(this.width),w?R>0&&j+D+u>this.right&&(Y=p.y+=N,p.line++,j=p.x=Li(s,this.left+u,this.right-i[p.line])):R>0&&Y+N>this.bottom&&(j=p.x=j+n[p.line].width+u,p.line++,Y=p.y=Li(s,this.top+S+u,this.bottom-n[p.line].height));const I=l.x(j);if(m(I,Y,k),j=pie(L,j+x+f,w?j+D:this.right,e.rtl),_(l.x(j),Y,k),w)p.x+=D+u;else if(typeof k.text!="string"){const v=c.lineHeight;p.y+=CD(k,v)+u}else p.y+=N}),dD(this.ctx,e.textDirection)}drawTitle(){const e=this.options,n=e.title,i=Di(n.font),r=Qr(n.padding);if(!n.display)return;const s=Uu(e.rtl,this.left,this.width),o=this.ctx,a=n.position,l=i.size/2,c=r.top+l;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+c,h=Li(e.align,h,this.right-f);else{const x=this.columnSizes.reduce((y,g)=>Math.max(y,g.height),0);u=c+Li(e.align,this.top,this.bottom-x-e.labels.padding-this._computeTitleHeight())}const p=Li(a,h,h+f);o.textAlign=s.textAlign(jM(a)),o.textBaseline="middle",o.strokeStyle=n.color,o.fillStyle=n.color,o.font=i.string,If(o,n.text,p,u,i)}_computeTitleHeight(){const e=this.options.title,n=Di(e.font),i=Qr(e.padding);return e.display?n.lineHeight+i.height:0}_getLegendItemAt(e,n){let i,r,s;if($l(e,this.left,this.right)&&$l(n,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],$l(e,r.left,r.left+r.width)&&$l(n,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){const n=this.options;if(!xoe(e.type,n))return;const i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,s=foe(r,i);r&&!s&&rn(n.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&rn(n.onHover,[e,i,this],this)}else i&&rn(n.onClick,[e,i,this],this)}}function poe(t,e,n,i,r){const s=moe(i,t,e,n),o=goe(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function moe(t,e,n,i){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+n.size/2+i.measureText(r).width}function goe(t,e,n){let i=t;return typeof e.text!="string"&&(i=CD(e,n)),i}function CD(t,e){const n=t.text?t.text.length:0;return e*n}function xoe(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var yoe={id:"legend",_element:U3,start(t,e,n){const i=t.legend=new U3({ctx:t.ctx,options:n,chart:t});Gr.configure(t,i,n),Gr.addBox(t,i)},stop(t){Gr.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Gr.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=t.legend.options;return t._getSortedDatasetMetas().map(l=>{const c=l.controller.getStyle(n?0:void 0),u=Qr(c.borderWidth);return{text:e[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:c.borderColor,pointStyle:i||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ND extends el{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,n){const i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=n;const r=Zn(i.text)?i.text.length:1;this._padding=Qr(i.padding);const s=r*Di(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:n,left:i,bottom:r,right:s,options:o}=this,a=o.align;let l=0,c,u,h;return this.isHorizontal()?(u=Li(a,i,s),h=n+e,c=s-i):(o.position==="left"?(u=i+e,h=Li(a,r,n),l=ci*-.5):(u=s-e,h=Li(a,n,r),l=ci*.5),c=r-n),{titleX:u,titleY:h,maxWidth:c,rotation:l}}draw(){const e=this.ctx,n=this.options;if(!n.display)return;const i=Di(n.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);If(e,n.text,0,0,i,{color:n.color,maxWidth:l,rotation:c,textAlign:jM(n.align),textBaseline:"middle",translation:[o,a]})}}function voe(t,e){const n=new ND({ctx:t.ctx,options:e,chart:t});Gr.configure(t,n,e),Gr.addBox(t,n),t.titleBlock=n}var woe={id:"title",_element:ND,start(t,e,n){voe(t,n)},stop(t){const e=t.titleBlock;Gr.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Gr.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const yh={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,s=0;for(e=0,n=t.length;e<n;++e){const a=t[e].element;if(a&&a.hasValue()){const l=a.tooltipPosition();i.add(l.x),r+=l.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,l)=>a+l)/i.size,y:r/s}},nearest(t,e){if(!t.length)return!1;let n=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=t.length;s<o;++s){const l=t[s].element;if(l&&l.hasValue()){const c=l.getCenterPoint(),u=Y_(e,c);u<r&&(r=u,a=l)}}if(a){const l=a.tooltipPosition();n=l.x,i=l.y}return{x:n,y:i}}};function Es(t,e){return e&&(Zn(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ao(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function _oe(t,e){const{element:n,datasetIndex:i,index:r}=e,s=t.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:t,label:o,parsed:s.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function O3(t,e){const n=t.chart.ctx,{body:i,footer:r,title:s}=t,{boxWidth:o,boxHeight:a}=e,l=Di(e.bodyFont),c=Di(e.titleFont),u=Di(e.footerFont),h=s.length,f=r.length,p=i.length,x=Qr(e.padding);let y=x.height,g=0,m=i.reduce((S,N)=>S+N.before.length+N.lines.length+N.after.length,0);if(m+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),m){const S=e.displayColors?Math.max(a,l.lineHeight):l.lineHeight;y+=p*S+(m-p)*l.lineHeight+(m-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let _=0;const w=function(S){g=Math.max(g,n.measureText(S).width+_)};return n.save(),n.font=c.string,Ft(t.title,w),n.font=l.string,Ft(t.beforeBody.concat(t.afterBody),w),_=e.displayColors?o+2+e.boxPadding:0,Ft(i,S=>{Ft(S.before,w),Ft(S.lines,w),Ft(S.after,w)}),_=0,n.font=u.string,Ft(t.footer,w),n.restore(),g+=x.width,{width:g,height:y}}function boe(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}function Soe(t,e,n,i){const{x:r,width:s}=i,o=n.caretSize+n.caretPadding;if(t==="left"&&r+s+o>e.width||t==="right"&&r-s-o<0)return!0}function Moe(t,e,n,i){const{x:r,width:s}=n,{width:o,chartArea:{left:a,right:l}}=t;let c="center";return i==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),Soe(c,t,e,n)&&(c="center"),c}function j3(t,e,n){const i=n.yAlign||e.yAlign||boe(t,n);return{xAlign:n.xAlign||e.xAlign||Moe(t,e,n,i),yAlign:i}}function Eoe(t,e){let{x:n,width:i}=t;return e==="right"?n-=i:e==="center"&&(n-=i/2),n}function Toe(t,e,n){let{y:i,height:r}=t;return e==="top"?i+=n:e==="bottom"?i-=r+n:i-=r/2,i}function F3(t,e,n,i){const{caretSize:r,caretPadding:s,cornerRadius:o}=t,{xAlign:a,yAlign:l}=n,c=r+s,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:p}=Bu(o);let x=Eoe(e,a);const y=Toe(e,l,c);return l==="center"?a==="left"?x+=c:a==="right"&&(x-=c):a==="left"?x-=Math.max(u,f)+r:a==="right"&&(x+=Math.max(h,p)+r),{x:br(x,0,i.width-e.width),y:br(y,0,i.height-e.height)}}function Am(t,e,n){const i=Qr(n.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-i.right:t.x+i.left}function z3(t){return Es([],ao(t))}function Aoe(t,e,n){return Sc(t,{tooltip:e,tooltipItems:n,type:"tooltip"})}function V3(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const RD={beforeTitle:io,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:io,beforeBody:io,beforeLabel:io,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return Ut(n)||(e+=n),e},labelColor(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:n.borderColor,backgroundColor:n.backgroundColor,borderWidth:n.borderWidth,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const n=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:n.pointStyle,rotation:n.rotation}},afterLabel:io,afterBody:io,beforeFooter:io,footer:io,afterFooter:io};function Ki(t,e,n,i){const r=t[e].call(n,i);return typeof r>"u"?RD[e].call(n,i):r}class J_ extends el{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const n=this.chart,i=this.options.setContext(this.getContext()),r=i.enabled&&n.options.animation&&i.animations,s=new fD(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(s)),s}getContext(){return this.$context||(this.$context=Aoe(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){const{callbacks:i}=n,r=Ki(i,"beforeTitle",this,e),s=Ki(i,"title",this,e),o=Ki(i,"afterTitle",this,e);let a=[];return a=Es(a,ao(r)),a=Es(a,ao(s)),a=Es(a,ao(o)),a}getBeforeBody(e,n){return z3(Ki(n.callbacks,"beforeBody",this,e))}getBody(e,n){const{callbacks:i}=n,r=[];return Ft(e,s=>{const o={before:[],lines:[],after:[]},a=V3(i,s);Es(o.before,ao(Ki(a,"beforeLabel",this,s))),Es(o.lines,Ki(a,"label",this,s)),Es(o.after,ao(Ki(a,"afterLabel",this,s))),r.push(o)}),r}getAfterBody(e,n){return z3(Ki(n.callbacks,"afterBody",this,e))}getFooter(e,n){const{callbacks:i}=n,r=Ki(i,"beforeFooter",this,e),s=Ki(i,"footer",this,e),o=Ki(i,"afterFooter",this,e);let a=[];return a=Es(a,ao(r)),a=Es(a,ao(s)),a=Es(a,ao(o)),a}_createItems(e){const n=this._active,i=this.chart.data,r=[],s=[],o=[];let a=[],l,c;for(l=0,c=n.length;l<c;++l)a.push(_oe(this.chart,n[l]));return e.filter&&(a=a.filter((u,h,f)=>e.filter(u,h,f,i))),e.itemSort&&(a=a.sort((u,h)=>e.itemSort(u,h,i))),Ft(a,u=>{const h=V3(e.callbacks,u);r.push(Ki(h,"labelColor",this,u)),s.push(Ki(h,"labelPointStyle",this,u)),o.push(Ki(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=s,this.labelTextColors=o,this.dataPoints=a,a}update(e,n){const i=this.options.setContext(this.getContext()),r=this._active;let s,o=[];if(!r.length)this.opacity!==0&&(s={opacity:0});else{const a=yh[i.position].call(this,r,this._eventPosition);o=this._createItems(i),this.title=this.getTitle(o,i),this.beforeBody=this.getBeforeBody(o,i),this.body=this.getBody(o,i),this.afterBody=this.getAfterBody(o,i),this.footer=this.getFooter(o,i);const l=this._size=O3(this,i),c=Object.assign({},a,l),u=j3(this.chart,i,c),h=F3(i,c,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,s={opacity:1,x:h.x,y:h.y,width:l.width,height:l.height,caretX:a.x,caretY:a.y}}this._tooltipItems=o,this.$context=void 0,s&&this._resolveAnimations().update(this,s),e&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,i,r){const s=this.getCaretPosition(e,i,r);n.lineTo(s.x1,s.y1),n.lineTo(s.x2,s.y2),n.lineTo(s.x3,s.y3)}getCaretPosition(e,n,i){const{xAlign:r,yAlign:s}=this,{caretSize:o,cornerRadius:a}=i,{topLeft:l,topRight:c,bottomLeft:u,bottomRight:h}=Bu(a),{x:f,y:p}=e,{width:x,height:y}=n;let g,m,_,w,S,N;return s==="center"?(S=p+y/2,r==="left"?(g=f,m=g-o,w=S+o,N=S-o):(g=f+x,m=g+o,w=S-o,N=S+o),_=g):(r==="left"?m=f+Math.max(l,u)+o:r==="right"?m=f+x-Math.max(c,h)-o:m=this.caretX,s==="top"?(w=p,S=w-o,g=m-o,_=m+o):(w=p+y,S=w+o,g=m+o,_=m-o),N=w),{x1:g,x2:m,x3:_,y1:w,y2:S,y3:N}}drawTitle(e,n,i){const r=this.title,s=r.length;let o,a,l;if(s){const c=Uu(i.rtl,this.x,this.width);for(e.x=Am(this,i.titleAlign,i),n.textAlign=c.textAlign(i.titleAlign),n.textBaseline="middle",o=Di(i.titleFont),a=i.titleSpacing,n.fillStyle=i.titleColor,n.font=o.string,l=0;l<s;++l)n.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+a,l+1===s&&(e.y+=i.titleMarginBottom-a)}}_drawColorBox(e,n,i,r,s){const o=this.labelColors[i],a=this.labelPointStyles[i],{boxHeight:l,boxWidth:c}=s,u=Di(s.bodyFont),h=Am(this,"left",s),f=r.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,x=n.y+p;if(s.usePointStyle){const y={radius:Math.min(c,l)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},g=r.leftForLtr(f,c)+c/2,m=x+l/2;e.strokeStyle=s.multiKeyBackground,e.fillStyle=s.multiKeyBackground,q_(e,y,g,m),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,q_(e,y,g,m)}else{e.lineWidth=Pt(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(f,c),g=r.leftForLtr(r.xPlus(f,1),c-2),m=Bu(o.borderRadius);Object.values(m).some(_=>_!==0)?(e.beginPath(),e.fillStyle=s.multiKeyBackground,Rg(e,{x:y,y:x,w:c,h:l,radius:m}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Rg(e,{x:g,y:x+1,w:c-2,h:l-2,radius:m}),e.fill()):(e.fillStyle=s.multiKeyBackground,e.fillRect(y,x,c,l),e.strokeRect(y,x,c,l),e.fillStyle=o.backgroundColor,e.fillRect(g,x+1,c-2,l-2))}e.fillStyle=this.labelTextColors[i]}drawBody(e,n,i){const{body:r}=this,{bodySpacing:s,bodyAlign:o,displayColors:a,boxHeight:l,boxWidth:c,boxPadding:u}=i,h=Di(i.bodyFont);let f=h.lineHeight,p=0;const x=Uu(i.rtl,this.x,this.width),y=function(B){n.fillText(B,x.x(e.x+p),e.y+f/2),e.y+=f+s},g=x.textAlign(o);let m,_,w,S,N,k,R;for(n.textAlign=o,n.textBaseline="middle",n.font=h.string,e.x=Am(this,g,i),n.fillStyle=i.bodyColor,Ft(this.beforeBody,y),p=a&&g!=="right"?o==="center"?c/2+u:c+2+u:0,S=0,k=r.length;S<k;++S){for(m=r[S],_=this.labelTextColors[S],n.fillStyle=_,Ft(m.before,y),w=m.lines,a&&w.length&&(this._drawColorBox(n,e,S,x,i),f=Math.max(h.lineHeight,l)),N=0,R=w.length;N<R;++N)y(w[N]),f=h.lineHeight;Ft(m.after,y)}p=0,f=h.lineHeight,Ft(this.afterBody,y),e.y-=s}drawFooter(e,n,i){const r=this.footer,s=r.length;let o,a;if(s){const l=Uu(i.rtl,this.x,this.width);for(e.x=Am(this,i.footerAlign,i),e.y+=i.footerMarginTop,n.textAlign=l.textAlign(i.footerAlign),n.textBaseline="middle",o=Di(i.footerFont),n.fillStyle=i.footerColor,n.font=o.string,a=0;a<s;++a)n.fillText(r[a],l.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+i.footerSpacing}}drawBackground(e,n,i,r){const{xAlign:s,yAlign:o}=this,{x:a,y:l}=e,{width:c,height:u}=i,{topLeft:h,topRight:f,bottomLeft:p,bottomRight:x}=Bu(r.cornerRadius);n.fillStyle=r.backgroundColor,n.strokeStyle=r.borderColor,n.lineWidth=r.borderWidth,n.beginPath(),n.moveTo(a+h,l),o==="top"&&this.drawCaret(e,n,i,r),n.lineTo(a+c-f,l),n.quadraticCurveTo(a+c,l,a+c,l+f),o==="center"&&s==="right"&&this.drawCaret(e,n,i,r),n.lineTo(a+c,l+u-x),n.quadraticCurveTo(a+c,l+u,a+c-x,l+u),o==="bottom"&&this.drawCaret(e,n,i,r),n.lineTo(a+p,l+u),n.quadraticCurveTo(a,l+u,a,l+u-p),o==="center"&&s==="left"&&this.drawCaret(e,n,i,r),n.lineTo(a,l+h),n.quadraticCurveTo(a,l,a+h,l),n.closePath(),n.fill(),r.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){const n=this.chart,i=this.$animations,r=i&&i.x,s=i&&i.y;if(r||s){const o=yh[e.position].call(this,this._active,this._eventPosition);if(!o)return;const a=this._size=O3(this,e),l=Object.assign({},o,this._size),c=j3(n,e,l),u=F3(e,l,c,n);(r._to!==u.x||s._to!==u.y)&&(this.xAlign=c.xAlign,this.yAlign=c.yAlign,this.width=a.width,this.height=a.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const n=this.options.setContext(this.getContext());let i=this.opacity;if(!i)return;this._updateAnimationTarget(n);const r={width:this.width,height:this.height},s={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;const o=Qr(n.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&a&&(e.save(),e.globalAlpha=i,this.drawBackground(s,e,r,n),uD(e,n.textDirection),s.y+=o.top,this.drawTitle(s,e,n),this.drawBody(s,e,n),this.drawFooter(s,e,n),dD(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){const i=this._active,r=e.map(({datasetIndex:a,index:l})=>{const c=this.chart.getDatasetMeta(a);if(!c)throw new Error("Cannot find a dataset at index "+a);return{datasetIndex:a,element:c.data[l],index:l}}),s=!Ag(i,r),o=this._positionChanged(r,n);(s||o)&&(this._active=r,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,i=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,s=this._active||[],o=this._getActiveElements(e,s,n,i),a=this._positionChanged(o,e),l=n||!Ag(o,s)||a;return l&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),l}_getActiveElements(e,n,i,r){const s=this.options;if(e.type==="mouseout")return[];if(!r)return n.filter(a=>this.chart.data.datasets[a.datasetIndex]&&this.chart.getDatasetMeta(a.datasetIndex).controller.getParsed(a.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,s.mode,s,i);return s.reverse&&o.reverse(),o}_positionChanged(e,n){const{caretX:i,caretY:r,options:s}=this,o=yh[s.position].call(this,e,n);return o!==!1&&(i!==o.x||r!==o.y)}}Oe(J_,"positioners",yh);var Coe={id:"tooltip",_element:J_,positioners:yh,afterInit(t,e,n){n&&(t.tooltip=new J_({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:RD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const Noe=(t,e,n,i)=>(typeof e=="string"?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n);function Roe(t,e,n,i){const r=t.indexOf(e);if(r===-1)return Noe(t,e,n,i);const s=t.lastIndexOf(e);return r!==s?n:r}const Loe=(t,e)=>t===null?null:br(Math.round(t),0,e);function W3(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class eb extends Ad{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const n=this._addedLabels;if(n.length){const i=this.getLabels();for(const{index:r,label:s}of n)i[r]===s&&i.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(Ut(e))return null;const i=this.getLabels();return n=isFinite(n)&&i[n]===e?n:Roe(i,e,Et(n,e),this._addedLabels),Loe(n,i.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(i=0),n||(r=this.getLabels().length-1)),this.min=i,this.max=r}buildTicks(){const e=this.min,n=this.max,i=this.options.offset,r=[];let s=this.getLabels();s=e===0&&n===s.length-1?s:s.slice(e,n+1),this._valueRange=Math.max(s.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let o=e;o<=n;o++)r.push({value:o});return r}getLabelForValue(e){return W3.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Oe(eb,"id","category"),Oe(eb,"defaults",{ticks:{callback:W3}});function Ioe(t,e){const n=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:f}=t,p=s||1,x=u-1,{min:y,max:g}=e,m=!Ut(o),_=!Ut(a),w=!Ut(c),S=(g-y)/(h+1);let N=GC((g-y)/x/p)*p,k,R,B,L;if(N<1e-14&&!m&&!_)return[{value:y},{value:g}];L=Math.ceil(g/N)-Math.floor(y/N),L>x&&(N=GC(L*N/x/p)*p),Ut(l)||(k=Math.pow(10,l),N=Math.ceil(N*k)/k),r==="ticks"?(R=Math.floor(y/N)*N,B=Math.ceil(g/N)*N):(R=y,B=g),m&&_&&s&&rie((a-o)/s,N/1e3)?(L=Math.round(Math.min((a-o)/N,u)),N=(a-o)/L,R=o,B=a):w?(R=m?o:R,B=_?a:B,L=c-1,N=(B-R)/L):(L=(B-R)/N,Oh(L,Math.round(L),N/1e3)?L=Math.round(L):L=Math.ceil(L));const D=Math.max($C(N),$C(R));k=Math.pow(10,Ut(l)?D:l),R=Math.round(R*k)/k,B=Math.round(B*k)/k;let j=0;for(m&&(f&&R!==o?(n.push({value:o}),R<o&&j++,Oh(Math.round((R+j*N)*k)/k,o,H3(o,S,t))&&j++):R<o&&j++);j<L;++j){const Y=Math.round((R+j*N)*k)/k;if(_&&Y>a)break;n.push({value:Y})}return _&&f&&B!==a?n.length&&Oh(n[n.length-1].value,a,H3(a,S,t))?n[n.length-1].value=a:n.push({value:a}):(!_||B===a)&&n.push({value:B}),n}function H3(t,e,{horizontal:n,minRotation:i}){const r=Gl(i),s=(n?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/s,o)}class koe extends Ad{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,n){return Ut(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:n,maxDefined:i}=this.getUserBounds();let{min:r,max:s}=this;const o=l=>r=n?r:l,a=l=>s=i?s:l;if(e){const l=Ws(r),c=Ws(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),e||o(r-l)}this.min=r,this.max=s}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:n,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),n=n||11),n&&(r=Math.min(n,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,n=e.ticks;let i=this.getTickLimit();i=Math.max(2,i);const r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:n.precision,step:n.stepSize,count:n.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:n.minRotation||0,includeBounds:n.includeBounds!==!1},s=this._range||this,o=Ioe(r,s);return e.bounds==="ticks"&&sie(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let n=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){const r=(i-n)/Math.max(e.length-1,1)/2;n-=r,i+=r}this._startValue=n,this._endValue=i,this._valueRange=i-n}getLabelForValue(e){return eD(e,this.chart.options.locale,this.options.ticks.format)}}class tb extends koe{determineDataLimits(){const{min:e,max:n}=this.getMinMax(!0);this.min=Zr(e)?e:0,this.max=Zr(n)?n:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),n=e?this.width:this.height,i=Gl(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(n/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Oe(tb,"id","linear"),Oe(tb,"defaults",{ticks:{callback:tD.formatters.numeric}});const Px={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},er=Object.keys(Px);function G3(t,e){return t-e}function $3(t,e){if(Ut(e))return null;const n=t._adapter,{parser:i,round:r,isoWeekday:s}=t._parseOpts;let o=e;return typeof i=="function"&&(o=i(o)),Zr(o)||(o=typeof i=="string"?n.parse(o,i):n.parse(o)),o===null?null:(r&&(o=r==="week"&&(Rf(s)||s===!0)?n.startOf(o,"isoWeek",s):n.startOf(o,r)),+o)}function Y3(t,e,n,i){const r=er.length;for(let s=er.indexOf(t);s<r-1;++s){const o=Px[er[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((n-e)/(a*o.size))<=i)return er[s]}return er[r-1]}function Poe(t,e,n,i,r){for(let s=er.length-1;s>=er.indexOf(n);s--){const o=er[s];if(Px[o].common&&t._adapter.diff(r,i,o)>=e-1)return o}return er[n?er.indexOf(n):0]}function Doe(t){for(let e=er.indexOf(t)+1,n=er.length;e<n;++e)if(Px[er[e]].common)return er[e]}function X3(t,e,n){if(!n)t[e]=!0;else if(n.length){const{lo:i,hi:r}=OM(n,e),s=n[i]>=e?n[i]:n[r];t[s]=!0}}function Boe(t,e,n,i){const r=t._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value;let a,l;for(a=s;a<=o;a=+r.add(a,1,i))l=n[a],l>=0&&(e[l].major=!0);return e}function q3(t,e,n){const i=[],r={},s=e.length;let o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!n?i:Boe(t,i,r,n)}class kg extends Ad{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){const i=e.time||(e.time={}),r=this._adapter=new Hre._date(e.adapters.date);r.init(n),Uh(i.displayFormats,r.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:$3(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,n=this._adapter,i=e.time.unit||"day";let{min:r,max:s,minDefined:o,maxDefined:a}=this.getUserBounds();function l(c){!o&&!isNaN(c.min)&&(r=Math.min(r,c.min)),!a&&!isNaN(c.max)&&(s=Math.max(s,c.max))}(!o||!a)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),r=Zr(r)&&!isNaN(r)?r:+n.startOf(Date.now(),i),s=Zr(s)&&!isNaN(s)?s:+n.endOf(Date.now(),i)+1,this.min=Math.min(r,s-1),this.max=Math.max(r+1,s)}_getLabelBounds(){const e=this.getLabelTimestamps();let n=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],i=e[e.length-1]),{min:n,max:i}}buildTicks(){const e=this.options,n=e.time,i=e.ticks,r=i.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const s=this.min,o=this.max,a=die(r,s,o);return this._unit=n.unit||(i.autoSkip?Y3(n.minUnit,this.min,this.max,this._getLabelCapacity(s)):Poe(this,a.length,n.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:Doe(this._unit),this.initOffsets(r),e.reverse&&a.reverse(),q3(this,a,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,i=0,r,s;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?n=1-r:n=(this.getDecimalForValue(e[1])-r)/2,s=this.getDecimalForValue(e[e.length-1]),e.length===1?i=s:i=(s-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;n=br(n,0,o),i=br(i,0,o),this._offsets={start:n,end:i,factor:1/(n+1+i)}}_generate(){const e=this._adapter,n=this.min,i=this.max,r=this.options,s=r.time,o=s.unit||Y3(s.minUnit,n,i,this._getLabelCapacity(n)),a=Et(r.ticks.stepSize,1),l=o==="week"?s.isoWeekday:!1,c=Rf(l)||l===!0,u={};let h=n,f,p;if(c&&(h=+e.startOf(h,"isoWeek",l)),h=+e.startOf(h,c?"day":o),e.diff(i,n,o)>1e5*a)throw new Error(n+" and "+i+" are too far apart with stepSize of "+a+" "+o);const x=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,p=0;f<i;f=+e.add(f,a,o),p++)X3(u,f,x);return(f===i||r.bounds==="ticks"||p===1)&&X3(u,f,x),Object.keys(u).sort(G3).map(y=>+y)}getLabelForValue(e){const n=this._adapter,i=this.options.time;return i.tooltipFormat?n.format(e,i.tooltipFormat):n.format(e,i.displayFormats.datetime)}format(e,n){const r=this.options.time.displayFormats,s=this._unit,o=n||r[s];return this._adapter.format(e,o)}_tickFormatFunction(e,n,i,r){const s=this.options,o=s.ticks.callback;if(o)return rn(o,[e,n,i],this);const a=s.time.displayFormats,l=this._unit,c=this._majorUnit,u=l&&a[l],h=c&&a[c],f=i[n],p=c&&h&&f&&f.major;return this._adapter.format(e,r||(p?h:u))}generateTickLabels(e){let n,i,r;for(n=0,i=e.length;n<i;++n)r=e[n],r.label=this._tickFormatFunction(r.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const n=this._offsets,i=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+i)*n.factor)}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+i*(this.max-this.min)}_getLabelSize(e){const n=this.options.ticks,i=this.ctx.measureText(e).width,r=Gl(this.isHorizontal()?n.maxRotation:n.minRotation),s=Math.cos(r),o=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:i*s+a*o,h:i*o+a*s}}_getLabelCapacity(e){const n=this.options.time,i=n.displayFormats,r=i[n.unit]||i.millisecond,s=this._tickFormatFunction(e,0,q3(this,[e],this._majorUnit),r),o=this._getLabelSize(s),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let e=this._cache.data||[],n,i;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(n=0,i=r.length;n<i;++n)e=e.concat(r[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let n,i;if(e.length)return e;const r=this.getLabels();for(n=0,i=r.length;n<i;++n)e.push($3(this,r[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Z5(e.sort(G3))}}Oe(kg,"id","time"),Oe(kg,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Cm(t,e,n){let i=0,r=t.length-1,s,o,a,l;n?(e>=t[i].pos&&e<=t[r].pos&&({lo:i,hi:r}=Yl(t,"pos",e)),{pos:s,time:a}=t[i],{pos:o,time:l}=t[r]):(e>=t[i].time&&e<=t[r].time&&({lo:i,hi:r}=Yl(t,"time",e)),{time:s,pos:a}=t[i],{time:o,pos:l}=t[r]);const c=o-s;return c?a+(l-a)*(e-s)/c:a}class K3 extends kg{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),n=this._table=this.buildLookupTable(e);this._minPos=Cm(n,this.min),this._tableRange=Cm(n,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:n,max:i}=this,r=[],s=[];let o,a,l,c,u;for(o=0,a=e.length;o<a;++o)c=e[o],c>=n&&c<=i&&r.push(c);if(r.length<2)return[{time:n,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)u=r[o+1],l=r[o-1],c=r[o],Math.round((u+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){const e=this.min,n=this.max;let i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(n)||i.length===1)&&i.push(n),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const n=this.getDataTimestamps(),i=this.getLabelTimestamps();return n.length&&i.length?e=this.normalize(n.concat(i)):e=n.length?n:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Cm(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const n=this._offsets,i=this.getDecimalForPixel(e)/n.factor-n.end;return Cm(this._table,i*this._tableRange+this._minPos,!0)}}Oe(K3,"id","timeseries"),Oe(K3,"defaults",kg.defaults);const LD="label";function Z3(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function Uoe(t,e){const n=t.options;n&&e&&Object.assign(n,e)}function ID(t,e){t.labels=e}function kD(t,e,n=LD){const i=[];t.datasets=e.map(r=>{const s=t.datasets.find(o=>o[n]===r[n]);return!s||!r.data||i.includes(s)?{...r}:(i.push(s),Object.assign(s,r),s)})}function Ooe(t,e=LD){const n={labels:[],datasets:[]};return ID(n,t.labels),kD(n,t.datasets,e),n}function joe(t,e){const{height:n=150,width:i=300,redraw:r=!1,datasetIdKey:s,type:o,data:a,options:l,plugins:c=[],fallbackContent:u,updateMode:h,...f}=t,p=F.useRef(null),x=F.useRef(null),y=()=>{p.current&&(x.current=new kx(p.current,{type:o,data:Ooe(a,s),options:l&&{...l},plugins:c}),Z3(e,x.current))},g=()=>{Z3(e,null),x.current&&(x.current.destroy(),x.current=null)};return F.useEffect(()=>{!r&&x.current&&l&&Uoe(x.current,l)},[r,l]),F.useEffect(()=>{!r&&x.current&&ID(x.current.config.data,a.labels)},[r,a.labels]),F.useEffect(()=>{!r&&x.current&&a.datasets&&kD(x.current.config.data,a.datasets,s)},[r,a.datasets]),F.useEffect(()=>{x.current&&(r?(g(),setTimeout(y)):x.current.update(h))},[r,l,a.labels,a.datasets,h]),F.useEffect(()=>{x.current&&(g(),setTimeout(y))},[o]),F.useEffect(()=>(y(),()=>g()),[]),d.jsx("canvas",{ref:p,role:"img",height:n,width:i,...f,children:u})}const Foe=F.forwardRef(joe);function PD(t,e){return kx.register(e),F.forwardRef((n,i)=>d.jsx(Foe,{...n,ref:i,type:t}))}const zoe=PD("line",v0),Voe=PD("bar",y0);kx.register(eb,tb,b0,xh,S0,woe,Coe,yoe);function Woe({creatorWallet:t}){const[e,n]=F.useState(null),[i,r]=F.useState(!0),[s,o]=F.useState("7d");F.useEffect(()=>{a();const h=setInterval(a,3e4);return()=>clearInterval(h)},[t,s]);const a=async()=>{try{const h=await fetch(`/api/creator/analytics?wallet=${t}&range=${s}`);if(h.ok){const f=await h.json();n(f)}}catch(h){console.error("Failed to fetch analytics:",h)}finally{r(!1)}};if(i)return d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-flix-primary border-t-transparent"})});if(!e)return d.jsx("div",{className:"glass-effect rounded-xl p-8 text-center",children:d.jsx("p",{className:"text-gray-400",children:"No analytics data available yet"})});const l={labels:e.revenueChart.labels,datasets:[{label:"Revenue (USDC)",data:e.revenueChart.data,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4}]},c={labels:e.viewsChart.labels,datasets:[{label:"Views",data:e.viewsChart.data,backgroundColor:"rgba(139, 92, 246, 0.8)",borderColor:"rgb(139, 92, 246)",borderWidth:1}]},u={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"#9CA3AF"}}},scales:{x:{ticks:{color:"#9CA3AF"},grid:{color:"rgba(255, 255, 255, 0.05)"}},y:{ticks:{color:"#9CA3AF"},grid:{color:"rgba(255, 255, 255, 0.05)"}}}};return d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex justify-between items-center",children:[d.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics Dashboard"}),d.jsx("div",{className:"flex space-x-2",children:["7d","30d","90d"].map(h=>d.jsx("button",{onClick:()=>o(h),className:`px-4 py-2 rounded-lg text-sm font-medium transition ${s===h?"gradient-bg text-white":"bg-white/5 text-gray-400 hover:bg-white/10"}`,children:h==="7d"?"7 Days":h==="30d"?"30 Days":"90 Days"},h))})]}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm text-gray-400",children:"Today's Revenue"}),d.jsx("span",{className:"text-2xl",children:""})]}),d.jsxs("div",{className:"text-2xl font-bold text-green-400",children:["$",e.todayStats.revenue.toFixed(2)]}),d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"USDC"})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm text-gray-400",children:"Today's Views"}),d.jsx("span",{className:"text-2xl",children:""})]}),d.jsx("div",{className:"text-2xl font-bold text-flix-primary",children:e.todayStats.views.toLocaleString()})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm text-gray-400",children:"Comments"}),d.jsx("span",{className:"text-2xl",children:""})]}),d.jsx("div",{className:"text-2xl font-bold text-flix-secondary",children:e.todayStats.comments})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm text-gray-400",children:"Subscribers"}),d.jsx("span",{className:"text-2xl",children:""})]}),d.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:e.todayStats.subscribers})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl relative overflow-hidden",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("span",{className:"text-sm text-gray-400",children:"Live Viewers"}),d.jsx("span",{className:"text-2xl animate-pulse",children:""})]}),d.jsx("div",{className:"text-2xl font-bold text-red-400",children:e.liveViewers}),d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"watching now"})]})]}),d.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Revenue Over Time"}),d.jsx("div",{style:{height:"300px"},children:d.jsx(zoe,{data:l,options:u})})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Views Over Time"}),d.jsx("div",{style:{height:"300px"},children:d.jsx(Voe,{data:c,options:u})})]})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Performing Videos"}),d.jsxs("div",{className:"space-y-3",children:[e.topVideos.map((h,f)=>d.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-white/5 rounded-lg hover:bg-white/10 transition",children:[d.jsxs("div",{className:"text-2xl font-bold text-flix-primary w-8",children:["#",f+1]}),h.thumbnail_url&&d.jsx("img",{src:h.thumbnail_url,alt:h.title,className:"w-24 h-14 object-cover rounded"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"font-medium text-white",children:h.title}),d.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-400",children:[d.jsxs("span",{children:[" ",h.views.toLocaleString()," views"]}),d.jsxs("span",{children:[" $",h.revenue.toFixed(2)," earned"]})]})]})]},h.id)),e.topVideos.length===0&&d.jsx("div",{className:"text-center py-8 text-gray-400",children:"No video data available yet"})]})]})]})}function Hoe({creatorWallet:t,onVideoUpdated:e}){const[n,i]=F.useState([]),[r,s]=F.useState(!0),[o,a]=F.useState(null),[l,c]=F.useState(null),[u,h]=F.useState(null),[f,p]=F.useState(!1),[x,y]=F.useState(null),[g,m]=F.useState({title:"",description:"",price_usdc:"",comments_enabled:!0,comment_price:"0.01"});F.useEffect(()=>{_()},[t]);const _=async()=>{try{const j=await fetch("/api/users/creator-videos",{headers:{"x-wallet-address":t}});if(j.ok){const Y=await j.json();i(Y.videos||[])}}catch(j){console.error("Failed to fetch videos:",j)}finally{s(!1)}},w=j=>{var Y;a(j.id),m({title:j.title,description:j.description||"",price_usdc:j.price_usdc.toString(),comments_enabled:j.comments_enabled,comment_price:((Y=j.comment_price)==null?void 0:Y.toString())||"0.01"})},S=()=>{a(null),m({title:"",description:"",price_usdc:"",comments_enabled:!0,comment_price:"0.01"})},N=async j=>{try{if(!(await fetch(`/api/videos/${j}/edit`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:g.title,description:g.description,price_usdc:parseFloat(g.price_usdc),comments_enabled:g.comments_enabled,comment_price:g.comments_enabled?parseFloat(g.comment_price):null,creator_wallet:t})})).ok)throw new Error("Failed to update video");await _(),a(null),e==null||e()}catch(Y){console.error("Failed to update video:",Y),alert("Failed to update video. Please try again.")}},k=async(j,Y)=>{if(!Y.type.startsWith("image/")){alert("Please upload an image file");return}if(Y.size>5*1024*1024){alert("Image must be less than 5MB");return}c(j);try{const I=new FormData;if(I.append("thumbnail",Y),I.append("creator_wallet",t),!(await fetch(`/api/videos/${j}/thumbnail`,{method:"POST",body:I})).ok)throw new Error("Failed to upload thumbnail");await _(),e==null||e()}catch(I){console.error("Failed to upload thumbnail:",I),alert("Failed to upload thumbnail. Please try again.")}finally{c(null)}},R=j=>{h(j)},B=async()=>{if(u){console.log("Delete confirmed for video:",u.id),console.log("Creator wallet:",t),p(!0);try{const j=await fetch(`/api/videos/${u.id}`,{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({creator_wallet:t})});if(console.log("DELETE response status:",j.status),j.status===404){console.log(" Video already deleted from database, removing from UI"),i(Y=>Y.filter(I=>I.id!==u.id)),h(null),p(!1),setTimeout(()=>{window.location.reload()},500);return}if(!j.ok){const Y=await j.json();throw console.error("DELETE failed with error:",Y),new Error(Y.error||"Failed to delete video")}console.log(" Video deleted successfully from server"),i(Y=>Y.filter(I=>I.id!==u.id)),h(null),p(!1),console.log(" Video removed from UI instantly"),setTimeout(()=>{window.location.reload()},500)}catch(j){console.error("Failed to delete video:",j),p(!1),alert(`Failed to delete video: ${j.message}`)}}},L=()=>{h(null)},D=async j=>{const Y=!j.archived;y(j.id);try{const I=await fetch(`/api/videos/${j.id}/archive`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({archived:Y,creator_wallet:t})});if(I.ok)i(v=>v.map(b=>b.id===j.id?{...b,archived:Y}:b)),alert(Y?"Video archived - hidden from public view":"Video unarchived - now visible to public"),e&&e();else{const v=await I.json();alert(`Failed to ${Y?"archive":"unarchive"} video: ${v.message||"Unknown error"}`)}}catch(I){console.error("Failed to toggle archive status:",I),alert("Failed to update video. Please try again.")}finally{y(null)}};return r?d.jsx("div",{className:"flex items-center justify-center py-12",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-flix-primary border-t-transparent"})}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("h2",{className:"text-2xl font-bold text-white",children:"Video Management"}),d.jsxs("div",{className:"text-sm text-gray-400",children:[n.length," ",n.length===1?"video":"videos"]})]}),n.length===0?d.jsxs("div",{className:"glass-effect rounded-xl p-12 text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("p",{className:"text-gray-400 mb-4",children:"No videos uploaded yet"}),d.jsx("p",{className:"text-sm text-gray-500",children:"Upload your first video to get started"})]}):d.jsx("div",{className:"space-y-4",children:n.map(j=>d.jsx("div",{className:"glass-effect p-6 rounded-xl hover:bg-white/5 transition",children:o===j.id?d.jsxs("div",{className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title"}),d.jsx("input",{type:"text",value:g.title,onChange:Y=>m({...g,title:Y.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),d.jsx("textarea",{value:g.description,onChange:Y=>m({...g,description:Y.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none",rows:3})]}),d.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Price (USDC)"}),d.jsx("input",{type:"number",step:"0.01",min:"0",value:g.price_usdc,onChange:Y=>m({...g,price_usdc:Y.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Comment Price (USDC)"}),d.jsx("input",{type:"number",step:"0.01",min:"0",value:g.comment_price,onChange:Y=>m({...g,comment_price:Y.target.value}),disabled:!g.comments_enabled,className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none disabled:opacity-50"})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("input",{type:"checkbox",id:`comments-${j.id}`,checked:g.comments_enabled,onChange:Y=>m({...g,comments_enabled:Y.target.checked}),className:"w-4 h-4 rounded border-white/10 bg-flix-dark text-flix-primary focus:ring-flix-primary"}),d.jsx("label",{htmlFor:`comments-${j.id}`,className:"text-sm text-gray-300",children:"Enable monetized comments"})]}),d.jsxs("div",{className:"flex space-x-3 pt-2",children:[d.jsx("button",{onClick:()=>N(j.id),className:"gradient-bg px-6 py-2 rounded-lg text-white font-medium hover:opacity-90 transition",children:"Save Changes"}),d.jsx("button",{onClick:S,className:"bg-white/10 px-6 py-2 rounded-lg text-white font-medium hover:bg-white/20 transition",children:"Cancel"})]})]}):d.jsxs("div",{className:"flex space-x-6",children:[d.jsxs("div",{className:"relative group",children:[j.thumbnail_url?d.jsx("img",{src:j.thumbnail_url,alt:j.title,className:"w-48 h-28 object-cover rounded-lg",onError:Y=>{var b;const I=Y.target;I.style.display="none";const v=document.createElement("div");v.className="w-48 h-28 bg-white/5 rounded-lg flex items-center justify-center",v.innerHTML='<span class="text-4xl"></span>',(b=I.parentElement)==null||b.appendChild(v)}}):d.jsx("div",{className:"w-48 h-28 bg-white/5 rounded-lg flex items-center justify-center",children:d.jsx("span",{className:"text-4xl",children:""})}),d.jsxs("label",{className:"absolute inset-0 bg-black/60 rounded-lg flex items-center justify-center opacity-0 group-hover:opacity-100 transition cursor-pointer",children:[l===j.id?d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-4 border-white border-t-transparent"}):d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl mb-1",children:""}),d.jsx("div",{className:"text-xs text-white",children:"Upload Thumbnail"})]}),d.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:Y=>{var v;const I=(v=Y.target.files)==null?void 0:v[0];I&&k(j.id,I)},disabled:l===j.id})]})]}),d.jsxs("div",{className:"flex-1",children:[d.jsx("div",{className:"flex items-start justify-between",children:d.jsxs("div",{children:[d.jsx(on,{to:`/video/${j.id}`,className:"text-lg font-semibold text-white hover:text-flix-primary transition",children:j.title}),j.description&&d.jsx("p",{className:"text-sm text-gray-400 mt-1 line-clamp-2",children:j.description})]})}),d.jsxs("div",{className:"flex items-center space-x-6 mt-3 text-sm text-gray-400",children:[d.jsxs("span",{className:"flex items-center gap-1",children:[" $",j.price_usdc,d.jsx(Pn,{size:14})]}),d.jsxs("span",{children:[" ",j.views," views"]}),d.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:["Earned: $",j.earnings.toFixed(2),d.jsx(Pn,{size:14})]}),j.comments_enabled&&d.jsxs("span",{className:"flex items-center gap-1",children:[" Comments ($",j.comment_price||.01,d.jsx(Pn,{size:14}),")"]})]}),d.jsxs("div",{className:"flex items-center justify-between mt-4",children:[d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:()=>w(j),className:"text-flix-primary hover:underline text-sm font-medium",children:" Edit"}),d.jsx(on,{to:`/video/${j.id}`,className:"text-flix-secondary hover:underline text-sm font-medium",children:" View"}),d.jsx("button",{onClick:()=>D(j),disabled:x===j.id,className:`${j.archived?"text-yellow-400 hover:text-yellow-300":"text-gray-400 hover:text-gray-300"} hover:underline text-sm font-medium disabled:opacity-50 disabled:cursor-not-allowed`,children:x===j.id?"":j.archived?" Unarchive":" Archive"}),d.jsx("button",{onClick:()=>R(j),className:"text-red-400 hover:underline text-sm font-medium",children:" Delete"})]}),j.archived&&d.jsx("span",{className:"px-2 py-1 bg-yellow-500/20 text-yellow-400 text-xs font-medium rounded",children:"ARCHIVED"})]})]})]})},j.id))}),u&&d.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:d.jsxs("div",{className:"bg-gradient-to-br from-gray-900 to-black border border-red-500/30 rounded-xl p-6 max-w-md w-full shadow-2xl",children:[d.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[d.jsx("div",{className:"w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center",children:d.jsx("span",{className:"text-2xl",children:""})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-xl font-bold text-white",children:"Delete Video"}),d.jsx("p",{className:"text-gray-400 text-sm",children:"This action cannot be undone"})]})]}),d.jsxs("div",{className:"mb-6",children:[d.jsxs("p",{className:"text-gray-300 mb-2",children:["Are you sure you want to delete ",d.jsxs("span",{className:"font-semibold text-white",children:['"',u.title,'"']}),"?"]}),d.jsx("p",{className:"text-gray-400 text-sm",children:"This video will be permanently removed from your account and will no longer be accessible to viewers."})]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx("button",{onClick:L,disabled:f,className:"flex-1 px-4 py-2.5 rounded-lg bg-gray-700 hover:bg-gray-600 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"No, Keep Video"}),d.jsx("button",{onClick:B,disabled:f,className:"flex-1 px-4 py-2.5 rounded-lg bg-red-500 hover:bg-red-600 text-white font-medium transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:f?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Deleting..."]}):"Yes, Delete"})]})]})})]})}function Goe(){const{publicKey:t,connected:e}=Ui(),{setVisible:n}=Ja(),{user:i,token:r,isLoading:s,login:o}=Ex(),{showToast:a}=bd(),[l,c]=F.useState(null),[u,h]=F.useState(!0),[f,p]=F.useState("overview"),[x,y]=F.useState(!1),[g,m]=F.useState(!1),[_,w]=F.useState({title:"",description:"",category:"Entertainment",priceUsdc:"",commentsEnabled:!0,commentPrice:"0"}),[S,N]=F.useState(null),[k,R]=F.useState(null),[B,L]=F.useState(0),D=(t==null?void 0:t.toBase58())||null,j=e;i!=null&&i.isCreator,F.useEffect(()=>{console.log("CreatorDashboard - Wallet State:",{isConnected:j,walletAddress:D,user:i}),j&&i&&D?Y():h(!1)},[j,D,i]);const Y=async()=>{console.log("Fetching creator stats for:",D);try{const E=await fetch(`/api/analytics/creator/${D}`);if(console.log("Creator stats response:",E.status),E.ok){const P=await E.json();console.log("Creator stats data:",P),c(P)}else{console.error("Failed to fetch stats, status:",E.status);const P=await E.text();console.error("Error response:",P)}}catch(E){console.error("Failed to fetch creator stats:",E)}finally{h(!1)}},I=async E=>{if(E.preventDefault(),!_.title||!_.priceUsdc||!S){alert("Please fill in all required fields and select a video file");return}if(!D||!i){alert("Please connect your wallet and wait for authentication to complete before uploading");return}if(!r){alert(` Authentication in progress. Please wait a moment and try again.

If you just switched wallets, the app is re-authenticating with your new wallet.`);return}if(i.walletAddress!==D){if(console.error(" Wallet mismatch detected!"),console.error("   Connected wallet:",D),console.error("   Authenticated user wallet:",i.walletAddress),window.confirm(` Wallet Change Detected!

Old wallet: ${i.walletAddress.slice(0,8)}...${i.walletAddress.slice(-6)}
New wallet: ${D.slice(0,8)}...${D.slice(-6)}

Click OK to sign in with your new wallet.`)){console.log(" Triggering re-authentication...");try{await o(),alert(` Successfully authenticated with new wallet!

You can now upload your video.`)}catch(C){console.error(" Re-authentication failed:",C),alert(" Authentication failed. Please try refreshing the page.")}}return}console.log(" Starting video upload..."),console.log("   Connected wallet:",D),console.log("   Authenticated as:",i.username||i.walletAddress),console.log("   User ID:",i.id),m(!0),L(0);try{const P=new FormData;P.append("title",_.title),P.append("description",_.description),P.append("category",_.category),P.append("priceUsdc",_.priceUsdc),P.append("creatorWallet",D||""),P.append("commentsEnabled",String(_.commentsEnabled)),P.append("commentPrice",_.commentPrice),P.append("video",S),k&&P.append("thumbnail",k);const C=new XMLHttpRequest;C.upload.addEventListener("progress",V=>{if(V.lengthComputable){const U=V.loaded/V.total*100;L(U)}});const z=new Promise((V,U)=>{C.addEventListener("load",()=>{C.status>=200&&C.status<300?V(C.response):U(new Error("Upload failed"))}),C.addEventListener("error",()=>U(new Error("Upload failed")))});C.open("POST","/api/upload/video"),C.setRequestHeader("Authorization",`Bearer ${r}`),C.send(P),await z,a({title:"Video uploaded!",description:"Your video is processing and will appear in your library shortly.",variant:"success",actionLabel:"View videos",onAction:()=>{p("videos")}}),y(!1),w({title:"",description:"",category:"Entertainment",priceUsdc:"",commentsEnabled:!0,commentPrice:"0"}),N(null),R(null),L(0),Y()}catch(P){console.error("Failed to upload video:",P),a({title:"Upload failed",description:"Something went wrong while uploading. Please try again.",variant:"error"})}finally{m(!1)}};if(!j)return d.jsx("div",{className:"min-h-screen flex items-center justify-center relative z-10",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Creator Dashboard"}),d.jsx("p",{className:"text-gray-400 mb-6",children:"Connect your wallet to access creator features"}),d.jsx("button",{onClick:()=>n(!0),className:"gradient-bg px-8 py-3 rounded-lg text-white font-semibold hover:opacity-90 transition",children:"Connect Wallet"})]})});const[v,b]=Le.useState(!1);return Le.useEffect(()=>{if(!i&&j){const E=setTimeout(()=>{b(!0)},1e4);return()=>clearTimeout(E)}else b(!1)},[i,j]),!i&&j?d.jsx("div",{className:"min-h-screen flex items-center justify-center relative z-10",children:d.jsxs("div",{className:"text-center max-w-md",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent mx-auto mb-4"}),d.jsx("p",{className:"text-gray-400 mb-2",children:"Loading creator dashboard..."}),d.jsx("p",{className:"text-xs text-gray-500",children:"Authenticating your wallet..."}),v&&d.jsxs("div",{className:"mt-6 p-4 bg-yellow-500/10 border border-yellow-500/20 rounded-lg",children:[d.jsx("p",{className:"text-yellow-400 text-sm mb-3",children:"Authentication is taking longer than expected"}),d.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg text-sm font-medium transition-colors",children:"Refresh Page"})]}),!v&&d.jsx("p",{className:"text-xs text-gray-600 mt-4",children:"This should only take a few seconds..."})]})}):u?d.jsx("div",{className:"min-h-screen flex items-center justify-center relative z-10",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-flix-primary border-t-transparent"})}):d.jsx("div",{className:"min-h-screen pb-32 relative z-10",children:d.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[d.jsxs("div",{className:"flex items-center justify-between mb-8",children:[d.jsxs("div",{children:[d.jsx("h1",{className:"text-3xl font-bold text-white",children:"Creator Studio"}),d.jsx("p",{className:"text-gray-400 mt-1",children:"Manage your content and earnings"})]}),d.jsx("button",{onClick:()=>{p("upload"),y(!0)},className:"gradient-bg px-6 py-3 rounded-lg text-white font-medium hover:opacity-90 transition",children:"+ Upload Video"})]}),d.jsx("div",{className:"flex space-x-1 mb-8 bg-white/5 p-1 rounded-lg",children:[{id:"overview",label:"Overview",icon:""},{id:"analytics",label:"Analytics",icon:""},{id:"videos",label:"Videos",icon:""}].map(E=>d.jsxs("button",{onClick:()=>{p(E.id),E.id!=="upload"&&y(!1)},className:`flex-1 px-6 py-3 rounded-lg text-sm font-medium transition ${f===E.id?"gradient-bg text-white":"text-gray-400 hover:text-white hover:bg-white/5"}`,children:[d.jsx("span",{className:"mr-2",children:E.icon}),E.label]},E.id))}),f==="overview"&&d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-6 mb-8",children:[d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Earnings"}),d.jsxs("div",{className:"text-3xl font-bold text-green-400 flex items-center gap-2",children:["$",(l==null?void 0:l.stats.totalEarnings.toFixed(2))||"0.00",d.jsx(Pn,{size:16})]}),d.jsx("div",{className:"text-xs text-gray-500 mt-1",children:"USDC"})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Videos"}),d.jsx("div",{className:"text-3xl font-bold text-flix-primary",children:(l==null?void 0:l.stats.totalVideos)||0})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Views"}),d.jsx("div",{className:"text-3xl font-bold text-flix-secondary",children:(l==null?void 0:l.stats.totalViews.toLocaleString())||0})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Total Sales"}),d.jsx("div",{className:"text-3xl font-bold text-white",children:(l==null?void 0:l.stats.totalSales)||0})]}),d.jsxs("div",{className:"glass-effect p-6 rounded-xl",children:[d.jsxs("div",{className:"text-sm text-gray-400 mb-1 flex items-center gap-1",children:["Total Comments",d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})]}),d.jsx("div",{className:"text-3xl font-bold text-blue-400",children:(l==null?void 0:l.stats.totalComments)||0})]})]}),d.jsxs("div",{className:"glass-effect rounded-xl p-6",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("h2",{className:"text-xl font-bold text-white",children:"Recent Videos"}),d.jsx("button",{onClick:()=>p("videos"),className:"text-flix-primary hover:underline text-sm",children:"View all "})]}),!(l!=null&&l.videos)||l.videos.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("p",{className:"text-gray-400 mb-4",children:"You haven't uploaded any videos yet"}),d.jsx("button",{onClick:()=>{p("upload"),y(!0)},className:"text-flix-primary hover:underline",children:"Upload your first video"})]}):d.jsx("div",{className:"space-y-4",children:l.videos.slice(0,5).map(E=>d.jsxs("div",{className:"flex items-center justify-between p-4 bg-flix-dark rounded-lg hover:bg-flix-dark/80 transition",children:[d.jsxs("div",{className:"flex-1",children:[d.jsx(on,{to:`/video/${E.id}`,className:"text-white font-medium hover:text-flix-primary transition",children:E.title}),d.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-400",children:[d.jsxs("span",{children:[" ",E.views," views"]}),d.jsxs("span",{className:"flex items-center gap-1",children:[" $",E.priceUsdc,d.jsx(Pn,{size:14})]}),d.jsxs("span",{className:"text-green-400 flex items-center gap-1",children:["Earned: $",E.earnings.toFixed(2),d.jsx(Pn,{size:14})]})]})]}),d.jsx(on,{to:`/video/${E.id}`,className:"text-flix-primary hover:underline text-sm",children:"View "})]},E.id))})]})]}),f==="analytics"&&D&&d.jsx(Woe,{creatorWallet:D}),f==="videos"&&D&&d.jsx(Hoe,{creatorWallet:D,onVideoUpdated:Y}),(f==="upload"||x)&&d.jsxs("div",{className:"glass-effect rounded-xl p-6 max-h-[80vh] overflow-y-auto pb-8",children:[d.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:"Upload New Video"}),d.jsxs("form",{onSubmit:I,className:"space-y-4 pb-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Video File *"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"file",accept:"video/*",onChange:E=>{var P;return N(((P=E.target.files)==null?void 0:P[0])||null)},className:"hidden",id:"video-upload",required:!0}),d.jsx("label",{htmlFor:"video-upload",className:"flex items-center justify-center w-full px-4 py-8 bg-flix-dark border-2 border-dashed border-white/10 rounded-lg cursor-pointer hover:border-flix-primary transition-colors",children:d.jsxs("div",{className:"text-center",children:[d.jsx("svg",{className:"w-12 h-12 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),S?d.jsx("p",{className:"text-sm text-white",children:S.name}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm text-gray-400",children:"Click to upload video"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"MP4, MOV, AVI up to 5GB"})]})]})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Thumbnail (Optional)"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:"file",accept:"image/*",onChange:E=>{var P;return R(((P=E.target.files)==null?void 0:P[0])||null)},className:"hidden",id:"thumbnail-upload"}),d.jsx("label",{htmlFor:"thumbnail-upload",className:"flex items-center justify-center w-full px-4 py-6 bg-flix-dark border border-white/10 rounded-lg cursor-pointer hover:border-flix-primary transition-colors",children:d.jsxs("div",{className:"text-center",children:[d.jsx("svg",{className:"w-8 h-8 mx-auto mb-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),k?d.jsx("p",{className:"text-sm text-white",children:k.name}):d.jsxs(d.Fragment,{children:[d.jsx("p",{className:"text-sm text-gray-400",children:"Click to upload thumbnail"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"If not provided, one will be generated automatically"})]})]})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Title *"}),d.jsx("input",{type:"text",value:_.title,onChange:E=>w({..._,title:E.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none",placeholder:"Enter video title",required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),d.jsx("textarea",{value:_.description,onChange:E=>w({..._,description:E.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none",placeholder:"Enter video description",rows:4})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Category *"}),d.jsxs("select",{value:_.category,onChange:E=>w({..._,category:E.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none",required:!0,children:[d.jsx("option",{value:"Entertainment",children:"Entertainment"}),d.jsx("option",{value:"Gaming",children:"Gaming"}),d.jsx("option",{value:"Music",children:"Music"}),d.jsx("option",{value:"Education",children:"Education"}),d.jsx("option",{value:"Technology",children:"Technology"}),d.jsx("option",{value:"Lifestyle",children:"Lifestyle"})]}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'Your video will appear in this category and in "All" videos'})]}),d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-gray-300 mb-2",children:["Price (USDC) *",d.jsx(Pn,{size:14})]}),d.jsx("input",{type:"number",step:"0.01",min:"0",value:_.priceUsdc,onChange:E=>w({..._,priceUsdc:E.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none",placeholder:"0.00",required:!0}),d.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center gap-1",children:["You'll receive 97.15% ($",((parseFloat(_.priceUsdc)||0)*.9715).toFixed(2),d.jsx(Pn,{size:12}),")"]})]}),d.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/10",children:[d.jsxs("h3",{className:"text-sm font-semibold text-white flex items-center gap-2",children:[d.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"Comment Settings"]}),d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{children:[d.jsx("label",{className:"text-sm font-medium text-gray-300",children:"Enable Comments"}),d.jsx("p",{className:"text-xs text-gray-500 mt-0.5",children:"Allow viewers to comment on this video"})]}),d.jsx("button",{type:"button",onClick:()=>w({..._,commentsEnabled:!_.commentsEnabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${_.commentsEnabled?"bg-purple-600":"bg-gray-600"}`,children:d.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${_.commentsEnabled?"translate-x-6":"translate-x-1"}`})})]}),_.commentsEnabled&&d.jsxs("div",{children:[d.jsxs("label",{className:"flex items-center gap-1 text-sm font-medium text-gray-300 mb-2",children:["Comment Price (USDC)",d.jsx(Pn,{size:14})]}),d.jsx("input",{type:"number",step:"0.01",min:"0",max:"1000",value:_.commentPrice,onChange:E=>w({..._,commentPrice:E.target.value}),className:"w-full px-4 py-2 bg-flix-dark border border-white/10 rounded-lg text-white focus:border-flix-primary focus:outline-none",placeholder:"0.00"}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:parseFloat(_.commentPrice)>0?` Viewers will pay $${_.commentPrice} USDC per comment (seamlessly via session keys)`:" Comments are free for this video"})]})]}),g&&B>0&&d.jsxs("div",{className:"space-y-2",children:[d.jsxs("div",{className:"flex justify-between text-sm text-gray-400",children:[d.jsx("span",{children:"Uploading..."}),d.jsxs("span",{children:[B.toFixed(0),"%"]})]}),d.jsx("div",{className:"w-full bg-flix-dark rounded-full h-2",children:d.jsx("div",{className:"gradient-bg h-2 rounded-full transition-all duration-300",style:{width:`${B}%`}})})]}),i&&D&&i.walletAddress!==D&&!s&&d.jsx("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:d.jsxs("div",{className:"flex items-start gap-3",children:[d.jsx("svg",{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"text-red-400 text-sm font-medium mb-2",children:"Wallet Change Detected!"}),d.jsxs("p",{className:"text-red-300 text-xs mb-3",children:["You're authenticated with ",d.jsxs("span",{className:"font-mono",children:[i.walletAddress.slice(0,8),"...",i.walletAddress.slice(-6)]})," but connected to ",d.jsxs("span",{className:"font-mono",children:[D.slice(0,8),"...",D.slice(-6)]})]}),d.jsx("button",{type:"button",onClick:async()=>{console.log(" Re-authenticating with new wallet...");try{await o(),alert(" Successfully authenticated with new wallet!")}catch(E){console.error(" Re-authentication failed:",E),alert(" Authentication failed. Please try refreshing the page.")}},className:"px-4 py-2 bg-red-500 hover:bg-red-600 text-white text-sm rounded-lg transition-colors",children:"Sign in with new wallet"})]})]})}),(s||!r)&&e&&!i&&d.jsx("div",{className:"mb-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg",children:d.jsxs("p",{className:"text-yellow-400 text-sm text-center flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Authenticating with your wallet..."]})}),s&&i&&D&&i.walletAddress!==D&&d.jsx("div",{className:"mb-4 p-3 bg-blue-500/10 border border-blue-500/30 rounded-lg",children:d.jsxs("p",{className:"text-blue-400 text-sm text-center flex items-center justify-center gap-2",children:[d.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[d.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),d.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in with new wallet..."]})}),(()=>{const E=!!(i&&D&&i.walletAddress!==D);return d.jsx("button",{type:"submit",disabled:g||s||!r||E,className:"gradient-bg px-6 py-3 rounded-lg text-white font-medium w-full hover:opacity-90 transition disabled:opacity-50 disabled:cursor-not-allowed",children:g?`Uploading... ${B.toFixed(0)}%`:s||!r?"Authenticating...":E?"Wallet Mismatch - Sign in Again":"Upload Video"})})(),!r&&e&&!s&&d.jsx("p",{className:"text-xs text-yellow-400 mt-2 text-center",children:"If authentication doesn't complete, try refreshing the page"})]})]})]})})}function $oe(){const{publicKey:t,connected:e}=Ui(),[n,i]=F.useState({name:"",profilePicture:null,wallet:(t==null?void 0:t.toBase58())||""}),[r,s]=F.useState(!1),[o,a]=F.useState(""),[l,c]=F.useState([]),[u,h]=F.useState(!1),[f]=F.useState([]),[p,x]=F.useState("profile");F.useEffect(()=>{(async()=>{if(t){const w=t.toBase58();i(S=>({...S,wallet:w}));try{const S=await fetch("/api/users/profile",{headers:{"x-wallet-address":w}});if(S.ok){const N=await S.json();i({name:N.user.username||"anon",profilePicture:N.user.profile_picture_url,wallet:w})}else console.log("Profile not found, using defaults")}catch(S){console.error("Error loading profile:",S)}}})()},[t]),F.useEffect(()=>{(async()=>{if(t){h(!0);try{const w=await fetch("/api/users/purchased-videos",{headers:{"x-wallet-address":t.toBase58()}});if(w.ok){const S=await w.json();console.log(" Raw purchased videos data:",S);const N=S.videos.map(k=>({id:k.id,title:k.title,thumbnail:k.thumbnailUrl||k.thumbnail_url||"/placeholder-video.jpg",creator:k.creatorName||"Unknown Creator",price:k.priceUsdc||k.price_usdc||0,purchasedAt:k.createdAt||k.created_at||new Date().toISOString()}));c(N),console.log(" Loaded",N.length,"purchased videos")}}catch(w){console.error("Error fetching purchased videos:",w)}finally{h(!1)}}})()},[t]);const y=async _=>{var S;const w=(S=_.target.files)==null?void 0:S[0];if(w&&t)try{const N=new FormData;N.append("profilePicture",w);const k=await fetch("/api/users/update-profile",{method:"PUT",headers:{"x-wallet-address":t.toBase58()},body:N});if(k.ok){const R=await k.json();i({name:R.user.username||"anon",profilePicture:R.user.profile_picture_url,wallet:R.user.wallet_address}),console.log(" Profile picture updated"),window.dispatchEvent(new CustomEvent("profileUpdated"))}else{const R=await k.json();console.error("Failed to update profile picture:",R.error),alert(R.error||"Failed to update profile picture. Please try again.")}}catch(N){console.error("Error updating profile picture:",N),alert("Failed to update profile picture. Please try again.")}},g=async()=>{if(!(!t||!o.trim()))try{const _=await fetch("/api/users/update-profile",{method:"PUT",headers:{"Content-Type":"application/json","x-wallet-address":t.toBase58()},body:JSON.stringify({username:o.trim()})});if(_.ok){const w=await _.json();i({name:w.user.username||"anon",profilePicture:w.user.profile_picture_url,wallet:w.user.wallet_address}),s(!1),console.log(" Username updated"),window.dispatchEvent(new CustomEvent("profileUpdated"))}else{const w=await _.json();console.error("Failed to update username:",w.message),alert(w.error||"Failed to update username. Please try again.")}}catch(_){console.error("Error updating username:",_),alert("Failed to update username. Please try again.")}},m=()=>{a(n.name),s(!0)};return e?d.jsx("div",{className:"min-h-screen bg-flix-dark pt-20 px-4 pb-12",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsxs(et.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[d.jsx("h1",{className:"text-4xl font-bold text-white mb-2",children:"My Account"}),d.jsx("p",{className:"text-flix-text-secondary",children:"Manage your profile, view purchase history, and track subscriptions"})]}),d.jsxs("div",{className:"flex space-x-2 mb-8 border-b border-flix-light-gray",children:[d.jsx("button",{onClick:()=>x("profile"),className:`px-6 py-3 font-semibold transition-all ${p==="profile"?"text-flix-cyan border-b-2 border-flix-cyan":"text-flix-text-secondary hover:text-white"}`,children:"Profile"}),d.jsx("button",{onClick:()=>x("purchases"),className:`px-6 py-3 font-semibold transition-all ${p==="purchases"?"text-flix-cyan border-b-2 border-flix-cyan":"text-flix-text-secondary hover:text-white"}`,children:"Purchase History"}),d.jsx("button",{onClick:()=>x("subscriptions"),className:`px-6 py-3 font-semibold transition-all ${p==="subscriptions"?"text-flix-cyan border-b-2 border-flix-cyan":"text-flix-text-secondary hover:text-white"}`,children:"Subscriptions"})]}),p==="profile"&&d.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:d.jsxs("div",{className:"bg-flix-light-gray rounded-xl p-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Profile Information"}),d.jsxs("div",{className:"flex flex-col md:flex-row gap-8",children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsxs("div",{className:"relative group",children:[d.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-flix-cyan to-purple-500 p-1",children:d.jsx("div",{className:"w-full h-full rounded-full bg-flix-dark flex items-center justify-center overflow-hidden",children:n.profilePicture?d.jsx("img",{src:n.profilePicture,alt:"Profile",className:"w-full h-full object-cover"}):d.jsx("span",{className:"text-5xl",children:""})})}),d.jsx("label",{htmlFor:"profile-picture-upload",className:"absolute bottom-0 right-0 bg-flix-cyan text-white p-2 rounded-full cursor-pointer hover:bg-cyan-400 transition-colors",children:d.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),d.jsx("input",{id:"profile-picture-upload",type:"file",accept:"image/*",className:"hidden",onChange:y})]}),d.jsx("p",{className:"text-flix-text-secondary text-sm mt-4 text-center",children:"Click camera to upload"})]}),d.jsxs("div",{className:"flex-1 space-y-6",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-flix-text-secondary mb-2",children:"Display Name"}),r?d.jsxs("div",{className:"flex gap-2",children:[d.jsx("input",{type:"text",value:o,onChange:_=>a(_.target.value),className:"flex-1 bg-flix-dark text-white px-4 py-2 rounded-lg border border-flix-light-gray focus:border-flix-cyan focus:outline-none",placeholder:"Enter your name",autoFocus:!0}),d.jsx("button",{onClick:g,className:"px-4 py-2 bg-flix-cyan text-white rounded-lg hover:bg-cyan-400 transition-colors",children:"Save"}),d.jsx("button",{onClick:()=>s(!1),className:"px-4 py-2 bg-flix-dark text-white rounded-lg border border-flix-light-gray hover:bg-gray-800 transition-colors",children:"Cancel"})]}):d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("span",{className:"text-white text-lg",children:n.name||"anon"}),d.jsx("button",{onClick:m,className:"text-flix-cyan hover:text-cyan-400 transition-colors",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-flix-text-secondary mb-2",children:"Wallet Address"}),d.jsxs("div",{className:"flex items-center gap-2 bg-flix-dark px-4 py-2 rounded-lg border border-flix-light-gray",children:[d.jsx("code",{className:"text-white text-sm flex-1 overflow-x-auto",children:n.wallet}),d.jsx("button",{onClick:()=>navigator.clipboard.writeText(n.wallet),className:"text-flix-cyan hover:text-cyan-400 transition-colors",title:"Copy to clipboard",children:d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]})]})]})]})]})}),p==="purchases"&&d.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:d.jsxs("div",{className:"bg-flix-light-gray rounded-xl p-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Purchase History"}),u?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-flix-cyan mx-auto mb-4"}),d.jsx("p",{className:"text-flix-text-secondary",children:"Loading your videos..."})]}):l.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("p",{className:"text-flix-text-secondary text-lg mb-4",children:"No purchases yet"}),d.jsx("p",{className:"text-flix-text-secondary mb-8",children:"Start exploring and unlock premium content"}),d.jsx(on,{to:"/",className:"inline-block px-6 py-3 bg-flix-cyan text-white rounded-lg hover:bg-cyan-400 transition-colors font-semibold",children:"Browse Videos"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(_=>d.jsxs(et.div,{whileHover:{scale:1.02},className:"bg-flix-dark rounded-lg overflow-hidden border border-flix-light-gray",children:[d.jsx(on,{to:`/video/${_.id}`,children:d.jsx("img",{src:_.thumbnail,alt:_.title,className:"w-full h-40 object-cover cursor-pointer hover:opacity-80 transition-opacity"})}),d.jsxs("div",{className:"p-4",children:[d.jsx("h3",{className:"text-white font-semibold mb-1 line-clamp-2",children:_.title}),d.jsxs("p",{className:"text-flix-text-secondary text-sm mb-3",children:["by ",_.creator]}),d.jsxs("div",{className:"flex items-center justify-between text-sm mb-3",children:[d.jsxs("span",{className:"text-flix-cyan",children:["$",_.price.toFixed(2)]}),d.jsx("span",{className:"text-flix-text-secondary",children:new Date(_.purchasedAt).toLocaleDateString()})]}),d.jsx(on,{to:`/video/${_.id}`,className:"block w-full text-center px-4 py-2 bg-gradient-to-r from-flix-cyan to-purple-500 text-white rounded-lg hover:opacity-90 transition-opacity font-semibold",children:"Watch Now"})]})]},_.id))})]})}),p==="subscriptions"&&d.jsx(et.div,{initial:{opacity:0},animate:{opacity:1},className:"space-y-6",children:d.jsxs("div",{className:"bg-flix-light-gray rounded-xl p-8",children:[d.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"My Subscriptions"}),f.length===0?d.jsxs("div",{className:"text-center py-12",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("p",{className:"text-flix-text-secondary text-lg mb-4",children:"No subscriptions yet"}),d.jsx("p",{className:"text-flix-text-secondary mb-8",children:"Follow your favorite creators to get notified of new content"}),d.jsx(on,{to:"/",className:"inline-block px-6 py-3 bg-flix-cyan text-white rounded-lg hover:bg-cyan-400 transition-colors font-semibold",children:"Discover Creators"})]}):d.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:f.map(_=>d.jsx(et.div,{whileHover:{scale:1.02},className:"bg-flix-dark rounded-lg p-6 border border-flix-light-gray",children:d.jsxs("div",{className:"flex items-center gap-4",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-gradient-to-br from-flix-cyan to-purple-500 p-1",children:d.jsx("div",{className:"w-full h-full rounded-full bg-flix-dark flex items-center justify-center overflow-hidden",children:_.creatorAvatar?d.jsx("img",{src:_.creatorAvatar,alt:_.creatorName,className:"w-full h-full object-cover"}):d.jsx("span",{className:"text-2xl",children:""})})}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-white font-semibold mb-1",children:_.creatorName}),d.jsxs("p",{className:"text-flix-text-secondary text-sm mb-2",children:[_.videoCount," videos"]}),d.jsxs("p",{className:"text-flix-text-secondary text-xs",children:["Subscribed ",new Date(_.subscribedAt).toLocaleDateString()]})]}),d.jsx("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Unsubscribe"})]})},_.id))})]})})]})}):d.jsx("div",{className:"min-h-screen bg-flix-dark flex items-center justify-center px-4",children:d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:"Connect Your Wallet"}),d.jsx("p",{className:"text-flix-text-secondary mb-8",children:"Please connect your wallet to view your account"})]})})}const Yoe=["Why","PayFlix"];function Xoe(){return d.jsx("main",{className:"flex flex-col lg:px-16 overflow-y-auto h-full pr-8 pl-8 relative items-center justify-center",children:d.jsxs("div",{className:"z-10 text-center max-w-5xl mr-auto ml-auto relative py-20",children:[d.jsxs(et.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},className:"inline-flex items-center space-x-2 px-3 py-1.5 rounded-full bg-purple-500/10 border border-purple-500/20 text-purple-400 text-sm mb-8 shadow-sm backdrop-blur-sm",children:[d.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),d.jsx("span",{className:"font-medium",children:"Revolutionizing Content"})]}),d.jsx("h1",{className:"text-6xl lg:text-7xl xl:text-8xl font-semibold tracking-tight mb-6 leading-tight",children:Yoe.map((t,e)=>d.jsxs(et.span,{initial:{opacity:0,transform:"translateZ(-100px) rotateX(-90deg) translateY(20px)"},animate:{opacity:1,transform:"translateZ(0) rotateX(0) translateY(0)"},transition:{duration:.8,delay:e*.2,ease:"easeOut"},style:{display:"inline-block",perspective:1e3,transformStyle:"preserve-3d"},className:e===1?"text-purple-500":"",children:[t," "]},e))}),d.jsx(et.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:"text-lg lg:text-xl text-neutral-400 mb-12 max-w-2xl mx-auto leading-relaxed",children:"Empowering creators with Web3 technology. Own your content, earn directly, and connect with your audience like never before."}),d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mt-20",children:[d.jsxs(et.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-6 hover:border-purple-500/30 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center mb-4 mx-auto",children:d.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Direct Payments"}),d.jsx("p",{className:"text-sm text-neutral-400",children:"No middlemen. Earn 97.15% of what your audience pays."})]}),d.jsxs(et.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:1},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-6 hover:border-purple-500/30 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center mb-4 mx-auto",children:d.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"True Ownership"}),d.jsx("p",{className:"text-sm text-neutral-400",children:"Your content, your rights. Powered by blockchain."})]}),d.jsxs(et.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:1.2},className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-6 hover:border-purple-500/30 transition-colors",children:[d.jsx("div",{className:"w-12 h-12 bg-purple-500/10 rounded-lg flex items-center justify-center mb-4 mx-auto",children:d.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}),d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Community First"}),d.jsx("p",{className:"text-sm text-neutral-400",children:"Build meaningful connections with your supporters."})]})]}),d.jsxs("div",{className:"mt-32 grid grid-cols-1 md:grid-cols-2 gap-12 text-left",children:[d.jsxs(et.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6,delay:1.4},children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})})}),d.jsx("h3",{className:"text-2xl font-semibold",children:"Lightning Fast"})]}),d.jsx("p",{className:"text-neutral-400 leading-relaxed",children:"Built on Solana blockchain for instant transactions. Pay and watch in milliseconds, not minutes. No waiting, no delays."})]}),d.jsxs(et.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6,delay:1.6},children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"w-10 h-10 bg-green-500/10 rounded-lg flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),d.jsx("h3",{className:"text-2xl font-semibold",children:"Permanent Storage"})]}),d.jsx("p",{className:"text-neutral-400 leading-relaxed",children:"Videos stored on Arweave blockchain forever. Your content can't be taken down, censored, or lost. True digital ownership."})]}),d.jsxs(et.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6,delay:1.8},children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),d.jsx("h3",{className:"text-2xl font-semibold",children:"Fair Revenue Split"})]}),d.jsx("p",{className:"text-neutral-400 leading-relaxed",children:"Creators keep 97.15% of every payment. Only 2.85% platform fee - far better than the 30-55% taken by traditional platforms."})]}),d.jsxs(et.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6,delay:2},children:[d.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[d.jsx("div",{className:"w-10 h-10 bg-pink-500/10 rounded-lg flex items-center justify-center",children:d.jsx("svg",{className:"w-6 h-6 text-pink-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4"})})}),d.jsx("h3",{className:"text-2xl font-semibold",children:"Privacy First"})]}),d.jsx("p",{className:"text-neutral-400 leading-relaxed",children:"No personal data required. Just connect your wallet and start watching. No emails, no tracking, no surveillance."})]})]})]})})}function qoe(){const[t,e]=F.useState(!1),[n,i]=F.useState(!1),r=()=>{console.log("Button clicked!")},s=async()=>{e(!0),await new Promise(o=>setTimeout(o,2e3)),e(!1)};return d.jsx("main",{className:"flex flex-col overflow-y-auto h-full relative z-10",children:d.jsxs("div",{className:"max-w-6xl mx-auto px-4 md:px-8 py-12 w-full",children:[d.jsxs("div",{className:"mb-12",children:[d.jsxs(on,{to:"/",className:"inline-flex items-center gap-2 text-neutral-400 hover:text-white transition-colors mb-6",children:[d.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]}),d.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Gradient Button Component"}),d.jsx("p",{className:"text-neutral-400 text-lg",children:"Beautiful gradient buttons with hover effects and variants"})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Basic Usage"}),d.jsxs("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:[d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsx(Xt,{onClick:r,children:"Default Button"}),d.jsx(Xt,{variant:"variant",onClick:r,children:"Variant Button"})]}),d.jsx("div",{className:"mt-8 p-4 bg-neutral-900/50 rounded-lg",children:d.jsx("code",{className:"text-sm text-neutral-300",children:`<GradientButton>Default Button</GradientButton>
<GradientButton variant="variant">Variant Button</GradientButton>`})})]})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"With Icons"}),d.jsx("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsxs(Xt,{onClick:r,children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),"Connect Wallet"]}),d.jsxs(Xt,{variant:"variant",onClick:r,children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-8l-4-4m0 0L8 8m4-4v12"})}),"Upload Video"]}),d.jsxs(Xt,{onClick:r,children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Unlock for $2.99"]})]})})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Button States"}),d.jsx("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-3",children:"Normal State"}),d.jsx(Xt,{onClick:r,children:"Click Me"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-3",children:"Loading State"}),d.jsx(Xt,{onClick:s,disabled:t,children:t?d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-2 border-white border-t-transparent mr-2"}),"Processing..."]}):"Start Process"})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-3",children:"Disabled State"}),d.jsxs("div",{className:"flex gap-4 items-center",children:[d.jsx(Xt,{disabled:n,children:"Disabled Button"}),d.jsx("button",{onClick:()=>i(!n),className:"px-4 py-2 bg-neutral-700 hover:bg-neutral-600 rounded-lg text-sm transition-colors",children:"Toggle Disabled"})]})]})]})})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Custom Sizes"}),d.jsx("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:d.jsxs("div",{className:"flex flex-wrap items-center gap-4",children:[d.jsx(Xt,{className:"min-w-[100px] px-6 py-2 text-sm",children:"Small"}),d.jsx(Xt,{children:"Medium (Default)"}),d.jsx(Xt,{className:"min-w-[160px] px-12 py-5 text-lg",children:"Large"}),d.jsx(Xt,{className:"w-full",children:"Full Width"})]})})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"As Link (Slot)"}),d.jsxs("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:[d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsx(Xt,{asChild:!0,children:d.jsx(on,{to:"/creator-studio",children:"Go to Creator Dashboard"})}),d.jsx(Xt,{variant:"variant",asChild:!0,children:d.jsxs("a",{href:"https://solana.com",target:"_blank",rel:"noopener noreferrer",children:["Learn About Solana",d.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]})})]}),d.jsx("div",{className:"mt-8 p-4 bg-neutral-900/50 rounded-lg",children:d.jsx("code",{className:"text-sm text-neutral-300",children:`<GradientButton asChild>
  <Link to="/dashboard">Dashboard</Link>
</GradientButton>`})})]})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Real World Examples"}),d.jsx("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:d.jsxs("div",{className:"space-y-8",children:[d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"Hero Section CTAs"}),d.jsxs("div",{className:"flex flex-wrap gap-4",children:[d.jsx(Xt,{className:"text-lg px-8 py-5",children:"Start Watching Now"}),d.jsx(Xt,{variant:"variant",className:"text-lg px-8 py-5",children:"Become a Creator"})]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"Video Unlock Button"}),d.jsxs(Xt,{variant:"variant",className:"text-lg px-12 py-5",children:[d.jsx("svg",{className:"w-6 h-6 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Unlock for $2.99 USDC"]})]}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm text-neutral-400 mb-4",children:"Form Submit"}),d.jsxs(Xt,{className:"w-full max-w-md",children:[d.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Save Changes"]})]})]})})]}),d.jsxs("section",{className:"mb-12",children:[d.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Color Reference"}),d.jsx("div",{className:"bg-neutral-800/50 backdrop-blur-sm border border-neutral-700/50 rounded-xl p-8",children:d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Default Variant"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 rounded bg-purple-500"}),"Purple: ",d.jsx("code",{className:"text-purple-400",children:"#A855F7"})]}),d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 rounded bg-pink-500"}),"Pink: ",d.jsx("code",{className:"text-pink-400",children:"#EC4899"})]}),d.jsx("p",{className:"text-neutral-400 mt-2",children:"Gradient: 135deg, Purple  Pink"})]})]}),d.jsxs("div",{children:[d.jsx("h3",{className:"font-semibold mb-4",children:"Variant (Solana Theme)"}),d.jsxs("div",{className:"space-y-2 text-sm",children:[d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 rounded",style:{backgroundColor:"#14F195"}}),"Green: ",d.jsx("code",{className:"text-green-400",children:"#14F195"})]}),d.jsxs("p",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"w-6 h-6 rounded",style:{backgroundColor:"#9945FF"}}),"Purple: ",d.jsx("code",{className:"text-purple-400",children:"#9945FF"})]}),d.jsx("p",{className:"text-neutral-400 mt-2",children:"Gradient: 135deg, Green  Purple"})]})]})]})})]}),d.jsx("section",{children:d.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-6 text-center",children:[d.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Full Documentation"}),d.jsx("p",{className:"text-neutral-400 mb-4",children:"Check out GRADIENT_BUTTON_USAGE.md for complete examples and API reference"}),d.jsx(Xt,{onClick:()=>window.open("/GRADIENT_BUTTON_USAGE.md","_blank"),children:"View Documentation"})]})})]})})}const th=[{name:"X",href:"https://x.com/payflixdotfun",icon:d.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 1200 1227",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{d:"M714.163 519.284L1160.89 0h-105.17l-386.69 448.146L409.306 0H0l468.492 684.516L0 1227h105.17l407.509-472.488L790.694 1227H1200L714.163 519.284zM579.161 706.833L518.873 621.8 143.202 80h219.742l304.312 434.236 60.288 85.032L1056.8 1147H837.059L579.161 706.833z"})})},{name:"Telegram",href:"https://t.me/payflixdotfun",icon:d.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true",children:d.jsx("path",{d:"M22.25 1.95 1.55 10.53c-1.19.49-1.18 1.18-.22 1.51l5.43 1.74 2.11 6.69c.24.69.4.97 1.03.97.54 0 .78-.25 1.08-.55l2.6-2.53 5.42 4c.99.54 1.7.26 1.95-.92l3.54-16.63c.35-1.69-.64-2.46-1.56-2.02Z"})})}],Q3=({className:t=""})=>d.jsxs("svg",{className:t,viewBox:"0 0 1968 919",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:"img","aria-label":"PayFlix",children:[d.jsx("g",{filter:"url(#filter0_d_payflix_stacked)",children:d.jsx("path",{d:"M1735 83.1698L1963 83.1698L1635 835.812L1422.35 835.812L1735 83.1698Z",fill:"#C56BCE"})}),d.jsx("g",{filter:"url(#filter1_d_payflix_stacked)",children:d.jsx("path",{d:"M1751 843.17L1947 843.17L1633.28 73.7996L1433.28 73.7997L1751 843.17Z",fill:"#C56BCE"})}),d.jsx("g",{filter:"url(#filter2_d_payflix_stacked)",children:d.jsx("rect",{x:"1242",y:"367.17",width:"156",height:"465",fill:"#C56BCE"})}),d.jsx("g",{filter:"url(#filter3_d_payflix_stacked)",children:d.jsx("rect",{x:"1242",y:"63.1698",width:"156",height:"156",fill:"#C56BCE"})}),d.jsxs("g",{filter:"url(#filter4_d_payflix_stacked)",children:[d.jsx("path",{d:"M760 63.1698H916V836.17H760V63.1698Z",fill:"#C56BCE"}),d.jsx("path",{d:"M760 523.17V367.17H1091V523.17H760Z",fill:"#C56BCE"}),d.jsx("path",{d:"M760 219.17V63.1698H1203V219.17H760Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter5_d_payflix_stacked)",children:[d.jsx("path",{d:"M4 63.1698H160V836.17H4V63.1698Z",fill:"#C56BCE"}),d.jsx("path",{d:"M63 63.1698H645V195.17H63V63.1698Z",fill:"#C56BCE"}),d.jsx("path",{d:"M646.583 69.6306L644.999 523.271L513 522.81L514.584 69.1698L646.583 69.6306Z",fill:"#C56BCE"}),d.jsx("path",{d:"M63 391.17H645V523.17H63V391.17Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter6_d_payflix_stacked)",children:[d.jsx("path",{d:"M192 547.17H280V836.17H192V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M393 547.17H481V836.17H393V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M192 635.17V547.17H481V635.17H192Z",fill:"#C56BCE"}),d.jsx("path",{d:"M192 763.17V675.17H481V763.17H192Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter7_d_payflix_stacked)",children:[d.jsx("path",{d:"M955 547.17H1043V836.17H955V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M982 836.17V748.17H1203V836.17H982Z",fill:"#C56BCE"})]}),d.jsxs("g",{filter:"url(#filter8_d_payflix_stacked)",children:[d.jsx("path",{d:"M506 547.17H594V675.17H506V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M633 547.17H721V675.17H633V547.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M569 691.17H657V836.17H569V691.17Z",fill:"#C56BCE"}),d.jsx("path",{d:"M506 763.17V675.17H721V763.17H506Z",fill:"#C56BCE"})]}),d.jsxs("defs",{children:[d.jsxs("filter",{id:"filter0_d_payflix_stacked",x:"1418.35",y:"83.1698",width:"548.652",height:"760.642",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter1_d_payflix_stacked",x:"1429.28",y:"73.7996",width:"521.718",height:"777.37",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter2_d_payflix_stacked",x:"1238",y:"367.17",width:"164",height:"473",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter3_d_payflix_stacked",x:"1238",y:"63.1698",width:"164",height:"164",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter4_d_payflix_stacked",x:"756",y:"63.1698",width:"451",height:"781",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter5_d_payflix_stacked",x:"0",y:"63.1698",width:"650.583",height:"781",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter6_d_payflix_stacked",x:"188",y:"547.17",width:"297",height:"297",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter7_d_payflix_stacked",x:"951",y:"547.17",width:"256",height:"297",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]}),d.jsxs("filter",{id:"filter8_d_payflix_stacked",x:"502",y:"547.17",width:"223",height:"297",filterUnits:"userSpaceOnUse",colorInterpolationFilters:"sRGB",children:[d.jsx("feFlood",{floodOpacity:"0",result:"BackgroundImageFix"}),d.jsx("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feOffset",{dy:"4"}),d.jsx("feGaussianBlur",{stdDeviation:"2"}),d.jsx("feComposite",{in2:"hardAlpha",operator:"out"}),d.jsx("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.25 0"}),d.jsx("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_payflix_stacked"}),d.jsx("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_payflix_stacked",result:"shape"})]})]})]}),J3="Coming Soon";function Yv({name:t,href:e,icon:n,className:i=""}){return d.jsxs("a",{href:e,target:"_blank",rel:"noreferrer",className:`group flex items-center gap-2 rounded-2xl border border-white/10 bg-white/5 px-3 py-2 text-[11px] font-medium uppercase tracking-[0.25em] text-white/80 transition hover:border-flix-cyan/70 hover:bg-flix-cyan/10 ${i}`,children:[d.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-xl bg-white/10 text-white transition group-hover:bg-flix-cyan/20",children:n}),d.jsx("span",{className:"hidden md:inline text-white group-hover:text-white",children:t})]})}function eN(){const[t,e]=F.useState(!1),n=async()=>{try{await navigator.clipboard.writeText(J3),e(!0),setTimeout(()=>e(!1),2e3)}catch(i){console.error("Failed to copy contract address",i)}};return d.jsxs("button",{type:"button",onClick:n,className:"group flex max-w-full items-center gap-3 rounded-2xl border border-white/10 bg-white/5 px-4 py-2 text-left transition hover:border-flix-cyan/70 hover:bg-flix-cyan/10",children:[d.jsxs("div",{className:"flex flex-col gap-1 overflow-hidden",children:[d.jsx("span",{className:"text-[10px] uppercase tracking-[0.5em] text-white/50",children:"Token CA"}),d.jsx("span",{className:"font-mono text-sm tracking-[0.25em] text-white/90",children:J3})]}),d.jsxs("div",{className:"ml-auto flex flex-col items-center gap-1",children:[d.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-xl border border-white/10 bg-white/5 text-white transition group-hover:border-flix-cyan/70 group-hover:bg-flix-cyan/20",children:d.jsxs("svg",{className:"h-4 w-4",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.8",strokeLinecap:"round",strokeLinejoin:"round","aria-hidden":"true",children:[d.jsx("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),d.jsx("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"})]})}),d.jsx("span",{className:"text-[11px] font-semibold text-flix-cyan transition group-hover:text-white",children:t?"Copied!":"Copy"})]})]})}function Koe(){return d.jsxs("div",{className:"relative min-h-screen w-full overflow-hidden bg-black text-white",children:[d.jsx(w5,{}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-[#120c2c]/40 via-[#1a0f42]/30 to-[#0d564e]/35"}),d.jsxs("header",{className:"relative z-20 w-full px-6 py-6 sm:px-10",children:[d.jsxs("div",{className:"hidden items-center justify-between gap-6 md:flex",children:[d.jsx(Q3,{className:"h-12 w-auto"}),d.jsxs("div",{className:"flex items-center gap-4",children:[th.map(t=>d.jsx(Yv,{...t},t.name)),d.jsx(eN,{})]})]}),d.jsxs("div",{className:"grid grid-cols-3 items-center gap-3 md:hidden",children:[d.jsx("div",{className:"flex justify-start",children:d.jsx(Q3,{className:"h-10 w-auto"})}),d.jsx("div",{className:"flex justify-center",children:d.jsx(Yv,{name:"X",href:th[0].href,icon:th[0].icon,className:"px-2"})}),d.jsx("div",{className:"flex justify-end",children:d.jsx(Yv,{name:"Telegram",href:th[1].href,icon:th[1].icon,className:"px-2"})})]}),d.jsx("div",{className:"mt-4 md:hidden",children:d.jsx(eN,{})})]}),d.jsxs("main",{className:"relative z-10 flex min-h-screen flex-col items-center justify-center px-6 text-center",children:[d.jsx(et.div,{className:"flex h-72 w-72 items-center justify-center md:h-96 md:w-96",animate:{rotateY:[0,360],rotateX:[0,360]},transition:{duration:10,repeat:1/0,ease:"linear"},style:{transformStyle:"preserve-3d",perspective:1e3,filter:"drop-shadow(0 0 25px rgba(197,107,206,0.45))"},children:d.jsx("svg",{width:"100%",height:"100%",viewBox:"0 0 533 530",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:d.jsx("path",{d:"M520.858 245.866C536.403 253.587 536.403 275.762 520.858 283.482L30.4678 527.04C11.1866 536.616 -8.30137 514.434 3.678 496.547L151.138 276.36C155.874 269.289 155.874 260.06 151.138 252.989L3.67798 32.802C-8.30139 14.9145 11.1865 -7.26763 30.4677 2.30859L520.858 245.866Z",fill:"#C56BCE"})})}),d.jsx(et.p,{animate:{opacity:[.5,1,.5]},transition:{duration:2.2,repeat:1/0},className:"mt-8 text-base font-medium uppercase tracking-[0.6em] text-white/70",children:"Loading the flix.."}),d.jsxs("div",{className:"mt-14 flex flex-col items-center gap-2 text-xs text-white/55",children:[d.jsx("span",{children:"Built for creators. For privacy."}),d.jsx("span",{children:"Seamless pay-per-view you can trust."})]})]}),d.jsx("footer",{className:"pointer-events-none absolute inset-x-0 bottom-6 z-10 flex items-center justify-center",children:d.jsxs("div",{className:"pointer-events-auto flex items-center gap-3 rounded-full border border-white/10 bg-white/5 px-5 py-2 text-[11px] uppercase tracking-[0.4em] text-white/70 backdrop-blur-md",children:[d.jsx("span",{children:"Ad-Free"}),d.jsx("span",{className:"h-1 w-1 rounded-full bg-white/40"}),d.jsx("span",{children:"Monetization"}),d.jsx("span",{className:"h-1 w-1 rounded-full bg-white/40"}),d.jsx("span",{children:"Agentic Commerce"})]})})]})}function Zoe(){const{connected:t,publicKey:e}=Ui(),n=e==null?void 0:e.toBase58(),{setVisible:i}=Ja(),{subscriptions:r,loading:s}=F5(t),{showToast:o}=bd(),a=F.useCallback(async l=>{if(!n){i(!0);return}try{await IM(n,l),o({title:"Subscription updated",description:"You will no longer receive updates from this creator.",variant:"success"})}catch(c){o({title:"Unable to unsubscribe",description:c.message||"Please try again.",variant:"error"})}},[n,i,o]);return t?d.jsx("main",{className:"relative z-10 min-h-screen overflow-y-auto px-4 py-10 md:px-12",children:d.jsxs("div",{className:"max-w-6xl mx-auto",children:[d.jsxs("header",{className:"mb-12 text-center",children:[d.jsx(et.span,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"inline-flex items-center gap-2 px-4 py-1 rounded-full border border-white/10 bg-white/5 text-xs uppercase tracking-[0.3em] text-white/60",children:"Following"}),d.jsx(et.h1,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-4 text-4xl md:text-5xl font-semibold",children:"Your Creators"}),d.jsx("p",{className:"mt-4 text-neutral-400 max-w-2xl mx-auto",children:"Stay close to the studios, storytellers, and streamers you support. Subscribe to unlock instant notifications, private drops, and frictionless pay-per-view access."})]}),s?d.jsx("div",{className:"flex justify-center py-20",children:d.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-4 border-purple-500 border-t-transparent"})}):r.length===0?d.jsxs("div",{className:"text-center py-20 space-y-4",children:[d.jsx("h2",{className:"text-2xl font-semibold",children:"No subscriptions yet"}),d.jsx("p",{className:"text-neutral-400",children:"Discover trending creators on the home page and tap subscribe to add them here."}),d.jsx(on,{to:"/",className:"inline-flex items-center justify-center px-6 py-3 rounded-full bg-white text-black font-semibold",children:"Browse creators"})]}):d.jsx("div",{className:"grid grid-cols-1 gap-6 md:grid-cols-2",children:r.map(l=>{var c,u,h,f,p,x,y,g;return d.jsxs(et.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"rounded-2xl border border-white/10 bg-white/[0.04] backdrop-blur-xl p-6 flex flex-col gap-6",children:[d.jsxs("div",{className:"flex items-center gap-4",children:[(c=l.creator)!=null&&c.profilePictureUrl?d.jsx("img",{src:l.creator.profilePictureUrl,alt:l.creator.username||l.creator.walletAddress,className:"h-16 w-16 rounded-2xl object-cover border border-white/10"}):d.jsx("div",{className:"h-16 w-16 rounded-2xl bg-gradient-to-br from-purple-500 to-pink-500 flex items-center justify-center text-2xl font-bold",children:(f=(((u=l.creator)==null?void 0:u.username)||((h=l.creator)==null?void 0:h.walletAddress)||l.creatorWallet)[0])==null?void 0:f.toUpperCase()}),d.jsxs("div",{className:"flex-1",children:[d.jsx("h3",{className:"text-lg font-semibold text-white",children:((p=l.creator)==null?void 0:p.username)||"Unnamed Creator"}),d.jsx("p",{className:"text-sm text-neutral-400 font-mono",children:((x=l.creator)==null?void 0:x.walletAddress)||l.creatorWallet}),((y=l.creator)==null?void 0:y.bio)&&d.jsx("p",{className:"text-sm text-neutral-300 mt-2 line-clamp-2",children:l.creator.bio})]})]}),d.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[d.jsxs("span",{className:"text-xs uppercase tracking-[0.4em] text-white/60",children:["Since ",new Date(l.subscribedAt).toLocaleDateString()]}),d.jsxs("div",{className:"flex gap-3",children:[d.jsx(on,{to:`/profile/${((g=l.creator)==null?void 0:g.walletAddress)||l.creatorWallet}`,className:"px-4 py-2 rounded-full border border-white/10 text-sm text-white/80 hover:bg-white/10 transition",children:"View profile"}),d.jsx("button",{onClick:()=>a(l.creatorWallet),className:"px-4 py-2 rounded-full bg-white/10 text-sm text-white hover:bg-white/20 transition",children:"Unsubscribe"})]})]})]},l.id)})})]})}):d.jsx("main",{className:"flex items-center justify-center min-h-[70vh] px-6",children:d.jsxs(et.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},className:"max-w-md text-center space-y-6",children:[d.jsx("h1",{className:"text-3xl font-semibold text-white",children:"Connect your wallet"}),d.jsx("p",{className:"text-neutral-400",children:"Sign in with your wallet to follow creators and build your personalized feed."}),d.jsx(Xt,{onClick:()=>i(!0),children:"Connect Wallet"})]})})}function Qoe(){const[t,e]=F.useState(!0),[n,i]=F.useState(!1),{publicKey:r,connected:s}=Ui(),o=mc(),l=(r==null?void 0:r.toBase58())||"no-wallet",c=()=>{e(!1)};F.useEffect(()=>{if(typeof window>"u")return;const y=window.location.hostname.toLowerCase();(y==="payflix.fun"||y==="www.payflix.fun")&&o.pathname==="/"?i(!0):i(!1)},[o.pathname]);const u=F.useCallback(()=>{typeof window>"u"||window.dispatchEvent(new CustomEvent("toggleSidebar"))},[]),h=o.pathname.startsWith("/video/"),f="calc(env(safe-area-inset-top, 0px) + 1.033rem)",p="calc(env(safe-area-inset-left, 0px) + 0.9rem)",x="calc(env(safe-area-inset-right, 0px) + 0.9rem)";return n?d.jsx(Koe,{}):d.jsxs("div",{className:"min-h-screen bg-neutral-900 text-white",children:[d.jsx(w5,{}),d.jsx(po,{children:t&&d.jsx(Fee,{onEnter:c})}),!t&&d.jsxs("div",{children:[d.jsx(une,{}),d.jsx("button",{type:"button",onClick:u,className:"md:hidden fixed z-30 flex items-center justify-center bg-transparent border-0 p-2","aria-label":"Open navigation menu",style:{top:f,left:h?void 0:p,right:h?x:void 0},children:d.jsx("img",{src:"/payflix-text-flat.svg",alt:"PayFlix",className:"h-10 w-auto object-contain"})}),d.jsxs("div",{className:"flex min-h-screen",children:[d.jsx(lne,{}),d.jsx("div",{className:"flex-1 relative min-h-screen overflow-y-auto",children:d.jsx(po,{mode:"wait",children:d.jsxs(JU,{children:[d.jsx(Ms,{path:"/",element:d.jsx(_ne,{})}),d.jsx(Ms,{path:"/payflix",element:d.jsx(Xoe,{})}),d.jsx(Ms,{path:"/video/:id",element:d.jsx(Mne,{})}),d.jsx(Ms,{path:"/account",element:d.jsx($oe,{})}),d.jsx(Ms,{path:"/profile/:wallet",element:d.jsx(UC,{})}),d.jsx(Ms,{path:"/profile",element:d.jsx(UC,{})}),d.jsx(Ms,{path:"/subscriptions",element:d.jsx(Zoe,{})}),d.jsx(Ms,{path:"/creator-dashboard",element:d.jsx(Goe,{})}),d.jsx(Ms,{path:"/button-demo",element:d.jsx(qoe,{})})]})})})]})]},l)]})}function Joe(){return d.jsx(oO,{children:d.jsx(AX,{children:d.jsx(NX,{children:d.jsx(kX,{children:d.jsx(Qoe,{})})})})})}window.Buffer=vt;Xv.createRoot(document.getElementById("root")).render(d.jsx(Le.StrictMode,{children:d.jsx(Joe,{})}));export{cn as B,sae as C,aae as D,d0 as L,Xe as P,Bh as S,Vr as T,gf as V,eX as a,tp as b,xs as c,cae as d,ZY as e,lae as f,$a as g,oae as h,zi as i,dn as j,xo as k,uae as l,WS as r,PI as s};
